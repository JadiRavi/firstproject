"use strict";(self.webpackChunkecommerce=self.webpackChunkecommerce||[]).push([[179],{2011:(_t,Te,F)=>{F.d(Te,{Dh:()=>fe,GT:()=>re,cc:()=>De,hO:()=>He,on:()=>G,pX:()=>se,xv:()=>he});var u=F(4650),te=F(9260),k=F(2122);_t=F.hmd(_t);const oe=["ngOnDestroy"],se=(Se,be,Be,ke={})=>new Proxy(Se,{get:(Ce,we)=>Be.runOutsideAngular(()=>{var ze;if(Se[we])return!(null===(ze=ke?.spy)||void 0===ze)&&ze.get&&ke.spy.get(we,Se[we]),Se[we];if(oe.indexOf(we)>-1)return()=>{};const Pe=be.toPromise().then(de=>{const q=de&&de[we];return"function"==typeof q?q.bind(de):q&&q.then?q.then($e=>Be.run(()=>$e)):Be.run(()=>q)});return new Proxy(()=>{},{get:(de,q)=>Pe[q],apply:(de,q,$e)=>Pe.then(Ge=>{var St;const et=Ge&&Ge(...$e);return!(null===(St=ke?.spy)||void 0===St)&&St.apply&&ke.spy.apply(we,$e,et),et})})})}),re=(Se,be)=>{be.forEach(Be=>{Object.getOwnPropertyNames(Be.prototype||Be).forEach(ke=>{Object.defineProperty(Se.prototype,ke,Object.getOwnPropertyDescriptor(Be.prototype||Be,ke))})})};class ge{constructor(be){return be}}const fe=new u.OlP("angularfire2.app.options"),he=new u.OlP("angularfire2.app.name");function G(Se,be,Be){const Ce="object"==typeof Be&&Be||{};Ce.name=Ce.name||"string"==typeof Be&&Be||"[DEFAULT]";const ze=te.Z.apps.filter(Pe=>Pe&&Pe.name===Ce.name)[0]||be.runOutsideAngular(()=>te.Z.initializeApp(Se,Ce));try{JSON.stringify(Se)!==JSON.stringify(ze.options)&&z("error",`${ze.name} Firebase App already initialized with different options${_t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ge(ze)}const z=(Se,...be)=>{(0,u.X6Q)()&&typeof console<"u"&&console[Se](...be)},Q={provide:ge,useFactory:G,deps:[fe,u.R0b,[new u.FiY,he]]};let He=(()=>{class Se{constructor(Be){te.Z.registerVersion("angularfire",k.q4.full,"core"),te.Z.registerVersion("angularfire",k.q4.full,"app-compat"),te.Z.registerVersion("angular",u.q4F.full,Be.toString())}static initializeApp(Be,ke){return{ngModule:Se,providers:[{provide:fe,useValue:Be},{provide:he,useValue:ke}]}}}return Se.\u0275fac=function(Be){return new(Be||Se)(u.LFG(u.Lbi))},Se.\u0275mod=u.oAB({type:Se}),Se.\u0275inj=u.cJS({providers:[Q]}),Se})();function De(Se,be,Be,ke,Ce){const[,we,ze]=globalThis.\u0275AngularfireInstanceCache.find(Pe=>Pe[0]===Se)||[];if(we)return function Ze(Se,be){try{return Se.toString()===be.toString()}catch{return Se===be}}(Ce,ze)||(me("error",`${be} was already initialized on the ${Be} Firebase App with different settings.${dt?" You may need to reload as Firebase is not HMR aware.":""}`),me("warn",{is:Ce,was:ze})),we;{const Pe=ke();return globalThis.\u0275AngularfireInstanceCache.push([Se,Pe,Ce]),Pe}}const dt=!!_t.hot,me=(Se,...be)=>{(0,u.X6Q)()&&typeof console<"u"&&console[Se](...be)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(_t,Te,F)=>{F.d(Te,{q4:()=>wi,iC:()=>Un,HU:()=>bn,vb:()=>Wr,JM:()=>Ji});var u=F(4650),te=F(259),k=F(5861),oe=F(9681),se=F(2090),re=F(4859),ge=F(1877),fe=F(8766);const he="@firebase/installations",G="0.6.4",z=1e4,Q=`w:${G}`,He="FIS_v2",De="https://firebaseinstallations.googleapis.com/v1",Ze=36e5,be=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Be(T){return T instanceof se.ZR&&T.code.includes("request-failed")}function ke({projectId:T}){return`${De}/projects/${T}/installations`}function Ce(T){return{token:T.token,requestStatus:2,expiresIn:Ge(T.expiresIn),creationTime:Date.now()}}function we(T,S){return ze.apply(this,arguments)}function ze(){return(ze=(0,k.Z)(function*(T,S){const U=(yield S.json()).error;return be.create("request-failed",{requestName:T,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function Pe({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function q(T){return $e.apply(this,arguments)}function $e(){return($e=(0,k.Z)(function*(T){const S=yield T();return S.status>=500&&S.status<600?T():S})).apply(this,arguments)}function Ge(T){return Number(T.replace("s","000"))}function ae(){return(ae=(0,k.Z)(function*({appConfig:T,heartbeatServiceProvider:S},{fid:x}){const U=ke(T),Y=Pe(T),ie=S.getImmediate({optional:!0});if(ie){const ht=yield ie.getHeartbeatsHeader();ht&&Y.append("x-firebase-client",ht)}const W={method:"POST",headers:Y,body:JSON.stringify({fid:x,authVersion:He,appId:T.appId,sdkVersion:Q})},rt=yield q(()=>fetch(U,W));if(rt.ok){const ht=yield rt.json();return{fid:ht.fid||x,registrationStatus:2,refreshToken:ht.refreshToken,authToken:Ce(ht.authToken)}}throw yield we("Create Installation",rt)})).apply(this,arguments)}function _e(T){return new Promise(S=>{setTimeout(S,T)})}const Ae=/^[cdef][\w-]{21}$/,Fe="";function je(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const x=function ot(T){return function Ee(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return Ae.test(x)?x:Fe}catch{return Fe}}function tt(T){return`${T.appName}!${T.appId}`}const bt=new Map;function Ye(T,S){const x=tt(T);on(x,S),function wn(T,S){const x=function kn(){return!_n&&"BroadcastChannel"in self&&(_n=new BroadcastChannel("[Firebase] FID Change"),_n.onmessage=T=>{on(T.data.key,T.data.fid)}),_n}();x&&x.postMessage({key:T,fid:S}),function oi(){0===bt.size&&_n&&(_n.close(),_n=null)}()}(x,S)}function on(T,S){const x=bt.get(T);if(x)for(const U of x)U(S)}let _n=null;const Hr="firebase-installations-database",Ws=1,Rr="firebase-installations-store";let ws=null;function Es(){return ws||(ws=(0,fe.X3)(Hr,Ws,{upgrade:(T,S)=>{0===S&&T.createObjectStore(Rr)}})),ws}function jn(T,S){return pt.apply(this,arguments)}function pt(){return(pt=(0,k.Z)(function*(T,S){const x=tt(T),Y=(yield Es()).transaction(Rr,"readwrite"),ie=Y.objectStore(Rr),Me=yield ie.get(x);return yield ie.put(S,x),yield Y.done,(!Me||Me.fid!==S.fid)&&Ye(T,S.fid),S})).apply(this,arguments)}function ai(T){return nl.apply(this,arguments)}function nl(){return(nl=(0,k.Z)(function*(T){const S=tt(T),U=(yield Es()).transaction(Rr,"readwrite");yield U.objectStore(Rr).delete(S),yield U.done})).apply(this,arguments)}function Qn(T,S){return ss.apply(this,arguments)}function ss(){return(ss=(0,k.Z)(function*(T,S){const x=tt(T),Y=(yield Es()).transaction(Rr,"readwrite"),ie=Y.objectStore(Rr),Me=yield ie.get(x),W=S(Me);return void 0===W?yield ie.delete(x):yield ie.put(W,x),yield Y.done,W&&(!Me||Me.fid!==W.fid)&&Ye(T,W.fid),W})).apply(this,arguments)}function Pr(T){return hn.apply(this,arguments)}function hn(){return hn=(0,k.Z)(function*(T){let S;const x=yield Qn(T.appConfig,U=>{const Y=function Rn(T){return Er(T||{fid:je(),registrationStatus:0})}(U),ie=function gt(T,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(be.create("app-offline"))};const x={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},U=function xt(T,S){return Si.apply(this,arguments)}(T,x);return{installationEntry:x,registrationPromise:U}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:li(T)}:{installationEntry:S}}(T,Y);return S=ie.registrationPromise,ie.installationEntry});return x.fid===Fe?{installationEntry:yield S}:{installationEntry:x,registrationPromise:S}}),hn.apply(this,arguments)}function Si(){return Si=(0,k.Z)(function*(T,S){try{const x=yield function et(T,S){return ae.apply(this,arguments)}(T,S);return jn(T.appConfig,x)}catch(x){throw Be(x)&&409===x.customData.serverCode?yield ai(T.appConfig):yield jn(T.appConfig,{fid:S.fid,registrationStatus:0}),x}}),Si.apply(this,arguments)}function li(T){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,k.Z)(function*(T){let S=yield Or(T.appConfig);for(;1===S.registrationStatus;)yield _e(100),S=yield Or(T.appConfig);if(0===S.registrationStatus){const{installationEntry:x,registrationPromise:U}=yield Pr(T);return U||x}return S})).apply(this,arguments)}function Or(T){return Qn(T,S=>{if(!S)throw be.create("installation-not-found");return Er(S)})}function Er(T){return function rl(T){return 1===T.registrationStatus&&T.registrationTime+z<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function Bi(){return(Bi=(0,k.Z)(function*({appConfig:T,heartbeatServiceProvider:S},x){const U=function Wt(T,{fid:S}){return`${ke(T)}/${S}/authTokens:generate`}(T,x),Y=function de(T,{refreshToken:S}){const x=Pe(T);return x.append("Authorization",function St(T){return`${He} ${T}`}(S)),x}(T,x),ie=S.getImmediate({optional:!0});if(ie){const ht=yield ie.getHeartbeatsHeader();ht&&Y.append("x-firebase-client",ht)}const W={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:Q,appId:T.appId}})},rt=yield q(()=>fetch(U,W));if(rt.ok)return Ce(yield rt.json());throw yield we("Generate Auth Token",rt)})).apply(this,arguments)}function po(T){return an.apply(this,arguments)}function an(){return an=(0,k.Z)(function*(T,S=!1){let x;const U=yield Qn(T.appConfig,ie=>{if(!fn(ie))throw be.create("not-registered");const Me=ie.authToken;if(!S&&function Hn(T){return 2===T.requestStatus&&!function j(T){const S=Date.now();return S<T.creationTime||T.creationTime+T.expiresIn<S+Ze}(T)}(Me))return ie;if(1===Me.requestStatus)return x=function it(T,S){return Ie.apply(this,arguments)}(T,S),ie;{if(!navigator.onLine)throw be.create("app-offline");const W=function B(T){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:S})}(ie);return x=function kt(T,S){return It.apply(this,arguments)}(T,W),W}});return x?yield x:U.authToken}),an.apply(this,arguments)}function Ie(){return(Ie=(0,k.Z)(function*(T,S){let x=yield Je(T.appConfig);for(;1===x.authToken.requestStatus;)yield _e(100),x=yield Je(T.appConfig);const U=x.authToken;return 0===U.requestStatus?po(T,S):U})).apply(this,arguments)}function Je(T){return Qn(T,S=>{if(!fn(S))throw be.create("not-registered");return function K(T){return 1===T.requestStatus&&T.requestTime+z<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function It(){return It=(0,k.Z)(function*(T,S){try{const x=yield function mn(T,S){return Bi.apply(this,arguments)}(T,S),U=Object.assign(Object.assign({},S),{authToken:x});return yield jn(T.appConfig,U),x}catch(x){if(!Be(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const U=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield jn(T.appConfig,U)}else yield ai(T.appConfig);throw x}}),It.apply(this,arguments)}function fn(T){return void 0!==T&&2===T.registrationStatus}function ne(){return(ne=(0,k.Z)(function*(T){const S=T,{installationEntry:x,registrationPromise:U}=yield Pr(S);return U?U.catch(console.error):po(S).catch(console.error),x.fid})).apply(this,arguments)}function Nt(){return Nt=(0,k.Z)(function*(T,S=!1){const x=T;return yield function pn(T){return ir.apply(this,arguments)}(x),(yield po(x,S)).token}),Nt.apply(this,arguments)}function ir(){return(ir=(0,k.Z)(function*(T){const{registrationPromise:S}=yield Pr(T);S&&(yield S)})).apply(this,arguments)}function il(T){return be.create("missing-app-config-values",{valueName:T})}const ou="installations",ta=T=>{const S=T.getProvider("app").getImmediate(),x=function su(T){if(!T||!T.options)throw il("App Configuration");if(!T.name)throw il("App Name");const S=["projectId","apiKey","appId"];for(const x of S)if(!T.options[x])throw il(x);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(S);return{app:S,appConfig:x,heartbeatServiceProvider:(0,oe._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},bc=T=>{const S=T.getProvider("app").getImmediate(),x=(0,oe._getProvider)(S,ou).getImmediate();return{getId:()=>function ve(T){return ne.apply(this,arguments)}(x),getToken:Y=>function Le(T){return Nt.apply(this,arguments)}(x,Y)}};(function ln(){(0,oe._registerComponent)(new re.wA(ou,ta,"PUBLIC")),(0,oe._registerComponent)(new re.wA("installations-internal",bc,"PRIVATE"))})(),(0,oe.registerVersion)(he,G),(0,oe.registerVersion)(he,G,"esm2017");const sr="@firebase/remote-config",ui=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class go{constructor(S,x,U,Y){this.client=S,this.storage=x,this.storageCache=U,this.logger=Y}isCachedDataFresh(S,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-x,Y=U<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${Y}.`),Y}fetch(S){var x=this;return(0,k.Z)(function*(){const[U,Y]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(Y&&x.isCachedDataFresh(S.cacheMaxAgeMillis,U))return Y;S.eTag=Y&&Y.eTag;const ie=yield x.client.fetch(S),Me=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ie.status&&Me.push(x.storage.setLastSuccessfulFetchResponse(ie)),yield Promise.all(Me),ie})()}}function Gi(T=navigator){return T.languages&&T.languages[0]||T.language}class ra{constructor(S,x,U,Y,ie,Me){this.firebaseInstallations=S,this.sdkVersion=x,this.namespace=U,this.projectId=Y,this.apiKey=ie,this.appId=Me}fetch(S){var x=this;return(0,k.Z)(function*(){const[U,Y]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),Me=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,W={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},rt={sdk_version:x.sdkVersion,app_instance_id:U,app_instance_id_token:Y,app_id:x.appId,language_code:Gi()},ht={method:"POST",headers:W,body:JSON.stringify(rt)},Ot=fetch(Me,ht),O=new Promise((lr,xi)=>{S.signal.addEventListener(()=>{const Ca=new Error("The operation was aborted.");Ca.name="AbortError",xi(Ca)})});let Mi;try{yield Promise.race([Ot,O]),Mi=yield Ot}catch(lr){let xi="fetch-client-network";throw"AbortError"===lr?.name&&(xi="fetch-timeout"),ui.create(xi,{originalErrorMessage:lr?.message})}let An=Mi.status;const lt=Mi.headers.get("ETag")||void 0;let Ol,At;if(200===Mi.status){let lr;try{lr=yield Mi.json()}catch(xi){throw ui.create("fetch-client-parse",{originalErrorMessage:xi?.message})}Ol=lr.entries,At=lr.state}if("INSTANCE_STATE_UNSPECIFIED"===At?An=500:"NO_CHANGE"===At?An=304:("NO_TEMPLATE"===At||"EMPTY_CONFIG"===At)&&(Ol={}),304!==An&&200!==An)throw ui.create("fetch-status",{httpStatus:An});return{status:An,eTag:lt,config:Ol}})()}}class Ai{constructor(S,x){this.client=S,this.storage=x}fetch(S){var x=this;return(0,k.Z)(function*(){const U=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(S,U)})()}attemptFetch(S,{throttleEndTimeMillis:x,backoffCount:U}){var Y=this;return(0,k.Z)(function*(){yield function Dc(T,S){return new Promise((x,U)=>{const Y=Math.max(S-Date.now(),0),ie=setTimeout(x,Y);T.addEventListener(()=>{clearTimeout(ie),U(ui.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,x);try{const ie=yield Y.client.fetch(S);return yield Y.storage.deleteThrottleMetadata(),ie}catch(ie){if(!function yn(T){if(!(T instanceof se.ZR&&T.customData))return!1;const S=Number(T.customData.httpStatus);return 429===S||500===S||503===S||504===S}(ie))throw ie;const Me={throttleEndTimeMillis:Date.now()+(0,se.$s)(U),backoffCount:U+1};return yield Y.storage.setThrottleMetadata(Me),Y.attemptFetch(S,Me)}})()}}class ia{constructor(S,x,U,Y,ie){this.app=S,this._client=x,this._storageCache=U,this._storage=Y,this._logger=ie,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Cs(T,S){const x=T.target.error||void 0;return ui.create(S,{originalErrorMessage:x&&x?.message})}const Gr="app_namespace_store";class zi{constructor(S,x,U,Y=function zr(){return new Promise((T,S)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=U=>{S(Cs(U,"storage-open"))},x.onsuccess=U=>{T(U.target.result)},x.onupgradeneeded=U=>{0===U.oldVersion&&U.target.result.createObjectStore(Gr,{keyPath:"compositeKey"})}}catch(x){S(ui.create("storage-open",{originalErrorMessage:x?.message}))}})}()){this.appId=S,this.appName=x,this.namespace=U,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var x=this;return(0,k.Z)(function*(){const U=yield x.openDbPromise;return new Promise((Y,ie)=>{const W=U.transaction([Gr],"readonly").objectStore(Gr),rt=x.createCompositeKey(S);try{const ht=W.get(rt);ht.onerror=Ot=>{ie(Cs(Ot,"storage-get"))},ht.onsuccess=Ot=>{const O=Ot.target.result;Y(O?O.value:void 0)}}catch(ht){ie(ui.create("storage-get",{originalErrorMessage:ht?.message}))}})})()}set(S,x){var U=this;return(0,k.Z)(function*(){const Y=yield U.openDbPromise;return new Promise((ie,Me)=>{const rt=Y.transaction([Gr],"readwrite").objectStore(Gr),ht=U.createCompositeKey(S);try{const Ot=rt.put({compositeKey:ht,value:x});Ot.onerror=O=>{Me(Cs(O,"storage-set"))},Ot.onsuccess=()=>{ie()}}catch(Ot){Me(ui.create("storage-set",{originalErrorMessage:Ot?.message}))}})})()}delete(S){var x=this;return(0,k.Z)(function*(){const U=yield x.openDbPromise;return new Promise((Y,ie)=>{const W=U.transaction([Gr],"readwrite").objectStore(Gr),rt=x.createCompositeKey(S);try{const ht=W.delete(rt);ht.onerror=Ot=>{ie(Cs(Ot,"storage-delete"))},ht.onsuccess=()=>{Y()}}catch(ht){ie(ui.create("storage-delete",{originalErrorMessage:ht?.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class al{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,k.Z)(function*(){const x=S.storage.getLastFetchStatus(),U=S.storage.getLastSuccessfulFetchTimestampMillis(),Y=S.storage.getActiveConfig(),ie=yield x;ie&&(S.lastFetchStatus=ie);const Me=yield U;Me&&(S.lastSuccessfulFetchTimestampMillis=Me);const W=yield Y;W&&(S.activeConfig=W)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function Is(){return uu.apply(this,arguments)}function uu(){return(uu=(0,k.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}!function ll(){(0,oe._registerComponent)(new re.wA("remote-config",function T(S,{instanceIdentifier:x}){const U=S.getProvider("app").getImmediate(),Y=S.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw ui.create("registration-window");if(!(0,se.hl)())throw ui.create("indexed-db-unavailable");const{projectId:ie,apiKey:Me,appId:W}=U.options;if(!ie)throw ui.create("registration-project-id");if(!Me)throw ui.create("registration-api-key");if(!W)throw ui.create("registration-app-id");const rt=new zi(W,U.name,x=x||"firebase"),ht=new al(rt),Ot=new ge.Yd(sr);Ot.logLevel=ge.in.ERROR;const O=new ra(Y,oe.SDK_VERSION,x,ie,Me,W),Mi=new Ai(O,rt),An=new go(Mi,rt,ht,Ot),lt=new ia(U,An,ht,rt,Ot);return function Pn(T){const S=(0,se.m9)(T);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(lt),lt},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(sr,"0.4.4"),(0,oe.registerVersion)(sr,"0.4.4","esm2017")}();const Rp="/firebase-messaging-sw.js",ls="/firebase-cloud-messaging-push-scope",Pp="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",sh="https://fcmregistrations.googleapis.com/v1",oh="google.c.a.c_id",Ac="google.c.a.c_l",n_="google.c.a.ts",bs="google.c.a.e";var mo=(()=>{return(T=mo||(mo={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",mo;var T})();function qi(T){const S=new Uint8Array(T);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function cl(T){const x=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(x),Y=new Uint8Array(U.length);for(let ie=0;ie<U.length;++ie)Y[ie]=U.charCodeAt(ie);return Y}const cu="fcm_token_details_db",kp=5,_o="fcm_token_object_Store";function du(){return du=(0,k.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ie=>ie.name).includes(cu))return null;let S=null;return(yield(0,fe.X3)(cu,kp,{upgrade:(U=(0,k.Z)(function*(Y,ie,Me,W){var rt;if(ie<2||!Y.objectStoreNames.contains(_o))return;const ht=W.objectStore(_o),Ot=yield ht.index("fcmSenderId").get(T);if(yield ht.clear(),Ot)if(2===ie){const O=Ot;if(!O.auth||!O.p256dh||!O.endpoint)return;S={token:O.fcmToken,createTime:null!==(rt=O.createTime)&&void 0!==rt?rt:Date.now(),subscriptionOptions:{auth:O.auth,p256dh:O.p256dh,endpoint:O.endpoint,swScope:O.swScope,vapidKey:"string"==typeof O.vapidKey?O.vapidKey:qi(O.vapidKey)}}}else if(3===ie){const O=Ot;S={token:O.fcmToken,createTime:O.createTime,subscriptionOptions:{auth:qi(O.auth),p256dh:qi(O.p256dh),endpoint:O.endpoint,swScope:O.swScope,vapidKey:qi(O.vapidKey)}}}else if(4===ie){const O=Ot;S={token:O.fcmToken,createTime:O.createTime,subscriptionOptions:{auth:qi(O.auth),p256dh:qi(O.p256dh),endpoint:O.endpoint,swScope:O.swScope,vapidKey:qi(O.vapidKey)}}}}),function(ie,Me,W,rt){return U.apply(this,arguments)})})).close(),yield(0,fe.Lj)(cu),yield(0,fe.Lj)("fcm_vapid_details_db"),yield(0,fe.Lj)("undefined"),function yo(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:S}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}(S)?S:null;var U}),du.apply(this,arguments)}const sa="firebase-messaging-database",Zi=1,vo="firebase-messaging-store";let dl=null;function hl(){return dl||(dl=(0,fe.X3)(sa,Zi,{upgrade:(T,S)=>{0===S&&T.createObjectStore(vo)}})),dl}function ah(T){return Ts.apply(this,arguments)}function Ts(){return Ts=(0,k.Z)(function*(T){const S=Eo(T),U=yield(yield hl()).transaction(vo).objectStore(vo).get(S);if(U)return U;{const Y=yield function Fp(T){return du.apply(this,arguments)}(T.appConfig.senderId);if(Y)return yield hu(T,Y),Y}}),Ts.apply(this,arguments)}function hu(T,S){return oa.apply(this,arguments)}function oa(){return(oa=(0,k.Z)(function*(T,S){const x=Eo(T),Y=(yield hl()).transaction(vo,"readwrite");return yield Y.objectStore(vo).put(S,x),yield Y.done,S})).apply(this,arguments)}function wo(){return(wo=(0,k.Z)(function*(T){const S=Eo(T),U=(yield hl()).transaction(vo,"readwrite");yield U.objectStore(vo).delete(S),yield U.done})).apply(this,arguments)}function Eo({appConfig:T}){return T.appId}const or=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function uh(T,S){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,k.Z)(function*(T,S){const x=yield Ds(T),U=fl(S),Y={method:"POST",headers:x,body:JSON.stringify(U)};let ie;try{ie=yield(yield fetch(aa(T.appConfig),Y)).json()}catch(Me){throw or.create("token-subscribe-failed",{errorInfo:Me?.toString()})}if(ie.error)throw or.create("token-subscribe-failed",{errorInfo:ie.error.message});if(!ie.token)throw or.create("token-subscribe-no-token");return ie.token})).apply(this,arguments)}function Io(){return(Io=(0,k.Z)(function*(T,S){const x=yield Ds(T),U=fl(S.subscriptionOptions),Y={method:"PATCH",headers:x,body:JSON.stringify(U)};let ie;try{ie=yield(yield fetch(`${aa(T.appConfig)}/${S.token}`,Y)).json()}catch(Me){throw or.create("token-update-failed",{errorInfo:Me?.toString()})}if(ie.error)throw or.create("token-update-failed",{errorInfo:ie.error.message});if(!ie.token)throw or.create("token-update-no-token");return ie.token})).apply(this,arguments)}function hr(T,S){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,k.Z)(function*(T,S){const U={method:"DELETE",headers:yield Ds(T)};try{const ie=yield(yield fetch(`${aa(T.appConfig)}/${S}`,U)).json();if(ie.error)throw or.create("token-unsubscribe-failed",{errorInfo:ie.error.message})}catch(Y){throw or.create("token-unsubscribe-failed",{errorInfo:Y?.toString()})}})).apply(this,arguments)}function aa({projectId:T}){return`${sh}/projects/${T}/registrations`}function Ds(T){return fr.apply(this,arguments)}function fr(){return(fr=(0,k.Z)(function*({appConfig:T,installations:S}){const x=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function fl({p256dh:T,auth:S,endpoint:x,vapidKey:U}){const Y={web:{endpoint:x,auth:S,p256dh:T}};return U!==Pp&&(Y.web.applicationPubKey=U),Y}const la=6048e5;function Wi(){return Wi=(0,k.Z)(function*(T){const S=yield function dh(T,S){return gl.apply(this,arguments)}(T.swRegistration,T.vapidKey),x={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:S.endpoint,auth:qi(S.getKey("auth")),p256dh:qi(S.getKey("p256dh"))},U=yield ah(T.firebaseDependencies);if(U){if(function hh(T,S){return S.vapidKey===T.vapidKey&&S.endpoint===T.endpoint&&S.auth===T.auth&&S.p256dh===T.p256dh}(U.subscriptionOptions,x))return Date.now()>=U.createTime+la?function Rt(T,S){return ua.apply(this,arguments)}(T,{token:U.token,createTime:Date.now(),subscriptionOptions:x}):U.token;try{yield hr(T.firebaseDependencies,U.token)}catch(Y){console.warn(Y)}return Lp(T.firebaseDependencies,x)}return Lp(T.firebaseDependencies,x)}),Wi.apply(this,arguments)}function bo(){return bo=(0,k.Z)(function*(T){const S=yield ah(T.firebaseDependencies);S&&(yield hr(T.firebaseDependencies,S.token),yield function lh(T){return wo.apply(this,arguments)}(T.firebaseDependencies));const x=yield T.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()}),bo.apply(this,arguments)}function ua(){return ua=(0,k.Z)(function*(T,S){try{const x=yield function Co(T,S){return Io.apply(this,arguments)}(T.firebaseDependencies,S),U=Object.assign(Object.assign({},S),{token:x,createTime:Date.now()});return yield hu(T.firebaseDependencies,U),x}catch(x){throw yield function fu(T){return bo.apply(this,arguments)}(T),x}}),ua.apply(this,arguments)}function Lp(T,S){return pl.apply(this,arguments)}function pl(){return(pl=(0,k.Z)(function*(T,S){const U={token:yield uh(T,S),createTime:Date.now(),subscriptionOptions:S};return yield hu(T,U),U.token})).apply(this,arguments)}function gl(){return(gl=(0,k.Z)(function*(T,S){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:cl(S)})})).apply(this,arguments)}function xc(T){const S={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function Vp(T,S){if(!S.notification)return;T.notification={};const x=S.notification.title;x&&(T.notification.title=x);const U=S.notification.body;U&&(T.notification.body=U);const Y=S.notification.image;Y&&(T.notification.image=Y);const ie=S.notification.icon;ie&&(T.notification.icon=ie)}(S,T),function pe(T,S){S.data&&(T.data=S.data)}(S,T),function zt(T,S){var x,U,Y,ie,Me;if(!(S.fcmOptions||null!==(x=S.notification)&&void 0!==x&&x.click_action))return;T.fcmOptions={};const W=null!==(Y=null===(U=S.fcmOptions)||void 0===U?void 0:U.link)&&void 0!==Y?Y:null===(ie=S.notification)||void 0===ie?void 0:ie.click_action;W&&(T.fcmOptions.link=W);const rt=null===(Me=S.fcmOptions)||void 0===Me?void 0:Me.analytics_label;rt&&(T.fcmOptions.analyticsLabel=rt)}(S,T),S}function pu(T,S){const x=[];for(let U=0;U<T.length;U++)x.push(T.charAt(U)),U<S.length&&x.push(S.charAt(U));return x.join("")}function Rc(T){return or.create("missing-app-config-values",{valueName:T})}pu("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),pu("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ca{constructor(S,x,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function zn(T){if(!T||!T.options)throw Rc("App Configuration Object");if(!T.name)throw Rc("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:x}=T;for(const U of S)if(!x[U])throw Rc(U);return{appName:T.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:Y,installations:x,analyticsProvider:U}}_delete(){return Promise.resolve()}}function Ki(T){return da.apply(this,arguments)}function da(){return(da=(0,k.Z)(function*(T){try{T.swRegistration=yield navigator.serviceWorker.register(Rp,{scope:ls}),T.swRegistration.update().catch(()=>{})}catch(S){throw or.create("failed-service-worker-registration",{browserErrorMessage:S?.message})}})).apply(this,arguments)}function gu(){return(gu=(0,k.Z)(function*(T,S){if(!S&&!T.swRegistration&&(yield Ki(T)),S||!T.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw or.create("invalid-sw-registration");T.swRegistration=S}})).apply(this,arguments)}function ha(){return(ha=(0,k.Z)(function*(T,S){S?T.vapidKey=S:T.vapidKey||(T.vapidKey=Pp)})).apply(this,arguments)}function qr(){return qr=(0,k.Z)(function*(T,S){if(!navigator)throw or.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw or.create("permission-blocked");return yield function ph(T,S){return ha.apply(this,arguments)}(T,S?.vapidKey),yield function fh(T,S){return gu.apply(this,arguments)}(T,S?.serviceWorkerRegistration),function ch(T){return Wi.apply(this,arguments)}(T)}),qr.apply(this,arguments)}function Ss(){return(Ss=(0,k.Z)(function*(T,S,x){const U=function Ys(T){switch(T){case mo.NOTIFICATION_CLICKED:return"notification_open";case mo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(S);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:x[oh],message_name:x[Ac],message_time:x[n_],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function To(){return To=(0,k.Z)(function*(T,S){const x=S.data;if(!x.isFirebaseMessaging)return;T.onMessageHandler&&x.messageType===mo.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(xc(x)):T.onMessageHandler.next(xc(x)));const U=x.data;(function Nc(T){return"object"==typeof T&&!!T&&oh in T})(U)&&"1"===U[bs]&&(yield function fa(T,S,x){return Ss.apply(this,arguments)}(T,x.messageType,U))}),To.apply(this,arguments)}const Up="@firebase/messaging",ml=T=>{const S=new ca(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function gh(T,S){return To.apply(this,arguments)}(S,x)),S},mu=T=>{const S=T.getProvider("messaging").getImmediate();return{getToken:U=>function Vr(T,S){return qr.apply(this,arguments)}(S,U)}};function Oc(){return _u.apply(this,arguments)}function _u(){return(_u=(0,k.Z)(function*(){try{yield(0,se.eu)()}catch{return!1}return typeof window<"u"&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Pc(){(0,oe._registerComponent)(new re.wA("messaging",ml,"PUBLIC")),(0,oe._registerComponent)(new re.wA("messaging-internal",mu,"PRIVATE")),(0,oe.registerVersion)(Up,"0.12.4"),(0,oe.registerVersion)(Up,"0.12.4","esm2017")}();const kc="analytics",Zr="firebase_id",Qs="origin",Dn=6e4,Gp="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Do="https://www.googletagmanager.com/gtag/js",pr=new ge.Yd("@firebase/analytics"),vi=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function s_(T){if(!T.startsWith(Do)){const S=vi.create("invalid-gtag-resource",{gtagURL:T});return pr.warn(S.message),""}return T}function yu(T){return Promise.all(T.map(S=>S.catch(x=>x)))}function So(){return(So=(0,k.Z)(function*(T,S,x,U,Y,ie){const Me=U[Y];try{if(Me)yield S[Me];else{const rt=(yield yu(x)).find(ht=>ht.measurementId===Y);rt&&(yield S[rt.appId])}}catch(W){pr.error(W)}T("config",Y,ie)})).apply(this,arguments)}function As(){return(As=(0,k.Z)(function*(T,S,x,U,Y){try{let ie=[];if(Y&&Y.send_to){let Me=Y.send_to;Array.isArray(Me)||(Me=[Me]);const W=yield yu(x);for(const rt of Me){const ht=W.find(O=>O.measurementId===rt),Ot=ht&&S[ht.appId];if(!Ot){ie=[];break}ie.push(Ot)}}0===ie.length&&(ie=Object.values(S)),yield Promise.all(ie),T("event",U,Y||{})}catch(ie){pr.error(ie)}})).apply(this,arguments)}const Eh=30,wu=new class Lc{constructor(S={},x=1e3){this.throttleMetadata=S,this.intervalMillis=x}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,x){this.throttleMetadata[S]=x}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function Vc(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function Cu(){return(Cu=(0,k.Z)(function*(T){var S;const{appId:x,apiKey:U}=T,Y={method:"GET",headers:Vc(U)},ie=Gp.replace("{app-id}",x),Me=yield fetch(ie,Y);if(200!==Me.status&&304!==Me.status){let W="";try{const rt=yield Me.json();null!==(S=rt.error)&&void 0!==S&&S.message&&(W=rt.error.message)}catch{}throw vi.create("config-fetch-failed",{httpStatus:Me.status,responseMessage:W})}return Me.json()})).apply(this,arguments)}function Ms(){return(Ms=(0,k.Z)(function*(T,S=wu,x){const{appId:U,apiKey:Y,measurementId:ie}=T.options;if(!U)throw vi.create("no-app-id");if(!Y){if(ie)return{measurementId:ie,appId:U};throw vi.create("no-api-key")}const Me=S.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},W=new wl;return setTimeout((0,k.Z)(function*(){W.abort()}),void 0!==x?x:Dn),Mo({appId:U,apiKey:Y,measurementId:ie},Me,W,S)})).apply(this,arguments)}function Mo(T,S,x){return xo.apply(this,arguments)}function xo(){return xo=(0,k.Z)(function*(T,{throttleEndTimeMillis:S,backoffCount:x},U,Y=wu){var ie;const{appId:Me,measurementId:W}=T;try{yield function vl(T,S){return new Promise((x,U)=>{const Y=Math.max(S-Date.now(),0),ie=setTimeout(x,Y);T.addEventListener(()=>{clearTimeout(ie),U(vi.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(U,S)}catch(rt){if(W)return pr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${W} provided in the "measurementId" field in the local Firebase config. [${rt?.message}]`),{appId:Me,measurementId:W};throw rt}try{const rt=yield function Eu(T){return Cu.apply(this,arguments)}(T);return Y.deleteThrottleMetadata(Me),rt}catch(rt){const ht=rt;if(!function Iu(T){if(!(T instanceof se.ZR&&T.customData))return!1;const S=Number(T.customData.httpStatus);return 429===S||500===S||503===S||504===S}(ht)){if(Y.deleteThrottleMetadata(Me),W)return pr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${W} provided in the "measurementId" field in the local Firebase config. [${ht?.message}]`),{appId:Me,measurementId:W};throw rt}const Ot=503===Number(null===(ie=ht?.customData)||void 0===ie?void 0:ie.httpStatus)?(0,se.$s)(x,Y.intervalMillis,Eh):(0,se.$s)(x,Y.intervalMillis),O={throttleEndTimeMillis:Date.now()+Ot,backoffCount:x+1};return Y.setThrottleMetadata(Me,O),pr.debug(`Calling attemptFetch again in ${Ot} millis`),Mo(T,O,U,Y)}}),xo.apply(this,arguments)}class wl{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}let El,Sn;function Ch(){return(Ch=(0,k.Z)(function*(T,S,x,U,Y){if(Y&&Y.global)T("event",x,U);else{const ie=yield S;T("event",x,Object.assign(Object.assign({},U),{send_to:ie}))}})).apply(this,arguments)}function No(){return(No=(0,k.Z)(function*(){if(!(0,se.hl)())return pr.warn(vi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(T){return pr.warn(vi.create("indexeddb-unavailable",{errorInfo:T?.toString()}).message),!1}return!0})).apply(this,arguments)}function bu(){return bu=(0,k.Z)(function*(T,S,x,U,Y,ie,Me){var W;const rt=function ga(T){return Ms.apply(this,arguments)}(T);rt.then(An=>{x[An.measurementId]=An.appId,T.options.measurementId&&An.measurementId!==T.options.measurementId&&pr.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${An.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(An=>pr.error(An)),S.push(rt);const ht=function Ih(){return No.apply(this,arguments)}().then(An=>{if(An)return U.getId()}),[Ot,O]=yield Promise.all([rt,ht]);(function wh(T){const S=window.document.getElementsByTagName("script");for(const x of Object.values(S))if(x.src&&x.src.includes(Do)&&x.src.includes(T))return x;return null})(ie)||function yh(T,S){const x=function Fc(T,S){let x;return window.trustedTypes&&(x=window.trustedTypes.createPolicy(T,S)),x}("firebase-js-sdk-policy",{createScriptURL:s_}),U=document.createElement("script"),Y=`${Do}?l=${T}&id=${S}`;U.src=x?x?.createScriptURL(Y):Y,U.async=!0,document.head.appendChild(U)}(ie,Ot.measurementId),Sn&&(Y("consent","default",Sn),function _a(T){Sn=T}(void 0)),Y("js",new Date);const Mi=null!==(W=Me?.config)&&void 0!==W?W:{};return Mi[Qs]="firebase",Mi.update=!0,null!=O&&(Mi[Zr]=O),Y("config",Ot.measurementId,Mi),El&&(Y("set",El),function bl(T){El=T}(void 0)),Ot.measurementId}),bu.apply(this,arguments)}class Th{constructor(S){this.app=S}_delete(){return delete di[this.app.options.appId],Promise.resolve()}}let di={},us=[];const Dh={};let Ro,Yi,cs="dataLayer",Tl="gtag",Dl=!1;function Al(T,S,x){!function Zp(){const T=[];if((0,se.ru)()&&T.push("This is a browser extension environment."),(0,se.zI)()||T.push("Cookies are not available."),T.length>0){const S=T.map((U,Y)=>`(${Y+1}) ${U}`).join(" "),x=vi.create("invalid-analytics-context",{errorInfo:S});pr.warn(x.message)}}();const U=T.options.appId;if(!U)throw vi.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw vi.create("no-api-key");pr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=di[U])throw vi.create("already-exists",{id:U});if(!Dl){!function vh(T){let S=[];Array.isArray(window[T])?S=window[T]:window[T]=S}(cs);const{wrappedGtag:ie,gtagCore:Me}=function a_(T,S,x,U,Y){let ie=function(...Me){window[U].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(ie=window[Y]),window[Y]=function o_(T,S,x,U){function ie(){return ie=(0,k.Z)(function*(Me,W,rt){try{"event"===Me?yield function yl(T,S,x,U,Y){return As.apply(this,arguments)}(T,S,x,W,rt):"config"===Me?yield function vu(T,S,x,U,Y,ie){return So.apply(this,arguments)}(T,S,x,U,W,rt):"consent"===Me?T("consent","update",rt):T("set",W)}catch(ht){pr.error(ht)}}),ie.apply(this,arguments)}return function Y(Me,W,rt){return ie.apply(this,arguments)}}(ie,T,S,x),{gtagCore:ie,wrappedGtag:window[Y]}}(di,us,Dh,cs,Tl);Yi=ie,Ro=Me,Dl=!0}return di[U]=function bh(T,S,x,U,Y,ie,Me){return bu.apply(this,arguments)}(T,us,Dh,S,Ro,cs,x),new Th(T)}function Oo(){return ya.apply(this,arguments)}function ya(){return(ya=(0,k.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}const Yp="@firebase/analytics";!function Qp(){(0,oe._registerComponent)(new re.wA(kc,(S,{options:x})=>Al(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,oe._registerComponent)(new re.wA("analytics-internal",function T(S){try{const x=S.getProvider(kc).getImmediate();return{logEvent:(U,Y,ie)=>function Jt(T,S,x,U){T=(0,se.m9)(T),function Cl(T,S,x,U,Y){return Ch.apply(this,arguments)}(Yi,di[T.app.options.appId],S,x,U).catch(Y=>pr.error(Y))}(x,U,Y,ie)}}catch(x){throw vi.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,oe.registerVersion)(Yp,"0.9.5"),(0,oe.registerVersion)(Yp,"0.9.5","esm2017")}();var Jp=F(4408),qv=F(7565);const Zv=new class xl extends qv.v{}(class zv extends Jp.o{constructor(S,x){super(S,x),this.scheduler=S,this.work=x}schedule(S,x=0){return x>0?super.schedule(S,x):(this.delay=x,this.state=S,this.scheduler.flush(this),this)}execute(S,x){return x>0||this.closed?super.execute(S,x):this._execute(S,x)}requestAsyncId(S,x,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(S,x,U):(S.flush(this),0)}});var ar=F(4986),Ah=F(8505),Du=F(9468),Xp=F(5363);const wi=new u.GfV("7.5.0"),eo="__angularfire_symbol__analyticsIsSupportedValue",Nl="__angularfire_symbol__analyticsIsSupported",Rl="__angularfire_symbol__remoteConfigIsSupportedValue",to="__angularfire_symbol__remoteConfigIsSupported",Mh="__angularfire_symbol__messagingIsSupportedValue",Pl="__angularfire_symbol__messagingIsSupported";function Ji(T,S,x){if(S){if(1===S.length)return S[0];const ie=S.filter(Me=>Me.app===x);if(1===ie.length)return ie[0]}return x.container.getProvider(T).getImmediate({optional:!0})}globalThis[Nl]||(globalThis[Nl]=Oo().then(T=>globalThis[eo]=T).catch(()=>globalThis[eo]=!1)),globalThis[Pl]||(globalThis[Pl]=Oc().then(T=>globalThis[Mh]=T).catch(()=>globalThis[Mh]=!1)),globalThis[to]||(globalThis[to]=Is().then(T=>globalThis[Rl]=T).catch(()=>globalThis[Rl]=!1));const Wr=(T,S)=>{const x=S?[S]:(0,te.C6)(),U=[];return x.forEach(Y=>{Y.container.getProvider(T).instances.forEach(Me=>{U.includes(Me)||U.push(Me)})}),U};function Xt(){}class no{constructor(S,x=Zv){this.zone=S,this.delegate=x}now(){return this.delegate.now()}schedule(S,x,U){const Y=this.zone;return this.delegate.schedule(function(Me){Y.runGuarded(()=>{S.apply(this,[Me])})},x,U)}}class mt{constructor(S){this.zone=S,this.task=null}call(S,x){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Xt,{},Xt,Xt)),x.pipe((0,Ah.b)({next:U,complete:U,error:U})).subscribe(S).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let bn=(()=>{class T{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new no(Zone.current)),this.insideAngular=x.run(()=>new no(Zone.current,ar.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(x){return new(x||T)(u.LFG(u.R0b))},T.\u0275prov=u.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function Ei(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function Un(T){return Ei(),function Ns(T){return function(x){return(x=x.lift(new mt(T.ngZone))).pipe((0,Du.R)(T.outsideAngular),(0,Xp.Q)(T.insideAngular))}}(Ei())(T)}},2090:(_t,Te,F)=>{F.d(Te,{$s:()=>kt,BH:()=>we,DV:()=>ws,Dv:()=>Jn,G6:()=>Ae,GJ:()=>Ws,L:()=>he,LL:()=>Ye,Pz:()=>Ce,Sg:()=>ze,UG:()=>q,UI:()=>jn,US:()=>re,Wj:()=>rl,Wl:()=>wn,Yr:()=>Ee,ZB:()=>Q,ZR:()=>bt,aH:()=>ke,b$:()=>St,cI:()=>on,dS:()=>Bi,eu:()=>je,g5:()=>k,gK:()=>Or,gQ:()=>hn,h$:()=>fe,hl:()=>Fe,hu:()=>te,jU:()=>$e,lb:()=>mn,m9:()=>Hn,ne:()=>Rn,p$:()=>z,pd:()=>Pr,r3:()=>Rr,ru:()=>Ge,tV:()=>G,uI:()=>de,ug:()=>Wt,vZ:()=>pt,w1:()=>ae,w9:()=>Hr,xO:()=>Qn,xb:()=>Es,z$:()=>Pe,zI:()=>ot,zd:()=>ss});const u={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},te=function(j,B){if(!j)throw k(B)},k=function(j){return new Error("Firebase Database ("+u.SDK_VERSION+") INTERNAL ASSERT FAILED: "+j)},oe=function(j){const B=[];let K=0;for(let ve=0;ve<j.length;ve++){let ne=j.charCodeAt(ve);ne<128?B[K++]=ne:ne<2048?(B[K++]=ne>>6|192,B[K++]=63&ne|128):55296==(64512&ne)&&ve+1<j.length&&56320==(64512&j.charCodeAt(ve+1))?(ne=65536+((1023&ne)<<10)+(1023&j.charCodeAt(++ve)),B[K++]=ne>>18|240,B[K++]=ne>>12&63|128,B[K++]=ne>>6&63|128,B[K++]=63&ne|128):(B[K++]=ne>>12|224,B[K++]=ne>>6&63|128,B[K++]=63&ne|128)}return B},re={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,B){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const K=B?this.byteToCharMapWebSafe_:this.byteToCharMap_,ve=[];for(let ne=0;ne<j.length;ne+=3){const Le=j[ne],Nt=ne+1<j.length,pn=Nt?j[ne+1]:0,ir=ne+2<j.length,Xn=ir?j[ne+2]:0;let os=(15&pn)<<2|Xn>>6,$i=63&Xn;ir||($i=64,Nt||(os=64)),ve.push(K[Le>>2],K[(3&Le)<<4|pn>>4],K[os],K[$i])}return ve.join("")},encodeString(j,B){return this.HAS_NATIVE_SUPPORT&&!B?btoa(j):this.encodeByteArray(oe(j),B)},decodeString(j,B){return this.HAS_NATIVE_SUPPORT&&!B?atob(j):function(j){const B=[];let K=0,ve=0;for(;K<j.length;){const ne=j[K++];if(ne<128)B[ve++]=String.fromCharCode(ne);else if(ne>191&&ne<224){const Le=j[K++];B[ve++]=String.fromCharCode((31&ne)<<6|63&Le)}else if(ne>239&&ne<365){const ir=((7&ne)<<18|(63&j[K++])<<12|(63&j[K++])<<6|63&j[K++])-65536;B[ve++]=String.fromCharCode(55296+(ir>>10)),B[ve++]=String.fromCharCode(56320+(1023&ir))}else{const Le=j[K++],Nt=j[K++];B[ve++]=String.fromCharCode((15&ne)<<12|(63&Le)<<6|63&Nt)}}return B.join("")}(this.decodeStringToByteArray(j,B))},decodeStringToByteArray(j,B){this.init_();const K=B?this.charToByteMapWebSafe_:this.charToByteMap_,ve=[];for(let ne=0;ne<j.length;){const Le=K[j.charAt(ne++)],pn=ne<j.length?K[j.charAt(ne)]:0;++ne;const Xn=ne<j.length?K[j.charAt(ne)]:64;++ne;const Qt=ne<j.length?K[j.charAt(ne)]:64;if(++ne,null==Le||null==pn||null==Xn||null==Qt)throw new ge;ve.push(Le<<2|pn>>4),64!==Xn&&(ve.push(pn<<4&240|Xn>>2),64!==Qt&&ve.push(Xn<<6&192|Qt))}return ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}};class ge extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fe=function(j){const B=oe(j);return re.encodeByteArray(B,!0)},he=function(j){return fe(j).replace(/\./g,"")},G=function(j){try{return re.decodeString(j,!0)}catch(B){console.error("base64Decode failed: ",B)}return null};function z(j){return Q(void 0,j)}function Q(j,B){if(!(B instanceof Object))return B;switch(B.constructor){case Date:return new Date(B.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return B}for(const K in B)!B.hasOwnProperty(K)||!He(K)||(j[K]=Q(j[K],B[K]));return j}function He(j){return"__proto__"!==j}const Se=()=>{try{return function De(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const j=process.env.__FIREBASE_DEFAULTS__;return j?JSON.parse(j):void 0})()||(()=>{if(typeof document>"u")return;let j;try{j=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const B=j&&G(j[1]);return B&&JSON.parse(B)})()}catch(j){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${j}`)}},ke=()=>{var j;return null===(j=Se())||void 0===j?void 0:j.config},Ce=j=>{var B;return null===(B=Se())||void 0===B?void 0:B[`_${j}`]};class we{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((B,K)=>{this.resolve=B,this.reject=K})}wrapCallback(B){return(K,ve)=>{K?this.reject(K):this.resolve(ve),"function"==typeof B&&(this.promise.catch(()=>{}),1===B.length?B(K):B(K,ve))}}}function ze(j,B){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ve=B||"demo-project",ne=j.iat||0,Le=j.sub||j.user_id;if(!Le)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Nt=Object.assign({iss:`https://securetoken.google.com/${ve}`,aud:ve,iat:ne,exp:ne+3600,auth_time:ne,sub:Le,user_id:Le,firebase:{sign_in_provider:"custom",identities:{}}},j);return[he(JSON.stringify({alg:"none",type:"JWT"})),he(JSON.stringify(Nt)),""].join(".")}function Pe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function de(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pe())}function q(){var j;const B=null===(j=Se())||void 0===j?void 0:j.forceEnvironment;if("node"===B)return!0;if("browser"===B)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function $e(){return"object"==typeof self&&self.self===self}function Ge(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function St(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ae(){const j=Pe();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function Ee(){return!0===u.NODE_CLIENT||!0===u.NODE_ADMIN}function Ae(){return!q()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Fe(){try{return"object"==typeof indexedDB}catch{return!1}}function je(){return new Promise((j,B)=>{try{let K=!0;const ve="validate-browser-context-for-indexeddb-analytics-module",ne=self.indexedDB.open(ve);ne.onsuccess=()=>{ne.result.close(),K||self.indexedDB.deleteDatabase(ve),j(!0)},ne.onupgradeneeded=()=>{K=!1},ne.onerror=()=>{var Le;B((null===(Le=ne.error)||void 0===Le?void 0:Le.message)||"")}}catch(K){B(K)}})}function ot(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class bt extends Error{constructor(B,K,ve){super(K),this.code=B,this.customData=ve,this.name="FirebaseError",Object.setPrototypeOf(this,bt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ye.prototype.create)}}class Ye{constructor(B,K,ve){this.service=B,this.serviceName=K,this.errors=ve}create(B,...K){const ve=K[0]||{},ne=`${this.service}/${B}`,Le=this.errors[B],Nt=Le?function Yt(j,B){return j.replace(Tt,(K,ve)=>{const ne=B[ve];return null!=ne?String(ne):`<${ve}?>`})}(Le,ve):"Error";return new bt(ne,`${this.serviceName}: ${Nt} (${ne}).`,ve)}}const Tt=/\{\$([^}]+)}/g;function on(j){return JSON.parse(j)}function wn(j){return JSON.stringify(j)}const _n=function(j){let B={},K={},ve={},ne="";try{const Le=j.split(".");B=on(G(Le[0])||""),K=on(G(Le[1])||""),ne=Le[2],ve=K.d||{},delete K.d}catch{}return{header:B,claims:K,data:ve,signature:ne}},Hr=function(j){const K=_n(j).claims;return!!K&&"object"==typeof K&&K.hasOwnProperty("iat")},Ws=function(j){const B=_n(j).claims;return"object"==typeof B&&!0===B.admin};function Rr(j,B){return Object.prototype.hasOwnProperty.call(j,B)}function ws(j,B){if(Object.prototype.hasOwnProperty.call(j,B))return j[B]}function Es(j){for(const B in j)if(Object.prototype.hasOwnProperty.call(j,B))return!1;return!0}function jn(j,B,K){const ve={};for(const ne in j)Object.prototype.hasOwnProperty.call(j,ne)&&(ve[ne]=B.call(K,j[ne],ne,j));return ve}function pt(j,B){if(j===B)return!0;const K=Object.keys(j),ve=Object.keys(B);for(const ne of K){if(!ve.includes(ne))return!1;const Le=j[ne],Nt=B[ne];if(ai(Le)&&ai(Nt)){if(!pt(Le,Nt))return!1}else if(Le!==Nt)return!1}for(const ne of ve)if(!K.includes(ne))return!1;return!0}function ai(j){return null!==j&&"object"==typeof j}function Qn(j){const B=[];for(const[K,ve]of Object.entries(j))Array.isArray(ve)?ve.forEach(ne=>{B.push(encodeURIComponent(K)+"="+encodeURIComponent(ne))}):B.push(encodeURIComponent(K)+"="+encodeURIComponent(ve));return B.length?"&"+B.join("&"):""}function ss(j){const B={};return j.replace(/^\?/,"").split("&").forEach(ve=>{if(ve){const[ne,Le]=ve.split("=");B[decodeURIComponent(ne)]=decodeURIComponent(Le)}}),B}function Pr(j){const B=j.indexOf("?");if(!B)return"";const K=j.indexOf("#",B);return j.substring(B,K>0?K:void 0)}class hn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let B=1;B<this.blockSize;++B)this.pad_[B]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(B,K){K||(K=0);const ve=this.W_;if("string"==typeof B)for(let Qt=0;Qt<16;Qt++)ve[Qt]=B.charCodeAt(K)<<24|B.charCodeAt(K+1)<<16|B.charCodeAt(K+2)<<8|B.charCodeAt(K+3),K+=4;else for(let Qt=0;Qt<16;Qt++)ve[Qt]=B[K]<<24|B[K+1]<<16|B[K+2]<<8|B[K+3],K+=4;for(let Qt=16;Qt<80;Qt++){const os=ve[Qt-3]^ve[Qt-8]^ve[Qt-14]^ve[Qt-16];ve[Qt]=4294967295&(os<<1|os>>>31)}let Xn,gn,ne=this.chain_[0],Le=this.chain_[1],Nt=this.chain_[2],pn=this.chain_[3],ir=this.chain_[4];for(let Qt=0;Qt<80;Qt++){Qt<40?Qt<20?(Xn=pn^Le&(Nt^pn),gn=1518500249):(Xn=Le^Nt^pn,gn=1859775393):Qt<60?(Xn=Le&Nt|pn&(Le|Nt),gn=2400959708):(Xn=Le^Nt^pn,gn=3395469782);const os=(ne<<5|ne>>>27)+Xn+ir+gn+ve[Qt]&4294967295;ir=pn,pn=Nt,Nt=4294967295&(Le<<30|Le>>>2),Le=ne,ne=os}this.chain_[0]=this.chain_[0]+ne&4294967295,this.chain_[1]=this.chain_[1]+Le&4294967295,this.chain_[2]=this.chain_[2]+Nt&4294967295,this.chain_[3]=this.chain_[3]+pn&4294967295,this.chain_[4]=this.chain_[4]+ir&4294967295}update(B,K){if(null==B)return;void 0===K&&(K=B.length);const ve=K-this.blockSize;let ne=0;const Le=this.buf_;let Nt=this.inbuf_;for(;ne<K;){if(0===Nt)for(;ne<=ve;)this.compress_(B,ne),ne+=this.blockSize;if("string"==typeof B){for(;ne<K;)if(Le[Nt]=B.charCodeAt(ne),++Nt,++ne,Nt===this.blockSize){this.compress_(Le),Nt=0;break}}else for(;ne<K;)if(Le[Nt]=B[ne],++Nt,++ne,Nt===this.blockSize){this.compress_(Le),Nt=0;break}}this.inbuf_=Nt,this.total_+=K}digest(){const B=[];let K=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ne=this.blockSize-1;ne>=56;ne--)this.buf_[ne]=255&K,K/=256;this.compress_(this.buf_);let ve=0;for(let ne=0;ne<5;ne++)for(let Le=24;Le>=0;Le-=8)B[ve]=this.chain_[ne]>>Le&255,++ve;return B}}function Rn(j,B){const K=new gt(j,B);return K.subscribe.bind(K)}class gt{constructor(B,K){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=K,this.task.then(()=>{B(this)}).catch(ve=>{this.error(ve)})}next(B){this.forEachObserver(K=>{K.next(B)})}error(B){this.forEachObserver(K=>{K.error(B)}),this.close(B)}complete(){this.forEachObserver(B=>{B.complete()}),this.close()}subscribe(B,K,ve){let ne;if(void 0===B&&void 0===K&&void 0===ve)throw new Error("Missing Observer.");ne=function Si(j,B){if("object"!=typeof j||null===j)return!1;for(const K of B)if(K in j&&"function"==typeof j[K])return!0;return!1}(B,["next","error","complete"])?B:{next:B,error:K,complete:ve},void 0===ne.next&&(ne.next=li),void 0===ne.error&&(ne.error=li),void 0===ne.complete&&(ne.complete=li);const Le=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ne.error(this.finalError):ne.complete()}catch{}}),this.observers.push(ne),Le}unsubscribeOne(B){void 0===this.observers||void 0===this.observers[B]||(delete this.observers[B],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(B){if(!this.finalized)for(let K=0;K<this.observers.length;K++)this.sendOne(K,B)}sendOne(B,K){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[B])try{K(this.observers[B])}catch(ve){typeof console<"u"&&console.error&&console.error(ve)}})}close(B){this.finalized||(this.finalized=!0,void 0!==B&&(this.finalError=B),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function li(){}const Jn=function(j,B,K,ve){let ne;if(ve<B?ne="at least "+B:ve>K&&(ne=0===K?"none":"no more than "+K),ne)throw new Error(j+" failed: Was called with "+ve+(1===ve?" argument.":" arguments.")+" Expects "+ne+".")};function Or(j,B){return`${j} failed: ${B} argument `}function rl(j,B,K,ve){if((!ve||K)&&"function"!=typeof K)throw new Error(Or(j,B)+"must be a valid function.")}function mn(j,B,K,ve){if((!ve||K)&&("object"!=typeof K||null===K))throw new Error(Or(j,B)+"must be a valid context object.")}const Bi=function(j){const B=[];let K=0;for(let ve=0;ve<j.length;ve++){let ne=j.charCodeAt(ve);if(ne>=55296&&ne<=56319){const Le=ne-55296;ve++,te(ve<j.length,"Surrogate pair missing trail surrogate."),ne=65536+(Le<<10)+(j.charCodeAt(ve)-56320)}ne<128?B[K++]=ne:ne<2048?(B[K++]=ne>>6|192,B[K++]=63&ne|128):ne<65536?(B[K++]=ne>>12|224,B[K++]=ne>>6&63|128,B[K++]=63&ne|128):(B[K++]=ne>>18|240,B[K++]=ne>>12&63|128,B[K++]=ne>>6&63|128,B[K++]=63&ne|128)}return B},Wt=function(j){let B=0;for(let K=0;K<j.length;K++){const ve=j.charCodeAt(K);ve<128?B++:ve<2048?B+=2:ve>=55296&&ve<=56319?(B+=4,K++):B+=3}return B},an=1e3,it=2,Ie=144e5,Je=.5;function kt(j,B=an,K=it){const ve=B*Math.pow(K,j),ne=Math.round(Je*ve*(Math.random()-.5)*2);return Math.min(Ie,ve+ne)}function Hn(j){return j&&j._delegate?j._delegate:j}},7607:(_t,Te,F)=>{var u=F(4650);let te=null;function k(){return te}class se{}const re=new u.OlP("DocumentToken");let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function fe(){return(0,u.LFG)(G)}()},providedIn:"platform"}),n})();const he=new u.OlP("Location Initialized");let G=(()=>{class n extends ge{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){z()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){z()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(re))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Q(){return new G((0,u.LFG)(re))}()},providedIn:"platform"}),n})();function z(){return!!window.history.pushState}function He(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function De(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ze(n){return n&&"?"!==n[0]?"?"+n:n}let dt=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(Se)},providedIn:"root"}),n})();const me=new u.OlP("appBaseHref");let Se=(()=>{class n extends dt{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,u.f3M)(re).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return He(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ze(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const c=this.prepareExternalUrl(i+Ze(o));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,o){const c=this.prepareExternalUrl(i+Ze(o));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ge),u.LFG(me,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),be=(()=>{class n extends dt{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=He(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let c=this.prepareExternalUrl(i+Ze(o));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,o){let c=this.prepareExternalUrl(i+Ze(o));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ge),u.LFG(me,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Be=(()=>{class n{constructor(t){this._subject=new u.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function ze(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(De(we(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ze(r))}normalize(t){return n.stripTrailingSlash(function Ce(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,we(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ze(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ze(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ze,n.joinWithSlash=He,n.stripTrailingSlash=De,n.\u0275fac=function(t){return new(t||n)(u.LFG(dt))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function ke(){return new Be((0,u.LFG)(dt))}()},providedIn:"root"}),n})();function we(n){return n.replace(/\/index.html$/,"")}const Pe={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var de=(()=>((de=de||{})[de.Decimal=0]="Decimal",de[de.Percent=1]="Percent",de[de.Currency=2]="Currency",de[de.Scientific=3]="Scientific",de))(),$e=(()=>(($e=$e||{})[$e.Format=0]="Format",$e[$e.Standalone=1]="Standalone",$e))(),Ge=(()=>((Ge=Ge||{})[Ge.Narrow=0]="Narrow",Ge[Ge.Abbreviated=1]="Abbreviated",Ge[Ge.Wide=2]="Wide",Ge[Ge.Short=3]="Short",Ge))(),St=(()=>((St=St||{})[St.Short=0]="Short",St[St.Medium=1]="Medium",St[St.Long=2]="Long",St[St.Full=3]="Full",St))(),et=(()=>((et=et||{})[et.Decimal=0]="Decimal",et[et.Group=1]="Group",et[et.List=2]="List",et[et.PercentSign=3]="PercentSign",et[et.PlusSign=4]="PlusSign",et[et.MinusSign=5]="MinusSign",et[et.Exponential=6]="Exponential",et[et.SuperscriptingExponent=7]="SuperscriptingExponent",et[et.PerMille=8]="PerMille",et[et.Infinity=9]="Infinity",et[et.NaN=10]="NaN",et[et.TimeSeparator=11]="TimeSeparator",et[et.CurrencyDecimal=12]="CurrencyDecimal",et[et.CurrencyGroup=13]="CurrencyGroup",et))();function bt(n,e){return jn((0,u.cg1)(n)[u.wAp.DateFormat],e)}function Ye(n,e){return jn((0,u.cg1)(n)[u.wAp.TimeFormat],e)}function Yt(n,e){return jn((0,u.cg1)(n)[u.wAp.DateTimeFormat],e)}function Tt(n,e){const t=(0,u.cg1)(n),r=t[u.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===et.CurrencyDecimal)return t[u.wAp.NumberSymbols][et.Decimal];if(e===et.CurrencyGroup)return t[u.wAp.NumberSymbols][et.Group]}return r}function on(n,e){return(0,u.cg1)(n)[u.wAp.NumberFormats][e]}function Ws(n){if(!n[u.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[u.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function jn(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function pt(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const nl=2,ss=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Pr={},hn=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Rn=(()=>((Rn=Rn||{})[Rn.Short=0]="Short",Rn[Rn.ShortGMT=1]="ShortGMT",Rn[Rn.Long=2]="Long",Rn[Rn.Extended=3]="Extended",Rn))(),gt=(()=>((gt=gt||{})[gt.FullYear=0]="FullYear",gt[gt.Month=1]="Month",gt[gt.Date=2]="Date",gt[gt.Hours=3]="Hours",gt[gt.Minutes=4]="Minutes",gt[gt.Seconds=5]="Seconds",gt[gt.FractionalSeconds=6]="FractionalSeconds",gt[gt.Day=7]="Day",gt))(),xt=(()=>((xt=xt||{})[xt.DayPeriods=0]="DayPeriods",xt[xt.Days=1]="Days",xt[xt.Months=2]="Months",xt[xt.Eras=3]="Eras",xt))();function Si(n,e,t,r){let i=function ne(n){if(Nt(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,o=1,c=1]=n.split("-").map(h=>+h);return li(i,o-1,c)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(ss))return function Le(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const c=Number(n[4]||0)-t,h=Number(n[5]||0)-r,_=Number(n[6]||0),y=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return o.call(e,c,h,_,y),e}(r)}const e=new Date(n);if(!Nt(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Jn(t,e)||e;let h,c=[];for(;e;){if(h=hn.exec(e),!h){c.push(e);break}{c=c.concat(h.slice(1));const I=c.pop();if(!I)break;e=I}}let _=i.getTimezoneOffset();r&&(_=B(r,_),i=function ve(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function K(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(B(e,i)-i))}(i,r,!0));let y="";return c.forEach(I=>{const D=function j(n){if(Hn[n])return Hn[n];let e;switch(n){case"G":case"GG":case"GGG":e=Wt(xt.Eras,Ge.Abbreviated);break;case"GGGG":e=Wt(xt.Eras,Ge.Wide);break;case"GGGGG":e=Wt(xt.Eras,Ge.Narrow);break;case"y":e=mn(gt.FullYear,1,0,!1,!0);break;case"yy":e=mn(gt.FullYear,2,0,!0,!0);break;case"yyy":e=mn(gt.FullYear,3,0,!1,!0);break;case"yyyy":e=mn(gt.FullYear,4,0,!1,!0);break;case"Y":e=fn(1);break;case"YY":e=fn(2,!0);break;case"YYY":e=fn(3);break;case"YYYY":e=fn(4);break;case"M":case"L":e=mn(gt.Month,1,1);break;case"MM":case"LL":e=mn(gt.Month,2,1);break;case"MMM":e=Wt(xt.Months,Ge.Abbreviated);break;case"MMMM":e=Wt(xt.Months,Ge.Wide);break;case"MMMMM":e=Wt(xt.Months,Ge.Narrow);break;case"LLL":e=Wt(xt.Months,Ge.Abbreviated,$e.Standalone);break;case"LLLL":e=Wt(xt.Months,Ge.Wide,$e.Standalone);break;case"LLLLL":e=Wt(xt.Months,Ge.Narrow,$e.Standalone);break;case"w":e=It(1);break;case"ww":e=It(2);break;case"W":e=It(1,!0);break;case"d":e=mn(gt.Date,1);break;case"dd":e=mn(gt.Date,2);break;case"c":case"cc":e=mn(gt.Day,1);break;case"ccc":e=Wt(xt.Days,Ge.Abbreviated,$e.Standalone);break;case"cccc":e=Wt(xt.Days,Ge.Wide,$e.Standalone);break;case"ccccc":e=Wt(xt.Days,Ge.Narrow,$e.Standalone);break;case"cccccc":e=Wt(xt.Days,Ge.Short,$e.Standalone);break;case"E":case"EE":case"EEE":e=Wt(xt.Days,Ge.Abbreviated);break;case"EEEE":e=Wt(xt.Days,Ge.Wide);break;case"EEEEE":e=Wt(xt.Days,Ge.Narrow);break;case"EEEEEE":e=Wt(xt.Days,Ge.Short);break;case"a":case"aa":case"aaa":e=Wt(xt.DayPeriods,Ge.Abbreviated);break;case"aaaa":e=Wt(xt.DayPeriods,Ge.Wide);break;case"aaaaa":e=Wt(xt.DayPeriods,Ge.Narrow);break;case"b":case"bb":case"bbb":e=Wt(xt.DayPeriods,Ge.Abbreviated,$e.Standalone,!0);break;case"bbbb":e=Wt(xt.DayPeriods,Ge.Wide,$e.Standalone,!0);break;case"bbbbb":e=Wt(xt.DayPeriods,Ge.Narrow,$e.Standalone,!0);break;case"B":case"BB":case"BBB":e=Wt(xt.DayPeriods,Ge.Abbreviated,$e.Format,!0);break;case"BBBB":e=Wt(xt.DayPeriods,Ge.Wide,$e.Format,!0);break;case"BBBBB":e=Wt(xt.DayPeriods,Ge.Narrow,$e.Format,!0);break;case"h":e=mn(gt.Hours,1,-12);break;case"hh":e=mn(gt.Hours,2,-12);break;case"H":e=mn(gt.Hours,1);break;case"HH":e=mn(gt.Hours,2);break;case"m":e=mn(gt.Minutes,1);break;case"mm":e=mn(gt.Minutes,2);break;case"s":e=mn(gt.Seconds,1);break;case"ss":e=mn(gt.Seconds,2);break;case"S":e=mn(gt.FractionalSeconds,1);break;case"SS":e=mn(gt.FractionalSeconds,2);break;case"SSS":e=mn(gt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=an(Rn.Short);break;case"ZZZZZ":e=an(Rn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=an(Rn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=an(Rn.Long);break;default:return null}return Hn[n]=e,e}(I);y+=D?D(i,t,_):"''"===I?"'":I.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),y}function li(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Jn(n,e){const t=function _e(n){return(0,u.cg1)(n)[u.wAp.LocaleId]}(n);if(Pr[t]=Pr[t]||{},Pr[t][e])return Pr[t][e];let r="";switch(e){case"shortDate":r=bt(n,St.Short);break;case"mediumDate":r=bt(n,St.Medium);break;case"longDate":r=bt(n,St.Long);break;case"fullDate":r=bt(n,St.Full);break;case"shortTime":r=Ye(n,St.Short);break;case"mediumTime":r=Ye(n,St.Medium);break;case"longTime":r=Ye(n,St.Long);break;case"fullTime":r=Ye(n,St.Full);break;case"short":const i=Jn(n,"shortTime"),o=Jn(n,"shortDate");r=Or(Yt(n,St.Short),[i,o]);break;case"medium":const c=Jn(n,"mediumTime"),h=Jn(n,"mediumDate");r=Or(Yt(n,St.Medium),[c,h]);break;case"long":const _=Jn(n,"longTime"),y=Jn(n,"longDate");r=Or(Yt(n,St.Long),[_,y]);break;case"full":const I=Jn(n,"fullTime"),D=Jn(n,"fullDate");r=Or(Yt(n,St.Full),[I,D])}return r&&(Pr[t][e]=r),r}function Or(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Er(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,o=t));let c=String(n);for(;c.length<e;)c="0"+c;return r&&(c=c.slice(c.length-e)),o+c}function mn(n,e,t=0,r=!1,i=!1){return function(o,c){let h=function Bi(n,e){switch(n){case gt.FullYear:return e.getFullYear();case gt.Month:return e.getMonth();case gt.Date:return e.getDate();case gt.Hours:return e.getHours();case gt.Minutes:return e.getMinutes();case gt.Seconds:return e.getSeconds();case gt.FractionalSeconds:return e.getMilliseconds();case gt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,o);if((t>0||h>-t)&&(h+=t),n===gt.Hours)0===h&&-12===t&&(h=12);else if(n===gt.FractionalSeconds)return function rl(n,e){return Er(n,3).substring(0,e)}(h,e);const _=Tt(c,et.MinusSign);return Er(h,e,_,r,i)}}function Wt(n,e,t=$e.Format,r=!1){return function(i,o){return function po(n,e,t,r,i,o){switch(t){case xt.Months:return function Fe(n,e,t){const r=(0,u.cg1)(n),o=jn([r[u.wAp.MonthsFormat],r[u.wAp.MonthsStandalone]],e);return jn(o,t)}(e,i,r)[n.getMonth()];case xt.Days:return function Ae(n,e,t){const r=(0,u.cg1)(n),o=jn([r[u.wAp.DaysFormat],r[u.wAp.DaysStandalone]],e);return jn(o,t)}(e,i,r)[n.getDay()];case xt.DayPeriods:const c=n.getHours(),h=n.getMinutes();if(o){const y=function Rr(n){const e=(0,u.cg1)(n);return Ws(e),(e[u.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?pt(r):[pt(r[0]),pt(r[1])])}(e),I=function ws(n,e,t){const r=(0,u.cg1)(n);Ws(r);const o=jn([r[u.wAp.ExtraData][0],r[u.wAp.ExtraData][1]],e)||[];return jn(o,t)||[]}(e,i,r),D=y.findIndex(R=>{if(Array.isArray(R)){const[L,$]=R,X=c>=L.hours&&h>=L.minutes,ce=c<$.hours||c===$.hours&&h<$.minutes;if(L.hours<$.hours){if(X&&ce)return!0}else if(X||ce)return!0}else if(R.hours===c&&R.minutes===h)return!0;return!1});if(-1!==D)return I[D]}return function Ee(n,e,t){const r=(0,u.cg1)(n),o=jn([r[u.wAp.DayPeriodsFormat],r[u.wAp.DayPeriodsStandalone]],e);return jn(o,t)}(e,i,r)[c<12?0:1];case xt.Eras:return function je(n,e){return jn((0,u.cg1)(n)[u.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,o,n,e,t,r)}}function an(n){return function(e,t,r){const i=-1*r,o=Tt(t,et.MinusSign),c=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case Rn.Short:return(i>=0?"+":"")+Er(c,2,o)+Er(Math.abs(i%60),2,o);case Rn.ShortGMT:return"GMT"+(i>=0?"+":"")+Er(c,1,o);case Rn.Long:return"GMT"+(i>=0?"+":"")+Er(c,2,o)+":"+Er(Math.abs(i%60),2,o);case Rn.Extended:return 0===r?"Z":(i>=0?"+":"")+Er(c,2,o)+":"+Er(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}const it=0,Ie=4;function kt(n){return li(n.getFullYear(),n.getMonth(),n.getDate()+(Ie-n.getDay()))}function It(n,e=!1){return function(t,r){let i;if(e){const o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,c=t.getDate();i=1+Math.floor((c+o)/7)}else{const o=kt(t),c=function Je(n){const e=li(n,it,1).getDay();return li(n,0,1+(e<=Ie?Ie:Ie+7)-e)}(o.getFullYear()),h=o.getTime()-c.getTime();i=1+Math.round(h/6048e5)}return Er(i,n,Tt(r,et.MinusSign))}}function fn(n,e=!1){return function(t,r){return Er(kt(t).getFullYear(),n,Tt(r,et.MinusSign),e)}}const Hn={};function B(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Nt(n){return n instanceof Date&&!isNaN(n.valueOf())}const pn=/^(\d+)?\.((\d+)(-(\d+))?)?$/,ir=22,Xn=".",gn="0",Qt=";",os=",",$i="#",iu="\xa4";function su(n,e,t,r,i,o,c=!1){let h="",_=!1;if(isFinite(n)){let y=function ln(n){let r,i,o,c,h,e=Math.abs(n)+"",t=0;for((i=e.indexOf(Xn))>-1&&(e=e.replace(Xn,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===gn;o++);if(o===(h=e.length))r=[0],i=1;else{for(h--;e.charAt(h)===gn;)h--;for(i-=o,r=[],c=0;o<=h;o++,c++)r[c]=Number(e.charAt(o))}return i>ir&&(r=r.splice(0,ir-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);c&&(y=function bc(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(y));let I=e.minInt,D=e.minFrac,R=e.maxFrac;if(o){const ut=o.match(pn);if(null===ut)throw new Error(`${o} is not a valid digit info`);const at=ut[1],Et=ut[3],$t=ut[5];null!=at&&(I=Cr(at)),null!=Et&&(D=Cr(Et)),null!=$t?R=Cr($t):null!=Et&&D>R&&(R=D)}!function sr(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const o=Math.min(Math.max(e,i),t);let c=o+n.integerLen,h=r[c];if(c>0){r.splice(Math.max(n.integerLen,c));for(let D=c;D<r.length;D++)r[D]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,c=o+1),r[0]=0;for(let D=1;D<c;D++)r[D]=0}if(h>=5)if(c-1<0){for(let D=0;D>c;D--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[c-1]++;for(;i<Math.max(0,o);i++)r.push(0);let _=0!==o;const y=e+n.integerLen,I=r.reduceRight(function(D,R,L,$){return $[L]=(R+=D)<10?R:R-10,_&&(0===$[L]&&L>=y?$.pop():_=!1),R>=10?1:0},0);I&&(r.unshift(I),n.integerLen++)}(y,D,R);let L=y.digits,$=y.integerLen;const X=y.exponent;let ce=[];for(_=L.every(ut=>!ut);$<I;$++)L.unshift(0);for(;$<0;$++)L.unshift(0);$>0?ce=L.splice($,L.length):(ce=L,L=[0]);const qe=[];for(L.length>=e.lgSize&&qe.unshift(L.splice(-e.lgSize,L.length).join(""));L.length>e.gSize;)qe.unshift(L.splice(-e.gSize,L.length).join(""));L.length&&qe.unshift(L.join("")),h=qe.join(Tt(t,r)),ce.length&&(h+=Tt(t,i)+ce.join("")),X&&(h+=Tt(t,et.Exponential)+"+"+X)}else h=Tt(t,et.Infinity);return h=n<0&&!_?e.negPre+h+e.negSuf:e.posPre+h+e.posSuf,h}function ta(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(Qt),i=r[0],o=r[1],c=-1!==i.indexOf(Xn)?i.split(Xn):[i.substring(0,i.lastIndexOf(gn)+1),i.substring(i.lastIndexOf(gn)+1)],h=c[0],_=c[1]||"";t.posPre=h.substring(0,h.indexOf($i));for(let I=0;I<_.length;I++){const D=_.charAt(I);D===gn?t.minFrac=t.maxFrac=I+1:D===$i?t.maxFrac=I+1:t.posSuf+=D}const y=h.split(os);if(t.gSize=y[1]?y[1].length:0,t.lgSize=y[2]||y[1]?(y[2]||y[1]).length:0,o){const I=i.length-t.posPre.length-t.posSuf.length,D=o.indexOf($i);t.negPre=o.substring(0,D).replace(/'/g,""),t.negSuf=o.slice(D+I).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function Cr(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}class Fr{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ir=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Fr(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===o?void 0:o);else if(null!==o){const h=r.get(o);r.move(h,c),Pn(h,i)}});for(let i=0,o=r.length;i<o;i++){const h=r.get(i).context;h.index=i,h.count=o,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Pn(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(u.ZZ4))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Pn(n,e){n.context.$implicit=e.item}let ci=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new jt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Tc("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Tc("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class jt{constructor(){this.$implicit=null,this.ngIf=null}}function Tc(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,u.AaK)(e)}'.`)}function Ai(n,e){return new u.vHH(2100,!1)}class Sc{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class lu{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const ia=new lu,Cs=new Sc;let Gr=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,u.QGY)(t))return ia;if((0,u.F4k)(t))return Cs;throw Ai()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.sBO,16))},n.\u0275pipe=u.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})();const ll=new u.OlP("DATE_PIPE_DEFAULT_TIMEZONE"),ul=new u.OlP("DATE_PIPE_DEFAULT_OPTIONS");let er=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(null==t||""===t||t!=t)return null;try{return Si(t,r??this.defaultOptions?.dateFormat??"mediumDate",o||this.locale,i??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(c){throw Ai()}}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.soG,16),u.Y36(ll,24),u.Y36(ul,24))},n.\u0275pipe=u.Yjl({name:"date",type:n,pure:!0,standalone:!0}),n})(),Ac=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!Op(t))return null;i=i||this._locale;try{return function Ic(n,e,t){return su(n,ta(on(e,de.Decimal),Tt(e,et.MinusSign)),e,et.Group,et.Decimal,t)}(mo(t),i,r)}catch(o){throw Ai()}}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.soG,16))},n.\u0275pipe=u.Yjl({name:"number",type:n,pure:!0,standalone:!0}),n})(),bs=(()=>{class n{constructor(t,r="USD"){this._locale=t,this._defaultCurrencyCode=r}transform(t,r=this._defaultCurrencyCode,i="symbol",o,c){if(!Op(t))return null;c=c||this._locale,"boolean"==typeof i&&(i=i?"symbol":"code");let h=r||this._defaultCurrencyCode;"code"!==i&&(h="symbol"===i||"symbol-narrow"===i?function ai(n,e,t="en"){const r=function oi(n){return(0,u.cg1)(n)[u.wAp.Currencies]}(t)[n]||Pe[n]||[],i=r[1];return"narrow"===e&&"string"==typeof i?i:r[0]||n}(h,"symbol"===i?"wide":"narrow",c):i);try{return function il(n,e,t,r,i){const c=ta(on(e,de.Currency),Tt(e,et.MinusSign));return c.minFrac=function Qn(n){let e;const t=Pe[n];return t&&(e=t[2]),"number"==typeof e?e:nl}(r),c.maxFrac=c.minFrac,su(n,c,e,et.CurrencyGroup,et.CurrencyDecimal,i).replace(iu,t).replace(iu,"").trim()}(mo(t),c,h,r,o)}catch(_){throw Ai()}}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.soG,16),u.Y36(u.EJc,16))},n.\u0275pipe=u.Yjl({name:"currency",type:n,pure:!0,standalone:!0}),n})();function Op(n){return!(null==n||""===n||n!=n)}function mo(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}let qi=(()=>{class n{transform(t,r,i){if(null==t)return null;if(!this.supports(t))throw Ai();return t.slice(r,i)}supports(t){return"string"==typeof t||Array.isArray(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=u.Yjl({name:"slice",type:n,pure:!1,standalone:!0}),n})(),cu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const _o="server";function sa(n){return n===_o}let hl=(()=>{class n{}return n.\u0275prov=(0,u.Yz7)({token:n,providedIn:"root",factory:()=>new ah((0,u.LFG)(re),window)}),n})();class ah{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function hu(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const c=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ts(this.window.history)||Ts(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ts(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class vh extends se{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class vu extends vh{static makeCurrent(){!function oe(n){te||(te=n)}(new vu)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function yl(){return So=So||document.querySelector("base"),So?So.getAttribute("href"):null}();return null==t?null:function o_(n){As=As||document.createElement("a"),As.setAttribute("href",n);const e=As.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){So=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function sl(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let As,So=null;const a_=new u.OlP("TRANSITION_ID"),Eh=[{provide:u.ip1,useFactory:function wh(n,e,t){return()=>{t.get(u.CZH).donePromise.then(()=>{const r=k(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[a_,re,u.zs3],multi:!0}];let Lc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const wu=new u.OlP("EventManagerPlugins");let Vc=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const c=i[o];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(wu),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Eu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=k().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Cu=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const i=this.usageCount;let o=i.get(t)??0;return o+=r,o>0?i.set(t,o):i.delete(t),o}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),ga=(()=>{class n extends Cu{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(o=>o.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const i=this.doc.createElement("style");i.textContent=r,t.appendChild(i);const o=this.styleRef.get(r);o?o.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(re))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Ms={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Mo=/%COMP%/g,Cl=new u.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Js(n,e){return e.flat(100).map(t=>t.replace(Mo,n))}function qp(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Vn=(()=>{class n{constructor(t,r,i,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=o,this.rendererByCompId=new Map,this.defaultRenderer=new Uc(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(t,r);return i instanceof bl?i.applyToHost(t):i instanceof _a&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const c=this.eventManager,h=this.sharedStylesHost,_=this.removeStylesOnCompDestory;switch(r.encapsulation){case u.ifc.Emulated:o=new bl(c,h,r,this.appId,_);break;case u.ifc.ShadowDom:return new Sn(c,h,t,r);default:o=new _a(c,h,r,_)}o.onDestroy=()=>i.delete(r.id),i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Vc),u.LFG(ga),u.LFG(u.AFp),u.LFG(Cl))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Uc{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ms[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Il(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Il(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=Ms[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Ms[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(u.JOm.DashCase|u.JOm.Important)?e.style.setProperty(t,r,i&u.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&u.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,qp(r)):this.eventManager.addEventListener(e,t,qp(r))}}function Il(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Sn extends Uc{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=Js(i.id,i.styles);for(const c of o){const h=document.createElement("style");h.textContent=c,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class _a extends Uc{constructor(e,t,r,i,o=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=Js(o,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class bl extends _a{constructor(e,t,r,i,o){const c=i+"-"+r.id;super(e,t,r,o,c),this.contentAttr=function Ch(n){return"_ngcontent-%COMP%".replace(Mo,n)}(c),this.hostAttr=function zp(n){return"_nghost-%COMP%".replace(Mo,n)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Ih=(()=>{class n extends Eu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(re))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const No=["alt","control","meta","shift"],bh={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},bu={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Th=(()=>{class n extends Eu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),c=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,o.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let c="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),c="code."),No.forEach(y=>{const I=r.indexOf(y);I>-1&&(r.splice(I,1),c+=y+".")}),c+=o,0!=r.length||0===o.length)return null;const _={};return _.domEventName=i,_.fullKey=c,_}static matchEventFullKeyCode(t,r){let i=bh[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),No.forEach(c=>{c!==i&&(0,bu[c])(t)&&(o+=c+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(re))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Zp=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:"browser"},{provide:u.g9A,useValue:function Ro(){vu.makeCurrent()},multi:!0},{provide:re,useFactory:function Dl(){return(0,u.RDi)(document),document},deps:[]}]),Al=new u.OlP(""),Tu=[{provide:u.rWj,useClass:class Ao{addToWindow(e){u.dqk.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},u.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(r=>{const i=u.dqk.getAllAngularTestabilities();let o=i.length,c=!1;const h=function(_){c=c||_,o--,0==o&&r(c)};i.forEach(function(_){_.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:u.lri,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]}],Po=[{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function Yi(){return new u.qLn},deps:[]},{provide:wu,useClass:Ih,multi:!0,deps:[re,u.R0b,u.Lbi]},{provide:wu,useClass:Th,multi:!0,deps:[re]},{provide:Vn,useClass:Vn,deps:[Vc,ga,u.AFp,Cl]},{provide:u.FYo,useExisting:Vn},{provide:Cu,useExisting:ga},{provide:ga,useClass:ga,deps:[re]},{provide:Vc,useClass:Vc,deps:[wu,u.R0b]},{provide:class lh{},useClass:Lc,deps:[]},[]];let Oo=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:u.AFp,useValue:t.appId},{provide:a_,useExisting:u.AFp},Eh]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Al,12))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[...Po,...Tu],imports:[cu,u.hGG]}),n})(),l_=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(re))},n.\u0275prov=u.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Ml(){return new l_((0,u.LFG)(re))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let Pl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):u.LFG(xh),r},providedIn:"root"}),n})(),xh=(()=>{class n extends Pl{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case u.q3G.NONE:return r;case u.q3G.HTML:return(0,u.qzn)(r,"HTML")?(0,u.z3N)(r):(0,u.EiD)(this._doc,String(r)).toString();case u.q3G.STYLE:return(0,u.qzn)(r,"Style")?(0,u.z3N)(r):r;case u.q3G.SCRIPT:if((0,u.qzn)(r,"Script"))return(0,u.z3N)(r);throw new Error("unsafe value used in a script context");case u.q3G.URL:return(0,u.qzn)(r,"URL")?(0,u.z3N)(r):(0,u.mCW)(String(r));case u.q3G.RESOURCE_URL:if((0,u.qzn)(r,"ResourceURL"))return(0,u.z3N)(r);throw new Error(`unsafe value used in a resource URL context (see ${u.JZr})`);default:throw new Error(`Unexpected SecurityContext ${t} (see ${u.JZr})`)}}bypassSecurityTrustHtml(t){return(0,u.JVY)(t)}bypassSecurityTrustStyle(t){return(0,u.L6k)(t)}bypassSecurityTrustScript(t){return(0,u.eBb)(t)}bypassSecurityTrustUrl(t){return(0,u.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,u.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(re))},n.\u0275prov=u.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function wa(n){return new xh(n.get(re))}(u.LFG(u.zs3)),r},providedIn:"root"}),n})();var gr=F(2011),Ji=F(4986),Wr=F(9751),Xt=F(8996),no=F(7669);function mt(...n){const e=(0,no.yG)(n);return(0,Xt.D)(n,e)}var bn=F(2122),Ei=F(8189);function xs(...n){return function Nh(){return(0,Ei.J)(1)}()((0,Xt.D)(n,(0,no.yG)(n)))}var mr=F(4482);function ro(...n){const e=(0,no.yG)(n);return(0,mr.e)((t,r)=>{(e?xs(n,t,e):xs(n,t)).subscribe(r)})}var Un=F(5403);function Ns(){return(0,mr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Un.x)(e,i=>{const o=t;t=i,r&&e.next([o,i]),r=!0}))})}var vt=F(4004);function T(n,e){return(0,mr.e)(function Ea(n,e,t,r,i){return(o,c)=>{let h=t,_=e,y=0;o.subscribe((0,Un.x)(c,I=>{const D=y++;_=h?n(_,I,D):(h=!0,I),r&&c.next(_)},i&&(()=>{h&&c.next(_),c.complete()})))}}(n,e,arguments.length>=2,!0))}var S=F(4671);function x(n,e=S.y){return n=n??U,(0,mr.e)((t,r)=>{let i,o=!0;t.subscribe((0,Un.x)(r,c=>{const h=e(c);(o||!n(i,h))&&(o=!1,i=h,r.next(c))}))})}function U(n,e){return n===e}function Y(n,e){return(0,mr.e)((t,r)=>{let i=0;t.subscribe((0,Un.x)(r,o=>n.call(e,o,i++)&&r.next(o)))})}F(6689);var lt,Me=F(3942),W=F(5861),rt=F(9681),ht=F(4859),Ot=F(1877),O=F(2090),Mi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},An={},Ol=Ol||{},At=Mi||self;function lr(){}function xi(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ca(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var u_="closure_uid_"+(1e9*Math.random()>>>0),Ph=0;function eg(n,e,t){return n.call.apply(n.bind,arguments)}function tg(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Kr(n,e,t){return(Kr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?eg:tg).apply(null,arguments)}function Ia(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function hi(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,o){for(var c=Array(arguments.length-2),h=2;h<arguments.length;h++)c[h-2]=arguments[h];return e.prototype[i].apply(r,c)}}function ba(){this.s=this.s,this.o=this.o}ba.prototype.s=!1,ba.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function Rh(n){Object.prototype.hasOwnProperty.call(n,u_)&&n[u_]||(n[u_]=++Ph)}(this)},ba.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const c_=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function d_(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function h_(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(xi(r)){const i=n.length||0,o=r.length||0;n.length=i+o;for(let c=0;c<o;c++)n[i+c]=r[c]}else n.push(r)}}function Yr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Yr.prototype.h=function(){this.defaultPrevented=!0};var kC=function(){if(!At.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{At.addEventListener("test",lr,e),At.removeEventListener("test",lr,e)}catch{}return n}();function kh(n){return/^[\s\xa0]*$/.test(n)}var ng=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function kl(n,e){return n<e?-1:n>e?1:0}function $c(){var n=At.navigator;return n&&(n=n.userAgent)?n:""}function Rs(n){return-1!=$c().indexOf(n)}function jc(n){return jc[" "](n),n}jc[" "]=lr;var Uh,n,Fh=Rs("Opera"),Su=Rs("Trident")||Rs("MSIE"),f_=Rs("Edge"),Lh=f_||Su,Vh=Rs("Gecko")&&!(-1!=$c().toLowerCase().indexOf("webkit")&&!Rs("Edge"))&&!(Rs("Trident")||Rs("MSIE"))&&!Rs("Edge"),Wv=-1!=$c().toLowerCase().indexOf("webkit")&&!Rs("Edge");function p_(){var n=At.document;return n?n.documentMode:void 0}e:{var Bh="",Hc=(n=$c(),Vh?/rv:([^\);]+)(\)|;)/.exec(n):f_?/Edge\/([\d\.]+)/.exec(n):Su?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Wv?/WebKit\/(\S+)/.exec(n):Fh?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Hc&&(Bh=Hc?Hc[1]:""),Su){var rg=p_();if(null!=rg&&rg>parseFloat(Bh)){Uh=String(rg);break e}}Uh=Bh}var Ni={};var Qr=At.document&&Su&&(p_()||parseInt(Uh,10))||void 0;function ko(n,e){if(Yr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Vh){e:{try{jc(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:g_[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&ko.X.h.call(this)}}hi(ko,Yr);var g_={2:"touch",3:"pen",4:"mouse"};ko.prototype.h=function(){ko.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Au="closure_listenable_"+(1e6*Math.random()|0),Kv=0;function m_(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++Kv,this.ba=this.ea=!1}function Mu(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function xu(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function __(n){const e={};for(const t in n)e[t]=n[t];return e}const Gc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function y_(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let o=0;o<Gc.length;o++)t=Gc[o],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function zc(n){this.src=n,this.g={},this.h=0}function qc(n,e){var t=e.type;if(t in n.g){var o,r=n.g[t],i=c_(r,e);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(Mu(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Fl(n,e,t,r){for(var i=0;i<n.length;++i){var o=n[i];if(!o.ba&&o.listener==e&&o.capture==!!t&&o.ha==r)return i}return-1}zc.prototype.add=function(n,e,t,r,i){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var c=Fl(n,e,r,i);return-1<c?(e=n[c],t||(e.ea=!1)):((e=new m_(e,this.src,o,!!r,i)).ea=t,n.push(e)),e};var sg="closure_lm_"+(1e6*Math.random()|0),Nu={};function Hh(n,e,t,r,i){if(r&&r.once)return Zc(n,e,t,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Hh(n,e[o],t,r,i);return null}return t=qh(t),n&&n[Au]?n.N(e,t,Ca(r)?!!r.capture:!!r,i):og(n,e,t,!1,r,i)}function og(n,e,t,r,i,o){if(!e)throw Error("Invalid event type");var c=Ca(i)?!!i.capture:!!i,h=ag(n);if(h||(n[sg]=h=new zc(n)),(t=h.add(e,t,r,c,o)).proxy)return t;if(r=function Ru(){const e=v_;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)kC||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(zh(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Zc(n,e,t,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Zc(n,e[o],t,r,i);return null}return t=qh(t),n&&n[Au]?n.O(e,t,Ca(r)?!!r.capture:!!r,i):og(n,e,t,!0,r,i)}function Gh(n,e,t,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Gh(n,e[o],t,r,i);else r=Ca(r)?!!r.capture:!!r,t=qh(t),n&&n[Au]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Fl(o=n.g[e],t,r,i))&&(Mu(o[t]),Array.prototype.splice.call(o,t,1),0==o.length&&(delete n.g[e],n.h--))):n&&(n=ag(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Fl(e,t,r,i)),(t=-1<n?e[n]:null)&&Ta(t))}function Ta(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Au])qc(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(zh(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=ag(e))?(qc(t,n),0==t.h&&(t.src=null,e[sg]=null)):Mu(n)}}}function zh(n){return n in Nu?Nu[n]:Nu[n]="on"+n}function v_(n,e){if(n.ba)n=!0;else{e=new ko(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Ta(n),n=t.call(r,e)}return n}function ag(n){return(n=n[sg])instanceof zc?n:null}var Wc="__closure_events_fn_"+(1e9*Math.random()>>>0);function qh(n){return"function"==typeof n?n:(n[Wc]||(n[Wc]=function(e){return n.handleEvent(e)}),n[Wc])}function Ur(){ba.call(this),this.i=new zc(this),this.P=this,this.I=null}function fi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Yr(e,n);else if(e instanceof Yr)e.target=e.target||n;else{var i=e;y_(e=new Yr(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var c=e.g=t[o];i=so(c,r,!0,e)&&i}if(i=so(c=e.g=n,r,!0,e)&&i,i=so(c,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=so(c=e.g=t[o],r,!1,e)&&i}function so(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var c=e[o];if(c&&!c.ba&&c.capture==t){var h=c.listener,_=c.ha||c.src;c.ea&&qc(n.i,c),i=!1!==h.call(_,r)&&i}}return i&&!r.defaultPrevented}hi(Ur,ba),Ur.prototype[Au]=!0,Ur.prototype.removeEventListener=function(n,e,t,r){Gh(this,n,e,t,r)},Ur.prototype.M=function(){if(Ur.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Mu(t[r]);delete n.g[e],n.h--}}this.I=null},Ur.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ur.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var lg=At.JSON.stringify;function Yv(){var n=oo;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Kc,Wh=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Kh,n=>n.reset());class Kh{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function ug(n){At.setTimeout(()=>{throw n},0)}function w_(n,e){Kc||function E_(){var n=At.Promise.resolve(void 0);Kc=function(){n.then(C_)}}(),Yh||(Kc(),Yh=!0),oo.add(n,e)}var Yh=!1,oo=new class Zh{constructor(){this.h=this.g=null}add(e,t){const r=Wh.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function C_(){for(var n;n=Yv();){try{n.h.call(n.g)}catch(t){ug(t)}var e=Wh;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Yh=!1}function Yc(n,e){Ur.call(this),this.h=n||1,this.g=e||At,this.j=Kr(this.lb,this),this.l=Date.now()}function cg(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function I_(n,e,t){if("function"==typeof n)t&&(n=Kr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Kr(n.handleEvent,n)}return 2147483647<Number(e)?-1:At.setTimeout(n,e||0)}function Qc(n){n.g=I_(()=>{n.g=null,n.i&&(n.i=!1,Qc(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}hi(Yc,Ur),(lt=Yc.prototype).ca=!1,lt.R=null,lt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),fi(this,"tick"),this.ca&&(cg(this),this.start()))}},lt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},lt.M=function(){Yc.X.M.call(this),cg(this),delete this.g};class b_ extends ba{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Qc(this)}M(){super.M(),this.g&&(At.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Da(n){ba.call(this),this.h=n,this.g={}}hi(Da,ba);var dg=[];function hg(n,e,t,r){Array.isArray(t)||(t&&(dg[0]=t.toString()),t=dg);for(var i=0;i<t.length;i++){var o=Hh(e,t[i],r||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function Pu(n){xu(n.g,function(e,t){this.g.hasOwnProperty(t)&&Ta(e)},n),n.g={}}function Ll(){this.g=!0}function ao(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function pg(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var c=1;c<i.length;c++)i[c]=""}}}return lg(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Da.prototype.M=function(){Da.X.M.call(this),Pu(this)},Da.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ll.prototype.Aa=function(){this.g=!1},Ll.prototype.info=function(){};var Fo={},Vl=null;function Xh(){return Vl=Vl||new Ur}function gg(n){Yr.call(this,Fo.Pa,n)}function Jc(n){const e=Xh();fi(e,new gg(e))}function T_(n,e){Yr.call(this,Fo.STAT_EVENT,n),this.stat=e}function Tr(n){const e=Xh();fi(e,new T_(e,n))}function mg(n,e){Yr.call(this,Fo.Qa,n),this.size=e}function Ul(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return At.setTimeout(function(){n()},e)}Fo.Pa="serverreachability",hi(gg,Yr),Fo.STAT_EVENT="statevent",hi(T_,Yr),Fo.Qa="timingevent",hi(mg,Yr);var Bl={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},ef={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Sa(){}function _g(){}Sa.prototype.h=null;var yg,Ou={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Xc(){Yr.call(this,"d")}function ku(){Yr.call(this,"c")}function $l(){}function Aa(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Da(this),this.O=Fu,this.T=new Yc(n=Lh?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new pi}function pi(){this.i=null,this.g="",this.h=!1}hi(Xc,Yr),hi(ku,Yr),hi($l,Sa),$l.prototype.g=function(){return new XMLHttpRequest},$l.prototype.i=function(){return{}},yg=new $l;var Fu=45e3,ed={},td={};function Ps(n,e,t){n.K=1,n.v=id(lo(e)),n.s=t,n.P=!0,tf(n,null)}function tf(n,e){n.F=Date.now(),ds(n),n.A=lo(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),st(t.i,"t",r),n.C=0,t=n.l.H,n.h=new pi,n.g=qC(n.l,t?e:null,!n.s),0<n.N&&(n.L=new b_(Kr(n.La,n,n.g),n.N)),hg(n.S,n.g,"readystatechange",n.ib),e=n.H?__(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Jc(),function Qh(n,e,t,r,i,o){n.info(function(){if(n.g)if(o)for(var c="",h=o.split("&"),_=0;_<h.length;_++){var y=h[_].split("=");if(1<y.length){var I=y[0];y=y[1];var D=I.split("_");c=2<=D.length&&"type"==D[1]?c+(I+"=")+y+"&":c+(I+"=redacted&")}}else c=null;else c=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.U,n.s)}function S_(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function vg(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=Qv(n,t),i==td){4==e&&(n.o=4,Tr(14),r=!1),ao(n.j,n.m,null,"[Incomplete Response]");break}if(i==ed){n.o=4,Tr(15),ao(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}ao(n.j,n.m,i,null),nf(n,i)}S_(n)&&i!=td&&i!=ed&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Tr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),sw(e),e.K=!0,Tr(11))):(ao(n.j,n.m,t,"[Invalid Chunked Response]"),jl(n),nd(n))}function Qv(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?td:(t=Number(e.substring(t,r)),isNaN(t)?ed:(r+=1)+t>e.length?td:(e=e.substr(r,t),n.C=r+t,e))}function ds(n){n.V=Date.now()+n.O,Os(n,n.O)}function Os(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Ul(Kr(n.gb,n),e)}function Lo(n){n.B&&(At.clearTimeout(n.B),n.B=null)}function nd(n){0==n.l.G||n.I||zC(n.l,n)}function jl(n){Lo(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,cg(n.T),Pu(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function nf(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||sd(t.h,n)))if(!n.J&&sd(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;hf(t),dd(t)}iw(t),Tr(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=Ul(Kr(t.cb,t),6e3));if(1>=qn(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else fd(t,11)}else if((n.J||t.g==n)&&hf(t),!kh(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.T=y[0],y=y[1],2==t.G)if("c"==y[0]){t.I=y[1],t.ka=y[2];const I=y[3];null!=I&&(t.ma=I,t.j.info("VER="+t.ma));const D=y[4];null!=D&&(t.Ca=D,t.j.info("SVER="+t.Ca));const R=y[5];null!=R&&"number"==typeof R&&0<R&&(t.J=r=1.5*R,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const L=n.g;if(L){const $=L.g?L.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($){var o=r.h;o.g||-1==$.indexOf("spdy")&&-1==$.indexOf("quic")&&-1==$.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(od(o,o.h),o.h=null))}if(r.D){const X=L.g?L.g.getResponseHeader("X-HTTP-Session-Id"):null;X&&(r.za=X,En(r.F,r.D,X))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var c=n;if((r=t).sa=PS(r,r.H?r.ka:null,r.V),c.J){ad(r.h,c);var h=c,_=r.J;_&&h.setTimeout(_),h.B&&(Lo(h),ds(h)),r.g=c}else hd(r);0<t.i.length&&Tg(t)}else"stop"!=y[0]&&"close"!=y[0]||fd(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?fd(t,7):bg(t):"noop"!=y[0]&&t.l&&t.l.wa(y),t.A=0)}Jc()}catch{}}function rf(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(xi(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function wg(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(xi(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Ri(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(xi(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],t&&t[o],n)}(lt=Aa.prototype).setTimeout=function(n){this.O=n},lt.ib=function(n){n=n.target;const e=this.L;e&&3==Ma(n)?e.l():this.La(n)},lt.La=function(n){try{if(n==this.g)e:{const I=Ma(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>I)&&(3!=I||Lh||this.g&&(this.h.h||this.g.fa()||Bu(this.g)))){this.I||4!=I||7==e||Jc(),Lo(this);var t=this.g.aa();this.Y=t;t:if(S_(this)){var r=Bu(this.g);n="";var i=r.length,o=4==Ma(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){jl(this),nd(this);var c="";break t}this.h.i=new At.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.fa();if(this.i=200==t,function Jh(n,e,t,r,i,o,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+o+" "+c})}(this.j,this.u,this.A,this.m,this.U,I,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var h,_=this.g;if((h=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!kh(h)){var y=h;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,Tr(12),jl(this),nd(this);break e}ao(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,nf(this,t)}this.P?(vg(this,I,c),Lh&&this.i&&3==I&&(hg(this.S,this.T,"tick",this.hb),this.T.start())):(ao(this.j,this.m,c,null),nf(this,c)),4==I&&jl(this),this.i&&!this.I&&(4==I?zC(this.l,this):(this.i=!1,ds(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Tr(12)):(this.o=0,Tr(13)),jl(this),nd(this)}}}catch{}},lt.hb=function(){if(this.g){var n=Ma(this.g),e=this.g.fa();this.C<e.length&&(Lo(this),vg(this,n,e),this.i&&4!=n&&ds(this))}},lt.cancel=function(){this.I=!0,jl(this)},lt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function fg(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Jc(),Tr(17)),jl(this),this.o=2,nd(this)):Os(this,this.V-n)};var Eg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ks(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof ks){this.h=void 0!==e?e:n.h,rd(this,n.j),this.s=n.s,this.g=n.g,Hl(this,n.m),this.l=n.l,e=n.i;var t=new H;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),hs(this,t),this.o=n.o}else n&&(t=String(n).match(Eg))?(this.h=!!e,rd(this,t[1]||"",!0),this.s=Lu(t[2]||""),this.g=Lu(t[3]||"",!0),Hl(this,t[4]),this.l=Lu(t[5]||"",!0),hs(this,t[6]||"",!0),this.o=Lu(t[7]||"")):(this.h=!!e,this.i=new H(null,this.h))}function lo(n){return new ks(n)}function rd(n,e,t){n.j=t?Lu(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Hl(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function hs(n,e,t){e instanceof H?(n.i=e,function Bn(n,e){e&&!n.j&&(J(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(xe(this,r),st(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Vu(e,A)),n.i=new H(e,n.h))}function En(n,e,t){n.i.set(e,t)}function id(n){return En(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Lu(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Vu(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,v),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function v(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}ks.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Vu(e,p,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Vu(e,p,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Vu(t,"/"==t.charAt(0)?E:g,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Vu(t,N)),n.join("")};var p=/[#\/\?@]/g,g=/[#\?:]/g,E=/[#\?]/g,A=/[#\?@]/g,N=/#/g;function H(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function J(n){n.g||(n.g=new Map,n.h=0,n.i&&function Vo(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var o=n[t].substring(0,r);i=n[t].substring(r+1)}else o=n[t];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function xe(n,e){J(n),e=We(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Ve(n,e){return J(n),e=We(n,e),n.g.has(e)}function st(n,e,t){xe(n,e),0<t.length&&(n.i=null,n.g.set(We(n,e),d_(t)),n.h+=t.length)}function We(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Uu(n){this.l=n||sf,n=At.PerformanceNavigationTiming?0<(n=At.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(At.g&&At.g.Ga&&At.g.Ga()&&At.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(lt=H.prototype).add=function(n,e){J(this),this.i=null,n=We(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},lt.forEach=function(n,e){J(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},lt.oa=function(){J(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let o=0;o<i.length;o++)t.push(e[r])}return t},lt.W=function(n){J(this);let e=[];if("string"==typeof n)Ve(this,n)&&(e=e.concat(this.g.get(We(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},lt.set=function(n,e){return J(this),this.i=null,Ve(this,n=We(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},lt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},lt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const o=encodeURIComponent(String(r)),c=this.W(r);for(r=0;r<c.length;r++){var i=o;""!==c[r]&&(i+="="+encodeURIComponent(String(c[r]))),n.push(i)}}return this.i=n.join("&")};var sf=10;function af(n){return!!n.h||!!n.g&&n.g.size>=n.j}function qn(n){return n.h?1:n.g?n.g.size:0}function sd(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function od(n,e){n.g?n.g.add(e):n.h=e}function ad(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function lf(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return d_(n.i)}function ld(){}function A_(){this.g=new ld}function Jv(n,e,t){const r=t||"";try{rf(n,function(i,o){let c=i;Ca(i)&&(c=lg(i)),e.push(r+o+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function ud(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function M_(n){this.l=n.ac||null,this.j=n.jb||!1}function Xv(n,e){Ur.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=cd,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Uu.prototype.cancel=function(){if(this.i=lf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},ld.prototype.stringify=function(n){return At.JSON.stringify(n,void 0)},ld.prototype.parse=function(n){return At.JSON.parse(n,void 0)},hi(M_,Sa),M_.prototype.g=function(){return new Xv(this.l,this.j)},M_.prototype.i=function(n){return function(){return n}}({}),hi(Xv,Ur);var cd=0;function x_(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function uf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,cf(n)}function cf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(lt=Xv.prototype).open=function(n,e){if(this.readyState!=cd)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,cf(this)},lt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||At).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},lt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,uf(this)),this.readyState=cd},lt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,cf(this)),this.g&&(this.readyState=3,cf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof At.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;x_(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},lt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?uf(this):cf(this),3==this.readyState&&x_(this)}},lt.Va=function(n){this.g&&(this.response=this.responseText=n,uf(this))},lt.Ua=function(n){this.g&&(this.response=n,uf(this))},lt.ga=function(){this.g&&uf(this)},lt.setRequestHeader=function(n,e){this.v.append(n,e)},lt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},lt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Xv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var FC=At.JSON.parse;function Dr(n){Ur.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=LC,this.K=this.L=!1}hi(Dr,Ur);var LC="",VC=/^https?$/i,UC=["POST","PUT"];function RS(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,N_(n),df(n)}function N_(n){n.D||(n.D=!0,fi(n,"complete"),fi(n,"error"))}function BC(n){if(n.h&&typeof Ol<"u"&&(!n.C[1]||4!=Ma(n)||2!=n.aa()))if(n.v&&4==Ma(n))I_(n.Ha,0,n);else if(fi(n,"readystatechange"),4==Ma(n)){n.h=!1;try{const h=n.aa();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(Eg)[1]||null;if(!i&&At.self&&At.self.location){var o=At.self.location.protocol;i=o.substr(0,o.length-1)}r=!VC.test(i?i.toLowerCase():"")}t=r}if(t)fi(n,"complete"),fi(n,"success");else{n.m=6;try{var c=2<Ma(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.aa()+"]",N_(n)}}finally{df(n)}}}function df(n,e){if(n.g){tw(n);const t=n.g,r=n.C[0]?lr:null;n.g=null,n.C=null,e||fi(n,"ready");try{t.onreadystatechange=r}catch{}}}function tw(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(At.clearTimeout(n.A),n.A=null)}function Ma(n){return n.g?n.g.readyState:0}function Bu(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case LC:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function $C(n){let e="";return xu(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Ig(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=$C(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):En(n,e,t))}function $u(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function jC(n){this.Ca=0,this.i=[],this.j=new Ll,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=$u("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=$u("baseRetryDelayMs",5e3,n),this.bb=$u("retryDelaySeedMs",1e4,n),this.$a=$u("forwardChannelMaxRetries",2,n),this.ta=$u("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new Uu(n&&n.concurrentRequestLimit),this.Fa=new A_,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function bg(n){if(ju(n),3==n.G){var e=n.U++,t=lo(n.F);En(t,"SID",n.I),En(t,"RID",e),En(t,"TYPE","terminate"),Dg(n,t),(e=new Aa(n,n.j,e,void 0)).K=2,e.v=id(lo(t)),t=!1,At.navigator&&At.navigator.sendBeacon&&(t=At.navigator.sendBeacon(e.v.toString(),"")),!t&&At.Image&&((new Image).src=e.v,t=!0),t||(e.g=qC(e.l,null),e.g.da(e.v)),e.F=Date.now(),ds(e)}aw(n)}function dd(n){n.g&&(sw(n),n.g.cancel(),n.g=null)}function ju(n){dd(n),n.u&&(At.clearTimeout(n.u),n.u=null),hf(n),n.h.cancel(),n.m&&("number"==typeof n.m&&At.clearTimeout(n.m),n.m=null)}function Tg(n){af(n.h)||n.m||(n.m=!0,w_(n.Ja,n),n.C=0)}function HC(n,e){var t;t=e?e.m:n.U++;const r=lo(n.F);En(r,"SID",n.I),En(r,"RID",t),En(r,"AID",n.T),Dg(n,r),n.o&&n.s&&Ig(r,n.o,n.s),t=new Aa(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=rw(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),od(n.h,t),Ps(t,r,e)}function Dg(n,e){n.ia&&xu(n.ia,function(t,r){En(e,r,t)}),n.l&&rf({},function(t,r){En(e,r,t)})}function rw(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Kr(n.l.Ra,n.l,n):null;e:{var i=n.i;let o=-1;for(;;){const c=["count="+t];-1==o?0<t?(o=i[0].h,c.push("ofs="+o)):o=0:c.push("ofs="+o);let h=!0;for(let _=0;_<t;_++){let y=i[_].h;const I=i[_].g;if(y-=o,0>y)o=Math.max(0,i[_].h-100),h=!1;else try{Jv(I,c,"req"+y+"_")}catch{r&&r(I)}}if(h){r=c.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function hd(n){n.g||n.u||(n.Z=1,w_(n.Ia,n),n.A=0)}function iw(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Ul(Kr(n.Ia,n),ow(n,n.A)),n.A++,0))}function sw(n){null!=n.B&&(At.clearTimeout(n.B),n.B=null)}function GC(n){n.g=new Aa(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=lo(n.sa);En(e,"RID","rpc"),En(e,"SID",n.I),En(e,"CI",n.L?"0":"1"),En(e,"AID",n.T),En(e,"TYPE","xmlhttp"),Dg(n,e),n.o&&n.s&&Ig(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=id(lo(e)),t.s=null,t.P=!0,tf(t,n)}function hf(n){null!=n.v&&(At.clearTimeout(n.v),n.v=null)}function zC(n,e){var t=null;if(n.g==e){hf(n),sw(n),n.g=null;var r=2}else{if(!sd(n.h,e))return;t=e.D,ad(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;fi(r=Xh(),new mg(r,t)),Tg(n)}else hd(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function nw(n,e){return!(qn(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Ul(Kr(n.Ja,n,e),ow(n,n.C)),n.C++,0)))}(n,e)||2==r&&iw(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:fd(n,5);break;case 4:fd(n,10);break;case 3:fd(n,6);break;default:fd(n,2)}}function ow(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function fd(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Kr(n.kb,n);t||(t=new ks("//www.google.com/images/cleardot.gif"),At.location&&"http"==At.location.protocol||rd(t,"https"),id(t)),function Cg(n,e){const t=new Ll;if(At.Image){const r=new Image;r.onload=Ia(ud,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Ia(ud,t,r,"TestLoadImage: error",!1,e),r.onabort=Ia(ud,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ia(ud,t,r,"TestLoadImage: timeout",!1,e),At.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Tr(2);n.G=0,n.l&&n.l.va(e),aw(n),ju(n)}function aw(n){if(n.G=0,n.la=[],n.l){const e=lf(n.h);(0!=e.length||0!=n.i.length)&&(h_(n.la,e),h_(n.la,n.i),n.h.i.length=0,d_(n.i),n.i.length=0),n.l.ua()}}function PS(n,e,t){var r=t instanceof ks?lo(t):new ks(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Hl(r,r.m);else{var i=At.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new ks(null,void 0);r&&rd(o,r),e&&(o.g=e),i&&Hl(o,i),t&&(o.l=t),r=o}return e=n.za,(t=n.D)&&e&&En(r,t,e),En(r,"VER",n.ma),Dg(n,r),r}function qC(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Dr(t&&n.Da&&!n.ra?new M_({jb:!0}):n.ra)).Ka(n.H),e}function ff(){}function R_(){if(Su&&!(10<=Number(Qr)))throw Error("Environmental error: no available transport.")}function gi(n,e){Ur.call(this),this.g=new jC(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!kh(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!kh(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new pd(this)}function pf(n){Xc.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function ZC(){ku.call(this),this.status=1}function pd(n){this.g=n}(lt=Dr.prototype).Ka=function(n){this.L=n},lt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():yg.g(),this.C=function D_(n){return n.h||(n.h=n.i())}(this.u?this.u:yg),this.g.onreadystatechange=Kr(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(o){return void RS(this,o)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const o of r.keys())t.set(o,r.get(o))}r=Array.from(t.keys()).find(o=>"content-type"==o.toLowerCase()),i=At.FormData&&n instanceof At.FormData,!(0<=c_(UC,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,c]of t)this.g.setRequestHeader(o,c);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{tw(this),0<this.B&&((this.K=function ew(n){return Su&&function ig(){return function io(n){var e=Ni;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=ng(String(Uh)).split("."),t=ng("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",o=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==i[0].length&&0==o[0].length)break;n=kl(0==i[1].length?0:parseInt(i[1],10),0==o[1].length?0:parseInt(o[1],10))||kl(0==i[2].length,0==o[2].length)||kl(i[2],o[2]),i=i[3],o=o[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Kr(this.qa,this)):this.A=I_(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){RS(this,o)}},lt.qa=function(){typeof Ol<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,fi(this,"timeout"),this.abort(8))},lt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,fi(this,"complete"),fi(this,"abort"),df(this))},lt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),df(this,!0)),Dr.X.M.call(this)},lt.Ha=function(){this.s||(this.F||this.v||this.l?BC(this):this.fb())},lt.fb=function(){BC(this)},lt.aa=function(){try{return 2<Ma(this)?this.g.status:-1}catch{return-1}},lt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},lt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),FC(e)}},lt.Ea=function(){return this.m},lt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(lt=jC.prototype).ma=8,lt.G=1,lt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new Aa(this,this.j,n,void 0);let o=this.s;if(this.S&&(o?(o=__(o),y_(o,this.S)):o=this.S),null!==this.o||this.N||(i.H=o,o=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=rw(this,i,e),En(t=lo(this.F),"RID",n),En(t,"CVER",22),this.D&&En(t,"X-HTTP-Session-Id",this.D),Dg(this,t),o&&(this.N?e="headers="+encodeURIComponent(String($C(o)))+"&"+e:this.o&&Ig(t,this.o,o)),od(this.h,i),this.Ya&&En(t,"TYPE","init"),this.O?(En(t,"$req",e),En(t,"SID","null"),i.Z=!0,Ps(i,t,null)):Ps(i,t,e),this.G=2}}else 3==this.G&&(n?HC(this,n):0==this.i.length||af(this.h)||HC(this))},lt.Ia=function(){if(this.u=null,GC(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Ul(Kr(this.eb,this),n)}},lt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Tr(10),dd(this),GC(this))},lt.cb=function(){null!=this.v&&(this.v=null,dd(this),iw(this),Tr(19))},lt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Tr(2)):(this.j.info("Failed to ping google.com"),Tr(1))},(lt=ff.prototype).xa=function(){},lt.wa=function(){},lt.va=function(){},lt.ua=function(){},lt.Ra=function(){},R_.prototype.g=function(n,e){return new gi(n,e)},hi(gi,Ur),gi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Tr(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=PS(n,null,n.V),Tg(n)},gi.prototype.close=function(){bg(this.g)},gi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=lg(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Tg(e)},gi.prototype.M=function(){this.g.l=null,delete this.j,bg(this.g),delete this.g,gi.X.M.call(this)},hi(pf,Xc),hi(ZC,ku),hi(pd,ff),pd.prototype.xa=function(){fi(this.g,"a")},pd.prototype.wa=function(n){fi(this.g,new pf(n))},pd.prototype.va=function(n){fi(this.g,new ZC)},pd.prototype.ua=function(){fi(this.g,"b")},R_.prototype.createWebChannel=R_.prototype.g,gi.prototype.send=gi.prototype.u,gi.prototype.open=gi.prototype.m,gi.prototype.close=gi.prototype.close,Bl.NO_ERROR=0,Bl.TIMEOUT=8,Bl.HTTP_ERROR=6,ef.COMPLETE="complete",_g.EventType=Ou,Ou.OPEN="a",Ou.CLOSE="b",Ou.ERROR="c",Ou.MESSAGE="d",Ur.prototype.listen=Ur.prototype.N,Dr.prototype.listenOnce=Dr.prototype.O,Dr.prototype.getLastError=Dr.prototype.Oa,Dr.prototype.getLastErrorCode=Dr.prototype.Ea,Dr.prototype.getStatus=Dr.prototype.aa,Dr.prototype.getResponseJson=Dr.prototype.Sa,Dr.prototype.getResponseText=Dr.prototype.fa,Dr.prototype.send=Dr.prototype.da,Dr.prototype.setWithCredentials=Dr.prototype.Ka;var OS=An.createWebChannelTransport=function(){return new R_},kS=An.getStatEventTarget=function(){return Xh()},lw=An.ErrorCode=Bl,WC=An.EventType=ef,KC=An.Event=Fo,P_=An.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},uw=An.FetchXmlHttpFactory=M_,O_=An.WebChannel=_g,cw=An.XhrIo=Dr;const gf="@firebase/firestore";class mi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mi.UNAUTHENTICATED=new mi(null),mi.GOOGLE_CREDENTIALS=new mi("google-credentials-uid"),mi.FIRST_PARTY=new mi("first-party-uid"),mi.MOCK_USER=new mi("mock-user");let mf="9.20.0";const Hu=new Ot.Yd("@firebase/firestore");function dw(){return Hu.logLevel}function Oe(n,...e){if(Hu.logLevel<=Ot.in.DEBUG){const t=e.map(Uo);Hu.debug(`Firestore (${mf}): ${n}`,...t)}}function Sr(n,...e){if(Hu.logLevel<=Ot.in.ERROR){const t=e.map(Uo);Hu.error(`Firestore (${mf}): ${n}`,...t)}}function Xi(n,...e){if(Hu.logLevel<=Ot.in.WARN){const t=e.map(Uo);Hu.warn(`Firestore (${mf}): ${n}`,...t)}}function Uo(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ct(n="Unexpected state"){const e=`FIRESTORE (${mf}) INTERNAL ASSERTION FAILED: `+n;throw Sr(e),new Error(e)}function wt(n,e){n||ct()}function Xe(n,e){return n}const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends O.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Br{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class hw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(mi.UNAUTHENTICATED))}shutdown(){}}class YC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class VS{constructor(e){this.t=e,this.currentUser=mi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const o=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let c=new Br;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Br,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const y=c;e.enqueueRetryable((0,W.Z)(function*(){yield y.promise,yield o(r.currentUser)}))},_=y=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(y=>_(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?_(y):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Br)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(wt("string"==typeof r.accessToken),new hw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return wt(null===e||"string"==typeof e),new mi(e)}}class US{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=mi.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Bo{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new US(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(mi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class QC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JC{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=o=>{null!=o.error&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.T;return this.T=o.token,Oe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.I.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.I.getImmediate({optional:!0});o?i(o):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(wt("string"==typeof t.token),this.T=t.token,new QC(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function BS(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class XC{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=BS(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}}function Bt(n,e){return n<e?-1:n>e?1:0}function gd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function eI(n){return n+"\0"}class tr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ne(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return tr.fromMillis(Date.now())}static fromDate(e){return tr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new tr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Bt(this.nanoseconds,e.nanoseconds):Bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ct{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ct(e)}static min(){return new Ct(new tr(0,0))}static max(){return new Ct(new tr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ft{constructor(e,t,r){void 0===t?t=0:t>e.length&&ct(),void 0===r?r=e.length-t:r>e.length-t&&ct(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Ft.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ft?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),c=t.get(i);if(o<c)return-1;if(o>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class un extends Ft{construct(e,t,r){return new un(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new un(t)}static emptyPath(){return new un([])}}const tI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ur extends Ft{construct(e,t,r){return new ur(e,t,r)}static isValidIdentifier(e){return tI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ur.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ur(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(0===r.length)throw new Ne(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Ne(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Ne(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===h?(c=!c,i++):"."!==h||c?(r+=h,i++):(o(),i++)}if(o(),c)throw new Ne(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ur(t)}static emptyPath(){return new ur([])}}class Ke{constructor(e){this.path=e}static fromPath(e){return new Ke(un.fromString(e))}static fromName(e){return new Ke(un.fromString(e).popFirst(5))}static empty(){return new Ke(un.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===un.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return un.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ke(new un(e.slice()))}}class k_{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function F_(n){return n.fields.find(e=>2===e.kind)}function md(n){return n.fields.filter(e=>2!==e.kind)}k_.UNKNOWN_ID=-1;class L_{constructor(e,t){this.fieldPath=e,this.kind=t}}class V_{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new V_(0,Jr.min())}}function fw(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ct.fromTimestamp(1e9===r?new tr(t+1,0):new tr(t,r));return new Jr(i,Ke.empty(),e)}function pw(n){return new Jr(n.readTime,n.key,-1)}class Jr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Jr(Ct.min(),Ke.empty(),-1)}static max(){return new Jr(Ct.max(),Ke.empty(),-1)}}function gw(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ke.comparator(n.documentKey,e.documentKey),0!==t?t:Bt(n.largestBatchId,e.largestBatchId))}const U_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class B_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Gu(n){return rI.apply(this,arguments)}function rI(){return rI=(0,W.Z)(function*(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==U_)throw n;Oe("LocalStore","Unexpectedly lost primary lease")}),rI.apply(this,arguments)}class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ct(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):le.reject(t)}static resolve(e){return new le((t,r)=>{t(e)})}static reject(e){return new le((t,r)=>{r(e)})}static waitFor(e){return new le((t,r)=>{let i=0,o=0,c=!1;e.forEach(h=>{++i,h.next(()=>{++o,c&&o===i&&t()},_=>r(_))}),c=!0,o===i&&t()})}static or(e){let t=le.resolve(!1);for(const r of e)t=t.next(i=>i?le.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new le((r,i)=>{const o=e.length,c=new Array(o);let h=0;for(let _=0;_<o;_++){const y=_;t(e[y]).next(I=>{c[y]=I,++h,h===o&&r(c)},I=>i(I))}})}static doWhile(e,t){return new le((r,i)=>{const o=()=>{!0===e()?t().next(()=>{o()},i):r()};o()})}}class mw{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.R=new Br,this.transaction.oncomplete=()=>{this.R.resolve()},this.transaction.onabort=()=>{t.error?this.R.reject(new $_(e,t.error)):this.R.resolve()},this.transaction.onerror=r=>{const i=yf(r.target.error);this.R.reject(new $_(e,i))}}static open(e,t,r,i){try{return new mw(t,e.transaction(i,r))}catch(o){throw new $_(t,o)}}get v(){return this.R.promise}abort(e){e&&this.R.reject(e),this.aborted||(Oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new _f(t)}}class $o{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===$o.S((0,O.z$)())&&Sr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Oe("SimpleDb","Removing database:",e),_d(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,O.hl)())return!1;if($o.C())return!0;const e=(0,O.z$)(),t=$o.S(e),r=0<t&&t<10,i=$o.N(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static O(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,W.Z)(function*(){return t.db||(Oe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=c=>{r(c.target.result)},o.onblocked=()=>{i(new $_(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=c=>{const h=c.target.error;i("VersionError"===h.name?new Ne(ue.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Ne(ue.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new $_(e,h))},o.onupgradeneeded=c=>{Oe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.V.M(c.target.result,o.transaction,c.oldVersion,t.version).next(()=>{Oe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var o=this;return(0,W.Z)(function*(){const c="readonly"===t;let h=0;for(;;){++h;try{o.db=yield o.$(e);const _=mw.open(o.db,e,c?"readonly":"readwrite",r),y=i(_).next(I=>(_.P(),I)).catch(I=>(_.abort(I),le.reject(I))).toPromise();return y.catch(()=>{}),yield _.v,y}catch(_){const y=_,I="FirebaseError"!==y.name&&h<3;if(Oe("SimpleDb","Transaction failed with error:",y.message,"Retrying:",I),o.close(),!I)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class iI{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return _d(this.L.delete())}}class $_ extends Ne{constructor(e,t){super(ue.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function zu(n){return"IndexedDbTransactionError"===n.name}class _f{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Oe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),_d(r)}add(e){return Oe("SimpleDb","ADD",this.store.name,e,e),_d(this.store.add(e))}get(e){return _d(this.store.get(e)).next(t=>(void 0===t&&(t=null),Oe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Oe("SimpleDb","DELETE",this.store.name,e),_d(this.store.delete(e))}count(){return Oe("SimpleDb","COUNT",this.store.name),_d(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),o=[];return this.W(i,(c,h)=>{o.push(h)}).next(()=>o)}{const i=this.store.getAll(r.range);return new le((o,c)=>{i.onerror=h=>{c(h.target.error)},i.onsuccess=h=>{o(h.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new le((i,o)=>{r.onerror=c=>{o(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}J(e,t){Oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(o,c,h)=>h.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}X(e){const t=this.cursor({});return new le((r,i)=>{t.onerror=o=>{const c=yf(o.target.error);i(c)},t.onsuccess=o=>{const c=o.target.result;c?e(c.primaryKey,c.value).next(h=>{h?c.continue():r()}):r()}})}W(e,t){const r=[];return new le((i,o)=>{e.onerror=c=>{o(c.target.error)},e.onsuccess=c=>{const h=c.target.result;if(!h)return void i();const _=new iI(h),y=t(h.primaryKey,h.value,_);if(y instanceof le){const I=y.catch(D=>(_.done(),le.reject(D)));r.push(I)}_.isDone?i():null===_.K?h.continue():h.continue(_.K)}}).next(()=>le.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function _d(n){return new le((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=yf(r.target.error);t(i)}})}let _w=!1;function yf(n){const e=$o.S((0,O.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return _w||(_w=!0,setTimeout(()=>{throw r},0)),r}}return n}class jS{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Oe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,W.Z)(function*(){t.task=null;try{Oe("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){zu(r)?Oe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Gu(r)}yield t.et(6e4)}))}}class sI{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,W.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,o=!0;return le.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return Oe("IndexBackiller",`Processing collection: ${c}`),this.it(e,c,i).next(h=>{i-=h,r.add(c)});o=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{const c=o.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.rt(i,o)).next(h=>(Oe("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>c.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,o)=>{const c=pw(o);gw(c,r)>0&&(r=c)}),new Jr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Fs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Sg(n){return null==n}function Ag(n){return 0===n&&1/n==-1/0}function oI(n){return"number"==typeof n&&Number.isInteger(n)&&!Ag(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function es(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=lI(e)),e=aI(n.get(t),e);return lI(e)}function aI(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=o}}return t}function lI(n){return n+"\x01\x01"}function jo(n){const e=n.length;if(wt(e>=2),2===e)return wt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),un.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const c=n.indexOf("\x01",o);switch((c<0||c>t)&&ct(),n.charAt(c+1)){case"\x01":const h=n.substring(o,c);let _;0===i.length?_=h:(i+=h,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(o,c),i+="\0";break;case"\x11":i+=n.substring(o,c+1);break;default:ct()}o=c+2}return new un(r)}const yw=["userId","batchId"];function vf(n,e){return[n,es(e)]}function HS(n,e,t){return[n,es(e),t]}const vw={},GS=["prefixPath","collectionGroup","readTime","documentId"],GR=["prefixPath","collectionGroup","documentId"],wf=["collectionGroup","readTime","prefixPath","documentId"],uI=["canonicalId","targetId"],zS=["targetId","path"],cI=["path","targetId"],qS=["collectionId","parent"],ZS=["indexId","uid"],j_=["uid","sequenceNumber"],Ef=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ww=["indexId","uid","orderedDocumentKey"],Mg=["userId","collectionPath","documentId"],Ew=["userId","collectionPath","largestBatchId"],H_=["userId","collectionGroup","largestBatchId"],Cw=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Iw=[...Cw,"documentOverlays"],G_=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],z_=G_,dI=[...z_,"indexConfiguration","indexState","indexEntries"];class xg extends B_{constructor(e,t){super(),this.at=e,this.currentSequenceNumber=t}}function _i(n,e){const t=Xe(n);return $o.O(t.at,e)}function hI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function qu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function fI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class cr{constructor(e,t){this.comparator=e,this.root=t||Ci.EMPTY}insert(e,t){return new cr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ci.BLACK,null,null))}remove(e){return new cr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ci.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ng(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ng(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ng(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ng(this.root,e,this.comparator,!0)}}class Ng{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ci{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??Ci.RED,this.left=i??Ci.EMPTY,this.right=o??Ci.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new Ci(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===o?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ci.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ci.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ci.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ci.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ct();const e=this.left.check();if(e!==this.right.check())throw ct();return e+(this.isRed()?0:1)}}Ci.EMPTY=null,Ci.RED=!0,Ci.BLACK=!1,Ci.EMPTY=new class{constructor(){this.size=0}get key(){throw ct()}get value(){throw ct()}get color(){throw ct()}get left(){throw ct()}get right(){throw ct()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Ci(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Mn{constructor(e){this.comparator=e,this.data=new cr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fs(this.data.getIterator())}getIteratorFrom(e){return new fs(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Mn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Mn(this.comparator);return t.data=e,t}}class fs{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Cf(n){return n.hasNext()?n.getNext():void 0}class ps{constructor(e){this.fields=e,e.sort(ur.comparator)}static empty(){return new ps([])}unionWith(e){let t=new Mn(ur.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ps(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return gd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class zR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class $r{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new zR("Invalid base64 string: "+i):i}}(e);return new $r(t)}static fromUint8Array(e){const t=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new $r(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$r.EMPTY_BYTE_STRING=new $r("");const WS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zu(n){if(wt(!!n),"string"==typeof n){let e=0;const t=WS.exec(n);if(wt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_r(n.seconds),nanos:_r(n.nanos)}}function _r(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Wu(n){return"string"==typeof n?$r.fromBase64String(n):$r.fromUint8Array(n)}function Tw(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function pI(n){const e=n.mapValue.fields.__previous_value__;return Tw(e)?pI(e):e}function yd(n){const e=Zu(n.mapValue.fields.__local_write_time__.timestampValue);return new tr(e.seconds,e.nanos)}class KS{constructor(e,t,r,i,o,c,h,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.useFetchStreams=_}}class Ku{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ku("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ku&&e.projectId===this.projectId&&e.database===this.database}}const Yu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},q_={nullValue:"NULL_VALUE"};function vd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Tw(n)?4:Rg(n)?9007199254740991:10:ct()}function Xr(n,e){if(n===e)return!0;const t=vd(n);if(t!==vd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return yd(n).isEqual(yd(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Zu(r.timestampValue),c=Zu(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Wu(n.bytesValue).isEqual(Wu(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return _r(r.geoPointValue.latitude)===_r(i.geoPointValue.latitude)&&_r(r.geoPointValue.longitude)===_r(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return _r(r.integerValue)===_r(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=_r(r.doubleValue),c=_r(i.doubleValue);return o===c?Ag(o)===Ag(c):isNaN(o)&&isNaN(c)}return!1}(n,e);case 9:return gd(n.arrayValue.values||[],e.arrayValue.values||[],Xr);case 10:return function(r,i){const o=r.mapValue.fields||{},c=i.mapValue.fields||{};if(hI(o)!==hI(c))return!1;for(const h in o)if(o.hasOwnProperty(h)&&(void 0===c[h]||!Xr(o[h],c[h])))return!1;return!0}(n,e);default:return ct()}var i}function wd(n,e){return void 0!==(n.values||[]).find(t=>Xr(t,e))}function Qu(n,e){if(n===e)return 0;const t=vd(n),r=vd(e);if(t!==r)return Bt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Bt(n.booleanValue,e.booleanValue);case 2:return function(i,o){const c=_r(i.integerValue||i.doubleValue),h=_r(o.integerValue||o.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return gI(n.timestampValue,e.timestampValue);case 4:return gI(yd(n),yd(e));case 5:return Bt(n.stringValue,e.stringValue);case 6:return function(i,o){const c=Wu(i),h=Wu(o);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){const c=i.split("/"),h=o.split("/");for(let _=0;_<c.length&&_<h.length;_++){const y=Bt(c[_],h[_]);if(0!==y)return y}return Bt(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){const c=Bt(_r(i.latitude),_r(o.latitude));return 0!==c?c:Bt(_r(i.longitude),_r(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,o){const c=i.values||[],h=o.values||[];for(let _=0;_<c.length&&_<h.length;++_){const y=Qu(c[_],h[_]);if(y)return y}return Bt(c.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===Yu.mapValue&&o===Yu.mapValue)return 0;if(i===Yu.mapValue)return 1;if(o===Yu.mapValue)return-1;const c=i.fields||{},h=Object.keys(c),_=o.fields||{},y=Object.keys(_);h.sort(),y.sort();for(let I=0;I<h.length&&I<y.length;++I){const D=Bt(h[I],y[I]);if(0!==D)return D;const R=Qu(c[h[I]],_[y[I]]);if(0!==R)return R}return Bt(h.length,y.length)}(n.mapValue,e.mapValue);default:throw ct()}}function gI(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Bt(n,e);const t=Zu(n),r=Zu(e),i=Bt(t.seconds,r.seconds);return 0!==i?i:Bt(t.nanos,r.nanos)}function Ed(n){return Dw(n)}function Dw(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Zu(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Wu(n.bytesValue).toBase64():"referenceValue"in n?Ke.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",o=!0;for(const c of r.values||[])o?o=!1:i+=",",i+=Dw(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let o="{",c=!0;for(const h of i)c?c=!1:o+=",",o+=`${h}:${Dw(r.fields[h])}`;return o+"}"}(n.mapValue):ct();var e}function Cd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Sw(n){return!!n&&"integerValue"in n}function Id(n){return!!n&&"arrayValue"in n}function mI(n){return!!n&&"nullValue"in n}function _I(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function bd(n){return!!n&&"mapValue"in n}function Ju(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return qu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ju(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ju(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Rg(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function qR(n){return"nullValue"in n?q_:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Cd(Ku.empty(),Ke.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ct()}function Aw(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Cd(Ku.empty(),Ke.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Yu:ct()}function YS(n,e){const t=Qu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Mw(n,e){const t=Qu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ei{constructor(e){this.value=e}static empty(){return new ei({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!bd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ju(t)}setAll(e){let t=ur.emptyPath(),r={},i=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=h.popLast()}c?r[h.lastSegment()]=Ju(c):i.push(h.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());bd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Xr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];bd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){qu(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new ei(Ju(this.value))}}function xw(n){const e=[];return qu(n.fields,(t,r)=>{const i=new ur([t]);if(bd(r)){const o=xw(r.mapValue).fields;if(0===o.length)e.push(i);else for(const c of o)e.push(i.child(c))}else e.push(i)}),new ps(e)}class $n{constructor(e,t,r,i,o,c,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=c,this.documentState=h}static newInvalidDocument(e){return new $n(e,0,Ct.min(),Ct.min(),Ct.min(),ei.empty(),0)}static newFoundDocument(e,t,r,i){return new $n(e,1,t,Ct.min(),r,i,0)}static newNoDocument(e,t){return new $n(e,2,t,Ct.min(),Ct.min(),ei.empty(),0)}static newUnknownDocument(e,t){return new $n(e,3,t,Ct.min(),Ct.min(),ei.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ct.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ei.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ei.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ct.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof $n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class xa{constructor(e,t){this.position=e,this.inclusive=t}}function Na(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],c=n.position[i];if(r=o.field.isKeyField()?Ke.comparator(Ke.fromName(c.referenceValue),t.key):Qu(c,t.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function Pg(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Xr(n.position[t],e.position[t]))return!1;return!0}class Gl{constructor(e,t="asc"){this.field=e,this.dir=t}}function Og(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class yI{}class en extends yI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new QS(e,t,r):"array-contains"===t?new TI(e,r):"in"===t?new Z_(e,r):"not-in"===t?new eA(e,r):"array-contains-any"===t?new Rw(e,r):new en(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new JS(e,r):new XS(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Qu(t,this.value)):null!==t&&vd(this.value)===vd(t)&&this.matchesComparison(Qu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ct()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Cn extends yI{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new Cn(e,t)}matches(e){return If(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function If(n){return"and"===n.op}function Nw(n){return"or"===n.op}function Td(n){return vI(n)&&If(n)}function vI(n){for(const e of n.filters)if(e instanceof Cn)return!1;return!0}function wI(n){if(n instanceof en)return n.field.canonicalString()+n.op.toString()+Ed(n.value);if(Td(n))return n.filters.map(e=>wI(e)).join(",");{const e=n.filters.map(t=>wI(t)).join(",");return`${n.op}(${e})`}}function EI(n,e){return n instanceof en?(t=n,(r=e)instanceof en&&t.op===r.op&&t.field.isEqual(r.field)&&Xr(t.value,r.value)):n instanceof Cn?function(t,r){return r instanceof Cn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,o,c)=>i&&EI(o,r.filters[c]),!0)}(n,e):void ct();var t,r}function CI(n,e){const t=n.filters.concat(e);return Cn.create(t,n.op)}function II(n){return n instanceof en?`${(e=n).field.canonicalString()} ${e.op} ${Ed(e.value)}`:n instanceof Cn?function(e){return e.op.toString()+" {"+e.getFilters().map(II).join(" ,")+"}"}(n):"Filter";var e}class QS extends en{constructor(e,t,r){super(e,t,r),this.key=Ke.fromName(r.referenceValue)}matches(e){const t=Ke.comparator(e.key,this.key);return this.matchesComparison(t)}}class JS extends en{constructor(e,t){super(e,"in",t),this.keys=bI(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class XS extends en{constructor(e,t){super(e,"not-in",t),this.keys=bI(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function bI(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ke.fromName(r.referenceValue))}class TI extends en{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Id(t)&&wd(t.arrayValue,this.value)}}class Z_ extends en{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&wd(this.value.arrayValue,t)}}class eA extends en{constructor(e,t){super(e,"not-in",t)}matches(e){if(wd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!wd(this.value.arrayValue,t)}}class Rw extends en{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Id(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>wd(this.value.arrayValue,r))}}class tA{constructor(e,t=null,r=[],i=[],o=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=c,this.endAt=h,this.ft=null}}function Pw(n,e=null,t=[],r=[],i=null,o=null,c=null){return new tA(n,e,t,r,i,o,c)}function Dd(n){const e=Xe(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>wI(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Sg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ed(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ed(r)).join(",")),e.ft=t}return e.ft}function kg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Og(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!EI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Pg(n.startAt,e.startAt)&&Pg(n.endAt,e.endAt)}function W_(n){return Ke.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function K_(n,e){return n.filters.filter(t=>t instanceof en&&t.field.isEqual(e))}function DI(n,e,t){let r=q_,i=!0;for(const o of K_(n,e)){let c=q_,h=!0;switch(o.op){case"<":case"<=":c=qR(o.value);break;case"==":case"in":case">=":c=o.value;break;case">":c=o.value,h=!1;break;case"!=":case"not-in":c=q_}YS({value:r,inclusive:i},{value:c,inclusive:h})<0&&(r=c,i=h)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const c=t.position[o];YS({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function Ow(n,e,t){let r=Yu,i=!0;for(const o of K_(n,e)){let c=Yu,h=!0;switch(o.op){case">=":case">":c=Aw(o.value),h=!1;break;case"==":case"in":case"<=":c=o.value;break;case"<":c=o.value,h=!1;break;case"!=":case"not-in":c=Yu}Mw({value:r,inclusive:i},{value:c,inclusive:h})>0&&(r=c,i=h)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const c=t.position[o];Mw({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class Ra{constructor(e,t=null,r=[],i=[],o=null,c="F",h=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=c,this.startAt=h,this.endAt=_,this.dt=null,this.wt=null}}function SI(n,e,t,r,i,o,c,h){return new Ra(n,e,t,r,i,o,c,h)}function Fg(n){return new Ra(n)}function kw(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function AI(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Sd(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Fw(n){return null!==n.collectionGroup}function Ad(n){const e=Xe(n);if(null===e.dt){e.dt=[];const t=Sd(e),r=AI(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new Gl(t)),e.dt.push(new Gl(ur.keyField(),"asc"));else{let i=!1;for(const o of e.explicitOrderBy)e.dt.push(o),o.field.isKeyField()&&(i=!0);if(!i){const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new Gl(ur.keyField(),o))}}}return e.dt}function Ii(n){const e=Xe(n);if(!e.wt)if("F"===e.limitType)e.wt=Pw(e.path,e.collectionGroup,Ad(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const o of Ad(e))t.push(new Gl(o.field,"desc"===o.dir?"asc":"desc"));const r=e.endAt?new xa(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new xa(e.startAt.position,e.startAt.inclusive):null;e.wt=Pw(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function Lw(n,e){e.getFirstInequalityField(),Sd(n);const t=n.filters.concat([e]);return new Ra(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ls(n,e,t){return new Ra(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function zl(n,e){return kg(Ii(n),Ii(e))&&n.limitType===e.limitType}function bi(n){return`${Dd(Ii(n))}|lt:${n.limitType}`}function ql(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>II(r)).join(", ")}]`),Sg(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ed(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ed(r)).join(",")),`Target(${t})`}(Ii(n))}; limitType=${n.limitType})`}function Xu(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ke.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Ad(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,o,c){const h=Na(i,o,c);return i.inclusive?h<=0:h<0}(t.startAt,Ad(t),r)||t.endAt&&!function(i,o,c){const h=Na(i,o,c);return i.inclusive?h>=0:h>0}(t.endAt,Ad(t),r)));var t,r}function Vs(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Y_(n){return(e,t)=>{let r=!1;for(const i of Ad(n)){const o=bf(i,e,t);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function bf(n,e,t){const r=n.field.isKeyField()?Ke.comparator(e.key,t.key):function(i,o,c){const h=o.data.field(i),_=c.data.field(i);return null!==h&&null!==_?Qu(h,_):ct()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ct()}}class Us{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){qu(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return fI(this.inner)}size(){return this.innerSize}}const Tf=new cr(Ke.comparator);function ti(){return Tf}const Md=new cr(Ke.comparator);function Pa(...n){let e=Md;for(const t of n)e=e.insert(t.key,t);return e}function xd(n){let e=Md;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ts(){return Df()}function Nd(){return Df()}function Df(){return new Us(n=>n.toString(),(n,e)=>n.isEqual(e))}const MI=new cr(Ke.comparator),xI=new Mn(Ke.comparator);function Ht(...n){let e=xI;for(const t of n)e=e.add(t);return e}const NI=new Mn(Bt);function Lg(){return NI}function Vw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ag(e)?"-0":e}}function Uw(n){return{integerValue:""+n}}function Bw(n,e){return oI(e)?Uw(e):Vw(n,e)}class Q_{constructor(){this._=void 0}}function nA(n,e,t){return n instanceof Rd?function(r,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(o.fields.__previous_value__=i),{mapValue:o}}(t,e):n instanceof Zl?J_(n,e):n instanceof Pd?Vg(n,e):function(r,i){const o=PI(r,i),c=X_(o)+X_(r._t);return Sw(o)&&Sw(r._t)?Uw(c):Vw(r.serializer,c)}(n,e)}function RI(n,e,t){return n instanceof Zl?J_(n,e):n instanceof Pd?Vg(n,e):t}function PI(n,e){return n instanceof Wl?Sw(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Rd extends Q_{}class Zl extends Q_{constructor(e){super(),this.elements=e}}function J_(n,e){const t=OI(e);for(const r of n.elements)t.some(i=>Xr(i,r))||t.push(r);return{arrayValue:{values:t}}}class Pd extends Q_{constructor(e){super(),this.elements=e}}function Vg(n,e){let t=OI(e);for(const r of n.elements)t=t.filter(i=>!Xr(i,r));return{arrayValue:{values:t}}}class Wl extends Q_{constructor(e,t){super(),this.serializer=e,this._t=t}}function X_(n){return _r(n.integerValue||n.doubleValue)}function OI(n){return Id(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class ec{constructor(e,t){this.field=e,this.transform=t}}class kI{constructor(e,t){this.version=e,this.transformResults=t}}class Zn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Zn}static exists(e){return new Zn(void 0,e)}static updateTime(e){return new Zn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sf(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Ug{}function $w(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Mf(n.key,Zn.none()):new Od(n.key,n.data,Zn.none());{const t=n.data,r=ei.empty();let i=new Mn(ur.comparator);for(let o of e.fields)if(!i.has(o)){let c=t.field(o);null===c&&o.length>1&&(o=o.popLast(),c=t.field(o)),null===c?r.delete(o):r.set(o,c),i=i.add(o)}return new Oa(n.key,r,new ps(i.toArray()),Zn.none())}}function jw(n,e,t){n instanceof Od?function(r,i,o){const c=r.value.clone(),h=FI(r.fieldTransforms,i,o.transformResults);c.setAll(h),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Oa?function(r,i,o){if(!Sf(r.precondition,i))return void i.convertToUnknownDocument(o.version);const c=FI(r.fieldTransforms,i,o.transformResults),h=i.data;h.setAll(Gw(r)),h.setAll(c),i.convertToFoundDocument(o.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Af(n,e,t,r){return n instanceof Od?function(i,o,c,h){if(!Sf(i.precondition,o))return c;const _=i.value.clone(),y=LI(i.fieldTransforms,h,o);return _.setAll(y),o.convertToFoundDocument(o.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof Oa?function(i,o,c,h){if(!Sf(i.precondition,o))return c;const _=LI(i.fieldTransforms,h,o),y=o.data;return y.setAll(Gw(i)),y.setAll(_),o.convertToFoundDocument(o.version,y).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(I=>I.field))}(n,e,t,r):(c=t,Sf(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c);var o,c}function rA(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=PI(r.transform,i||null);null!=o&&(null===t&&(t=ei.empty()),t.set(r.field,o))}return t||null}function Hw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&gd(t,r,(i,o)=>function ey(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Zl&&r instanceof Zl||t instanceof Pd&&r instanceof Pd?gd(t.elements,r.elements,Xr):t instanceof Wl&&r instanceof Wl?Xr(t._t,r._t):t instanceof Rd&&r instanceof Rd);var t,r}(i,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Od extends Ug{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Oa extends Ug{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Gw(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function FI(n,e,t){const r=new Map;wt(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],c=o.transform,h=e.data.field(o.field);r.set(o.field,RI(c,h,t[i]))}return r}function LI(n,e,t){const r=new Map;for(const i of n){const o=i.transform,c=t.data.field(i.field);r.set(i.field,nA(o,c,e))}return r}class Mf extends Ug{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Bg extends Ug{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class $g{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&jw(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Af(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Af(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Nd();return this.mutations.forEach(i=>{const o=e.get(i.key),c=o.overlayedDocument;let h=this.applyToLocalView(c,o.mutatedFields);h=t.has(i.key)?null:h;const _=$w(c,h);null!==_&&r.set(i.key,_),c.isValidDocument()||c.convertToNoDocument(Ct.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ht())}isEqual(e){return this.batchId===e.batchId&&gd(this.mutations,e.mutations,(t,r)=>Hw(t,r))&&gd(this.baseMutations,e.baseMutations,(t,r)=>Hw(t,r))}}class ty{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){wt(e.mutations.length===r.length);let i=MI;const o=e.mutations;for(let c=0;c<o.length;c++)i=i.insert(o[c].key,r[c].version);return new ty(e,t,r,i)}}class ny{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class BI{constructor(e){this.count=e}}var Ar,cn;function jg(n){switch(n){default:return ct();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0}}function Kl(n){if(void 0===n)return Sr("GRPC error has no .code"),ue.UNKNOWN;switch(n){case Ar.OK:return ue.OK;case Ar.CANCELLED:return ue.CANCELLED;case Ar.UNKNOWN:return ue.UNKNOWN;case Ar.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case Ar.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case Ar.INTERNAL:return ue.INTERNAL;case Ar.UNAVAILABLE:return ue.UNAVAILABLE;case Ar.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case Ar.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case Ar.NOT_FOUND:return ue.NOT_FOUND;case Ar.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case Ar.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case Ar.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case Ar.ABORTED:return ue.ABORTED;case Ar.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case Ar.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case Ar.DATA_LOSS:return ue.DATA_LOSS;default:return ct()}}(cn=Ar||(Ar={}))[cn.OK=0]="OK",cn[cn.CANCELLED=1]="CANCELLED",cn[cn.UNKNOWN=2]="UNKNOWN",cn[cn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",cn[cn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",cn[cn.NOT_FOUND=5]="NOT_FOUND",cn[cn.ALREADY_EXISTS=6]="ALREADY_EXISTS",cn[cn.PERMISSION_DENIED=7]="PERMISSION_DENIED",cn[cn.UNAUTHENTICATED=16]="UNAUTHENTICATED",cn[cn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",cn[cn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",cn[cn.ABORTED=10]="ABORTED",cn[cn.OUT_OF_RANGE=11]="OUT_OF_RANGE",cn[cn.UNIMPLEMENTED=12]="UNIMPLEMENTED",cn[cn.INTERNAL=13]="INTERNAL",cn[cn.UNAVAILABLE=14]="UNAVAILABLE",cn[cn.DATA_LOSS=15]="DATA_LOSS";class zw{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return iy}static getOrCreateInstance(){return null===iy&&(iy=new zw),iy}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let iy=null;class kd{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Ho.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new kd(Ct.min(),i,Lg(),ti(),Ht())}}class Ho{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Ho(r,t,Ht(),Ht(),Ht())}}class xf{constructor(e,t,r,i){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=i}}class $I{constructor(e,t){this.targetId=e,this.Et=t}}class sy{constructor(e,t,r=$r.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class iA{constructor(){this.At=0,this.Rt=HI(),this.vt=$r.EMPTY_BYTE_STRING,this.bt=!1,this.Pt=!0}get current(){return this.bt}get resumeToken(){return this.vt}get Vt(){return 0!==this.At}get St(){return this.Pt}Dt(e){e.approximateByteSize()>0&&(this.Pt=!0,this.vt=e)}Ct(){let e=Ht(),t=Ht(),r=Ht();return this.Rt.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ct()}}),new Ho(this.vt,this.bt,e,t,r)}xt(){this.Pt=!1,this.Rt=HI()}Nt(e,t){this.Pt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.Pt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}$t(){this.At-=1}Mt(){this.Pt=!0,this.bt=!0}}class ZR{constructor(e){this.Ft=e,this.Bt=new Map,this.Lt=ti(),this.qt=jI(),this.Ut=new Mn(Bt)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}zt(e){this.forEachTarget(e,t=>{const r=this.jt(t);switch(e.state){case 0:this.Wt(t)&&r.Dt(e.resumeToken);break;case 1:r.$t(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.$t(),r.Vt||this.removeTarget(t);break;case 3:this.Wt(t)&&(r.Mt(),r.Dt(e.resumeToken));break;case 4:this.Wt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:ct()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,i)=>{this.Wt(i)&&t(i)})}Jt(e){var t;const r=e.targetId,i=e.Et.count,o=this.Yt(r);if(o){const c=o.target;if(W_(c))if(0===i){const h=new Ke(c.path);this.Qt(r,h,$n.newNoDocument(h,Ct.min()))}else wt(1===i);else{const h=this.Zt(r);h!==i&&(this.Ht(r),this.Ut=this.Ut.add(r),null===(t=zw.instance)||void 0===t||t.notifyOnExistenceFilterMismatch({localCacheCount:h,existenceFilterCount:e.Et.count}))}}}Xt(e){const t=new Map;this.Bt.forEach((o,c)=>{const h=this.Yt(c);if(h){if(o.current&&W_(h.target)){const _=new Ke(h.target.path);null!==this.Lt.get(_)||this.te(c,_)||this.Qt(c,_,$n.newNoDocument(_,e))}o.St&&(t.set(c,o.Ct()),o.xt())}});let r=Ht();this.qt.forEach((o,c)=>{let h=!0;c.forEachWhile(_=>{const y=this.Yt(_);return!y||2===y.purpose||(h=!1,!1)}),h&&(r=r.add(o))}),this.Lt.forEach((o,c)=>c.setReadTime(e));const i=new kd(e,t,this.Ut,this.Lt,r);return this.Lt=ti(),this.qt=jI(),this.Ut=new Mn(Bt),i}Gt(e,t){if(!this.Wt(e))return;const r=this.te(e,t.key)?2:0;this.jt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.Wt(e))return;const i=this.jt(e);this.te(e,t)?i.Nt(t,1):i.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Zt(e){const t=this.jt(e).Ct();return this.Ft.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.jt(e).Ot()}jt(e){let t=this.Bt.get(e);return t||(t=new iA,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new Mn(Bt),this.qt=this.qt.insert(e,t)),t}Wt(e){const t=null!==this.Yt(e);return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.Ft.ne(e)}Ht(e){this.Bt.set(e,new iA),this.Ft.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.Ft.getRemoteKeysForTarget(e).has(t)}}function jI(){return new cr(Ke.comparator)}function HI(){return new cr(Ke.comparator)}const GI={asc:"ASCENDING",desc:"DESCENDING"},sA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ni={and:"AND",or:"OR"};class zI{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Nf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qI(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function ZI(n,e){return Nf(n,e.toTimestamp())}function Mr(n){return wt(!!n),Ct.fromTimestamp(function(e){const t=Zu(e);return new tr(t.seconds,t.nanos)}(n))}function oy(n,e){return(t=n,new un(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function qw(n){const e=un.fromString(n);return wt(JI(e)),e}function ka(n,e){return oy(n.databaseId,e.path)}function Fa(n,e){const t=qw(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ke(Kw(t))}function Zw(n,e){return oy(n.databaseId,e)}function Ww(n){const e=qw(n);return 4===e.length?un.emptyPath():Kw(e)}function Hg(n){return new un(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Kw(n){return wt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function oA(n,e,t){return{name:ka(n,e),fields:t.value.mapValue.fields}}function ay(n,e,t){const r=Fa(n,e.name),i=Mr(e.updateTime),o=e.createTime?Mr(e.createTime):Ct.min(),c=new ei({mapValue:{fields:e.fields}}),h=$n.newFoundDocument(r,i,o,c);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function Gg(n,e){let t;if(e instanceof Od)t={update:oA(n,e.key,e.value)};else if(e instanceof Mf)t={delete:ka(n,e.key)};else if(e instanceof Oa)t={update:oA(n,e.key,e.data),updateMask:QI(e.fieldMask)};else{if(!(e instanceof Bg))return ct();t={verify:ka(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const c=o.transform;if(c instanceof Rd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Zl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Pd)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Wl)return{fieldPath:o.field.canonicalString(),increment:c._t};throw ct()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:ZI(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ct()),t;var i}function ly(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Zn.updateTime(Mr(i.updateTime)):void 0!==i.exists?Zn.exists(i.exists):Zn.none():Zn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,c){let h=null;"setToServerValue"in c?(wt("REQUEST_TIME"===c.setToServerValue),h=new Rd):"appendMissingElements"in c?h=new Zl(c.appendMissingElements.values||[]):"removeAllFromArray"in c?h=new Pd(c.removeAllFromArray.values||[]):"increment"in c?h=new Wl(o,c.increment):ct();const _=ur.fromServerFormat(c.fieldPath);return new ec(_,h)}(n,i)):[];var i;if(e.update){const i=Fa(n,e.update.name),o=new ei({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new ps((e.updateMask.fieldPaths||[]).map(y=>ur.fromServerFormat(y)));return new Oa(i,o,c,t,r)}return new Od(i,o,t,r)}if(e.delete){const i=Fa(n,e.delete);return new Mf(i,t)}if(e.verify){const i=Fa(n,e.verify);return new Bg(i,t)}return ct()}function uo(n,e){return{documents:[Zw(n,e.path)]}}function Bs(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Zw(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Zw(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0!==_.length)return YI(Cn.create(_,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const o=function(_){if(0!==_.length)return _.map(y=>{return{field:Ua((I=y).field),direction:aA(I.dir)};var I})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const c=(y=e.limit,n.useProto3Json||Sg(y)?y:{value:y});var y,h,_;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function Qw(n){let e=Ww(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){wt(1===r);const I=t.from[0];I.allDescendants?i=I.collectionId:e=e.child(I.collectionId)}let o=[];t.where&&(o=function(I){const D=KI(I);return D instanceof Cn&&Td(D)?D.getFilters():[D]}(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(I=>{return new Gl(Ba((D=I).field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let h=null;t.limit&&(h=function(I){let D;return D="object"==typeof I?I.value:I,Sg(D)?null:D}(t.limit));let _=null;var I;t.startAt&&(_=new xa((I=t.startAt).values||[],!!I.before));let y=null;return t.endAt&&(y=function(I){return new xa(I.values||[],!I.before)}(t.endAt)),SI(e,i,c,o,h,"F",_,y)}function KI(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Ba(e.unaryFilter.field);return en.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Ba(e.unaryFilter.field);return en.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ba(e.unaryFilter.field);return en.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ba(e.unaryFilter.field);return en.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ct()}}(n):void 0!==n.fieldFilter?en.create(Ba((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ct()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Cn.create(e.compositeFilter.filters.map(t=>KI(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ct()}}(e.compositeFilter.op))}(n):ct();var e}function aA(n){return GI[n]}function lA(n){return sA[n]}function uA(n){return ni[n]}function Ua(n){return{fieldPath:n.canonicalString()}}function Ba(n){return ur.fromServerFormat(n.fieldPath)}function YI(n){return n instanceof en?function(e){if("=="===e.op){if(_I(e.value))return{unaryFilter:{field:Ua(e.field),op:"IS_NAN"}};if(mI(e.value))return{unaryFilter:{field:Ua(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(_I(e.value))return{unaryFilter:{field:Ua(e.field),op:"IS_NOT_NAN"}};if(mI(e.value))return{unaryFilter:{field:Ua(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ua(e.field),op:lA(e.op),value:e.value}}}(n):n instanceof Cn?function(e){const t=e.getFilters().map(r=>YI(r));return 1===t.length?t[0]:{compositeFilter:{op:uA(e.op),filters:t}}}(n):ct()}function QI(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function JI(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class tc{constructor(e,t,r,i,o=Ct.min(),c=Ct.min(),h=$r.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h}withSequenceNumber(e){return new tc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new tc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new tc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Jw{constructor(e){this.se=e}}function zg(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:uy(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:ka(i=n.se,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:Nf(i,o.version.toTimestamp()),createTime:Nf(i,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:nc(e.version)};else{if(!e.isUnknownDocument())return ct();r.unknownDocument={path:t.path.toArray(),version:nc(e.version)}}var i,o;return r}function uy(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function nc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function rc(n){const e=new tr(n.seconds,n.nanoseconds);return Ct.fromTimestamp(e)}function Yl(n,e){const t=(e.baseMutations||[]).map(o=>ly(n.se,o));for(let o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);const r=e.mutations.map(o=>ly(n.se,o)),i=tr.fromMillis(e.localWriteTimeMs);return new $g(e.batchId,i,t,r)}function ic(n){const e=rc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?rc(n.lastLimboFreeSnapshotVersion):Ct.min();let r;var i;return void 0!==n.query.documents?(wt(1===(i=n.query).documents.length),r=Ii(Fg(Ww(i.documents[0])))):r=Ii(Qw(n.query)),new tc(r,n.targetId,0,n.lastListenSequenceNumber,e,t,$r.fromBase64String(n.resumeToken))}function cy(n,e){const t=nc(e.snapshotVersion),r=nc(e.lastLimboFreeSnapshotVersion);let i;i=W_(e.target)?uo(n.se,e.target):Bs(n.se,e.target);const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Dd(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function dy(n){const e=Qw({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Ls(e,e.limit,"L"):e}function hy(n,e){return new ny(e.largestBatchId,ly(n.se,e.overlayMutation))}function Xw(n,e){const t=e.path.lastSegment();return[n,es(e.path.popLast()),t]}function e0(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:nc(r.readTime),documentKey:es(r.documentKey.path),largestBatchId:r.largestBatchId}}class eb{getBundleMetadata(e,t){return t0(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:rc(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return t0(e).put({bundleId:(r=t).id,createTime:nc(Mr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return n0(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:dy(i.bundledQuery),readTime:rc(i.readTime)};var i})}saveNamedQuery(e,t){return n0(e).put({name:(r=t).name,readTime:nc(Mr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function t0(n){return _i(n,"bundles")}function n0(n){return _i(n,"namedQueries")}class fy{constructor(e,t){this.serializer=e,this.userId=t}static ie(e,t){return new fy(e,t.uid||"")}getOverlay(e,t){return qg(e).get(Xw(this.userId,t)).next(r=>r?hy(this.serializer,r):null)}getOverlays(e,t){const r=ts();return le.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((o,c)=>{const h=new ny(t,c);i.push(this.re(e,h))}),le.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(es(c.getCollectionPath())));const o=[];return i.forEach(c=>{const h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);o.push(qg(e).J("collectionPathOverlayIndex",h))}),le.waitFor(o)}getOverlaysForCollection(e,t,r){const i=ts(),o=es(t),c=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return qg(e).j("collectionPathOverlayIndex",c).next(h=>{for(const _ of h){const y=hy(this.serializer,_);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const o=ts();let c;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return qg(e).Z({index:"collectionGroupOverlayIndex",range:h},(_,y,I)=>{const D=hy(this.serializer,y);o.size()<i||D.largestBatchId===c?(o.set(D.getKey(),D),c=D.largestBatchId):I.done()}).next(()=>o)}re(e,t){return qg(e).put(function(r,i,o){const[c,h,_]=Xw(i,o.mutation.key);return{userId:i,collectionPath:h,documentId:_,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Gg(r.se,o.mutation)}}(this.serializer,this.userId,t))}}function qg(n){return _i(n,"documentOverlays")}class Fd{constructor(){}oe(e,t){this.ue(e,t),t.ce()}ue(e,t){if("nullValue"in e)this.ae(t,5);else if("booleanValue"in e)this.ae(t,10),t.he(e.booleanValue?1:0);else if("integerValue"in e)this.ae(t,15),t.he(_r(e.integerValue));else if("doubleValue"in e){const r=_r(e.doubleValue);isNaN(r)?this.ae(t,13):(this.ae(t,15),Ag(r)?t.he(0):t.he(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ae(t,20),"string"==typeof r?t.le(r):(t.le(`${r.seconds||""}`),t.he(r.nanos||0))}else if("stringValue"in e)this.fe(e.stringValue,t),this.de(t);else if("bytesValue"in e)this.ae(t,30),t.we(Wu(e.bytesValue)),this.de(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ae(t,45),t.he(r.latitude||0),t.he(r.longitude||0)}else"mapValue"in e?Rg(e)?this.ae(t,Number.MAX_SAFE_INTEGER):(this.me(e.mapValue,t),this.de(t)):"arrayValue"in e?(this.ge(e.arrayValue,t),this.de(t)):ct()}fe(e,t){this.ae(t,25),this.ye(e,t)}ye(e,t){t.le(e)}me(e,t){const r=e.fields||{};this.ae(t,55);for(const i of Object.keys(r))this.fe(i,t),this.ue(r[i],t)}ge(e,t){const r=e.values||[];this.ae(t,50);for(const i of r)this.ue(i,t)}_e(e,t){this.ae(t,37),Ke.fromName(e).path.forEach(r=>{this.ae(t,60),this.ye(r,t)})}ae(e,t){e.he(t)}de(e){e.he(2)}}function cA(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function tb(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const o=cA(255&t[i]);if(r+=o,8!==o)break}return r}(n);return Math.ceil(e/8)}Fd.pe=new Fd;class dA{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ie(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Te(r.value),r=t.next();this.Ee()}Ae(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Re(r.value),r=t.next();this.ve()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Te(r);else if(r<2048)this.Te(960|r>>>6),this.Te(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Te(480|r>>>12),this.Te(128|63&r>>>6),this.Te(128|63&r);else{const i=t.codePointAt(0);this.Te(240|i>>>18),this.Te(128|63&i>>>12),this.Te(128|63&i>>>6),this.Te(128|63&i)}}this.Ee()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Re(r);else if(r<2048)this.Re(960|r>>>6),this.Re(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Re(480|r>>>12),this.Re(128|63&r>>>6),this.Re(128|63&r);else{const i=t.codePointAt(0);this.Re(240|i>>>18),this.Re(128|63&i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i)}}this.ve()}Ve(e){const t=this.Se(e),r=tb(t);this.De(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ce(e){const t=this.Se(e),r=tb(t);this.De(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}xe(){this.Ne(255),this.Ne(255)}ke(){this.Oe(255),this.Oe(255)}reset(){this.position=0}seed(e){this.De(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Se(e){const t=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Te(e){const t=255&e;0===t?(this.Ne(0),this.Ne(255)):255===t?(this.Ne(255),this.Ne(0)):this.Ne(t)}Re(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(e)}Ee(){this.Ne(0),this.Ne(1)}ve(){this.Oe(0),this.Oe(1)}Ne(e){this.De(1),this.buffer[this.position++]=e}Oe(e){this.De(1),this.buffer[this.position++]=~e}De(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class hA{constructor(e){this.Me=e}we(e){this.Me.Ie(e)}le(e){this.Me.be(e)}he(e){this.Me.Ve(e)}ce(){this.Me.xe()}}class fA{constructor(e){this.Me=e}we(e){this.Me.Ae(e)}le(e){this.Me.Pe(e)}he(e){this.Me.Ce(e)}ce(){this.Me.ke()}}class Zg{constructor(){this.Me=new dA,this.Fe=new hA(this.Me),this.Be=new fA(this.Me)}seed(e){this.Me.seed(e)}Le(e){return 0===e?this.Fe:this.Be}$e(){return this.Me.$e()}reset(){this.Me.reset()}}class Ld{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}qe(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ld(this.indexId,this.documentKey,this.arrayValue,r)}}function sc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=nb(n.arrayValue,e.arrayValue),0!==t?t:(t=nb(n.directionalValue,e.directionalValue),0!==t?t:Ke.comparator(n.documentKey,e.documentKey)))}function nb(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class pA{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.Ke=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ge=r:this.Ke.push(r)}}Qe(e){wt(e.collectionGroup===this.collectionId);const t=F_(e);if(void 0!==t&&!this.ze(t))return!1;const r=md(e);let i=0,o=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Ge){const c=r[i];if(!this.je(this.Ge,c)||!this.We(this.Ue[o++],c))return!1;++i}for(;i<r.length;++i)if(o>=this.Ue.length||!this.We(this.Ue[o++],r[i]))return!1;return!0}ze(e){for(const t of this.Ke)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function rb(n){var e,t;if(wt(n instanceof en||n instanceof Cn),n instanceof en){if(n instanceof Z_){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(o=>en.create(n.field,"==",o)))||[];return Cn.create(i,"or")}return n}const r=n.filters.map(i=>rb(i));return Cn.create(r,n.op)}function gA(n){if(0===n.getFilters().length)return[];const e=py(rb(n));return wt(ib(e)),r0(e)||s0(e)?[e]:e.getFilters()}function r0(n){return n instanceof en}function s0(n){return n instanceof Cn&&Td(n)}function ib(n){return r0(n)||s0(n)||function(e){if(e instanceof Cn&&Nw(e)){for(const t of e.getFilters())if(!r0(t)&&!s0(t))return!1;return!0}return!1}(n)}function py(n){if(wt(n instanceof en||n instanceof Cn),n instanceof en)return n;if(1===n.filters.length)return py(n.filters[0]);const e=n.filters.map(r=>py(r));let t=Cn.create(e,n.op);return t=Wg(t),ib(t)?t:(wt(t instanceof Cn),wt(If(t)),wt(t.filters.length>1),t.filters.reduce((r,i)=>gy(r,i)))}function gy(n,e){let t;return wt(n instanceof en||n instanceof Cn),wt(e instanceof en||e instanceof Cn),t=n instanceof en?e instanceof en?Cn.create([n,e],"and"):o0(n,e):e instanceof en?o0(e,n):function(r,i){if(wt(r.filters.length>0&&i.filters.length>0),If(r)&&If(i))return CI(r,i.getFilters());const o=Nw(r)?r:i,c=Nw(r)?i:r,h=o.filters.map(_=>gy(_,c));return Cn.create(h,"or")}(n,e),Wg(t)}function o0(n,e){if(If(e))return CI(e,n.getFilters());{const t=e.filters.map(r=>gy(n,r));return Cn.create(t,"or")}}function Wg(n){if(wt(n instanceof en||n instanceof Cn),n instanceof en)return n;const e=n.getFilters();if(1===e.length)return Wg(e[0]);if(vI(n))return n;const t=e.map(i=>Wg(i)),r=[];return t.forEach(i=>{i instanceof en?r.push(i):i instanceof Cn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Cn.create(r,n.op)}class sb{constructor(){this.He=new my}addToCollectionParentIndex(e,t){return this.He.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.He.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(Jr.min())}getMinOffsetFromCollectionGroup(e,t){return le.resolve(Jr.min())}updateCollectionGroup(e,t,r){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class my{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Mn(un.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Mn(un.comparator)).toArray()}}const Kg=new Uint8Array(0);class ob{constructor(e,t){this.user=e,this.databaseId=t,this.Je=new my,this.Ye=new Us(r=>Dd(r),(r,i)=>kg(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Je.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Je.add(t)});const o={collectionId:r,parent:es(i)};return a0(e).put(o)}return le.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[eI(t),""],!1,!0);return a0(e).j(i).next(o=>{for(const c of o){if(c.collectionId!==t)break;r.push(jo(c.parent))}return r})}addFieldIndex(e,t){const r=Pf(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var c;delete i.indexId;const o=r.add(i);if(t.indexState){const c=Go(e);return o.next(h=>{c.put(e0(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=Pf(e),i=Go(e),o=Rf(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Rf(e);let i=!0;const o=new Map;return le.forEach(this.Ze(t),c=>this.Xe(e,c).next(h=>{i&&(i=!!h),o.set(c,h)})).next(()=>{if(i){let c=Ht();const h=[];return le.forEach(o,(_,y)=>{var I;Oe("IndexedDbIndexManager",`Using index ${I=_,`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(at=>`${at.fieldPath}:${at.kind}`).join(",")}`} to execute ${Dd(t)}`);const D=function(at,Et){const $t=F_(Et);if(void 0===$t)return null;for(const Gt of K_(at,$t.fieldPath))switch(Gt.op){case"array-contains-any":return Gt.value.arrayValue.values||[];case"array-contains":return[Gt.value]}return null}(y,_),R=function(at,Et){const $t=new Map;for(const Gt of md(Et))for(const Tn of K_(at,Gt.fieldPath))switch(Tn.op){case"==":case"in":$t.set(Gt.fieldPath.canonicalString(),Tn.value);break;case"not-in":case"!=":return $t.set(Gt.fieldPath.canonicalString(),Tn.value),Array.from($t.values())}return null}(y,_),L=function(at,Et){const $t=[];let Gt=!0;for(const Tn of md(Et)){const Vi=0===Tn.kind?DI(at,Tn.fieldPath,at.startAt):Ow(at,Tn.fieldPath,at.startAt);$t.push(Vi.value),Gt&&(Gt=Vi.inclusive)}return new xa($t,Gt)}(y,_),$=function(at,Et){const $t=[];let Gt=!0;for(const Tn of md(Et)){const Vi=0===Tn.kind?Ow(at,Tn.fieldPath,at.endAt):DI(at,Tn.fieldPath,at.endAt);$t.push(Vi.value),Gt&&(Gt=Vi.inclusive)}return new xa($t,Gt)}(y,_),X=this.tn(_,y,L),ce=this.tn(_,y,$),qe=this.en(_,y,R),ut=this.nn(_.indexId,D,X,L.inclusive,ce,$.inclusive,qe);return le.forEach(ut,at=>r.H(at,t.limit).next(Et=>{Et.forEach($t=>{const Gt=Ke.fromSegments($t.documentKey);c.has(Gt)||(c=c.add(Gt),h.push(Gt))})}))}).next(()=>h)}return le.resolve(null)})}Ze(e){let t=this.Ye.get(e);return t||(t=0===e.filters.length?[e]:gA(Cn.create(e.filters,"and")).map(r=>Pw(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Ye.set(e,t),t)}nn(e,t,r,i,o,c,h){const _=(null!=t?t.length:1)*Math.max(r.length,o.length),y=_/(null!=t?t.length:1),I=[];for(let D=0;D<_;++D){const R=t?this.sn(t[D/y]):Kg,L=this.rn(e,R,r[D%y],i),$=this.on(e,R,o[D%y],c),X=h.map(ce=>this.rn(e,R,ce,!0));I.push(...this.createRange(L,$,X))}return I}rn(e,t,r,i){const o=new Ld(e,Ke.empty(),t,r);return i?o:o.qe()}on(e,t,r,i){const o=new Ld(e,Ke.empty(),t,r);return i?o.qe():o}Xe(e,t){const r=new pA(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let c=null;for(const h of o)r.Qe(h)&&(!c||h.fields.length>c.fields.length)&&(c=h);return c})}getIndexType(e,t){let r=2;const i=this.Ze(t);return le.forEach(i,o=>this.Xe(e,o).next(c=>{c?0!==r&&c.fields.length<function(h){let _=new Mn(ur.comparator),y=!1;for(const I of h.filters)for(const D of I.getFlattenedFilters())D.field.isKeyField()||("array-contains"===D.op||"array-contains-any"===D.op?y=!0:_=_.add(D.field));for(const I of h.orderBy)I.field.isKeyField()||(_=_.add(I.field));return _.size+(y?1:0)}(o)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}un(e,t){const r=new Zg;for(const i of md(e)){const o=t.data.field(i.fieldPath);if(null==o)return null;const c=r.Le(i.kind);Fd.pe.oe(o,c)}return r.$e()}sn(e){const t=new Zg;return Fd.pe.oe(e,t.Le(0)),t.$e()}cn(e,t){const r=new Zg;return Fd.pe.oe(Cd(this.databaseId,t),r.Le(function(i){const o=md(i);return 0===o.length?0:o[o.length-1].kind}(e))),r.$e()}en(e,t,r){if(null===r)return[];let i=[];i.push(new Zg);let o=0;for(const c of md(e)){const h=r[o++];for(const _ of i)if(this.an(t,c.fieldPath)&&Id(h))i=this.hn(i,c,h);else{const y=_.Le(c.kind);Fd.pe.oe(h,y)}}return this.ln(i)}tn(e,t,r){return this.en(e,t,r.position)}ln(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}hn(e,t,r){const i=[...e],o=[];for(const c of r.arrayValue.values||[])for(const h of i){const _=new Zg;_.seed(h.$e()),Fd.pe.oe(c,_.Le(t.kind)),o.push(_)}return o}an(e,t){return!!e.filters.find(r=>r instanceof en&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Pf(e),i=Go(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(o=>{const c=[];return le.forEach(o,h=>i.get([h.indexId,this.uid]).next(_=>{c.push(function(y,I){const D=I?new V_(I.sequenceNumber,new Jr(rc(I.readTime),new Ke(jo(I.documentKey)),I.largestBatchId)):V_.empty(),R=y.fields.map(([L,$])=>new L_(ur.fromServerFormat(L),$));return new k_(y.indexId,y.collectionGroup,R,D)}(h,_))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:Bt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Pf(e),o=Go(e);return this.fn(e).next(c=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>le.forEach(h,_=>o.put(e0(_.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return le.forEach(t,(i,o)=>{const c=r.get(i.collectionGroup);return(c?le.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),le.forEach(h,_=>this.dn(e,i,_).next(y=>{const I=this.wn(o,_);return y.isEqual(I)?le.resolve():this._n(e,o,_,y,I)}))))})}mn(e,t,r,i){return Rf(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.cn(r,t.key),documentKey:t.key.path.toArray()})}gn(e,t,r,i){return Rf(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.cn(r,t.key),t.key.path.toArray()])}dn(e,t,r){const i=Rf(e);let o=new Mn(sc);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.cn(r,t)])},(c,h)=>{o=o.add(new Ld(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>o)}wn(e,t){let r=new Mn(sc);const i=this.un(t,e);if(null==i)return r;const o=F_(t);if(null!=o){const c=e.data.field(o.fieldPath);if(Id(c))for(const h of c.arrayValue.values||[])r=r.add(new Ld(t.indexId,e.key,this.sn(h),i))}else r=r.add(new Ld(t.indexId,e.key,Kg,i));return r}_n(e,t,r,i,o){Oe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(h,_,y,I,D){const R=h.getIterator(),L=_.getIterator();let $=Cf(R),X=Cf(L);for(;$||X;){let ce=!1,qe=!1;if($&&X){const ut=y($,X);ut<0?qe=!0:ut>0&&(ce=!0)}else null!=$?qe=!0:ce=!0;ce?(I(X),X=Cf(L)):qe?(D($),$=Cf(R)):($=Cf(R),X=Cf(L))}}(i,o,sc,h=>{c.push(this.mn(e,t,r,h))},h=>{c.push(this.gn(e,t,r,h))}),le.waitFor(c)}fn(e){let t=1;return Go(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,h)=>sc(c,h)).filter((c,h,_)=>!h||0!==sc(c,_[h-1]));const i=[];i.push(e);for(const c of r){const h=sc(c,e),_=sc(c,t);if(0===h)i[0]=e.qe();else if(h>0&&_<0)i.push(c),i.push(c.qe());else if(_>0)break}i.push(t);const o=[];for(let c=0;c<i.length;c+=2){if(this.yn(i[c],i[c+1]))return[];o.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,Kg,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,Kg,[]]))}return o}yn(e,t){return sc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(ab)}getMinOffset(e,t){return le.mapArray(this.Ze(t),r=>this.Xe(e,r).next(i=>i||ct())).next(ab)}}function a0(n){return _i(n,"collectionParents")}function Rf(n){return _i(n,"indexEntries")}function Pf(n){return _i(n,"indexConfiguration")}function Go(n){return _i(n,"indexState")}function ab(n){wt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;gw(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Jr(e.readTime,e.documentKey,t)}const lb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ri{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ri(e,ri.DEFAULT_COLLECTION_PERCENTILE,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function mA(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),o=[],c=IDBKeyRange.only(t.batchId);let h=0;const _=r.Z({range:c},(I,D,R)=>(h++,R.delete()));o.push(_.next(()=>{wt(1===h)}));const y=[];for(const I of t.mutations){const D=HS(e,I.key.path,t.batchId);o.push(i.delete(D)),y.push(I.key)}return le.waitFor(o).next(()=>y)}function Of(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ct();e=n.noDocument}return JSON.stringify(e).length}ri.DEFAULT_COLLECTION_PERCENTILE=10,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ri.DEFAULT=new ri(41943040,ri.DEFAULT_COLLECTION_PERCENTILE,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ri.DISABLED=new ri(-1,0,0);class l0{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.pn={}}static ie(e,t,r,i){wt(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new l0(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ql(e).Z({index:"userMutationsIndex",range:r},(i,o,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const o=Yg(e),c=Ql(e);return c.add({}).next(h=>{wt("number"==typeof h);const _=new $g(h,t,r,i),y=function(R,L,$){const X=$.baseMutations.map(qe=>Gg(R.se,qe)),ce=$.mutations.map(qe=>Gg(R.se,qe));return{userId:L,batchId:$.batchId,localWriteTimeMs:$.localWriteTime.toMillis(),baseMutations:X,mutations:ce}}(this.serializer,this.userId,_),I=[];let D=new Mn((R,L)=>Bt(R.canonicalString(),L.canonicalString()));for(const R of i){const L=HS(this.userId,R.key.path,h);D=D.add(R.key.path.popLast()),I.push(c.put(y)),I.push(o.put(L,vw))}return D.forEach(R=>{I.push(this.indexManager.addToCollectionParentIndex(e,R))}),e.addOnCommittedListener(()=>{this.pn[h]=_.keys()}),le.waitFor(I).next(()=>_)})}lookupMutationBatch(e,t){return Ql(e).get(t).next(r=>r?(wt(r.userId===this.userId),Yl(this.serializer,r)):null)}In(e,t){return this.pn[t]?le.resolve(this.pn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.pn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return Ql(e).Z({index:"userMutationsIndex",range:i},(c,h,_)=>{h.userId===this.userId&&(wt(h.batchId>=r),o=Yl(this.serializer,h)),_.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ql(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,o,c)=>{r=o.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ql(e).j("userMutationsIndex",t).next(r=>r.map(i=>Yl(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=vf(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Yg(e).Z({range:i},(c,h,_)=>{const[y,I,D]=c,R=jo(I);if(y===this.userId&&t.path.isEqual(R))return Ql(e).get(D).next(L=>{if(!L)throw ct();wt(L.userId===this.userId),o.push(Yl(this.serializer,L))});_.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Mn(Bt);const i=[];return t.forEach(o=>{const c=vf(this.userId,o.path),h=IDBKeyRange.lowerBound(c),_=Yg(e).Z({range:h},(y,I,D)=>{const[R,L,$]=y,X=jo(L);R===this.userId&&o.path.isEqual(X)?r=r.add($):D.done()});i.push(_)}),le.waitFor(i).next(()=>this.Tn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=vf(this.userId,r),c=IDBKeyRange.lowerBound(o);let h=new Mn(Bt);return Yg(e).Z({range:c},(_,y,I)=>{const[D,R,L]=_,$=jo(R);D===this.userId&&r.isPrefixOf($)?$.length===i&&(h=h.add(L)):I.done()}).next(()=>this.Tn(e,h))}Tn(e,t){const r=[],i=[];return t.forEach(o=>{i.push(Ql(e).get(o).next(c=>{if(null===c)throw ct();wt(c.userId===this.userId),r.push(Yl(this.serializer,c))}))}),le.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return mA(e.at,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.En(t.batchId)}),le.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}En(e){delete this.pn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return le.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Yg(e).Z({range:r},(o,c,h)=>{if(o[0]===this.userId){const _=jo(o[1]);i.push(_)}else h.done()}).next(()=>{wt(0===i.length)})})}containsKey(e,t){return u0(e,this.userId,t)}An(e){return Mt(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function u0(n,e,t){const r=vf(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let c=!1;return Yg(n).Z({range:o,Y:!0},(h,_,y)=>{const[I,D,R]=h;I===e&&D===i&&(c=!0),y.done()}).next(()=>c)}function Ql(n){return _i(n,"mutations")}function Yg(n){return _i(n,"documentMutations")}function Mt(n){return _i(n,"mutationQueues")}class Vd{constructor(e){this.Rn=e}next(){return this.Rn+=2,this.Rn}static vn(){return new Vd(0)}static bn(){return new Vd(-1)}}class _A{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Pn(e).next(t=>{const r=new Vd(t.highestTargetId);return t.highestTargetId=r.next(),this.Vn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Pn(e).next(t=>Ct.fromTimestamp(new tr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Pn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Vn(e,i)))}addTargetData(e,t){return this.Sn(e,t).next(()=>this.Pn(e).next(r=>(r.targetCount+=1,this.Dn(t,r),this.Vn(e,r))))}updateTargetData(e,t){return this.Sn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>kf(e).delete(t.targetId)).next(()=>this.Pn(e)).next(r=>(wt(r.targetCount>0),r.targetCount-=1,this.Vn(e,r)))}removeTargets(e,t,r){let i=0;const o=[];return kf(e).Z((c,h)=>{const _=ic(h);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,o.push(this.removeTargetData(e,_)))}).next(()=>le.waitFor(o)).next(()=>i)}forEachTarget(e,t){return kf(e).Z((r,i)=>{const o=ic(i);t(o)})}Pn(e){return Ud(e).get("targetGlobalKey").next(t=>(wt(null!==t),t))}Vn(e,t){return Ud(e).put("targetGlobalKey",t)}Sn(e,t){return kf(e).put(cy(this.serializer,t))}Dn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Dd(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return kf(e).Z({range:i,index:"queryTargetsIndex"},(c,h,_)=>{const y=ic(h);kg(t,y.target)&&(o=y,_.done())}).next(()=>o)}addMatchingKeys(e,t,r){const i=[],o=oc(e);return t.forEach(c=>{const h=es(c.path);i.push(o.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,c))}),le.waitFor(i)}removeMatchingKeys(e,t,r){const i=oc(e);return le.forEach(t,o=>{const c=es(o.path);return le.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=oc(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=oc(e);let o=Ht();return i.Z({range:r,Y:!0},(c,h,_)=>{const y=jo(c[1]),I=new Ke(y);o=o.add(I)}).next(()=>o)}containsKey(e,t){const r=es(t.path),i=IDBKeyRange.bound([r],[eI(r)],!1,!0);let o=0;return oc(e).Z({index:"documentTargetsIndex",Y:!0,range:i},([c,h],_,y)=>{0!==c&&(o++,y.done())}).next(()=>o>0)}ne(e,t){return kf(e).get(t).next(r=>r?ic(r):null)}}function kf(n){return _i(n,"targets")}function Ud(n){return _i(n,"targetGlobal")}function oc(n){return _i(n,"targetDocuments")}function Qg([n,e],[t,r]){const i=Bt(n,t);return 0===i?Bt(e,r):i}class _y{constructor(e){this.Cn=e,this.buffer=new Mn(Qg),this.xn=0}Nn(){return++this.xn}kn(e){const t=[e,this.Nn()];if(this.buffer.size<this.Cn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Qg(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class yr{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.$n(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}$n(e){var t=this;Oe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,W.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){zu(r)?Oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Gu(r)}yield t.$n(3e5)}))}}class WR{constructor(e,t){this.Mn=e,this.params=t}calculateTargetCount(e,t){return this.Mn.Fn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return le.resolve(Fs.ct);const r=new _y(t);return this.Mn.forEachTarget(e,i=>r.kn(i.sequenceNumber)).next(()=>this.Mn.Bn(e,i=>r.kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Mn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Mn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(lb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lb):this.Ln(e,t))}getCacheSize(e){return this.Mn.getCacheSize(e)}Ln(e,t){let r,i,o,c,h,_,y;const I=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),i=this.params.maximumSequenceNumbersToCollect):i=D,c=Date.now(),this.nthSequenceNumber(e,i))).next(D=>(r=D,h=Date.now(),this.removeTargets(e,r,t))).next(D=>(o=D,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(D=>(y=Date.now(),dw()<=Ot.in.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-I}ms\n\tDetermined least recently used ${i} in `+(h-c)+`ms\n\tRemoved ${o} targets in `+(_-h)+`ms\n\tRemoved ${D} documents in `+(y-_)+`ms\nTotal Duration: ${y-I}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:D})))}}class ub{constructor(e,t){this.db=e,this.garbageCollector=new WR(this,t)}Fn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Bn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Bn(e,t){return this.Un(e,(r,i)=>t(i))}addReference(e,t,r){return Jg(e,r)}removeReference(e,t,r){return Jg(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Jg(e,t)}Kn(e,t){return function(r,i){let o=!1;return Mt(r).X(c=>u0(r,c,i).next(h=>(h&&(o=!0),le.resolve(!h)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Un(e,(c,h)=>{if(h<=t){const _=this.Kn(e,c).next(y=>{if(!y)return o++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Ct.min()),oc(e).delete([0,es(c.path)])))});i.push(_)}}).next(()=>le.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Jg(e,t)}Un(e,t){const r=oc(e);let i,o=Fs.ct;return r.Z({index:"documentTargetsIndex"},([c,h],{path:_,sequenceNumber:y})=>{0===c?(o!==Fs.ct&&t(new Ke(jo(i)),o),o=y,i=_):o=Fs.ct}).next(()=>{o!==Fs.ct&&t(new Ke(jo(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Jg(n,e){return oc(n).put((r=n.currentSequenceNumber,{targetId:0,path:es(e.path),sequenceNumber:r}));var r}class cb{constructor(){this.changes=new Us(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$n.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?le.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class db{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Bd(e).put(r)}removeEntry(e,t,r){return Bd(e).delete(function(i,o){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],uy(o),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Gn(e,r)))}getEntry(e,t){let r=$n.newInvalidDocument(t);return Bd(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Xg(t))},(i,o)=>{r=this.Qn(t,o)}).next(()=>r)}zn(e,t){let r={size:0,document:$n.newInvalidDocument(t)};return Bd(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Xg(t))},(i,o)=>{r={document:this.Qn(t,o),size:Of(o)}}).next(()=>r)}getEntries(e,t){let r=ti();return this.jn(e,t,(i,o)=>{const c=this.Qn(i,o);r=r.insert(i,c)}).next(()=>r)}Wn(e,t){let r=ti(),i=new cr(Ke.comparator);return this.jn(e,t,(o,c)=>{const h=this.Qn(o,c);r=r.insert(o,h),i=i.insert(o,Of(c))}).next(()=>({documents:r,Hn:i}))}jn(e,t,r){if(t.isEmpty())return le.resolve();let i=new Mn(Ff);t.forEach(_=>i=i.add(_));const o=IDBKeyRange.bound(Xg(i.first()),Xg(i.last())),c=i.getIterator();let h=c.getNext();return Bd(e).Z({index:"documentKeyIndex",range:o},(_,y,I)=>{const D=Ke.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;h&&Ff(h,D)<0;)r(h,null),h=c.getNext();h&&h.isEqual(D)&&(r(h,y),h=c.hasNext()?c.getNext():null),h?I.G(Xg(h)):I.done()}).next(()=>{for(;h;)r(h,null),h=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const o=t.path,c=[o.popLast().toArray(),o.lastSegment(),uy(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],h=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Bd(e).j(IDBKeyRange.bound(c,h,!0)).next(_=>{let y=ti();for(const I of _){const D=this.Qn(Ke.fromSegments(I.prefixPath.concat(I.collectionGroup,I.documentId)),I);D.isFoundDocument()&&(Xu(t,D)||i.has(D.key))&&(y=y.insert(D.key,D))}return y})}getAllFromCollectionGroup(e,t,r,i){let o=ti();const c=fb(t,r),h=fb(t,Jr.max());return Bd(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,h,!0)},(_,y,I)=>{const D=this.Qn(Ke.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);o=o.insert(D.key,D),o.size===i&&I.done()}).next(()=>o)}newChangeBuffer(e){return new hb(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return d0(e).get("remoteDocumentGlobalKey").next(t=>(wt(!!t),t))}Gn(e,t){return d0(e).put("remoteDocumentGlobalKey",t)}Qn(e,t){if(t){const r=function XI(n,e){let t;if(e.document)t=ay(n.se,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ke.fromSegments(e.noDocument.path),i=rc(e.noDocument.readTime);t=$n.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ct();{const r=Ke.fromSegments(e.unknownDocument.path),i=rc(e.unknownDocument.version);t=$n.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new tr(r[0],r[1]);return Ct.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Ct.min()))return r}return $n.newInvalidDocument(e)}}function c0(n){return new db(n)}class hb extends cb{constructor(e,t){super(),this.Jn=e,this.trackRemovals=t,this.Yn=new Us(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Mn((o,c)=>Bt(o.canonicalString(),c.canonicalString()));return this.changes.forEach((o,c)=>{const h=this.Yn.get(o);if(t.push(this.Jn.removeEntry(e,o,h.readTime)),c.isValidDocument()){const _=zg(this.Jn.serializer,c);i=i.add(o.path.popLast());const y=Of(_);r+=y-h.size,t.push(this.Jn.addEntry(e,o,_))}else if(r-=h.size,this.trackRemovals){const _=zg(this.Jn.serializer,c.convertToNoDocument(Ct.min()));t.push(this.Jn.addEntry(e,o,_))}}),i.forEach(o=>{t.push(this.Jn.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Jn.updateMetadata(e,r)),le.waitFor(t)}getFromCache(e,t){return this.Jn.zn(e,t).next(r=>(this.Yn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Jn.Wn(e,t).next(({documents:r,Hn:i})=>(i.forEach((o,c)=>{this.Yn.set(o,{size:c,readTime:r.get(o).readTime})}),r))}}function d0(n){return _i(n,"remoteDocumentGlobal")}function Bd(n){return _i(n,"remoteDocumentsV14")}function Xg(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function fb(n,e){const t=e.documentKey.path.toArray();return[n,uy(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Ff(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=Bt(t[o],r[o]),i)return i;return i=Bt(t.length,r.length),i||(i=Bt(t[t.length-2],r[r.length-2]),i||Bt(t[t.length-1],r[r.length-1]))}class yA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class pb{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Af(r.mutation,i,ps.empty(),tr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ht()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ht()){const i=ts();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let c=Pa();return o.forEach((h,_)=>{c=c.insert(h,_.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=ts();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ht()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((c,h)=>{t.set(c,h)})})}computeViews(e,t,r,i){let o=ti();const c=Df(),h=Df();return t.forEach((_,y)=>{const I=r.get(y.key);i.has(y.key)&&(void 0===I||I.mutation instanceof Oa)?o=o.insert(y.key,y):void 0!==I?(c.set(y.key,I.mutation.getFieldMask()),Af(I.mutation,y,I.mutation.getFieldMask(),tr.now())):c.set(y.key,ps.empty())}),this.recalculateAndSaveOverlays(e,o).next(_=>(_.forEach((y,I)=>c.set(y,I)),t.forEach((y,I)=>{var D;return h.set(y,new yA(I,null!==(D=c.get(y))&&void 0!==D?D:null))}),h))}recalculateAndSaveOverlays(e,t){const r=Df();let i=new cr((c,h)=>c-h),o=Ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const h of c)h.keys().forEach(_=>{const y=t.get(_);if(null===y)return;let I=r.get(_)||ps.empty();I=h.applyToLocalView(y,I),r.set(_,I);const D=(i.get(h.batchId)||Ht()).add(_);i=i.insert(h.batchId,D)})}).next(()=>{const c=[],h=i.getReverseIterator();for(;h.hasNext();){const _=h.getNext(),y=_.key,I=_.value,D=Nd();I.forEach(R=>{if(!o.has(R)){const L=$w(t.get(R),r.get(R));null!==L&&D.set(R,L),o=o.add(R)}}),c.push(this.documentOverlayCache.saveOverlays(e,y,D))}return le.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ke.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Fw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const c=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):le.resolve(ts());let h=-1,_=o;return c.next(y=>le.forEach(y,(I,D)=>(h<D.largestBatchId&&(h=D.largestBatchId),o.get(I)?le.resolve():this.remoteDocumentCache.getEntry(e,I).next(R=>{_=_.insert(I,R)}))).next(()=>this.populateOverlays(e,y,o)).next(()=>this.computeViews(e,_,y,Ht())).next(I=>({batchId:h,changes:xd(I)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ke(t)).next(r=>{let i=Pa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let o=Pa();return this.indexManager.getCollectionParents(e,i).next(c=>le.forEach(c,h=>{const _=(y=t,I=h.child(i),new Ra(I,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,I;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(y=>{y.forEach((I,D)=>{o=o.insert(I,D)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(o=>{i.forEach((h,_)=>{const y=_.getKey();null===o.get(y)&&(o=o.insert(y,$n.newInvalidDocument(y)))});let c=Pa();return o.forEach((h,_)=>{const y=i.get(h);void 0!==y&&Af(y.mutation,_,ps.empty(),tr.now()),Xu(t,_)&&(c=c.insert(h,_))}),c})}}class vA{constructor(e){this.serializer=e,this.Zn=new Map,this.Xn=new Map}getBundleMetadata(e,t){return le.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Mr(r.createTime)}),le.resolve()}getNamedQuery(e,t){return le.resolve(this.Xn.get(t))}saveNamedQuery(e,t){return this.Xn.set(t.name,{name:(r=t).name,query:dy(r.bundledQuery),readTime:Mr(r.readTime)}),le.resolve();var r}}class yy{constructor(){this.overlays=new cr(Ke.comparator),this.ts=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ts();return le.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.re(e,t,o)}),le.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ts.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.ts.delete(r)),le.resolve()}getOverlaysForCollection(e,t,r){const i=ts(),o=t.length+1,c=new Ke(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const _=h.getNext().value,y=_.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===o&&_.largestBatchId>r&&i.set(_.getKey(),_)}return le.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new cr((y,I)=>y-I);const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let I=o.get(y.largestBatchId);null===I&&(I=ts(),o=o.insert(y.largestBatchId,I)),I.set(y.getKey(),y)}}const h=ts(),_=o.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((y,I)=>h.set(y,I)),!(h.size()>=i)););return le.resolve(h)}re(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.ts.get(i.largestBatchId).delete(r.key);this.ts.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new ny(t,r));let o=this.ts.get(t);void 0===o&&(o=Ht(),this.ts.set(t,o)),this.ts.set(t,o.add(r.key))}}class vy{constructor(){this.es=new Mn(ii.ns),this.ss=new Mn(ii.rs)}isEmpty(){return this.es.isEmpty()}addReference(e,t){const r=new ii(e,t);this.es=this.es.add(r),this.ss=this.ss.add(r)}os(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.us(new ii(e,t))}cs(e,t){e.forEach(r=>this.removeReference(r,t))}hs(e){const t=new Ke(new un([])),r=new ii(t,e),i=new ii(t,e+1),o=[];return this.ss.forEachInRange([r,i],c=>{this.us(c),o.push(c.key)}),o}ls(){this.es.forEach(e=>this.us(e))}us(e){this.es=this.es.delete(e),this.ss=this.ss.delete(e)}fs(e){const t=new Ke(new un([])),r=new ii(t,e),i=new ii(t,e+1);let o=Ht();return this.ss.forEachInRange([r,i],c=>{o=o.add(c.key)}),o}containsKey(e){const t=new ii(e,0),r=this.es.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ii{constructor(e,t){this.key=e,this.ds=t}static ns(e,t){return Ke.comparator(e.key,t.key)||Bt(e.ds,t.ds)}static rs(e,t){return Bt(e.ds,t.ds)||Ke.comparator(e.key,t.key)}}class gb{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this._s=new Mn(ii.ns)}checkEmpty(e){return le.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const o=this.ws;this.ws++;const c=new $g(o,t,r,i);this.mutationQueue.push(c);for(const h of i)this._s=this._s.add(new ii(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return le.resolve(c)}lookupMutationBatch(e,t){return le.resolve(this.gs(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ys(t+1),o=i<0?0:i;return le.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ii(t,0),i=new ii(t,Number.POSITIVE_INFINITY),o=[];return this._s.forEachInRange([r,i],c=>{const h=this.gs(c.ds);o.push(h)}),le.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Mn(Bt);return t.forEach(i=>{const o=new ii(i,0),c=new ii(i,Number.POSITIVE_INFINITY);this._s.forEachInRange([o,c],h=>{r=r.add(h.ds)})}),le.resolve(this.ps(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;Ke.isDocumentKey(o)||(o=o.child(""));const c=new ii(new Ke(o),0);let h=new Mn(Bt);return this._s.forEachWhile(_=>{const y=_.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(h=h.add(_.ds)),!0)},c),le.resolve(this.ps(h))}ps(e){const t=[];return e.forEach(r=>{const i=this.gs(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){wt(0===this.Is(t.batchId,"removed")),this.mutationQueue.shift();let r=this._s;return le.forEach(t.mutations,i=>{const o=new ii(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this._s=r})}En(e){}containsKey(e,t){const r=new ii(t,0),i=this._s.firstAfterOrEqual(r);return le.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return le.resolve()}Is(e,t){return this.ys(e)}ys(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}gs(e){const t=this.ys(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class wA{constructor(e){this.Ts=e,this.docs=new cr(Ke.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,c=this.Ts(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return le.resolve(r?r.document.mutableCopy():$n.newInvalidDocument(t))}getEntries(e,t){let r=ti();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():$n.newInvalidDocument(i))}),le.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=ti();const c=t.path,h=new Ke(c.child("")),_=this.docs.getIteratorFrom(h);for(;_.hasNext();){const{key:y,value:{document:I}}=_.getNext();if(!c.isPrefixOf(y.path))break;y.path.length>c.length+1||gw(pw(I),r)<=0||(i.has(I.key)||Xu(t,I))&&(o=o.insert(I.key,I.mutableCopy()))}return le.resolve(o)}getAllFromCollectionGroup(e,t,r,i){ct()}Es(e,t){return le.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new em(this)}getSize(e){return le.resolve(this.size)}}class em extends cb{constructor(e){super(),this.Jn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Jn.addEntry(e,i)):this.Jn.removeEntry(r)}),le.waitFor(t)}getFromCache(e,t){return this.Jn.getEntry(e,t)}getAllFromCache(e,t){return this.Jn.getEntries(e,t)}}class tm{constructor(e){this.persistence=e,this.As=new Us(t=>Dd(t),kg),this.lastRemoteSnapshotVersion=Ct.min(),this.highestTargetId=0,this.Rs=0,this.vs=new vy,this.targetCount=0,this.bs=Vd.vn()}forEachTarget(e,t){return this.As.forEach((r,i)=>t(i)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.Rs)}allocateTargetId(e){return this.highestTargetId=this.bs.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Rs&&(this.Rs=t),le.resolve()}Sn(e){this.As.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.bs=new Vd(t),this.highestTargetId=t),e.sequenceNumber>this.Rs&&(this.Rs=e.sequenceNumber)}addTargetData(e,t){return this.Sn(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.Sn(t),le.resolve()}removeTargetData(e,t){return this.As.delete(t.target),this.vs.hs(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.As.forEach((c,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.As.delete(c),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),le.waitFor(o).next(()=>i)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const r=this.As.get(t)||null;return le.resolve(r)}addMatchingKeys(e,t,r){return this.vs.os(t,r),le.resolve()}removeMatchingKeys(e,t,r){this.vs.cs(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(c=>{o.push(i.markPotentiallyOrphaned(e,c))}),le.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.vs.hs(t),le.resolve()}getMatchingKeysForTargetId(e,t){const r=this.vs.fs(t);return le.resolve(r)}containsKey(e,t){return le.resolve(this.vs.containsKey(t))}}class mb{constructor(e,t){this.Ps={},this.overlays={},this.Vs=new Fs(0),this.Ss=!1,this.Ss=!0,this.referenceDelegate=e(this),this.Ds=new tm(this),this.indexManager=new sb,this.remoteDocumentCache=new wA(r=>this.referenceDelegate.Cs(r)),this.serializer=new Jw(t),this.xs=new vA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ss=!1,Promise.resolve()}get started(){return this.Ss}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new yy,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ps[e.toKey()];return r||(r=new gb(t,this.referenceDelegate),this.Ps[e.toKey()]=r),r}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.xs}runTransaction(e,t,r){Oe("MemoryPersistence","Starting transaction:",e);const i=new EA(this.Vs.next());return this.referenceDelegate.Ns(),r(i).next(o=>this.referenceDelegate.ks(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Os(e,t){return le.or(Object.values(this.Ps).map(r=>()=>r.containsKey(e,t)))}}class EA extends B_{constructor(e){super(),this.currentSequenceNumber=e}}class wy{constructor(e){this.persistence=e,this.$s=new vy,this.Ms=null}static Fs(e){return new wy(e)}get Bs(){if(this.Ms)return this.Ms;throw ct()}addReference(e,t,r){return this.$s.addReference(r,t),this.Bs.delete(r.toString()),le.resolve()}removeReference(e,t,r){return this.$s.removeReference(r,t),this.Bs.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.Bs.add(t.toString()),le.resolve()}removeTarget(e,t){this.$s.hs(t.targetId).forEach(i=>this.Bs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Bs.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ns(){this.Ms=new Set}ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.Bs,r=>{const i=Ke.fromPath(r);return this.Ls(e,i).next(o=>{o||t.removeEntry(i,Ct.min())})}).next(()=>(this.Ms=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ls(e,t).next(r=>{r?this.Bs.delete(t.toString()):this.Bs.add(t.toString())})}Cs(e){return 0}Ls(e,t){return le.or([()=>le.resolve(this.$s.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class _b{constructor(e){this.serializer=e}M(e,t,r,i){const o=new mw("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yw,{unique:!0}),h.createObjectStore("documentMutations"),h0(e),function(h){h.createObjectStore("remoteDocuments")}(e));let c=le.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),h0(e)),c=c.next(()=>function(h){const _=h.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ct.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",y)}(o))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(h,_){return _.store("mutations").j().next(y=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yw,{unique:!0});const I=_.store("mutations"),D=y.map(R=>I.put(R));return le.waitFor(D)})}(e,o))),c=c.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.qs(o))),r<6&&i>=6&&(c=c.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Us(o)))),r<7&&i>=7&&(c=c.next(()=>this.Ks(o))),r<8&&i>=8&&(c=c.next(()=>this.Gs(e,o))),r<9&&i>=9&&(c=c.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.Qs(o))),r<11&&i>=11&&(c=c.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(h){const _=h.createObjectStore("documentOverlays",{keyPath:Mg});_.createIndex("collectionPathOverlayIndex",Ew,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",H_,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(h){const _=h.createObjectStore("remoteDocumentsV14",{keyPath:GS});_.createIndex("documentKeyIndex",GR),_.createIndex("collectionGroupIndex",wf)}(e)).next(()=>this.zs(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.js(e,o))),r<15&&i>=15&&(c=c.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:ZS}).createIndex("sequenceNumberIndex",j_,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:Ef}).createIndex("documentKeyIndex",ww,{unique:!1})}(e))),c}Us(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=Of(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>le.forEach(i,o=>{const c=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",c).next(h=>le.forEach(h,_=>{wt(_.userId===o.userId);const y=Yl(this.serializer,_);return mA(e,o.userId,y).next(()=>{})}))}))}Ks(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.Z((c,h)=>{const _=new un(c),y=[0,es(_)];o.push(t.get(y).next(I=>I?le.resolve():t.put({targetId:0,path:es(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>le.waitFor(o))})}Gs(e,t){e.createObjectStore("collectionParents",{keyPath:qS});const r=t.store("collectionParents"),i=new my,o=c=>{if(i.add(c)){const h=c.lastSegment(),_=c.popLast();return r.put({collectionId:h,parent:es(_)})}};return t.store("remoteDocuments").Z({Y:!0},(c,h)=>{const _=new un(c);return o(_.popLast())}).next(()=>t.store("documentMutations").Z({Y:!0},([c,h,_],y)=>{const I=jo(h);return o(I.popLast())}))}Qs(e){const t=e.store("targets");return t.Z((r,i)=>{const o=ic(i),c=cy(this.serializer,o);return t.put(c)})}zs(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((o,c)=>{const h=t.store("remoteDocumentsV14"),_=(y=c,y.document?new Ke(un.fromString(y.document.name).popFirst(5)):y.noDocument?Ke.fromSegments(y.noDocument.path):y.unknownDocument?Ke.fromSegments(y.unknownDocument.path):ct()).path.toArray();var y;const I={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(h.put(I))}).next(()=>le.waitFor(i))}js(e,t){const r=t.store("mutations"),i=c0(this.serializer),o=new mb(wy.Fs,this.serializer.se);return r.j().next(c=>{const h=new Map;return c.forEach(_=>{var y;let I=null!==(y=h.get(_.userId))&&void 0!==y?y:Ht();Yl(this.serializer,_).keys().forEach(D=>I=I.add(D)),h.set(_.userId,I)}),le.forEach(h,(_,y)=>{const I=new mi(y),D=fy.ie(this.serializer,I),R=o.getIndexManager(I),L=l0.ie(I,this.serializer,R,o.referenceDelegate);return new pb(i,L,D,R).recalculateAndSaveOverlaysForDocumentKeys(new xg(t,Fs.ct),_).next()})})}}function h0(n){n.createObjectStore("targetDocuments",{keyPath:zS}).createIndex("documentTargetsIndex",cI,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",uI,{unique:!0}),n.createObjectStore("targetGlobal")}const Ey="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class f0{constructor(e,t,r,i,o,c,h,_,y,I,D=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ws=o,this.window=c,this.document=h,this.Hs=y,this.Js=I,this.Ys=D,this.Vs=null,this.Ss=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.Xs=null,this.ti=null,this.ei=Number.NEGATIVE_INFINITY,this.ni=R=>Promise.resolve(),!f0.D())throw new Ne(ue.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ub(this,i),this.si=t+"main",this.serializer=new Jw(_),this.ii=new $o(this.si,this.Ys,new _b(this.serializer)),this.Ds=new _A(this.referenceDelegate,this.serializer),this.remoteDocumentCache=c0(this.serializer),this.xs=new eb,this.window&&this.window.localStorage?this.ri=this.window.localStorage:(this.ri=null,!1===I&&Sr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.oi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(ue.FAILED_PRECONDITION,Ey);return this.ui(),this.ci(),this.ai(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ds.getHighestSequenceNumber(e))}).then(e=>{this.Vs=new Fs(e,this.Hs)}).then(()=>{this.Ss=!0}).catch(e=>(this.ii&&this.ii.close(),Promise.reject(e)))}hi(e){var t=this;return this.ni=function(){var r=(0,W.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ii.B(function(){var t=(0,W.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ws.enqueueAndForget((0,W.Z)(function*(){t.started&&(yield t.oi())})))}oi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Cy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.li(e).next(t=>{t||(this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)))})}).next(()=>this.fi(e)).next(t=>this.isPrimary&&!t?this.di(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(zu(e))return Oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ws.enqueueRetryable(()=>this.ni(e)),this.isPrimary=e})}li(e){return Lf(e).get("owner").next(t=>le.resolve(this._i(t)))}mi(e){return Cy(e).delete(this.clientId)}gi(){var e=this;return(0,W.Z)(function*(){if(e.isPrimary&&!e.yi(e.ei,18e5)){e.ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=_i(r,"clientMetadata");return i.j().next(o=>{const c=e.pi(o,18e5),h=o.filter(_=>-1===c.indexOf(_));return le.forEach(h,_=>i.delete(_.clientId)).next(()=>h)})}).catch(()=>[]);if(e.ri)for(const r of t)e.ri.removeItem(e.Ii(r.clientId))}})()}ai(){this.ti=this.Ws.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.oi().then(()=>this.gi()).then(()=>this.ai()))}_i(e){return!!e&&e.ownerId===this.clientId}fi(e){return this.Js?le.resolve(!0):Lf(e).get("owner").next(t=>{if(null!==t&&this.yi(t.leaseTimestampMs,5e3)&&!this.Ti(t.ownerId)){if(this._i(t)&&this.networkEnabled)return!0;if(!this._i(t)){if(!t.allowTabSynchronization)throw new Ne(ue.FAILED_PRECONDITION,Ey);return!1}}return!(!this.networkEnabled||!this.inForeground)||Cy(e).j().next(r=>void 0===this.pi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Oe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,W.Z)(function*(){e.Ss=!1,e.Ei(),e.ti&&(e.ti.cancel(),e.ti=null),e.Ai(),e.Ri(),yield e.ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new xg(t,Fs.ct);return e.di(r).next(()=>e.mi(r))}),e.ii.close(),e.vi()})()}pi(e,t){return e.filter(r=>this.yi(r.updateTimeMs,t)&&!this.Ti(r.clientId))}bi(){return this.runTransaction("getActiveClients","readonly",e=>Cy(e).j().next(t=>this.pi(t,18e5).map(r=>r.clientId)))}get started(){return this.Ss}getMutationQueue(e,t){return l0.ie(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ob(e,this.serializer.se.databaseId)}getDocumentOverlayCache(e){return fy.ie(this.serializer,e)}getBundleCache(){return this.xs}runTransaction(e,t,r){Oe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",o=15===(c=this.Ys)?dI:14===c?z_:13===c?G_:12===c?Iw:11===c?Cw:void ct();var c;let h;return this.ii.runTransaction(e,i,o,_=>(h=new xg(_,this.Vs?this.Vs.next():Fs.ct),"readwrite-primary"===t?this.li(h).next(y=>!!y||this.fi(h)).next(y=>{if(!y)throw Sr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)),new Ne(ue.FAILED_PRECONDITION,U_);return r(h)}).next(y=>this.wi(h).next(()=>y)):this.Pi(h).next(()=>r(h)))).then(_=>(h.raiseOnCommittedEvent(),_))}Pi(e){return Lf(e).get("owner").next(t=>{if(null!==t&&this.yi(t.leaseTimestampMs,5e3)&&!this.Ti(t.ownerId)&&!this._i(t)&&!(this.Js||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ne(ue.FAILED_PRECONDITION,Ey)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Lf(e).put("owner",t)}static D(){return $o.D()}di(e){const t=Lf(e);return t.get("owner").next(r=>this._i(r)?(Oe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):le.resolve())}yi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Sr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ui(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Xs=()=>{this.Ws.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.oi()))},this.document.addEventListener("visibilitychange",this.Xs),this.inForeground="visible"===this.document.visibilityState)}Ai(){this.Xs&&(this.document.removeEventListener("visibilitychange",this.Xs),this.Xs=null)}ci(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ei();const t=/(?:Version|Mobile)\/1[456]/;(0,O.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ws.enterRestrictedMode(!0),this.Ws.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}Ri(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ti(e){var t;try{const r=null!==(null===(t=this.ri)||void 0===t?void 0:t.getItem(this.Ii(e)));return Oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Sr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ei(){if(this.ri)try{this.ri.setItem(this.Ii(this.clientId),String(Date.now()))}catch(e){Sr("Failed to set zombie client id.",e)}}vi(){if(this.ri)try{this.ri.removeItem(this.Ii(this.clientId))}catch{}}Ii(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Lf(n){return _i(n,"owner")}function Cy(n){return _i(n,"clientMetadata")}function p0(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class yb{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Vi=r,this.Si=i}static Di(e,t){let r=Ht(),i=Ht();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new yb(e,t.fromCache,r,i)}}class CA{constructor(){this.Ci=!1}initialize(e,t){this.xi=e,this.indexManager=t,this.Ci=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ni(e,t).next(o=>o||this.ki(e,t,i,r)).next(o=>o||this.Oi(e,t))}Ni(e,t){if(kw(t))return le.resolve(null);let r=Ii(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Ls(t,null,"F"),r=Ii(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const c=Ht(...o);return this.xi.getDocuments(e,c).next(h=>this.indexManager.getMinOffset(e,r).next(_=>{const y=this.$i(t,h);return this.Mi(t,y,c,_.readTime)?this.Ni(e,Ls(t,null,"F")):this.Fi(e,y,t,_)}))})))}ki(e,t,r,i){return kw(t)||i.isEqual(Ct.min())?this.Oi(e,t):this.xi.getDocuments(e,r).next(o=>{const c=this.$i(t,o);return this.Mi(t,c,r,i)?this.Oi(e,t):(dw()<=Ot.in.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ql(t)),this.Fi(e,c,t,fw(i,-1)))})}$i(e,t){let r=new Mn(Y_(e));return t.forEach((i,o)=>{Xu(e,o)&&(r=r.add(o))}),r}Mi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Oi(e,t){return dw()<=Ot.in.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",ql(t)),this.xi.getDocumentsMatchingQuery(e,t,Jr.min())}Fi(e,t,r,i){return this.xi.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(c=>{o=o.insert(c.key,c)}),o))}}class KR{constructor(e,t,r,i){this.persistence=e,this.Bi=t,this.serializer=i,this.Li=new cr(Bt),this.qi=new Us(o=>Dd(o),kg),this.Ui=new Map,this.Ki=e.getRemoteDocumentCache(),this.Ds=e.getTargetCache(),this.xs=e.getBundleCache(),this.Gi(r)}Gi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pb(this.Ki,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ki.setIndexManager(this.indexManager),this.Bi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Li))}}function IA(n,e,t,r){return new KR(n,e,t,r)}function g0(n,e){return Vf.apply(this,arguments)}function Vf(){return Vf=(0,W.Z)(function*(n,e){const t=Xe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Gi(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const c=[],h=[];let _=Ht();for(const y of i){c.push(y.batchId);for(const I of y.mutations)_=_.add(I.key)}for(const y of o){h.push(y.batchId);for(const I of y.mutations)_=_.add(I.key)}return t.localDocuments.getDocuments(r,_).next(y=>({Qi:y,removedBatchIds:c,addedBatchIds:h}))})})}),Vf.apply(this,arguments)}function vb(n){const e=Xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ds.getLastRemoteSnapshotVersion(t))}function Uf(n,e,t){let r=Ht(),i=Ht();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let c=ti();return t.forEach((h,_)=>{const y=o.get(h);_.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(h)),_.isNoDocument()&&_.version.isEqual(Ct.min())?(e.removeEntry(h,_.readTime),c=c.insert(h,_)):!y.isValidDocument()||_.version.compareTo(y.version)>0||0===_.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(_),c=c.insert(h,_)):Oe("LocalStore","Ignoring outdated watch update for ",h,". Current version:",y.version," Watch version:",_.version)}),{zi:c,ji:i}})}function TA(n,e){const t=Xe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Bf(n,e){const t=Xe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ds.getTargetData(r,e).next(o=>o?(i=o,le.resolve(i)):t.Ds.allocateTargetId(r).next(c=>(i=new tc(e,c,0,r.currentSequenceNumber),t.Ds.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Li.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Li=t.Li.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function $f(n,e,t){return m0.apply(this,arguments)}function m0(){return m0=(0,W.Z)(function*(n,e,t){const r=Xe(n),i=r.Li.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!zu(c))throw c;Oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Li=r.Li.remove(e),r.qi.delete(i.target)}),m0.apply(this,arguments)}function _0(n,e,t){const r=Xe(n);let i=Ct.min(),o=Ht();return r.persistence.runTransaction("Execute query","readonly",c=>function(h,_,y){const I=Xe(h),D=I.qi.get(y);return void 0!==D?le.resolve(I.Li.get(D)):I.Ds.getTargetData(_,y)}(r,c,Ii(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Ds.getMatchingKeysForTargetId(c,h.targetId).next(_=>{o=_})}).next(()=>r.Bi.getDocumentsMatchingQuery(c,e,t?i:Ct.min(),t?o:Ht())).next(h=>(Cb(r,Vs(e),h),{documents:h,Wi:o})))}function Eb(n,e){const t=Xe(n),r=Xe(t.Ds),i=t.Li.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ne(o,e).next(c=>c?c.target:null))}function y0(n,e){const t=Xe(n),r=t.Ui.get(e)||Ct.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Ki.getAllFromCollectionGroup(i,e,fw(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Cb(t,e,i),i))}function Cb(n,e,t){let r=n.Ui.get(e)||Ct.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Ui.set(e,r)}function $d(){return $d=(0,W.Z)(function*(n,e,t,r){const i=Xe(n);let o=Ht(),c=ti();for(const y of t){const I=e.Hi(y.metadata.name);y.document&&(o=o.add(I));const D=e.Ji(y);D.setReadTime(e.Yi(y.metadata.readTime)),c=c.insert(I,D)}const h=i.Ki.newChangeBuffer({trackRemovals:!0}),_=yield Bf(i,(y=r,Ii(Fg(un.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>Uf(y,h,c).next(I=>(h.apply(y),I)).next(I=>i.Ds.removeMatchingKeysForTargetId(y,_.targetId).next(()=>i.Ds.addMatchingKeys(y,o,_.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(y,I.zi,I.ji)).next(()=>I.zi)))}),$d.apply(this,arguments)}function SA(n,e){return Iy.apply(this,arguments)}function Iy(){return Iy=(0,W.Z)(function*(n,e,t=Ht()){const r=yield Bf(n,Ii(dy(e.bundledQuery))),i=Xe(n);return i.persistence.runTransaction("Save named query","readwrite",o=>{const c=Mr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.xs.saveNamedQuery(o,e);const h=r.withResumeToken($r.EMPTY_BYTE_STRING,c);return i.Li=i.Li.insert(h.targetId,h),i.Ds.updateTargetData(o,h).next(()=>i.Ds.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.Ds.addMatchingKeys(o,t,r.targetId)).next(()=>i.xs.saveNamedQuery(o,e))})}),Iy.apply(this,arguments)}function Ib(n,e){return`firestore_clients_${n}_${e}`}function v0(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function w0(n,e){return`firestore_targets_${n}_${e}`}class nm{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let o,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(o=new Ne(i.error.code,i.error.message))),c?new nm(e,t,i.state,o):(Sr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class rm{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new Ne(r.error.code,r.error.message))),o?new rm(e,r.state,i):(Sr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Lg();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=oI(r.activeTargetIds[c]),o=o.add(r.activeTargetIds[c]);return i?new jf(e,o):(Sr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class E0{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new E0(t.clientId,t.onlineState):(Sr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class by{constructor(){this.activeTargetIds=Lg()}tr(e){this.activeTargetIds=this.activeTargetIds.add(e)}er(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ty{constructor(e,t,r,i,o){this.window=e,this.Ws=t,this.persistenceKey=r,this.nr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.sr=this.ir.bind(this),this.rr=new cr(Bt),this.started=!1,this.ur=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.cr=Ib(this.persistenceKey,this.nr),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.rr=this.rr.insert(this.nr,new by),this.hr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.lr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.dr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this._r=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.sr)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,W.Z)(function*(){const t=yield e.syncEngine.bi();for(const i of t){if(i===e.nr)continue;const o=e.getItem(Ib(e.persistenceKey,i));if(o){const c=jf.Zi(i,o);c&&(e.rr=e.rr.insert(c.clientId,c))}}e.mr();const r=e.storage.getItem(e.wr);if(r){const i=e.gr(r);i&&e.yr(i)}for(const i of e.ur)e.ir(i);e.ur=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.pr(this.rr)}isActiveQueryTarget(e){let t=!1;return this.rr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ir(e,"pending")}updateMutationState(e,t,r){this.Ir(e,t,r),this.Tr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(w0(this.persistenceKey,e));if(r){const i=rm.Zi(e,r);i&&(t=i.state)}}return this.Er.tr(e),this.mr(),t}removeLocalQueryTarget(e){this.Er.er(e),this.mr()}isLocalQueryTarget(e){return this.Er.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(w0(this.persistenceKey,e))}updateQueryState(e,t,r){this.Ar(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Tr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Rr(e)}notifyBundleLoaded(e){this.vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.sr),this.removeItem(this.cr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Oe("SharedClientState","READ",e,t),t}setItem(e,t){Oe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ir(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Oe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.cr)return void Sr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ws.enqueueRetryable((0,W.Z)(function*(){if(t.started){if(null!==r.key)if(t.hr.test(r.key)){if(null==r.newValue){const i=t.br(r.key);return t.Pr(i,null)}{const i=t.Vr(r.key,r.newValue);if(i)return t.Pr(i.clientId,i)}}else if(t.lr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Cr(r.key,r.newValue);if(i)return t.Nr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.gr(r.newValue);if(i)return t.yr(i)}}else if(r.key===t.ar){const i=function(o){let c=Fs.ct;if(null!=o)try{const h=JSON.parse(o);wt("number"==typeof h),c=h}catch(h){Sr("SharedClientState","Failed to read sequence number from WebStorage",h)}return c}(r.newValue);i!==Fs.ct&&t.sequenceNumberHandler(i)}else if(r.key===t._r){const i=t.kr(r.newValue);yield Promise.all(i.map(o=>t.syncEngine.Or(o)))}}else t.ur.push(r)}))}}get Er(){return this.rr.get(this.nr)}mr(){this.setItem(this.cr,this.Er.Xi())}Ir(e,t,r){const i=new nm(this.currentUser,e,t,r),o=v0(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Xi())}Tr(e){const t=v0(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Rr(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.nr,onlineState:e}))}Ar(e,t,r){const i=w0(this.persistenceKey,e),o=new rm(e,t,r);this.setItem(i,o.Xi())}vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}br(e){const t=this.hr.exec(e);return t?t[1]:null}Vr(e,t){const r=this.br(e);return jf.Zi(r,t)}Sr(e,t){const r=this.lr.exec(e),i=Number(r[1]);return nm.Zi(new mi(void 0!==r[2]?r[2]:null),i,t)}Cr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return rm.Zi(i,t)}gr(e){return E0.Zi(e)}kr(e){return JSON.parse(e)}Dr(e){var t=this;return(0,W.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Nr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}Pr(e,t){const r=t?this.rr.insert(e,t):this.rr.remove(e),i=this.pr(this.rr),o=this.pr(r),c=[],h=[];return o.forEach(_=>{i.has(_)||c.push(_)}),i.forEach(_=>{o.has(_)||h.push(_)}),this.syncEngine.Fr(c,h).then(()=>{this.rr=r})}yr(e){this.rr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}pr(e){let t=Lg();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class bb{constructor(){this.Br=new by,this.Lr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Br.tr(e),this.Lr[e]||"not-current"}updateQueryState(e,t,r){this.Lr[e]=t}removeLocalQueryTarget(e){this.Br.er(e)}isLocalQueryTarget(e){return this.Br.activeTargetIds.has(e)}clearQueryState(e){delete this.Lr[e]}getAllActiveQueryTargets(){return this.Br.activeTargetIds}isActiveQueryTarget(e){return this.Br.activeTargetIds.has(e)}start(){return this.Br=new by,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class AA{qr(e){}shutdown(){}}class Tb{constructor(){this.Ur=()=>this.Kr(),this.Gr=()=>this.Qr(),this.zr=[],this.jr()}qr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Gr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Gr)}Kr(){Oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Qr(){Oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Hf=null;function C0(){return null===Hf?Hf=268435456+Math.round(2147483648*Math.random()):Hf++,"0x"+Hf.toString(16)}const Db={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class MA{constructor(e){this.Wr=e.Wr,this.Hr=e.Hr}Jr(e){this.Yr=e}Zr(e){this.Xr=e}onMessage(e){this.eo=e}close(){this.Hr()}send(e){this.Wr(e)}no(){this.Yr()}so(e){this.Xr(e)}io(e){this.eo(e)}}const Oi="WebChannelConnection";class xA extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.ro=(e.ssl?"https":"http")+"://"+e.host,this.oo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get uo(){return!1}co(e,t,r,i,o){const c=C0(),h=this.ao(e,t);Oe("RestConnection",`Sending RPC '${e}' ${c}:`,h,r);const _={};return this.ho(_,i,o),this.lo(e,h,_,r).then(y=>(Oe("RestConnection",`Received RPC '${e}' ${c}: `,y),y),y=>{throw Xi("RestConnection",`RPC '${e}' ${c} failed with error: `,y,"url: ",h,"request:",r),y})}fo(e,t,r,i,o,c){return this.co(e,t,r,i,o)}ho(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+mf,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}ao(e,t){return`${this.ro}/v1/${t}:${Db[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,r,i){const o=C0();return new Promise((c,h)=>{const _=new cw;_.setWithCredentials(!0),_.listenOnce(WC.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case lw.NO_ERROR:const I=_.getResponseJson();Oe(Oi,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(I)),c(I);break;case lw.TIMEOUT:Oe(Oi,`RPC '${e}' ${o} timed out`),h(new Ne(ue.DEADLINE_EXCEEDED,"Request time out"));break;case lw.HTTP_ERROR:const D=_.getStatus();if(Oe(Oi,`RPC '${e}' ${o} failed with status:`,D,"response text:",_.getResponseText()),D>0){let R=_.getResponseJson();Array.isArray(R)&&(R=R[0]);const L=R?.error;if(L&&L.status&&L.message){const $=function(X){const ce=X.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(ce)>=0?ce:ue.UNKNOWN}(L.status);h(new Ne($,L.message))}else h(new Ne(ue.UNKNOWN,"Server responded with status "+_.getStatus()))}else h(new Ne(ue.UNAVAILABLE,"Connection failed."));break;default:ct()}}finally{Oe(Oi,`RPC '${e}' ${o} completed.`)}});const y=JSON.stringify(i);Oe(Oi,`RPC '${e}' ${o} sending request:`,i),_.send(t,"POST",y,r,15)})}wo(e,t,r){const i=C0(),o=[this.ro,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=OS(),h=kS(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(_.xmlHttpFactory=new uw({})),this.ho(_.initMessageHeaders,t,r),_.encodeInitMessageHeaders=!0;const y=o.join("");Oe(Oi,`Creating RPC '${e}' stream ${i}: ${y}`,_);const I=c.createWebChannel(y,_);let D=!1,R=!1;const L=new MA({Wr:X=>{R?Oe(Oi,`Not sending because RPC '${e}' stream ${i} is closed:`,X):(D||(Oe(Oi,`Opening RPC '${e}' stream ${i} transport.`),I.open(),D=!0),Oe(Oi,`RPC '${e}' stream ${i} sending:`,X),I.send(X))},Hr:()=>I.close()}),$=(X,ce,qe)=>{X.listen(ce,ut=>{try{qe(ut)}catch(at){setTimeout(()=>{throw at},0)}})};return $(I,O_.EventType.OPEN,()=>{R||Oe(Oi,`RPC '${e}' stream ${i} transport opened.`)}),$(I,O_.EventType.CLOSE,()=>{R||(R=!0,Oe(Oi,`RPC '${e}' stream ${i} transport closed`),L.so())}),$(I,O_.EventType.ERROR,X=>{R||(R=!0,Xi(Oi,`RPC '${e}' stream ${i} transport errored:`,X),L.so(new Ne(ue.UNAVAILABLE,"The operation could not be completed")))}),$(I,O_.EventType.MESSAGE,X=>{var ce;if(!R){const qe=X.data[0];wt(!!qe);const at=qe.error||(null===(ce=qe[0])||void 0===ce?void 0:ce.error);if(at){Oe(Oi,`RPC '${e}' stream ${i} received error:`,at);const Et=at.status;let $t=function(Tn){const Vi=Ar[Tn];if(void 0!==Vi)return Kl(Vi)}(Et),Gt=at.message;void 0===$t&&($t=ue.INTERNAL,Gt="Unknown error status: "+Et+" with message "+at.message),R=!0,L.so(new Ne($t,Gt)),I.close()}else Oe(Oi,`RPC '${e}' stream ${i} received:`,qe),L.io(qe)}}),$(h,KC.STAT_EVENT,X=>{X.stat===P_.PROXY?Oe(Oi,`RPC '${e}' stream ${i} detected buffering proxy`):X.stat===P_.NOPROXY&&Oe(Oi,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{L.no()},0),L}}function Sb(){return typeof window<"u"?window:null}function Dy(){return typeof document<"u"?document:null}function im(n){return new zI(n,!0)}class I0{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Ws=e,this.timerId=t,this._o=r,this.mo=i,this.yo=o,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,t-r);i>0&&Oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Io=this.Ws.enqueueAfterDelay(this.timerId,i,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this._o&&(this.po=this._o),this.po>this.yo&&(this.po=this.yo)}vo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class Ab{constructor(e,t,r,i,o,c,h,_){this.Ws=e,this.bo=r,this.Po=i,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=_,this.state=0,this.Vo=0,this.So=null,this.Do=null,this.stream=null,this.Co=new I0(e,t)}xo(){return 1===this.state||5===this.state||this.No()}No(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.ko()}stop(){var e=this;return(0,W.Z)(function*(){e.xo()&&(yield e.close(0))})()}Oo(){this.state=0,this.Co.reset()}$o(){this.No()&&null===this.So&&(this.So=this.Ws.enqueueAfterDelay(this.bo,6e4,()=>this.Mo()))}Fo(e){this.Bo(),this.stream.send(e)}Mo(){var e=this;return(0,W.Z)(function*(){if(e.No())return e.close(0)})()}Bo(){this.So&&(this.So.cancel(),this.So=null)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}close(e,t){var r=this;return(0,W.Z)(function*(){r.Bo(),r.Lo(),r.Co.cancel(),r.Vo++,4!==e?r.Co.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(Sr(t.toString()),Sr("Using maximum backoff delay to prevent overloading the backend."),r.Co.Eo()):t&&t.code===ue.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Vo===t&&this.Ko(r,i)},r=>{e(()=>{const i=new Ne(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Go(i)})})}Ko(e,t){const r=this.Uo(this.Vo);this.stream=this.Qo(e,t),this.stream.Jr(()=>{r(()=>(this.state=2,this.Do=this.Ws.enqueueAfterDelay(this.Po,1e4,()=>(this.No()&&(this.state=3),Promise.resolve())),this.listener.Jr()))}),this.stream.Zr(i=>{r(()=>this.Go(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}ko(){var e=this;this.state=5,this.Co.Ao((0,W.Z)(function*(){e.state=0,e.start()}))}Go(e){return Oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Ws.enqueueAndForget(()=>this.Vo===e?t():(Oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Mb extends Ab{constructor(e,t,r,i,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=o}Qo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.Co.reset();const t=function La(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:ct(),i=e.targetChange.targetIds||[],o=function(_,y){return _.useProto3Json?(wt(void 0===y||"string"==typeof y),$r.fromBase64String(y||"")):(wt(void 0===y||y instanceof Uint8Array),$r.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(_){const y=void 0===_.code?ue.UNKNOWN:Kl(_.code);return new Ne(y,_.message||"")}(c);t=new sy(r,i,o,h||null)}else if("documentChange"in e){const r=e.documentChange,i=Fa(n,r.document.name),o=Mr(r.document.updateTime),c=r.document.createTime?Mr(r.document.createTime):Ct.min(),h=new ei({mapValue:{fields:r.document.fields}}),_=$n.newFoundDocument(i,o,c,h);t=new xf(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,i=Fa(n,r.document),o=r.readTime?Mr(r.readTime):Ct.min(),c=$n.newNoDocument(i,o);t=new xf([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Fa(n,r.document);t=new xf([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ct();{const r=e.filter,o=new BI(r.count||0);t=new $I(r.targetId,o)}}var _;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return Ct.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ct.min():o.readTime?Mr(o.readTime):Ct.min()}(e);return this.listener.zo(t,r)}jo(e){const t={};t.database=Hg(this.serializer),t.addTarget=function(i,o){let c;const h=o.target;return c=W_(h)?{documents:uo(i,h)}:{query:Bs(i,h)},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0?c.resumeToken=qI(i,o.resumeToken):o.snapshotVersion.compareTo(Ct.min())>0&&(c.readTime=Nf(i,o.snapshotVersion.toTimestamp())),c}(this.serializer,e);const r=function WI(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ct()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Fo(t)}Wo(e){const t={};t.database=Hg(this.serializer),t.removeTarget=e,this.Fo(t)}}class xb extends Ab{constructor(e,t,r,i,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=o,this.Ho=!1}get Jo(){return this.Ho}start(){this.Ho=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Ho&&this.Yo([])}Qo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(wt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Ho){this.Co.reset();const t=function Va(n,e){return n&&n.length>0?(wt(void 0!==e),n.map(t=>function(r,i){let o=Mr(r.updateTime?r.updateTime:i);return o.isEqual(Ct.min())&&(o=Mr(i)),new kI(o,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Mr(e.commitTime);return this.listener.Zo(r,t)}return wt(!e.writeResults||0===e.writeResults.length),this.Ho=!0,this.listener.Xo()}tu(){const e={};e.database=Hg(this.serializer),this.Fo(e)}Yo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Gg(this.serializer,r))};this.Fo(t)}}class NA extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.eu=!1}nu(){if(this.eu)throw new Ne(ue.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.co(e,t,r,i,o)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ne(ue.UNKNOWN,i.toString())})}fo(e,t,r,i){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.fo(e,t,r,o,c,i)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ne(ue.UNKNOWN,o.toString())})}terminate(){this.eu=!0}}class PA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.su=0,this.iu=null,this.ru=!0}ou(){0===this.su&&(this.uu("Unknown"),this.iu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.iu=null,this.cu("Backend didn't respond within 10 seconds."),this.uu("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.uu("Unknown"):(this.su++,this.su>=1&&(this.hu(),this.cu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.uu("Offline")))}set(e){this.hu(),this.su=0,"Online"===e&&(this.ru=!1),this.uu(e)}uu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}cu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ru?(Sr(t),this.ru=!1):Oe("OnlineStateTracker",t)}hu(){null!==this.iu&&(this.iu.cancel(),this.iu=null)}}class OA{constructor(e,t,r,i,o){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.lu=[],this.fu=new Map,this.du=new Set,this.wu=[],this._u=o,this._u.qr(h=>{r.enqueueAndForget((0,W.Z)(function*(){var _;$s(c)&&(Oe("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,W.Z)(function*(y){const I=Xe(y);I.du.add(4),yield ac(I),I.mu.set("Unknown"),I.du.delete(4),yield sm(I)}),function(y){return _.apply(this,arguments)})(c))}))}),this.mu=new PA(r,i)}}function sm(n){return om.apply(this,arguments)}function om(){return om=(0,W.Z)(function*(n){if($s(n))for(const e of n.wu)yield e(!0)}),om.apply(this,arguments)}function ac(n){return Ay.apply(this,arguments)}function Ay(){return Ay=(0,W.Z)(function*(n){for(const e of n.wu)yield e(!1)}),Ay.apply(this,arguments)}function Gf(n,e){const t=Xe(n);t.fu.has(e.targetId)||(t.fu.set(e.targetId,e),xy(t)?T0(t):zf(t).No()&&b0(t,e))}function am(n,e){const t=Xe(n),r=zf(t);t.fu.delete(e),r.No()&&My(t,e),0===t.fu.size&&(r.No()?r.$o():$s(t)&&t.mu.set("Unknown"))}function b0(n,e){n.gu.Ot(e.targetId),zf(n).jo(e)}function My(n,e){n.gu.Ot(e),zf(n).Wo(e)}function T0(n){n.gu=new ZR({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.fu.get(e)||null}),zf(n).start(),n.mu.ou()}function xy(n){return $s(n)&&!zf(n).xo()&&n.fu.size>0}function $s(n){return 0===Xe(n).du.size}function D0(n){n.gu=void 0}function kA(n){return Nb.apply(this,arguments)}function Nb(){return Nb=(0,W.Z)(function*(n){n.fu.forEach((e,t)=>{b0(n,e)})}),Nb.apply(this,arguments)}function Rb(n,e){return lm.apply(this,arguments)}function lm(){return lm=(0,W.Z)(function*(n,e){D0(n),xy(n)?(n.mu.au(e),T0(n)):n.mu.set("Unknown")}),lm.apply(this,arguments)}function FA(n,e,t){return um.apply(this,arguments)}function um(){return um=(0,W.Z)(function*(n,e,t){if(n.mu.set("Online"),e instanceof sy&&2===e.state&&e.cause)try{yield(r=(0,W.Z)(function*(i,o){const c=o.cause;for(const h of o.targetIds)i.fu.has(h)&&(yield i.remoteSyncer.rejectListen(h,c),i.fu.delete(h),i.gu.removeTarget(h))}),function(i,o){return r.apply(this,arguments)})(n,e)}catch(r){Oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Ny(n,r)}else if(e instanceof xf?n.gu.Kt(e):e instanceof $I?n.gu.Jt(e):n.gu.zt(e),!t.isEqual(Ct.min()))try{const r=yield vb(n.localStore);t.compareTo(r)>=0&&(yield function(i,o){const c=i.gu.Xt(o);return c.targetChanges.forEach((h,_)=>{if(h.resumeToken.approximateByteSize()>0){const y=i.fu.get(_);y&&i.fu.set(_,y.withResumeToken(h.resumeToken,o))}}),c.targetMismatches.forEach(h=>{const _=i.fu.get(h);if(!_)return;i.fu.set(h,_.withResumeToken($r.EMPTY_BYTE_STRING,_.snapshotVersion)),My(i,h);const y=new tc(_.target,h,1,_.sequenceNumber);b0(i,y)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Oe("RemoteStore","Failed to raise snapshot:",r),yield Ny(n,r)}var r}),um.apply(this,arguments)}function Ny(n,e,t){return Ry.apply(this,arguments)}function Ry(){return Ry=(0,W.Z)(function*(n,e,t){if(!zu(e))throw e;n.du.add(1),yield ac(n),n.mu.set("Offline"),t||(t=()=>vb(n.localStore)),n.asyncQueue.enqueueRetryable((0,W.Z)(function*(){Oe("RemoteStore","Retrying IndexedDB access"),yield t(),n.du.delete(1),yield sm(n)}))}),Ry.apply(this,arguments)}function Py(n,e){return e().catch(t=>Ny(n,t,e))}function jd(n){return Oy.apply(this,arguments)}function Oy(){return Oy=(0,W.Z)(function*(n){const e=Xe(n),t=lc(e);let r=e.lu.length>0?e.lu[e.lu.length-1].batchId:-1;for(;Pb(e);)try{const i=yield TA(e.localStore,r);if(null===i){0===e.lu.length&&t.$o();break}r=i.batchId,Ob(e,i)}catch(i){yield Ny(e,i)}kb(e)&&Fb(e)}),Oy.apply(this,arguments)}function Pb(n){return $s(n)&&n.lu.length<10}function Ob(n,e){n.lu.push(e);const t=lc(n);t.No()&&t.Jo&&t.Yo(e.mutations)}function kb(n){return $s(n)&&!lc(n).xo()&&n.lu.length>0}function Fb(n){lc(n).start()}function LA(n){return S0.apply(this,arguments)}function S0(){return S0=(0,W.Z)(function*(n){lc(n).tu()}),S0.apply(this,arguments)}function Lb(n){return Vb.apply(this,arguments)}function Vb(){return Vb=(0,W.Z)(function*(n){const e=lc(n);for(const t of n.lu)e.Yo(t.mutations)}),Vb.apply(this,arguments)}function Ub(n,e,t){return A0.apply(this,arguments)}function A0(){return A0=(0,W.Z)(function*(n,e,t){const r=n.lu.shift(),i=ty.from(r,e,t);yield Py(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield jd(n)}),A0.apply(this,arguments)}function VA(n,e){return Bb.apply(this,arguments)}function Bb(){return Bb=(0,W.Z)(function*(n,e){var t;e&&lc(n).Jo&&(yield(t=(0,W.Z)(function*(r,i){if(jg(o=i.code)&&o!==ue.ABORTED){const c=r.lu.shift();lc(r).Oo(),yield Py(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield jd(r)}var o}),function(r,i){return t.apply(this,arguments)})(n,e)),kb(n)&&Fb(n)}),Bb.apply(this,arguments)}function $b(n,e){return M0.apply(this,arguments)}function M0(){return M0=(0,W.Z)(function*(n,e){const t=Xe(n);t.asyncQueue.verifyOperationInProgress(),Oe("RemoteStore","RemoteStore received new credentials");const r=$s(t);t.du.add(3),yield ac(t),r&&t.mu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.du.delete(3),yield sm(t)}),M0.apply(this,arguments)}function ky(n,e){return Fy.apply(this,arguments)}function Fy(){return Fy=(0,W.Z)(function*(n,e){const t=Xe(n);e?(t.du.delete(2),yield sm(t)):e||(t.du.add(2),yield ac(t),t.mu.set("Unknown"))}),Fy.apply(this,arguments)}function zf(n){return n.yu||(n.yu=function(e,t,r){const i=Xe(e);return i.nu(),new Mb(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{Jr:kA.bind(null,n),Zr:Rb.bind(null,n),zo:FA.bind(null,n)}),n.wu.push(function(){var e=(0,W.Z)(function*(t){t?(n.yu.Oo(),xy(n)?T0(n):n.mu.set("Unknown")):(yield n.yu.stop(),D0(n))});return function(t){return e.apply(this,arguments)}}())),n.yu}function lc(n){return n.pu||(n.pu=function(e,t,r){const i=Xe(e);return i.nu(),new xb(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{Jr:LA.bind(null,n),Zr:VA.bind(null,n),Xo:Lb.bind(null,n),Zo:Ub.bind(null,n)}),n.wu.push(function(){var e=(0,W.Z)(function*(t){t?(n.pu.Oo(),yield jd(n)):(yield n.pu.stop(),n.lu.length>0&&(Oe("RemoteStore",`Stopping write stream with ${n.lu.length} pending writes`),n.lu=[]))});return function(t){return e.apply(this,arguments)}}())),n.pu}class x0{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,o){const c=Date.now()+r,h=new x0(e,t,c,i,o);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qf(n,e){if(Sr("AsyncQueue",`${e}: ${n}`),zu(n))return new Ne(ue.UNAVAILABLE,`${e}: ${n}`);throw n}class Zf{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ke.comparator(t.key,r.key):(t,r)=>Ke.comparator(t.key,r.key),this.keyedMap=Pa(),this.sortedSet=new cr(this.comparator)}static emptySet(e){return new Zf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Zf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class jb{constructor(){this.Iu=new cr(Ke.comparator)}track(e){const t=e.doc.key,r=this.Iu.get(t);r?0!==e.type&&3===r.type?this.Iu=this.Iu.insert(t,e):3===e.type&&1!==r.type?this.Iu=this.Iu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Iu=this.Iu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Iu=this.Iu.remove(t):1===e.type&&2===r.type?this.Iu=this.Iu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):ct():this.Iu=this.Iu.insert(t,e)}Tu(){const e=[];return this.Iu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Wf{constructor(e,t,r,i,o,c,h,_,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=_,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,i,o){const c=[];return t.forEach(h=>{c.push({type:0,doc:h})}),new Wf(e,t,Zf.emptySet(t),c,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class UA{constructor(){this.Eu=void 0,this.listeners=[]}}class cm{constructor(){this.queries=new Us(e=>bi(e),zl),this.onlineState="Unknown",this.Au=new Set}}function Ly(n,e){return Vy.apply(this,arguments)}function Vy(){return Vy=(0,W.Z)(function*(n,e){const t=Xe(n),r=e.query;let i=!1,o=t.queries.get(r);if(o||(i=!0,o=new UA),i)try{o.Eu=yield t.onListen(r)}catch(c){const h=qf(c,`Initialization of query '${ql(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,o),o.listeners.push(e),e.Ru(t.onlineState),o.Eu&&e.vu(o.Eu)&&N0(t)}),Vy.apply(this,arguments)}function Uy(n,e){return By.apply(this,arguments)}function By(){return By=(0,W.Z)(function*(n,e){const t=Xe(n),r=e.query;let i=!1;const o=t.queries.get(r);if(o){const c=o.listeners.indexOf(e);c>=0&&(o.listeners.splice(c,1),i=0===o.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),By.apply(this,arguments)}function Hb(n,e){const t=Xe(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const h of c.listeners)h.vu(i)&&(r=!0);c.Eu=i}}r&&N0(t)}function Gb(n,e,t){const r=Xe(n),i=r.queries.get(e);if(i)for(const o of i.listeners)o.onError(t);r.queries.delete(e)}function N0(n){n.Au.forEach(e=>{e.next()})}class zb{constructor(e,t,r){this.query=e,this.bu=t,this.Pu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Wf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Pu?this.Su(e)&&(this.bu.next(e),t=!0):this.Du(e,this.onlineState)&&(this.Cu(e),t=!0),this.Vu=e,t}onError(e){this.bu.error(e)}Ru(e){this.onlineState=e;let t=!1;return this.Vu&&!this.Pu&&this.Du(this.Vu,e)&&(this.Cu(this.Vu),t=!0),t}Du(e,t){return!e.fromCache||(!this.options.xu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Su(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Cu(e){e=Wf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Pu=!0,this.bu.next(e)}}class qb{constructor(e,t){this.Nu=e,this.byteLength=t}ku(){return"metadata"in this.Nu}}class R0{constructor(e){this.serializer=e}Hi(e){return Fa(this.serializer,e)}Ji(e){return e.metadata.exists?ay(this.serializer,e.document,!1):$n.newNoDocument(this.Hi(e.metadata.name),this.Yi(e.metadata.readTime))}Yi(e){return Mr(e)}}class Zb{constructor(e,t,r){this.Ou=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Wb(e)}$u(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Nu.namedQuery)this.queries.push(e.Nu.namedQuery);else if(e.Nu.documentMetadata){this.documents.push({metadata:e.Nu.documentMetadata}),e.Nu.documentMetadata.exists||++t;const r=un.fromString(e.Nu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Nu.document&&(this.documents[this.documents.length-1].document=e.Nu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,r=new R0(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.Hi(i.metadata.name);for(const c of i.metadata.queries){const h=(t.get(c)||Ht()).add(o);t.set(c,h)}}return t}complete(){var e=this;return(0,W.Z)(function*(){const t=yield function DA(n,e,t,r){return $d.apply(this,arguments)}(e.localStore,new R0(e.serializer),e.documents,e.Ou.id),r=e.Mu(e.documents);for(const i of e.queries)yield SA(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Fu:e.collectionGroups,Bu:t}})()}}function Wb(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Kb{constructor(e){this.key=e}}class Kf{constructor(e){this.key=e}}class Yb{constructor(e,t){this.query=e,this.Lu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Uu=Ht(),this.mutatedKeys=Ht(),this.Ku=Y_(e),this.Gu=new Zf(this.Ku)}get Qu(){return this.Lu}zu(e,t){const r=t?t.ju:new jb,i=t?t.Gu:this.Gu;let o=t?t.mutatedKeys:this.mutatedKeys,c=i,h=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((I,D)=>{const R=i.get(I),L=Xu(this.query,D)?D:null,$=!!R&&this.mutatedKeys.has(R.key),X=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let ce=!1;R&&L?R.data.isEqual(L.data)?$!==X&&(r.track({type:3,doc:L}),ce=!0):this.Wu(R,L)||(r.track({type:2,doc:L}),ce=!0,(_&&this.Ku(L,_)>0||y&&this.Ku(L,y)<0)&&(h=!0)):!R&&L?(r.track({type:0,doc:L}),ce=!0):R&&!L&&(r.track({type:1,doc:R}),ce=!0,(_||y)&&(h=!0)),ce&&(L?(c=c.add(L),o=X?o.add(I):o.delete(I)):(c=c.delete(I),o=o.delete(I)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const I="F"===this.query.limitType?c.last():c.first();c=c.delete(I.key),o=o.delete(I.key),r.track({type:1,doc:I})}return{Gu:c,ju:r,Mi:h,mutatedKeys:o}}Wu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const o=e.ju.Tu();o.sort((y,I)=>function(D,R){const L=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ct()}};return L(D)-L(R)}(y.type,I.type)||this.Ku(y.doc,I.doc)),this.Hu(r);const c=t?this.Ju():[],h=0===this.Uu.size&&this.current?1:0,_=h!==this.qu;return this.qu=h,0!==o.length||_?{snapshot:new Wf(this.query,e.Gu,i,o,e.mutatedKeys,0===h,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),Yu:c}:{Yu:c}}Ru(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,ju:new jb,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{Yu:[]}}Zu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.Uu;this.Uu=Ht(),this.Gu.forEach(r=>{this.Zu(r.key)&&(this.Uu=this.Uu.add(r.key))});const t=[];return e.forEach(r=>{this.Uu.has(r)||t.push(new Kf(r))}),this.Uu.forEach(r=>{e.has(r)||t.push(new Kb(r))}),t}Xu(e){this.Lu=e.Wi,this.Uu=Ht();const t=this.zu(e.documents);return this.applyChanges(t,!0)}tc(){return Wf.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class P0{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class $a{constructor(e){this.key=e,this.ec=!1}}class BA{constructor(e,t,r,i,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.nc={},this.sc=new Us(h=>bi(h),zl),this.ic=new Map,this.rc=new Set,this.oc=new cr(Ke.comparator),this.uc=new Map,this.cc=new vy,this.ac={},this.hc=new Map,this.lc=Vd.bn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function O0(n,e){return Hd.apply(this,arguments)}function Hd(){return Hd=(0,W.Z)(function*(n,e){const t=W0(n);let r,i;const o=t.sc.get(e);if(o)r=o.targetId,t.sharedClientState.addLocalQueryTarget(r),i=o.view.tc();else{const c=yield Bf(t.localStore,Ii(e));t.isPrimaryClient&&Gf(t.remoteStore,c);const h=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield k0(t,e,r,"current"===h,c.resumeToken)}return i}),Hd.apply(this,arguments)}function k0(n,e,t,r,i){return F0.apply(this,arguments)}function F0(){return F0=(0,W.Z)(function*(n,e,t,r,i){n.dc=(D,R,L)=>{return($=(0,W.Z)(function*(X,ce,qe,ut){let at=ce.view.zu(qe);at.Mi&&(at=yield _0(X.localStore,ce.query,!1).then(({documents:Gt})=>ce.view.zu(Gt,at)));const Et=ut&&ut.targetChanges.get(ce.targetId),$t=ce.view.applyChanges(at,X.isPrimaryClient,Et);return fm(X,ce.targetId,$t.Yu),$t.snapshot}),function(X,ce,qe,ut){return $.apply(this,arguments)})(n,D,R,L);var $};const o=yield _0(n.localStore,e,!0),c=new Yb(e,o.Wi),h=c.zu(o.documents),_=Ho.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),y=c.applyChanges(h,n.isPrimaryClient,_);fm(n,t,y.Yu);const I=new P0(e,t,c);return n.sc.set(e,I),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),y.snapshot}),F0.apply(this,arguments)}function $A(n,e){return Yf.apply(this,arguments)}function Yf(){return Yf=(0,W.Z)(function*(n,e){const t=Xe(n),r=t.sc.get(e),i=t.ic.get(r.targetId);if(i.length>1)return t.ic.set(r.targetId,i.filter(o=>!zl(o,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield $f(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),am(t.remoteStore,r.targetId),Qf(t,r.targetId)}).catch(Gu))):(Qf(t,r.targetId),yield $f(t.localStore,r.targetId,!0))}),Yf.apply(this,arguments)}function L0(){return L0=(0,W.Z)(function*(n,e,t){const r=K0(n);try{const i=yield function(o,c){const h=Xe(o),_=tr.now(),y=c.reduce((R,L)=>R.add(L.key),Ht());let I,D;return h.persistence.runTransaction("Locally write mutations","readwrite",R=>{let L=ti(),$=Ht();return h.Ki.getEntries(R,y).next(X=>{L=X,L.forEach((ce,qe)=>{qe.isValidDocument()||($=$.add(ce))})}).next(()=>h.localDocuments.getOverlayedDocuments(R,L)).next(X=>{I=X;const ce=[];for(const qe of c){const ut=rA(qe,I.get(qe.key).overlayedDocument);null!=ut&&ce.push(new Oa(qe.key,ut,xw(ut.value.mapValue),Zn.exists(!0)))}return h.mutationQueue.addMutationBatch(R,_,ce,c)}).next(X=>{D=X;const ce=X.applyToLocalDocumentSet(I,$);return h.documentOverlayCache.saveOverlays(R,X.batchId,ce)})}).then(()=>({batchId:D.batchId,changes:xd(I)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,h){let _=o.ac[o.currentUser.toKey()];_||(_=new cr(Bt)),_=_.insert(c,h),o.ac[o.currentUser.toKey()]=_}(r,i.batchId,t),yield ja(r,i.changes),yield jd(r.remoteStore)}catch(i){const o=qf(i,"Failed to persist write");t.reject(o)}}),L0.apply(this,arguments)}function Qb(n,e){return jy.apply(this,arguments)}function jy(){return jy=(0,W.Z)(function*(n,e){const t=Xe(n);try{const r=yield function wb(n,e){const t=Xe(n),r=e.snapshotVersion;let i=t.Li;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const c=t.Ki.newChangeBuffer({trackRemovals:!0});i=t.Li;const h=[];e.targetChanges.forEach((I,D)=>{const R=i.get(D);if(!R)return;h.push(t.Ds.removeMatchingKeys(o,I.removedDocuments,D).next(()=>t.Ds.addMatchingKeys(o,I.addedDocuments,D)));let L=R.withSequenceNumber(o.currentSequenceNumber);var $,X,ce;e.targetMismatches.has(D)?L=L.withResumeToken($r.EMPTY_BYTE_STRING,Ct.min()).withLastLimboFreeSnapshotVersion(Ct.min()):I.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(I.resumeToken,r)),i=i.insert(D,L),X=L,ce=I,(0===($=R).resumeToken.approximateByteSize()||X.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=3e8||ce.addedDocuments.size+ce.modifiedDocuments.size+ce.removedDocuments.size>0)&&h.push(t.Ds.updateTargetData(o,L))});let _=ti(),y=Ht();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,I))}),h.push(Uf(o,c,e.documentUpdates).next(I=>{_=I.zi,y=I.ji})),!r.isEqual(Ct.min())){const I=t.Ds.getLastRemoteSnapshotVersion(o).next(D=>t.Ds.setTargetsMetadata(o,o.currentSequenceNumber,r));h.push(I)}return le.waitFor(h).next(()=>c.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,_,y)).next(()=>_)}).then(o=>(t.Li=i,o))}(t.localStore,e);e.targetChanges.forEach((i,o)=>{const c=t.uc.get(o);c&&(wt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.ec=!0:i.modifiedDocuments.size>0?wt(c.ec):i.removedDocuments.size>0&&(wt(c.ec),c.ec=!1))}),yield ja(t,r,e)}catch(r){yield Gu(r)}}),jy.apply(this,arguments)}function V0(n,e,t){const r=Xe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.sc.forEach((o,c)=>{const h=c.view.Ru(e);h.snapshot&&i.push(h.snapshot)}),function(o,c){const h=Xe(o);h.onlineState=c;let _=!1;h.queries.forEach((y,I)=>{for(const D of I.listeners)D.Ru(c)&&(_=!0)}),_&&N0(h)}(r.eventManager,e),i.length&&r.nc.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function U0(n,e,t){return Hy.apply(this,arguments)}function Hy(){return Hy=(0,W.Z)(function*(n,e,t){const r=Xe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.uc.get(e),o=i&&i.key;if(o){let c=new cr(Ke.comparator);c=c.insert(o,$n.newNoDocument(o,Ct.min()));const h=Ht().add(o),_=new kd(Ct.min(),new Map,new Mn(Bt),c,h);yield Qb(r,_),r.oc=r.oc.remove(o),r.uc.delete(e),q0(r)}else yield $f(r.localStore,e,!1).then(()=>Qf(r,e,t)).catch(Gu)}),Hy.apply(this,arguments)}function B0(n,e){return dm.apply(this,arguments)}function dm(){return dm=(0,W.Z)(function*(n,e){const t=Xe(n),r=e.batch.batchId;try{const i=yield function bA(n,e){const t=Xe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.Ki.newChangeBuffer({trackRemovals:!0});return function(c,h,_,y){const I=_.batch,D=I.keys();let R=le.resolve();return D.forEach(L=>{R=R.next(()=>y.getEntry(h,L)).next($=>{const X=_.docVersions.get(L);wt(null!==X),$.version.compareTo(X)<0&&(I.applyToRemoteDocument($,_),$.isValidDocument()&&($.setReadTime(_.commitVersion),y.addEntry($)))})}),R.next(()=>c.mutationQueue.removeMutationBatch(h,I))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let h=Ht();for(let _=0;_<c.mutationResults.length;++_)c.mutationResults[_].transformResults.length>0&&(h=h.add(c.batch.mutations[_].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);G0(t,r,null),H0(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ja(t,i)}catch(i){yield Gu(i)}}),dm.apply(this,arguments)}function Jb(n,e,t){return hm.apply(this,arguments)}function hm(){return hm=(0,W.Z)(function*(n,e,t){const r=Xe(n);try{const i=yield function(o,c){const h=Xe(o);return h.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let y;return h.mutationQueue.lookupMutationBatch(_,c).next(I=>(wt(null!==I),y=I.keys(),h.mutationQueue.removeMutationBatch(_,I))).next(()=>h.mutationQueue.performConsistencyCheck(_)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(_,y,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,y)).next(()=>h.localDocuments.getDocuments(_,y))})}(r.localStore,e);G0(r,e,t),H0(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ja(r,i)}catch(i){yield Gu(i)}}),hm.apply(this,arguments)}function j0(){return j0=(0,W.Z)(function*(n,e){const t=Xe(n);$s(t.remoteStore)||Oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const c=Xe(o);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>c.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.hc.get(r)||[];i.push(e),t.hc.set(r,i)}catch(r){const i=qf(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),j0.apply(this,arguments)}function H0(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function G0(n,e,t){const r=Xe(n);let i=r.ac[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.ac[r.currentUser.toKey()]=i}}function Qf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ic.get(e))n.sc.delete(r),t&&n.nc.wc(r,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.hs(e).forEach(r=>{n.cc.containsKey(r)||z0(n,r)})}function z0(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&(am(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),q0(n))}function fm(n,e,t){for(const r of t)r instanceof Kb?(n.cc.addReference(r.key,e),Xb(n,r)):r instanceof Kf?(Oe("SyncEngine","Document no longer in limbo: "+r.key),n.cc.removeReference(r.key,e),n.cc.containsKey(r.key)||z0(n,r.key)):ct()}function Xb(n,e){const t=e.key,r=t.path.canonicalString();n.oc.get(t)||n.rc.has(r)||(Oe("SyncEngine","New document in limbo: "+t),n.rc.add(r),q0(n))}function q0(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new Ke(un.fromString(e)),r=n.lc.next();n.uc.set(r,new $a(t)),n.oc=n.oc.insert(t,r),Gf(n.remoteStore,new tc(Ii(Fg(t.path)),r,2,Fs.ct))}}function ja(n,e,t){return Gy.apply(this,arguments)}function Gy(){return Gy=(0,W.Z)(function*(n,e,t){const r=Xe(n),i=[],o=[],c=[];var h;r.sc.isEmpty()||(r.sc.forEach((h,_)=>{c.push(r.dc(_,e,t).then(y=>{if((y||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,y?.fromCache?"not-current":"current"),y){i.push(y);const I=yb.Di(_.targetId,y);o.push(I)}}))}),yield Promise.all(c),r.nc.zo(i),yield(h=(0,W.Z)(function*(_,y){const I=Xe(_);try{yield I.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>le.forEach(y,R=>le.forEach(R.Vi,L=>I.persistence.referenceDelegate.addReference(D,R.targetId,L)).next(()=>le.forEach(R.Si,L=>I.persistence.referenceDelegate.removeReference(D,R.targetId,L)))))}catch(D){if(!zu(D))throw D;Oe("LocalStore","Failed to update sequence numbers: "+D)}for(const D of y){const R=D.targetId;if(!D.fromCache){const L=I.Li.get(R),X=L.withLastLimboFreeSnapshotVersion(L.snapshotVersion);I.Li=I.Li.insert(R,X)}}}),function(_,y){return h.apply(this,arguments)})(r.localStore,o))}),Gy.apply(this,arguments)}function jA(n,e){return zy.apply(this,arguments)}function zy(){return zy=(0,W.Z)(function*(n,e){const t=Xe(n);if(!t.currentUser.isEqual(e)){Oe("SyncEngine","User change. New user:",e.toKey());const r=yield g0(t.localStore,e);t.currentUser=e,(i=t).hc.forEach(c=>{c.forEach(h=>{h.reject(new Ne(ue.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.hc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ja(t,r.Qi)}var i}),zy.apply(this,arguments)}function eT(n,e){const t=Xe(n),r=t.uc.get(e);if(r&&r.ec)return Ht().add(r.key);{let i=Ht();const o=t.ic.get(e);if(!o)return i;for(const c of o){const h=t.sc.get(c);i=i.unionWith(h.view.Qu)}return i}}function HA(n,e){return qy.apply(this,arguments)}function qy(){return qy=(0,W.Z)(function*(n,e){const t=Xe(n),r=yield _0(t.localStore,e.query,!0),i=e.view.Xu(r);return t.isPrimaryClient&&fm(t,e.targetId,i.Yu),i}),qy.apply(this,arguments)}function tT(n,e){return Ti.apply(this,arguments)}function Ti(){return Ti=(0,W.Z)(function*(n,e){const t=Xe(n);return y0(t.localStore,e).then(r=>ja(t,r))}),Ti.apply(this,arguments)}function Jf(n,e,t,r){return Z0.apply(this,arguments)}function Z0(){return Z0=(0,W.Z)(function*(n,e,t,r){const i=Xe(n),o=yield function(c,h){const _=Xe(c),y=Xe(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",I=>y.In(I,h).next(D=>D?_.localDocuments.getDocuments(I,D):le.resolve(null)))}(i.localStore,e);var h;null!==o?("pending"===t?yield jd(i.remoteStore):"acknowledged"===t||"rejected"===t?(G0(i,e,r||null),H0(i,e),h=e,Xe(Xe(i.localStore).mutationQueue).En(h)):ct(),yield ja(i,o)):Oe("SyncEngine","Cannot apply mutation batch with id: "+e)}),Z0.apply(this,arguments)}function nT(){return nT=(0,W.Z)(function*(n,e){const t=Xe(n);if(W0(t),K0(t),!0===e&&!0!==t.fc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield zA(t,r.toArray());t.fc=!0,yield ky(t.remoteStore,!0);for(const o of i)Gf(t.remoteStore,o)}else if(!1===e&&!1!==t.fc){const r=[];let i=Promise.resolve();t.ic.forEach((o,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(Qf(t,c),$f(t.localStore,c,!0))),am(t.remoteStore,c)}),yield i,yield zA(t,r),function(o){const c=Xe(o);c.uc.forEach((h,_)=>{am(c.remoteStore,_)}),c.cc.ls(),c.uc=new Map,c.oc=new cr(Ke.comparator)}(t),t.fc=!1,yield ky(t.remoteStore,!1)}}),nT.apply(this,arguments)}function zA(n,e,t){return Zy.apply(this,arguments)}function Zy(){return Zy=(0,W.Z)(function*(n,e,t){const r=Xe(n),i=[],o=[];for(const c of e){let h;const _=r.ic.get(c);if(_&&0!==_.length){h=yield Bf(r.localStore,Ii(_[0]));for(const y of _){const I=r.sc.get(y),D=yield HA(r,I);D.snapshot&&o.push(D.snapshot)}}else{const y=yield Eb(r.localStore,c);h=yield Bf(r.localStore,y),yield k0(r,Wy(y),c,!1,h.resumeToken)}i.push(h)}return r.nc.zo(o),i}),Zy.apply(this,arguments)}function Wy(n){return SI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function pm(n){const e=Xe(n);return Xe(Xe(e.localStore).persistence).bi()}function qA(n,e,t,r){return gm.apply(this,arguments)}function gm(){return gm=(0,W.Z)(function*(n,e,t,r){const i=Xe(n);if(i.fc)return void Oe("SyncEngine","Ignoring unexpected query state notification.");const o=i.ic.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const c=yield y0(i.localStore,Vs(o[0])),h=kd.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,$r.EMPTY_BYTE_STRING);yield ja(i,c,h);break}case"rejected":yield $f(i.localStore,e,!0),Qf(i,e,r);break;default:ct()}}),gm.apply(this,arguments)}function ZA(n,e,t){return Ky.apply(this,arguments)}function Ky(){return Ky=(0,W.Z)(function*(n,e,t){const r=W0(n);if(r.fc){for(const i of e){if(r.ic.has(i)){Oe("SyncEngine","Adding an already active target "+i);continue}const o=yield Eb(r.localStore,i),c=yield Bf(r.localStore,o);yield k0(r,Wy(o),c.targetId,!1,c.resumeToken),Gf(r.remoteStore,c)}for(const i of t)r.ic.has(i)&&(yield $f(r.localStore,i,!1).then(()=>{am(r.remoteStore,i),Qf(r,i)}).catch(Gu))}}),Ky.apply(this,arguments)}function W0(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Qb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=eT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=U0.bind(null,e),e.nc.zo=Hb.bind(null,e.eventManager),e.nc.wc=Gb.bind(null,e.eventManager),e}function K0(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=B0.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Jb.bind(null,e),e}class Xf{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,W.Z)(function*(){t.serializer=im(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return IA(this.persistence,new CA,e.initialUser,this.serializer)}createPersistence(e){return new mb(wy.Fs,this.serializer)}createSharedClientState(e){return new bb}terminate(){var e=this;return(0,W.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Yy extends Xf{constructor(e,t,r){super(),this.mc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,W.Z)(function*(){yield t().call(r,e),yield r.mc.initialize(r,e),yield K0(r.mc.syncEngine),yield jd(r.mc.remoteStore),yield r.persistence.hi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return IA(this.persistence,new CA,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new yr(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new sI(t,this.persistence);return new jS(e.asyncQueue,r)}createPersistence(e){const t=p0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ri.withCacheSize(this.cacheSizeBytes):ri.DEFAULT;return new f0(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Sb(),Dy(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new bb}}class Y0 extends Yy{constructor(e,t){super(e,t,!1),this.mc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,W.Z)(function*(){yield t().call(r,e);const i=r.mc.syncEngine;r.sharedClientState instanceof Ty&&(r.sharedClientState.syncEngine={$r:Jf.bind(null,i),Mr:qA.bind(null,i),Fr:ZA.bind(null,i),bi:pm.bind(null,i),Or:tT.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.hi(function(){var o=(0,W.Z)(function*(c){yield function GA(n,e){return nT.apply(this,arguments)}(r.mc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return o.apply(this,arguments)}}())})()}createSharedClientState(e){const t=Sb();if(!Ty.D(t))throw new Ne(ue.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=p0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ty(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Jl{initialize(e,t){var r=this;return(0,W.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>V0(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=jA.bind(null,r.syncEngine),yield ky(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new cm}createDatastore(e){const t=im(e.databaseInfo.databaseId),r=new xA(e.databaseInfo);return new NA(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,o=h=>V0(this.syncEngine,h,0),c=Tb.D()?new Tb:new AA,new OA(t,r,i,o,c);var t,r,i,o,c}createSyncEngine(e,t){return function(r,i,o,c,h,_,y){const I=new BA(r,i,o,c,h,_);return y&&(I.fc=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,W.Z)(function*(t){const r=Xe(t);Oe("RemoteStore","RemoteStore shutting down."),r.du.add(5),yield ac(r),r._u.shutdown(),r.mu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Qy(n,e=10240){let t=0;return{read:()=>(0,W.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,W.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Q0{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.gc(this.observer.next,e)}error(e){this.observer.error?this.gc(this.observer.error,e):Sr("Uncaught Error in snapshot listener:",e.toString())}yc(){this.muted=!0}gc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class rT{constructor(e,t){this.Ic=e,this.serializer=t,this.metadata=new Br,this.buffer=new Uint8Array,this.Tc=new TextDecoder("utf-8"),this.Ec().then(r=>{r&&r.ku()?this.metadata.resolve(r.Nu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Nu)}`))},r=>this.metadata.reject(r))}close(){return this.Ic.cancel()}getMetadata(){var e=this;return(0,W.Z)(function*(){return e.metadata.promise})()}_c(){var e=this;return(0,W.Z)(function*(){return yield e.getMetadata(),e.Ec()})()}Ec(){var e=this;return(0,W.Z)(function*(){const t=yield e.Ac();if(null===t)return null;const r=e.Tc.decode(t),i=Number(r);isNaN(i)&&e.Rc(`length string (${r}) is not valid number`);const o=yield e.vc(i);return new qb(JSON.parse(o),t.length+i)})()}bc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ac(){var e=this;return(0,W.Z)(function*(){for(;e.bc()<0&&!(yield e.Pc()););if(0===e.buffer.length)return null;const t=e.bc();t<0&&e.Rc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,W.Z)(function*(){for(;t.buffer.length<e;)(yield t.Pc())&&t.Rc("Reached the end of bundle when more is expected.");const r=t.Tc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Rc(e){throw this.Ic.cancel(),new Error(`Invalid bundle format: ${e}`)}Pc(){var e=this;return(0,W.Z)(function*(){const t=yield e.Ic.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class KA{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,W.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ne(ue.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,W.Z)(function*(o,c){const h=Xe(o),_=Hg(h.serializer)+"/documents",y={documents:c.map(L=>ka(h.serializer,L))},I=yield h.fo("BatchGetDocuments",_,y,c.length),D=new Map;I.forEach(L=>{const $=function Yw(n,e){return"found"in e?function(t,r){wt(!!r.found);const i=Fa(t,r.found.name),o=Mr(r.found.updateTime),c=r.found.createTime?Mr(r.found.createTime):Ct.min(),h=new ei({mapValue:{fields:r.found.fields}});return $n.newFoundDocument(i,o,c,h)}(n,e):"missing"in e?function(t,r){wt(!!r.missing),wt(!!r.readTime);const i=Fa(t,r.missing),o=Mr(r.readTime);return $n.newNoDocument(i,o)}(n,e):ct()}(h.serializer,L);D.set($.key.toString(),$)});const R=[];return c.forEach(L=>{const $=D.get(L.toString());wt(!!$),R.push($)}),R}),function(o,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Mf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,W.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const o=Ke.fromPath(i);e.mutations.push(new Bg(o,e.precondition(o)))}),yield(r=(0,W.Z)(function*(i,o){const c=Xe(i),h=Hg(c.serializer)+"/documents",_={writes:o.map(y=>Gg(c.serializer,y))};yield c.co("Commit",h,_)}),function(i,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ct();t=Ct.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ne(ue.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ct.min())?Zn.exists(!1):Zn.updateTime(t):Zn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ct.min()))throw new Ne(ue.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zn.updateTime(t)}return Zn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class iT{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Vc=r.maxAttempts,this.Co=new I0(this.asyncQueue,"transaction_retry")}run(){this.Vc-=1,this.Sc()}Sc(){var e=this;this.Co.Ao((0,W.Z)(function*(){const t=new KA(e.datastore),r=e.Dc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.Cc(o)}))}).catch(i=>{e.Cc(i)})}))}Dc(e){try{const t=this.updateFunction(e);return!Sg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Cc(e){this.Vc>0&&this.xc(e)?(this.Vc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sc(),Promise.resolve()))):this.deferred.reject(e)}xc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!jg(t)}return!1}}class ep{constructor(e,t,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=mi.UNAUTHENTICATED,this.clientId=XC.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,W.Z)(function*(h){Oe("FirestoreClient","Received user=",h.uid),yield o.authCredentialListener(h),o.user=h});return function(h){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Oe("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,W.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(ue.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,W.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=qf(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Jy(n,e){return Xy.apply(this,arguments)}function Xy(){return Xy=(0,W.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Oe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,W.Z)(function*(o){r.isEqual(o)||(yield g0(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),Xy.apply(this,arguments)}function mm(n,e){return sT.apply(this,arguments)}function sT(){return sT=(0,W.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield aT(n);Oe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>$b(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>$b(e.remoteStore,o)),n._onlineComponents=e}),sT.apply(this,arguments)}function oT(n){return"FirebaseError"===n.name?n.code===ue.FAILED_PRECONDITION||n.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function aT(n){return J0.apply(this,arguments)}function J0(){return J0=(0,W.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Oe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Jy(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!oT(t))throw t;Xi("Error using user provided cache. Falling back to memory cache: "+t),yield Jy(n,new Xf)}}else Oe("FirestoreClient","Using default OfflineComponentProvider"),yield Jy(n,new Xf);return n._offlineComponents}),J0.apply(this,arguments)}function ev(n){return X0.apply(this,arguments)}function X0(){return X0=(0,W.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Oe("FirestoreClient","Using user provided OnlineComponentProvider"),yield mm(n,n._uninitializedComponentsProvider._online)):(Oe("FirestoreClient","Using default OnlineComponentProvider"),yield mm(n,new Jl))),n._onlineComponents}),X0.apply(this,arguments)}function eE(n){return aT(n).then(e=>e.persistence)}function _m(n){return aT(n).then(e=>e.localStore)}function lT(n){return ev(n).then(e=>e.remoteStore)}function tv(n){return ev(n).then(e=>e.syncEngine)}function tp(n){return nE.apply(this,arguments)}function nE(){return nE=(0,W.Z)(function*(n){const e=yield ev(n),t=e.eventManager;return t.onListen=O0.bind(null,e.syncEngine),t.onUnlisten=$A.bind(null,e.syncEngine),t}),nE.apply(this,arguments)}function rE(n,e,t={}){const r=new Br;return n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return function(i,o,c,h,_){const y=new Q0({next:D=>{o.enqueueAndForget(()=>Uy(i,I));const R=D.docs.has(c);!R&&D.fromCache?_.reject(new Ne(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&D.fromCache&&h&&"server"===h.source?_.reject(new Ne(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(D)},error:D=>_.reject(D)}),I=new zb(Fg(c.path),y,{includeMetadataChanges:!0,xu:!0});return Ly(i,I)}(yield tp(n),n.asyncQueue,e,t,r)})),r.promise}function iE(n,e,t={}){const r=new Br;return n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return function(i,o,c,h,_){const y=new Q0({next:D=>{o.enqueueAndForget(()=>Uy(i,I)),D.fromCache&&"server"===h.source?_.reject(new Ne(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(D)},error:D=>_.reject(D)}),I=new zb(c,y,{includeMetadataChanges:!0,xu:!0});return Ly(i,I)}(yield tp(n),n.asyncQueue,e,t,r)})),r.promise}const XA=new Map;function fT(n,e,t){if(!t)throw new Ne(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function eM(n,e,t,r){if(!0===e&&!0===r)throw new Ne(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function tM(n){if(!Ke.isDocumentKey(n))throw new Ne(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function nM(n){if(Ke.isDocumentKey(n))throw new Ne(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function sE(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ct()}function dn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=sE(n);throw new Ne(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function rM(n,e){if(e<=0)throw new Ne(ue.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class ym{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ne(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ne(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,eM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nv{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ym({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ne(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ne(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ym(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new LS;switch(t.type){case"firstParty":return new Bo(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ne(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=XA.get(e);t&&(Oe("ComponentProvider","Removing Datastore"),XA.delete(e),t.terminate())}(this),Promise.resolve()}}class xn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xn(this.firestore,e,this._key)}}class yi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new yi(this.firestore,e,this._query)}}class zo extends yi{constructor(e,t,r){super(e,t,Fg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xn(this.firestore,null,new Ke(e))}withConverter(e){return new zo(this.firestore,e,this._path)}}function iM(n,e,...t){if(n=(0,O.m9)(n),fT("collection","path",e),n instanceof nv){const r=un.fromString(e,...t);return nM(r),new zo(n,null,r)}{if(!(n instanceof xn||n instanceof zo))throw new Ne(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(un.fromString(e,...t));return nM(r),new zo(n.firestore,null,r)}}function vm(n,e,...t){if(n=(0,O.m9)(n),1===arguments.length&&(e=XC.A()),fT("doc","path",e),n instanceof nv){const r=un.fromString(e,...t);return tM(r),new xn(n,null,new Ke(r))}{if(!(n instanceof xn||n instanceof zo))throw new Ne(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(un.fromString(e,...t));return tM(r),new xn(n.firestore,n instanceof zo?n.converter:null,new Ke(r))}}function pT(n,e){return n=(0,O.m9)(n),e=(0,O.m9)(e),(n instanceof xn||n instanceof zo)&&(e instanceof xn||e instanceof zo)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function gT(n,e){return n=(0,O.m9)(n),e=(0,O.m9)(e),n instanceof yi&&e instanceof yi&&n.firestore===e.firestore&&zl(n._query,e._query)&&n.converter===e.converter}class sM{constructor(){this.Nc=Promise.resolve(),this.kc=[],this.Oc=!1,this.$c=[],this.Mc=null,this.Fc=!1,this.Bc=!1,this.Lc=[],this.Co=new I0(this,"async_queue_retry"),this.qc=()=>{const t=Dy();t&&Oe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Co.vo()};const e=Dy();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qc)}get isShuttingDown(){return this.Oc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Uc(),this.Kc(e)}enterRestrictedMode(e){if(!this.Oc){this.Oc=!0,this.Bc=e||!1;const t=Dy();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qc)}}enqueue(e){if(this.Uc(),this.Oc)return new Promise(()=>{});const t=new Br;return this.Kc(()=>this.Oc&&this.Bc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.kc.push(e),this.Gc()))}Gc(){var e=this;return(0,W.Z)(function*(){if(0!==e.kc.length){try{yield e.kc[0](),e.kc.shift(),e.Co.reset()}catch(t){if(!zu(t))throw t;Oe("AsyncQueue","Operation failed with retryable error: "+t)}e.kc.length>0&&e.Co.Ao(()=>e.Gc())}})()}Kc(e){const t=this.Nc.then(()=>(this.Fc=!0,e().catch(r=>{throw this.Mc=r,this.Fc=!1,Sr("INTERNAL UNHANDLED ERROR: ",function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),c}(r)),r}).then(r=>(this.Fc=!1,r))));return this.Nc=t,t}enqueueAfterDelay(e,t,r){this.Uc(),this.Lc.indexOf(e)>-1&&(t=0);const i=x0.createAndSchedule(this,e,t,r,o=>this.Qc(o));return this.$c.push(i),i}Uc(){this.Mc&&ct()}verifyOperationInProgress(){}zc(){var e=this;return(0,W.Z)(function*(){let t;do{t=e.Nc,yield t}while(t!==e.Nc)})()}jc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Wc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Hc(e){this.Lc.push(e)}Qc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function lE(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class oM{constructor(){this._progressObserver={},this._taskCompletionResolver=new Br,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Wn extends nv{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new sM,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||mT(this),this._firestoreClient.terminate()}}function jr(n){return n._firestoreClient||mT(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function mT(n){var e,t,r;const i=n._freezeSettings(),o=(h=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new KS(n._databaseId,h,n._persistenceKey,(y=i).host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,y.useFetchStreams));var h,y;n._firestoreClient=new ep(n._authCredentials,n._appCheckCredentials,n._queue,o),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function uM(n,e,t){const r=new Br;return n.asyncQueue.enqueue((0,W.Z)(function*(){try{yield Jy(n,t),yield mm(n,e),r.resolve()}catch(i){const o=i;if(!oT(o))throw o;Xi("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function vT(n){if(n._initialized||n._terminated)throw new Ne(ue.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ga{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ga($r.fromBase64String(e))}catch(t){throw new Ne(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ga($r.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class qo{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ne(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ur(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Gd{constructor(e){this._methodName=e}}class np{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Bt(this._lat,e._lat)||Bt(this._long,e._long)}}const wT=/^__.*__$/;class ET{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Oa(e,this.data,this.fieldMask,t,this.fieldTransforms):new Od(e,this.data,t,this.fieldTransforms)}}class CT{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Oa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function cE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ct()}}class wm{constructor(e,t,r,i,o,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.Jc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Yc(){return this.settings.Yc}Zc(e){return new wm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Xc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Zc({path:r,ta:!1});return i.ea(e),i}na(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Zc({path:r,ta:!1});return i.Jc(),i}sa(e){return this.Zc({path:void 0,ta:!0})}ia(e){return Em(e,this.settings.methodName,this.settings.ra||!1,this.path,this.settings.oa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Jc(){if(this.path)for(let e=0;e<this.path.length;e++)this.ea(this.path.get(e))}ea(e){if(0===e.length)throw this.ia("Document fields must not be empty");if(cE(this.Yc)&&wT.test(e))throw this.ia('Document fields cannot begin and end with "__"')}}class hM{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||im(e)}ua(e,t,r,i=!1){return new wm({Yc:e,methodName:t,oa:r,path:ur.emptyPath(),ta:!1,ra:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function uc(n){const e=n._freezeSettings(),t=im(n._databaseId);return new hM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function sv(n,e,t,r,i,o={}){const c=n.ua(o.merge||o.mergeFields?2:0,e,t,i);ov("Data must be an object, but it was:",c,r);const h=ST(r,c);let _,y;if(o.merge)_=new ps(c.fieldMask),y=c.fieldTransforms;else if(o.mergeFields){const I=[];for(const D of o.mergeFields){const R=av(e,D,t);if(!c.contains(R))throw new Ne(ue.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);fM(I,R)||I.push(R)}_=new ps(I),y=c.fieldTransforms.filter(D=>_.covers(D.field))}else _=null,y=c.fieldTransforms;return new ET(new ei(h),_,y)}class zd extends Gd{_toFieldTransform(e){if(2!==e.Yc)throw e.ia(1===e.Yc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zd}}function za(n,e,t){return new wm({Yc:3,oa:e.settings.oa,methodName:n._methodName,ta:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class qa extends Gd{_toFieldTransform(e){return new ec(e.path,new Rd)}isEqual(e){return e instanceof qa}}class IT extends Gd{constructor(e,t){super(e),this.ca=t}_toFieldTransform(e){const t=za(this,e,!0),r=this.ca.map(o=>qd(o,t)),i=new Zl(r);return new ec(e.path,i)}isEqual(e){return this===e}}class dE extends Gd{constructor(e,t){super(e),this.ca=t}_toFieldTransform(e){const t=za(this,e,!0),r=this.ca.map(o=>qd(o,t)),i=new Pd(r);return new ec(e.path,i)}isEqual(e){return this===e}}class bT extends Gd{constructor(e,t){super(e),this.aa=t}_toFieldTransform(e){const t=new Wl(e.serializer,Bw(e.serializer,this.aa));return new ec(e.path,t)}isEqual(e){return this===e}}function hE(n,e,t,r){const i=n.ua(1,e,t);ov("Data must be an object, but it was:",i,r);const o=[],c=ei.empty();qu(r,(_,y)=>{const I=lv(e,_,t);y=(0,O.m9)(y);const D=i.na(I);if(y instanceof zd)o.push(I);else{const R=qd(y,D);null!=R&&(o.push(I),c.set(I,R))}});const h=new ps(o);return new CT(c,h,i.fieldTransforms)}function TT(n,e,t,r,i,o){const c=n.ua(1,e,t),h=[av(e,r,t)],_=[i];if(o.length%2!=0)throw new Ne(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<o.length;R+=2)h.push(av(e,o[R])),_.push(o[R+1]);const y=[],I=ei.empty();for(let R=h.length-1;R>=0;--R)if(!fM(y,h[R])){const L=h[R];let $=_[R];$=(0,O.m9)($);const X=c.na(L);if($ instanceof zd)y.push(L);else{const ce=qd($,X);null!=ce&&(y.push(L),I.set(L,ce))}}const D=new ps(y);return new CT(I,D,c.fieldTransforms)}function DT(n,e,t,r=!1){return qd(t,n.ua(r?4:3,e))}function qd(n,e){if(AT(n=(0,O.m9)(n)))return ov("Unsupported field value:",e,n),ST(n,e);if(n instanceof Gd)return function(t,r){if(!cE(r.Yc))throw r.ia(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ia(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ta&&4!==e.Yc)throw e.ia("Nested arrays are not supported");return function(t,r){const i=[];let o=0;for(const c of t){let h=qd(c,r.sa(o));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),o++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,O.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Bw(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=tr.fromDate(t);return{timestampValue:Nf(r.serializer,i)}}if(t instanceof tr){const i=new tr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Nf(r.serializer,i)}}if(t instanceof np)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ga)return{bytesValue:qI(r.serializer,t._byteString)};if(t instanceof xn){const i=r.databaseId,o=t.firestore._databaseId;if(!o.isEqual(i))throw r.ia(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:oy(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ia(`Unsupported field value: ${sE(t)}`)}(n,e)}function ST(n,e){const t={};return fI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qu(n,(r,i)=>{const o=qd(i,e.Xc(r));null!=o&&(t[r]=o)}),{mapValue:{fields:t}}}function AT(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof tr||n instanceof np||n instanceof Ga||n instanceof xn||n instanceof Gd)}function ov(n,e,t){if(!AT(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=sE(t);throw e.ia("an object"===r?n+" a custom object":n+" "+r)}var r}function av(n,e,t){if((e=(0,O.m9)(e))instanceof qo)return e._internalPath;if("string"==typeof e)return lv(n,e);throw Em("Field path arguments must be of type string or ",n,!1,void 0,t)}const MT=new RegExp("[~\\*/\\[\\]]");function lv(n,e,t){if(e.search(MT)>=0)throw Em(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new qo(...e.split("."))._internalPath}catch{throw Em(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Em(n,e,t,r,i){const o=r&&!r.isEmpty(),c=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let _="";return(o||c)&&(_+=" (found",o&&(_+=` in field ${r}`),c&&(_+=` in document ${i}`),_+=")"),new Ne(ue.INVALID_ARGUMENT,h+n+_)}function fM(n,e){return n.some(t=>t.isEqual(e))}class Zd{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new xn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new xT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Cm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class xT extends Zd{data(){return super.data()}}function Cm(n,e){return"string"==typeof e?lv(n,e):e instanceof qo?e._internalPath:e._delegate._internalPath}function fE(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ne(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class uv{}class rp extends uv{}function Zo(n,e,...t){let r=[];e instanceof uv&&r.push(e),r=r.concat(t),function(i){const o=i.filter(h=>h instanceof ip).length,c=i.filter(h=>h instanceof cc).length;if(o>1||o>0&&c>0)throw new Ne(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class cc extends rp{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new cc(e,t,r)}_apply(e){const t=this._parse(e);return kT(e._query,t),new yi(e.firestore,e.converter,Lw(e._query,t))}_parse(e){const t=uc(e.firestore);return function(i,o,c,h,_,y,I){let D;if(_.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Ne(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){OT(I,y);const R=[];for(const L of I)R.push(bm(h,i,L));D={arrayValue:{values:R}}}else D=bm(h,i,I)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||OT(I,y),D=DT(c,"where",I,"in"===y||"not-in"===y);return en.create(_,y,D)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class ip extends uv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ip(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Cn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let o=r;const c=i.getFlattenedFilters();for(const h of c)kT(o,h),o=Lw(o,h)}(e._query,t),new yi(e.firestore,e.converter,Lw(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class RT extends rp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new RT(e,t)}_apply(e){const t=function(r,i,o){if(null!==r.startAt)throw new Ne(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ne(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Gl(i,o);return function(h,_){if(null===AI(h)){const y=Sd(h);null!==y&&gE(0,y,_.field)}}(r,c),c}(e._query,this._field,this._direction);return new yi(e.firestore,e.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new Ra(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class Im extends rp{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Im(e,t,r)}_apply(e){return new yi(e.firestore,e.converter,Ls(e._query,this._limit,this._limitType))}}class cv extends rp{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new cv(e,t,r)}_apply(e){const t=PT(e,this.type,this._docOrFields,this._inclusive);return new yi(e.firestore,e.converter,(i=t,new Ra((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class pE extends rp{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new pE(e,t,r)}_apply(e){const t=PT(e,this.type,this._docOrFields,this._inclusive);return new yi(e.firestore,e.converter,(i=t,new Ra((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function PT(n,e,t,r){if(t[0]=(0,O.m9)(t[0]),t[0]instanceof Zd)return function(i,o,c,h,_){if(!h)throw new Ne(ue.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const y=[];for(const I of Ad(i))if(I.field.isKeyField())y.push(Cd(o,h.key));else{const D=h.data.field(I.field);if(Tw(D))throw new Ne(ue.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+I.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const R=I.field.canonicalString();throw new Ne(ue.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${R}' (used as the orderBy) does not exist.`)}y.push(D)}return new xa(y,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=uc(n.firestore);return function(o,c,h,_,y,I){const D=o.explicitOrderBy;if(y.length>D.length)throw new Ne(ue.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const R=[];for(let L=0;L<y.length;L++){const $=y[L];if(D[L].field.isKeyField()){if("string"!=typeof $)throw new Ne(ue.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof $}`);if(!Fw(o)&&-1!==$.indexOf("/"))throw new Ne(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${$}' contains a slash.`);const X=o.path.child(un.fromString($));if(!Ke.isDocumentKey(X))throw new Ne(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${X}' is not because it contains an odd number of segments.`);const ce=new Ke(X);R.push(Cd(c,ce))}else{const X=DT(h,_,$);R.push(X)}}return new xa(R,I)}(n._query,n.firestore._databaseId,i,e,t,r)}}function bm(n,e,t){if("string"==typeof(t=(0,O.m9)(t))){if(""===t)throw new Ne(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fw(e)&&-1!==t.indexOf("/"))throw new Ne(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(un.fromString(t));if(!Ke.isDocumentKey(r))throw new Ne(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Cd(n,new Ke(r))}if(t instanceof xn)return Cd(n,t._key);throw new Ne(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sE(t)}.`)}function OT(n,e){if(!Array.isArray(n)||0===n.length)throw new Ne(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kT(n,e){if(e.isInequality()){const r=Sd(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Ne(ue.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const o=AI(n);null!==o&&gE(0,i,o)}const t=function(r,i){for(const o of r)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ne(ue.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function gE(n,e,t){if(!t.isEqual(e))throw new Ne(ue.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class dv{convertValue(e,t="none"){switch(vd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _r(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Wu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ct()}}convertObject(e,t){const r={};return qu(e.fields,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertGeoPoint(e){return new np(_r(e.latitude),_r(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=pI(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(yd(e));default:return null}}convertTimestamp(e){const t=Zu(e);return new tr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=un.fromString(e);wt(JI(r));const i=new Ku(r.get(1),r.get(3)),o=new Ke(r.popFirst(5));return i.isEqual(t)||Sr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function sp(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class mE extends dv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ga(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xn(this.firestore,null,t)}}class op{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hc extends Zd{constructor(e,t,r,i,o,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new hv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Cm("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class hv extends hc{data(e={}){return super.data(e)}}class Xl{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new op(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new hv(this._firestore,this._userDataWriter,r.key,r,new op(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new hv(r._firestore,r._userDataWriter,c.doc.key,c.doc,new op(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const h=new hv(r._firestore,r._userDataWriter,c.doc.key,c.doc,new op(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,y=-1;return 0!==c.type&&(_=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),1!==c.type&&(o=o.add(c.doc),y=o.indexOf(c.doc.key)),{type:mM(c.type),doc:h,oldIndex:_,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function mM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ct()}}function LT(n,e){return n instanceof hc&&e instanceof hc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Xl&&e instanceof Xl&&n._firestore===e._firestore&&gT(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class fc extends dv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ga(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xn(this.firestore,null,t)}}function vE(n,e,t){n=dn(n,xn);const r=dn(n.firestore,Wn),i=sp(n.converter,e,t);return ap(r,[sv(uc(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Zn.none())])}function fv(n,e,t,...r){n=dn(n,xn);const i=dn(n.firestore,Wn),o=uc(i);let c;return c="string"==typeof(e=(0,O.m9)(e))||e instanceof qo?TT(o,"updateDoc",n._key,e,t,r):hE(o,"updateDoc",n._key,e),ap(i,[c.toMutation(n._key,Zn.exists(!0))])}function pv(n,...e){var t,r,i;n=(0,O.m9)(n);let o={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||lE(e[c])||(o=e[c],c++);const h={includeMetadataChanges:o.includeMetadataChanges};if(lE(e[c])){const D=e[c];e[c]=null===(t=D.next)||void 0===t?void 0:t.bind(D),e[c+1]=null===(r=D.error)||void 0===r?void 0:r.bind(D),e[c+2]=null===(i=D.complete)||void 0===i?void 0:i.bind(D)}let _,y,I;if(n instanceof xn)y=dn(n.firestore,Wn),I=Fg(n._key.path),_={next:D=>{e[c]&&e[c](jT(y,n,D))},error:e[c+1],complete:e[c+2]};else{const D=dn(n,yi);y=dn(D.firestore,Wn),I=D._query;const R=new fc(y);_={next:L=>{e[c]&&e[c](new Xl(y,R,D,L))},error:e[c+1],complete:e[c+2]},fE(n._query)}return function(D,R,L,$){const X=new Q0($),ce=new zb(R,X,L);return D.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return Ly(yield tp(D),ce)})),()=>{X.yc(),D.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return Uy(yield tp(D),ce)}))}}(jr(y),I,h,_)}function ap(n,e){return function(t,r){const i=new Br;return t.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return function $y(n,e,t){return L0.apply(this,arguments)}(yield tv(t),r,i)})),i.promise}(jr(n),e)}function jT(n,e,t){const r=t.docs.get(e._key),i=new fc(n);return new hc(n,i,e._key,r,new op(t.hasPendingWrites,t.fromCache),e.converter)}const uP={maxAttempts:5};class TM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=uc(e)}set(e,t,r){this._verifyNotCommitted();const i=Wd(e,this._firestore),o=sp(i.converter,t,r),c=sv(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Zn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const o=Wd(e,this._firestore);let c;return c="string"==typeof(t=(0,O.m9)(t))||t instanceof qo?TT(this._dataReader,"WriteBatch.update",o._key,t,r,i):hE(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(c.toMutation(o._key,Zn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Wd(e,this._firestore);return this._mutations=this._mutations.concat(new Mf(t._key,Zn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Wd(n,e){if((n=(0,O.m9)(n)).firestore!==e)throw new Ne(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class cP extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=uc(e)}get(e){const t=Wd(e,this._firestore),r=new mE(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ct();const o=i[0];if(o.isFoundDocument())return new Zd(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new Zd(this._firestore,r,t._key,null,t.converter);throw ct()})}set(e,t,r){const i=Wd(e,this._firestore),o=sp(i.converter,t,r),c=sv(this._dataReader,"Transaction.set",i._key,o,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const o=Wd(e,this._firestore);let c;return c="string"==typeof(t=(0,O.m9)(t))||t instanceof qo?TT(this._dataReader,"Transaction.update",o._key,t,r,i):hE(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,c),this}delete(e){const t=Wd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Wd(e,this._firestore),r=new fc(this._firestore);return super.get(e).then(i=>new hc(this._firestore,r,t._key,i._document,new op(!1,!1),t.converter))}}!function(n,e=!0){mf=rt.SDK_VERSION,(0,rt._registerComponent)(new ht.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const o=t.getProvider("app").getImmediate(),c=new Wn(new VS(t.getProvider("auth-internal")),new JC(t.getProvider("app-check-internal")),function(h,_){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Ne(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ku(h.options.projectId,_)}(o,r),o);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),(0,rt.registerVersion)(gf,"3.10.1",n),(0,rt.registerVersion)(gf,"3.10.1","esm2017")}();function P(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function V(){if(typeof Uint8Array>"u")throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function Z(){if(!function bw(){return typeof atob<"u"}())throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}class ee{constructor(e){this._delegate=e}static fromBase64String(e){return Z(),new ee(Ga.fromBase64String(e))}static fromUint8Array(e){return V(),new ee(Ga.fromUint8Array(e))}toBase64(){return Z(),this._delegate.toBase64()}toUint8Array(){return V(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function ye(n){return function Ue(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Qe{enableIndexedDbPersistence(e,t){return function aM(n,e){vT(n=dn(n,Wn));const t=jr(n);if(t._uninitializedComponentsProvider)throw new Ne(ue.FAILED_PRECONDITION,"SDK cache is already specified.");Xi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new Jl;return uM(t,i,new Yy(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function lM(n){vT(n=dn(n,Wn));const e=jr(n);if(e._uninitializedComponentsProvider)throw new Ne(ue.FAILED_PRECONDITION,"SDK cache is already specified.");Xi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Jl;return uM(e,r,new Y0(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function cM(n){if(n._initialized&&!n._terminated)throw new Ne(ue.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Br;return n._queue.enqueueAndForgetEvenWhileRestricted((0,W.Z)(function*(){try{yield(t=(0,W.Z)(function*(r){if(!$o.D())return Promise.resolve();const i=r+"main";yield $o.delete(i)}),function(r){return t.apply(this,arguments)})(p0(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class ft{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ku||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Xi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function oE(n,e,t,r={}){var i;const o=(n=dn(n,nv))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&Xi("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},o),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,h;if("string"==typeof r.mockUserToken)c=r.mockUserToken,h=mi.MOCK_USER;else{c=(0,O.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Ne(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new mi(_)}n._authCredentials=new YC(new hw(c,h))}}(this._delegate,e,t,r)}enableNetwork(){return function yT(n){return function uT(n){return n.asyncQueue.enqueue((0,W.Z)(function*(){const e=yield eE(n),t=yield lT(n);return e.setNetworkEnabled(!0),function(r){const i=Xe(r);return i.du.delete(0),sm(i)}(t)}))}(jr(n=dn(n,Wn)))}(this._delegate)}disableNetwork(){return function QR(n){return function YA(n){return n.asyncQueue.enqueue((0,W.Z)(function*(){const e=yield eE(n),t=yield lT(n);return e.setNetworkEnabled(!1),(r=(0,W.Z)(function*(i){const o=Xe(i);o.du.add(0),yield ac(o),o.mu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(jr(n=dn(n,Wn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,eM("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function _T(n){return function(e){const t=new Br;return e.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return function $0(n,e){return j0.apply(this,arguments)}(yield tv(e),t)})),t.promise}(jr(n=dn(n,Wn)))}(this._delegate)}onSnapshotsInSync(e){return function wM(n,e){return function QA(n,e){const t=new Q0(e);return n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return r=yield tp(n),i=t,Xe(r).Au.add(i),void i.next();var r,i})),()=>{t.yc(),n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return r=yield tp(n),i=t,void Xe(r).Au.delete(i);var r,i}))}}(jr(n=dn(n,Wn)),lE(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new gv(this,iM(this._delegate,e))}catch(t){throw js(t,"collection()","Firestore.collection()")}}doc(e){try{return new Wo(this,vm(this._delegate,e))}catch(t){throw js(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Hs(this,function aE(n,e){if(n=dn(n,nv),fT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ne(ue.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new yi(n,null,(t=e,new Ra(un.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw js(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function dP(n,e,t){n=dn(n,Wn);const r=Object.assign(Object.assign({},uP),t);return function(i){if(i.maxAttempts<1)throw new Ne(ue.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,c){const h=new Br;return i.asyncQueue.enqueueAndForget((0,W.Z)(function*(){const _=yield function tE(n){return ev(n).then(e=>e.datastore)}(i);new iT(i.asyncQueue,_,c,o,h).run()})),h.promise}(jr(n),i=>e(new cP(n,i)),r)}(this._delegate,t=>e(new Ut(this,t)))}batch(){return jr(this._delegate),new Kn(new TM(this._delegate,e=>ap(this._delegate,e)))}loadBundle(e){return function dM(n,e){const t=jr(n=dn(n,Wn)),r=new oM;return function JA(n,e,t,r){const i=function(o,c){let h;return h="string"==typeof o?(new TextEncoder).encode(o):o,_=function(_,y){if(_ instanceof Uint8Array)return Qy(_,y);if(_ instanceof ArrayBuffer)return Qy(new Uint8Array(_),y);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new rT(_,c);var _}(t,im(e));n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){!function WA(n,e,t){const r=Xe(n);var i;(i=(0,W.Z)(function*(o,c,h){try{const _=yield c.getMetadata();if(yield function(R,L){const $=Xe(R),X=Mr(L.createTime);return $.persistence.runTransaction("hasNewerBundle","readonly",ce=>$.xs.getBundleMetadata(ce,L.id)).then(ce=>!!ce&&ce.createTime.compareTo(X)>=0)}(o.localStore,_))return yield c.close(),h._completeWith({taskState:"Success",documentsLoaded:(R=_).totalDocuments,bytesLoaded:R.totalBytes,totalDocuments:R.totalDocuments,totalBytes:R.totalBytes}),Promise.resolve(new Set);h._updateProgress(Wb(_));const y=new Zb(_,o.localStore,c.serializer);let I=yield c._c();for(;I;){const R=yield y.$u(I);R&&h._updateProgress(R),I=yield c._c()}const D=yield y.complete();return yield ja(o,D.Bu,void 0),yield function(R,L){const $=Xe(R);return $.persistence.runTransaction("Save bundle","readwrite",X=>$.xs.saveBundleMetadata(X,L))}(o.localStore,_),h._completeWith(D.progress),Promise.resolve(D.Fu)}catch(_){return Xi("SyncEngine",`Loading bundle failed with ${_}`),h._failWith(_),Promise.resolve(new Set)}var R}),function(o,c,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield tv(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function uE(n,e){return function YR(n,e){return n.asyncQueue.enqueue((0,W.Z)(function*(){return function(t,r){const i=Xe(t);return i.persistence.runTransaction("Get named query","readonly",o=>i.xs.getNamedQuery(o,r))}(yield _m(n),e)}))}(jr(n=dn(n,Wn)),e).then(t=>t?new yi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Hs(this,t):null)}}class Dt extends dv{constructor(e){super(),this.firestore=e}convertBytes(e){return new ee(new Ga(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Wo.forKey(t,this.firestore,null)}}class Ut{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Dt(e)}get(e){const t=Tm(e);return this._delegate.get(t).then(r=>new wE(this._firestore,new hc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Tm(e);return r?(P("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=Tm(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=Tm(e);return this._delegate.delete(t),this}}class Kn{constructor(e){this._delegate=e}set(e,t,r){const i=Tm(e);return r?(P("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=Tm(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=Tm(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class On{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new hv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new EE(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=On.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new On(e,new Dt(e),t),i.set(t,o)),o}}On.INSTANCES=new WeakMap;class Wo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Dt(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Wo(t,new xn(t._delegate,r,new Ke(e)))}static forKey(e,t,r){return new Wo(t,new xn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new gv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new gv(this.firestore,iM(this._delegate,e))}catch(t){throw js(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,O.m9)(e))instanceof xn&&pT(this._delegate,e)}set(e,t){t=P("DocumentReference.set",t);try{return t?vE(this._delegate,e,t):vE(this._delegate,e)}catch(r){throw js(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?fv(this._delegate,e):fv(this._delegate,e,t,...r)}catch(i){throw js(i,"updateDoc()","DocumentReference.update()")}}delete(){return function oP(n){return ap(dn(n.firestore,Wn),[new Mf(n._key,Zn.none())])}(this._delegate)}onSnapshot(...e){const t=hP(e),r=fP(e,i=>new wE(this.firestore,new hc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return pv(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function VT(n){n=dn(n,xn);const e=dn(n.firestore,Wn),t=jr(e),r=new fc(e);return function cT(n,e){const t=new Br;return n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return(r=(0,W.Z)(function*(i,o,c){try{const h=yield function(_,y){const I=Xe(_);return I.persistence.runTransaction("read document","readonly",D=>I.localDocuments.getDocument(D,y))}(i,o);h.isFoundDocument()?c.resolve(h):h.isNoDocument()?c.resolve(null):c.reject(new Ne(ue.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const _=qf(h,`Failed to get document '${o} from cache`);c.reject(_)}}),function(i,o,c){return r.apply(this,arguments)})(yield _m(n),e,t);var r})),t.promise}(t,n._key).then(i=>new hc(e,r,n._key,i,new op(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function UT(n){n=dn(n,xn);const e=dn(n.firestore,Wn);return rE(jr(e),n._key,{source:"server"}).then(t=>jT(e,n,t))}(this._delegate):function _M(n){n=dn(n,xn);const e=dn(n.firestore,Wn);return rE(jr(e),n._key).then(t=>jT(e,n,t))}(this._delegate),t.then(r=>new wE(this.firestore,new hc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Wo(this.firestore,this._delegate.withConverter(e?On.getInstance(this.firestore,e):null))}}function js(n,e,t){return n.message=n.message.replace(e,t),n}function hP(n){for(const e of n)if("object"==typeof e&&!ye(e))return e;return{}}function fP(n,e){var t,r;let i;return i=ye(n[0])?n[0]:ye(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class wE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Wo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return LT(this._delegate,e._delegate)}}class EE extends wE{data(e){const t=this._delegate.data(e);return function jR(n,e){n||ct()}(void 0!==t),t}}class Hs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Dt(e)}where(e,t,r){try{return new Hs(this.firestore,Zo(this._delegate,function NT(n,e,t){const r=e,i=Cm("where",n);return cc._create(i,r,t)}(e,t,r)))}catch(i){throw js(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Hs(this.firestore,Zo(this._delegate,function eP(n,e="asc"){const t=e,r=Cm("orderBy",n);return RT._create(r,t)}(e,t)))}catch(r){throw js(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Hs(this.firestore,Zo(this._delegate,function pM(n){return rM("limit",n),Im._create("limit",n,"F")}(e)))}catch(t){throw js(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Hs(this.firestore,Zo(this._delegate,function gM(n){return rM("limitToLast",n),Im._create("limitToLast",n,"L")}(e)))}catch(t){throw js(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Hs(this.firestore,Zo(this._delegate,function tP(...n){return cv._create("startAt",n,!0)}(...e)))}catch(t){throw js(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Hs(this.firestore,Zo(this._delegate,function nP(...n){return cv._create("startAfter",n,!1)}(...e)))}catch(t){throw js(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Hs(this.firestore,Zo(this._delegate,function rP(...n){return pE._create("endBefore",n,!1)}(...e)))}catch(t){throw js(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Hs(this.firestore,Zo(this._delegate,function iP(...n){return pE._create("endAt",n,!0)}(...e)))}catch(t){throw js(t,"endAt()","Query.endAt()")}}isEqual(e){return gT(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function yM(n){n=dn(n,yi);const e=dn(n.firestore,Wn),t=jr(e),r=new fc(e);return function dT(n,e){const t=new Br;return n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return(r=(0,W.Z)(function*(i,o,c){try{const h=yield _0(i,o,!0),_=new Yb(o,h.Wi),y=_.zu(h.documents),I=_.applyChanges(y,!1);c.resolve(I.snapshot)}catch(h){const _=qf(h,`Failed to execute query '${o} against cache`);c.reject(_)}}),function(i,o,c){return r.apply(this,arguments)})(yield _m(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Xl(e,r,n,i))}(this._delegate):"server"===e?.source?function vM(n){n=dn(n,yi);const e=dn(n.firestore,Wn),t=jr(e),r=new fc(e);return iE(t,n._query,{source:"server"}).then(i=>new Xl(e,r,n,i))}(this._delegate):function BT(n){n=dn(n,yi);const e=dn(n.firestore,Wn),t=jr(e),r=new fc(e);return fE(n._query),iE(t,n._query).then(i=>new Xl(e,r,n,i))}(this._delegate),t.then(r=>new DM(this.firestore,new Xl(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=hP(e),r=fP(e,i=>new DM(this.firestore,new Xl(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return pv(this._delegate,t,r)}withConverter(e){return new Hs(this.firestore,this._delegate.withConverter(e?On.getInstance(this.firestore,e):null))}}class UV{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new EE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class DM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Hs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new EE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new UV(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new EE(this._firestore,r))})}isEqual(e){return LT(this._delegate,e._delegate)}}class gv extends Hs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Wo(this.firestore,e):null}doc(e){try{return new Wo(this.firestore,void 0===e?vm(this._delegate):vm(this._delegate,e))}catch(t){throw js(t,"doc()","CollectionReference.doc()")}}add(e){return function $T(n,e){const t=dn(n.firestore,Wn),r=vm(n),i=sp(n.converter,e);return ap(t,[sv(uc(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Zn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Wo(this.firestore,t))}isEqual(e){return pT(this._delegate,e._delegate)}withConverter(e){return new gv(this.firestore,this._delegate.withConverter(e?On.getInstance(this.firestore,e):null))}}function Tm(n){return dn(n,xn)}class SM{constructor(...e){this._delegate=new qo(...e)}static documentId(){return new SM(ur.keyField().canonicalString())}isEqual(e){return(e=(0,O.m9)(e))instanceof qo&&this._delegate._internalPath.isEqual(e._internalPath)}}class Dm{constructor(e){this._delegate=e}static serverTimestamp(){const e=function a(){return new qa("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Dm(e)}static delete(){const e=function s(){return new zd("deleteField")}();return e._methodName="FieldValue.delete",new Dm(e)}static arrayUnion(...e){const t=function l(...n){return new IT("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Dm(t)}static arrayRemove(...e){const t=function d(...n){return new dE("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Dm(t)}static increment(e){const t=function f(n){return new bT("increment",n)}(e);return t._methodName="FieldValue.increment",new Dm(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const BV={Firestore:ft,GeoPoint:np,Timestamp:tr,Blob:ee,Transaction:Ut,WriteBatch:Kn,DocumentReference:Wo,DocumentSnapshot:wE,Query:Hs,QueryDocumentSnapshot:EE,QuerySnapshot:DM,CollectionReference:gv,FieldPath:SM,FieldValue:Dm,setLogLevel:function Re(n){!function FS(n){Hu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function jV(n){(function $V(n,e){n.INTERNAL.registerComponent(new ht.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},BV)))})(n,(e,t)=>new ft(e,t,new Qe)),n.registerVersion("@firebase/firestore-compat","0.3.7")}(Me.Z);var Gs=F(7579),AM=F(6451),HT=F(5363),CE=F(8421);function Di(n,e){return(0,mr.e)((t,r)=>{let i=null,o=0,c=!1;const h=()=>c&&!i&&r.complete();t.subscribe((0,Un.x)(r,_=>{i?.unsubscribe();let y=0;const I=o++;(0,CE.Xf)(n(_,I)).subscribe(i=(0,Un.x)(r,D=>r.next(e?e(_,D,I,y++):D),()=>{i=null,h()}))},()=>{c=!0,h()}))})}var HV=F(6063);class GV extends Gs.x{constructor(e=1/0,t=1/0,r=HV.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:c}=this;t||(r.push(e),!i&&r.push(o.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let c=0;c<o.length&&!e.closed;c+=r?1:2)e.next(o[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const c=t.now();let h=0;for(let _=1;_<r.length&&r[_]<=c;_+=2)h=_;h&&r.splice(0,h+1)}}}var pP=F(3099);function gP(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,pP.B)({connector:()=>new GV(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const GT=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var lp=F(515);function mv(n){return n<=0?()=>lp.E:(0,mr.e)((e,t)=>{let r=0;e.subscribe((0,Un.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function zT(n){return(0,mr.e)((e,t)=>{let r=!1;e.subscribe((0,Un.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function mP(n=qV){return(0,mr.e)((e,t)=>{let r=!1;e.subscribe((0,Un.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function qV(){return new GT}function Kd(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Y((i,o)=>n(i,o,r)):S.y,mv(1),t?zT(e):mP(()=>new GT))}var MM=F(576);function _P(n,e){return(0,MM.m)(e)?Di(()=>n,e):Di(()=>n)}var xM=F(9468);F(259);const RM=new Map,vP={activated:!1,tokenObservers:[]},QV={initialized:!1,enabled:!1};function si(n){return RM.get(n)||Object.assign({},vP)}function ZT(){return QV}const PM="https://content-firebaseappcheck.googleapis.com/v1",t2="exchangeDebugToken",wP={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class r2{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,W.Z)(function*(){t.stop();try{t.pending=new O.BH,yield function i2(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new O.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ns=new O.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function FM(){return FM=(0,W.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const D=yield i.getHeartbeatsHeader();D&&(r["X-Firebase-Client"]=D)}const o={method:"POST",body:JSON.stringify(e),headers:r};let c,h;try{c=yield fetch(n,o)}catch(D){throw ns.create("fetch-network-error",{originalErrorMessage:D?.message})}if(200!==c.status)throw ns.create("fetch-status-error",{httpStatus:c.status});try{h=yield c.json()}catch(D){throw ns.create("fetch-parse-error",{originalErrorMessage:D?.message})}const _=h.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw ns.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const y=1e3*Number(_[1]),I=Date.now();return{token:h.token,expireTimeMillis:I+y,issuedAtTimeMillis:I}}),FM.apply(this,arguments)}const u2="firebase-app-check-database",c2=1,IE="firebase-app-check-store";let YT=null;function LM(){return LM=(0,W.Z)(function*(n,e){const r=(yield function IP(){return YT||(YT=new Promise((n,e)=>{try{const t=indexedDB.open(u2,c2);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ns.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(IE,{keyPath:"compositeKey"})}}catch(t){e(ns.create("storage-open",{originalErrorMessage:t?.message}))}}),YT)}()).transaction(IE,"readwrite"),o=r.objectStore(IE).put({compositeKey:n,value:e});return new Promise((c,h)=>{o.onsuccess=_=>{c()},r.onerror=_=>{var y;h(ns.create("storage-set",{originalErrorMessage:null===(y=_.target.error)||void 0===y?void 0:y.message}))}})}),LM.apply(this,arguments)}const bE=new Ot.Yd("@firebase/app-check");function BM(n,e){return(0,O.hl)()?function h2(n,e){return function bP(n,e){return LM.apply(this,arguments)}(function DP(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{bE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function jM(){return jM=(0,W.Z)(function*(){const n=ZT();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),jM.apply(this,arguments)}const y2={error:"UNKNOWN_ERROR"};function v2(n){return O.US.encodeString(JSON.stringify(n),!1)}function QT(n){return HM.apply(this,arguments)}function HM(){return HM=(0,W.Z)(function*(n,e=!1){const t=n.app;!function EP(n){if(!si(n).activated)throw ns.create("use-before-activation",{appName:n.name})}(t);const r=si(t);let o,i=r.token;if(i&&!_v(i)&&(r.token=void 0,i=void 0),!i){const _=yield r.cachedTokenPromise;_&&(_v(_)?i=_:yield BM(t,void 0))}if(!e&&i&&_v(i))return{token:i.token};let h,c=!1;if(function SP(){return ZT().enabled}()){r.exchangeTokenPromise||(r.exchangeTokenPromise=function kM(n,e){return FM.apply(this,arguments)}(function l2(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${PM}/projects/${t}/apps/${r}:${t2}?key=${i}`,body:{debug_token:e}}}(t,yield function AP(){return jM.apply(this,arguments)}()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const _=yield r.exchangeTokenPromise;return yield BM(t,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),i=yield si(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?bE.warn(_.message):bE.error(_),o=_}return i?o?h=_v(i)?{token:i.token,internalError:o}:NP(o):(h={token:i.token},r.token=i,yield BM(t,i)):h=NP(o),c&&function xP(n,e){const t=si(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,h),h}),HM.apply(this,arguments)}function zM(n,e){const t=si(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function MP(n){const{app:e}=n,t=si(e);let r=t.tokenRefresher;r||(r=function w2(n){const{app:e}=n;return new r2((0,W.Z)(function*(){let r;if(r=si(e).token?yield QT(n,!0):yield QT(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=si(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},wP.RETRIAL_MIN_WAIT,wP.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function _v(n){return n.expireTimeMillis-Date.now()>0}function NP(n){return{token:v2(y2),error:n}}class E2{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=si(this.app);for(const t of e)zM(this.app,t.next);return Promise.resolve()}}const UP="app-check-internal";!function k2(){(0,rt._registerComponent)(new ht.wA("app-check",n=>function C2(n,e){return new E2(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(UP).initialize()})),(0,rt._registerComponent)(new ht.wA(UP,n=>function I2(n){return{getToken:e=>QT(n,e),addTokenListener:e=>function GM(n,e,t,r){const{app:i}=n,o=si(i);if(o.tokenObservers=[...o.tokenObservers,{next:t,error:r,type:e}],o.token&&_v(o.token)){const h=o.token;Promise.resolve().then(()=>{t({token:h.token}),MP(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>MP(n))}(n,"INTERNAL",e),removeTokenListener:e=>zM(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,rt.registerVersion)("@firebase/app-check","0.6.5")}();class XT{constructor(){return(0,bn.vb)("app-check")}}typeof window<"u"&&window;var $P=F(9260);const YM=new u.OlP("angularfire2.auth.use-emulator"),QM=new u.OlP("angularfire2.auth.settings"),JM=new u.OlP("angularfire2.auth.tenant-id"),XM=new u.OlP("angularfire2.auth.langugage-code"),ex=new u.OlP("angularfire2.auth.use-device-language"),tx=new u.OlP("angularfire.auth.persistence"),nx=(n,e,t,r,i,o,c,h)=>(0,gr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,o&&_.useDeviceLanguage(),c)for(const[y,I]of Object.entries(c))_.settings[y]=I;return h&&_.setPersistence(h),_},[t,r,i,o,c,h]);let rx=(()=>{class n{constructor(t,r,i,o,c,h,_,y,I,D,R,L){const $=new Gs.x,X=mt(void 0).pipe((0,HT.Q)(c.outsideAngular),Di(()=>o.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,6689)))),(0,vt.U)(()=>(0,gr.on)(t,o,r)),(0,vt.U)(ce=>nx(ce,o,h,y,I,D,_,R)),gP({bufferSize:1,refCount:!1}));if(sa(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=mt(null);else{X.pipe(Kd()).subscribe();const qe=X.pipe(Di(Et=>Et.getRedirectResult().then($t=>$t,()=>null)),bn.iC,gP({bufferSize:1,refCount:!1})),ut=X.pipe(Di(Et=>new Wr.y($t=>({unsubscribe:o.runOutsideAngular(()=>Et.onAuthStateChanged(Gt=>$t.next(Gt),Gt=>$t.error(Gt),()=>$t.complete()))})))),at=X.pipe(Di(Et=>new Wr.y($t=>({unsubscribe:o.runOutsideAngular(()=>Et.onIdTokenChanged(Gt=>$t.next(Gt),Gt=>$t.error(Gt),()=>$t.complete()))}))));this.authState=qe.pipe(_P(ut),(0,xM.R)(c.outsideAngular),(0,HT.Q)(c.insideAngular)),this.user=qe.pipe(_P(at),(0,xM.R)(c.outsideAngular),(0,HT.Q)(c.insideAngular)),this.idToken=this.user.pipe(Di(Et=>Et?(0,Xt.D)(Et.getIdToken()):mt(null))),this.idTokenResult=this.user.pipe(Di(Et=>Et?(0,Xt.D)(Et.getIdTokenResult()):mt(null))),this.credential=(0,AM.T)(qe,$,this.authState.pipe(Y(Et=>!Et))).pipe((0,vt.U)(Et=>Et?.user?Et:null),(0,xM.R)(c.outsideAngular),(0,HT.Q)(c.insideAngular))}return(0,gr.pX)(this,X,o,{spy:{apply:(ce,qe,ut)=>{(ce.startsWith("signIn")||ce.startsWith("createUser"))&&ut.then(at=>$.next(at))}}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(gr.Dh),u.LFG(gr.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(bn.HU),u.LFG(YM,8),u.LFG(QM,8),u.LFG(JM,8),u.LFG(XM,8),u.LFG(ex,8),u.LFG(tx,8),u.LFG(XT,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function jP(n,e){return function $2(n,e=Ji.z){return new Wr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function ix(n,e){return jP(n,e).pipe((0,vt.U)(t=>({payload:t,type:"query"})))}function eD(n,e){return ix(n,e).pipe(ro(void 0),Ns(),(0,vt.U)(([t,r])=>{const i=r.payload.docChanges(),o=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,h)=>{const _=i.find(I=>I.doc.ref.isEqual(c.ref)),y=t?.payload.docs.find(I=>I.ref.isEqual(c.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(c.metadata)||!_&&y&&JSON.stringify(y.metadata)===JSON.stringify(c.metadata)||o.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:c}})}),o}))}function HP(n,e,t){return eD(n,t).pipe(T((r,i)=>function H2(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function G2(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return sx(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return sx(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return sx(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(o=>o.payload),e),[]),x(),(0,vt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function sx(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function GP(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class zP{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=eD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,vt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(ro(void 0),Ns(),Y(([r,i])=>i.length>0||!r),(0,vt.U)(([r,i])=>i),bn.iC)}auditTrail(e){return this.stateChanges(e).pipe(T((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=GP(e);return HP(this.query,t,this.afs.schedulers.outsideAngular).pipe(bn.iC)}valueChanges(e={}){return ix(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),bn.iC)}get(e){return(0,Xt.D)(this.query.get(e)).pipe(bn.iC)}add(e){return this.ref.add(e)}doc(e){return new qP(this.ref.doc(e),this.afs)}}class qP{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:o}=KP(r,t);return new zP(i,o,this.afs)}snapshotChanges(){return function j2(n,e){return jP(n,e).pipe(ro(void 0),Ns(),(0,vt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(bn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,vt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Xt.D)(this.ref.get(e)).pipe(bn.iC)}}class z2{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?eD(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Y(t=>t.length>0),bn.iC):eD(this.query,this.afs.schedulers.outsideAngular).pipe(bn.iC)}auditTrail(e){return this.stateChanges(e).pipe(T((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=GP(e);return HP(this.query,t,this.afs.schedulers.outsideAngular).pipe(bn.iC)}valueChanges(e={}){return ix(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),bn.iC)}get(e){return(0,Xt.D)(this.query.get(e)).pipe(bn.iC)}}const ZP=new u.OlP("angularfire2.enableFirestorePersistence"),WP=new u.OlP("angularfire2.firestore.persistenceSettings"),q2=new u.OlP("angularfire2.firestore.settings"),Z2=new u.OlP("angularfire2.firestore.use-emulator");function KP(n,e=(t=>t)){return{query:e(n),ref:n}}let TE=(()=>{class n{constructor(t,r,i,o,c,h,_,y,I,D,R,L,$,X,ce,qe,ut){this.schedulers=_;const at=(0,gr.on)(t,h,r),Et=I;D&&nx(at,h,R,$,X,ce,L,qe),[this.firestore,this.persistenceEnabled$]=(0,gr.cc)(`${at.name}.firestore`,"AngularFirestore",at.name,()=>{const $t=h.runOutsideAngular(()=>at.firestore());if(o&&$t.settings(o),Et&&$t.useEmulator(...Et),i&&!sa(c)){const Gt=()=>{try{return(0,Xt.D)($t.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(Tn){return typeof console<"u"&&console.warn(Tn),mt(!1)}};return[$t,h.runOutsideAngular(Gt)]}return[$t,mt(!1)]},[o,Et,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:o,query:c}=KP(i,r),h=this.schedulers.ngZone.run(()=>o);return new zP(h,c,this)}collectionGroup(t,r){const i=r||(c=>c),o=this.firestore.collectionGroup(t);return new z2(i(o),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new qP(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(gr.Dh),u.LFG(gr.xv,8),u.LFG(ZP,8),u.LFG(q2,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(bn.HU),u.LFG(WP,8),u.LFG(Z2,8),u.LFG(rx,8),u.LFG(YM,8),u.LFG(QM,8),u.LFG(JM,8),u.LFG(XM,8),u.LFG(ex,8),u.LFG(tx,8),u.LFG(XT,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),W2=(()=>{class n{constructor(){$P.Z.registerVersion("angularfire",bn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:ZP,useValue:!0},{provide:WP,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[TE]}),n})();var K2=F(5032);const YP="@firebase/database";let ox="";function JP(n){ox=n}class J2{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,O.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,O.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class X2{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,O.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const XP=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new J2(e)}}catch{}return new X2},Sm=XP("localStorage"),ax=XP("sessionStorage"),yv=new Ot.Yd("@firebase/database"),e1=function(){let n=1;return function(){return n++}}(),t1=function(n){const e=(0,O.dS)(n),t=new O.gQ;t.update(e);const r=t.digest();return O.US.encodeByteArray(r)},DE=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=DE.apply(null,r):e+="object"==typeof r?(0,O.Wl)(r):r,e+=" "}return e};let Am=null,n1=!0;const r1=function(n,e){(0,O.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(yv.logLevel=Ot.in.VERBOSE,Am=yv.log.bind(yv),e&&ax.set("logging_enabled",!0)):"function"==typeof n?Am=n:(Am=null,ax.remove("logging_enabled"))},ki=function(...n){if(!0===n1&&(n1=!1,null===Am&&!0===ax.get("logging_enabled")&&r1(!0)),Am){const e=DE.apply(null,n);Am(e)}},SE=function(n){return function(...e){ki(n,...e)}},lx=function(...n){const e="FIREBASE INTERNAL ERROR: "+DE(...n);yv.error(e)},pc=function(...n){const e=`FIREBASE FATAL ERROR: ${DE(...n)}`;throw yv.error(e),new Error(e)},gs=function(...n){const e="FIREBASE WARNING: "+DE(...n);yv.warn(e)},tD=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},up="[MIN_NAME]",Yd="[MAX_NAME]",Mm=function(n,e){if(n===e)return 0;if(n===up||e===Yd)return-1;if(e===up||n===Yd)return 1;{const t=o1(n),r=o1(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},nU=function(n,e){return n===e?0:n<e?-1:1},AE=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,O.Wl)(e))},ux=function(n){if("object"!=typeof n||null===n)return(0,O.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,O.Wl)(e[r]),t+=":",t+=ux(n[e[r]]);return t+="}",t},i1=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Fi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const s1=function(n){(0,O.hu)(!tD(n),"Invalid JSON number");const r=1023;let i,o,c,h,_;0===n?(o=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=h+r,c=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(o=0,c=Math.round(n/Math.pow(2,-1074))));const y=[];for(_=52;_;_-=1)y.push(c%2?1:0),c=Math.floor(c/2);for(_=11;_;_-=1)y.push(o%2?1:0),o=Math.floor(o/2);y.push(i?1:0),y.reverse();const I=y.join("");let D="";for(_=0;_<64;_+=8){let R=parseInt(I.substr(_,8),2).toString(16);1===R.length&&(R="0"+R),D+=R}return D.toLowerCase()},oU=new RegExp("^-?(0*)\\d{1,10}$"),o1=function(n){if(oU.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},vv=function(n){try{n()}catch(e){setTimeout(()=>{throw gs("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},uU=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ME=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class cU{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){gs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class dU{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(ki("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',gs(e)}}let xE=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const d1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,p1="websocket",g1="long_polling";class dx{constructor(e,t,r,i,o=!1,c="",h=!1,_=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=_,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Sm.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Sm.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function m1(n,e,t){let r;if((0,O.hu)("string"==typeof e,"typeof type must == string"),(0,O.hu)("object"==typeof t,"typeof params must == object"),e===p1)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==g1)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function hU(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Fi(t,(o,c)=>{i.push(o+"="+c)}),r+i.join("&")}class fU{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,O.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,O.p$)(this.counters_)}}const hx={},fx={};function px(n){const e=n.toString();return hx[e]||(hx[e]=new fU),hx[e]}class gU{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&vv(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class cp{constructor(e,t,r,i,o,c,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=SE(e),this.stats_=px(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),m1(t,g1,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new gU(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,O.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new gx((...o)=>{const[c,h,_,y,I]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=h,this.password=_;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[c,h]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&d1.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){cp.forceAllow_=!0}static forceDisallow(){cp.forceDisallow_=!0}static isAvailable(){return!((0,O.Yr)()||!cp.forceAllow_&&(cp.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,O.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,O.h$)(t),i=i1(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,O.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,O.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class gx{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,O.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=e1(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=gx.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){ki("frame writing exception"),h.stack&&ki(h.stack),ki(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||ki("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,O.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{ki("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let rD=null;typeof MozWebSocket<"u"?rD=MozWebSocket:typeof WebSocket<"u"&&(rD=WebSocket);let wv=(()=>{class n{constructor(t,r,i,o,c,h,_){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=SE(this.connId),this.stats_=px(r),this.connURL=n.connectionURL_(r,h,_,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,c){const h={v:"5"};return!(0,O.Yr)()&&typeof location<"u"&&location.hostname&&d1.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),o&&(h.ac=o),c&&(h.p=c),m1(t,p1,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Sm.set("previous_websocket_failure",!0);try{let i;if((0,O.Yr)()){i={headers:{"User-Agent":`Firebase/5/${ox}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,h=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new rD(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==rD&&!n.forceDisallow_}static previouslyFailed(){return Sm.isInMemoryStorage||!0===Sm.get("previous_websocket_failure")}markConnectionHealthy(){Sm.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,O.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,O.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,O.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=i1(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),I1=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[cp,wv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=wv&&wv.isAvailable();let i=r&&!wv.previouslyFailed();if(t.webSocketOnly&&(r||gs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[wv];else{const o=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&o.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class x1{constructor(e,t,r,i,o,c,h,_,y,I){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=_,this.onKill_=y,this.lastSessionId=I,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=SE("c:"+this.id+":"),this.transportManager_=new I1(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ME(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=AE("t",e),r=AE("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=AE("t",e),r=AE("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=AE("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?lx("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):lx("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&gs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),ME(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ME(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Sm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class N1{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class R1{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,O.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(e){(0,O.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class iD extends R1{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,O.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new iD}getInitialEvent(e){return(0,O.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const P1=32,O1=768;class Nn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function In(){return new Nn("")}function tn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function dp(n){return n.pieces_.length-n.pieceNum_}function Yn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Nn(n.pieces_,e)}function _x(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function NE(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function k1(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Nn(e,0)}function vr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Nn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Nn(t,0)}function nn(n){return n.pieceNum_>=n.pieces_.length}function zs(n,e){const t=tn(n),r=tn(e);if(null===t)return e;if(t===r)return zs(Yn(n),Yn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function LU(n,e){const t=NE(n,0),r=NE(e,0);for(let i=0;i<t.length&&i<r.length;i++){const o=Mm(t[i],r[i]);if(0!==o)return o}return t.length===r.length?0:t.length<r.length?-1:1}function yx(n,e){if(dp(n)!==dp(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Za(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(dp(n)>dp(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class VU{constructor(e,t){this.errorPrefix_=t,this.parts_=NE(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,O.ug)(this.parts_[r]);F1(this)}}function F1(n){if(n.byteLength_>O1)throw new Error(n.errorPrefix_+"has a key path longer than "+O1+" bytes ("+n.byteLength_+").");if(n.parts_.length>P1)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+P1+") or object contains a cycle "+xm(n))}function xm(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class vx extends R1{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new vx}getInitialEvent(e){return(0,O.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const RE=1e3;let oD,Nm=(()=>{class n extends N1{constructor(t,r,i,o,c,h,_,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=c,this.authTokenProvider_=h,this.appCheckTokenProvider_=_,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=SE("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=RE,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,O.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");vx.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&iD.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const o=++this.requestNumber_,c={r:o,a:t,b:r};this.log_((0,O.Wl)(c)),(0,O.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();const r=new O.BH,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:h=>{const _=h.d;"ok"===h.s?r.resolve(_):r.reject(_)}};return this.outstandingGets_.push(o),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,o){this.initConnection_();const c=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+c),this.listens.has(h)||this.listens.set(h,new Map),(0,O.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,O.hu)(!this.listens.get(h).has(c),"listen() called twice for same path/queryId.");const _={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(h).set(c,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,_=>{const y=_.d,I=_.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",_),"ok"!==I&&this.removeListen_(i,o),t.onComplete&&t.onComplete(I,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,O.r3)(t,"w")){const i=(0,O.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();gs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,O.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,O.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const c=o.s,h=o.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),(0,O.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);const c={p:t};o&&(c.q=i,c.t=o),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,h=>{o&&setTimeout(()=>{o(h.s,h.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,c){this.initConnection_();const h={p:r,d:i};void 0!==c&&(h.h=c),this.outstandingPuts_.push({action:t,request:h,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,O.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):lx("Unrecognized action received from server: "+(0,O.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,O.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=RE,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=RE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=RE),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,W.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),o=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let _=!1,y=null;const I=function(){y?y.close():(_=!0,o())};t.realtime_={close:I,sendRequest:function(L){(0,O.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(L)}};const R=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[L,$]=yield Promise.all([t.authTokenProvider_.getToken(R),t.appCheckTokenProvider_.getToken(R)]);_?ki("getToken() completed but was canceled"):(ki("getToken() completed. Creating connection."),t.authToken_=L&&L.accessToken,t.appCheckToken_=$&&$.token,y=new x1(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,o,X=>{gs(X+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(L){t.log_("Failed to get token: "+L),_||(t.repoInfo_.nodeAdmin&&gs(L),I())}}})()}interrupt(t){ki("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){ki("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,O.xb)(this.interruptReasons_)&&(this.reconnectDelay_=RE,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>ux(c)).join("$"):"default";const o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){const i=new Nn(t).toString();let o;if(this.listens.has(i)){const c=this.listens.get(i);o=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){ki("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){ki("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,O.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+ox.replace(/\./g,"-")]=1,(0,O.uI)()?t["framework.cordova"]=1:(0,O.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=iD.getInstance().currentlyOnline();return(0,O.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class sn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new sn(e,t)}}class sD{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new sn(up,e),i=new sn(up,t);return 0!==this.compare(r,i)}minPost(){return sn.MIN}}class U1 extends sD{static get __EMPTY_NODE(){return oD}static set __EMPTY_NODE(e){oD=e}compare(e,t){return Mm(e.name,t.name)}isDefinedOn(e){throw(0,O.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return sn.MIN}maxPost(){return new sn(Yd,oD)}makePost(e,t){return(0,O.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new sn(e,oD)}toString(){return".key"}}const gc=new U1;class aD{constructor(e,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Ex,eu=(()=>{class n{constructor(t,r,i,o,c){this.key=t,this.value=r,this.color=i??n.RED,this.left=o??ho.EMPTY_NODE,this.right=c??ho.EMPTY_NODE}copy(t,r,i,o,c){return new n(t??this.key,r??this.value,i??this.color,o??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this;const c=i(t,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(t,r,i),null):0===c?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return ho.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return ho.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class ho{constructor(e,t=ho.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ho(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,eu.BLACK,null,null))}remove(e){return new ho(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,eu.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new aD(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new aD(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new aD(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new aD(this.root_,null,this.comparator_,!0,e)}}function qU(n,e){return Mm(n.name,e.name)}function wx(n,e){return Mm(n,e)}ho.EMPTY_NODE=new class zU{copy(e,t,r,i,o){return this}insert(e,t,r){return new eu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const B1=function(n){return"number"==typeof n?"number:"+s1(n):"string:"+n},$1=function(n){if(n.isLeafNode()){const e=n.val();(0,O.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,O.r3)(e,".sv"),"Priority must be a string or number.")}else(0,O.hu)(n===Ex||n.isEmpty(),"priority of unexpected type.");(0,O.hu)(n===Ex||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let j1,H1,G1,Ev=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,O.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),$1(this.priorityNode_)}static set __childrenNodeConstructor(t){j1=t}static get __childrenNodeConstructor(){return j1}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return nn(t)?this:".priority"===tn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=tn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,O.hu)(".priority"!==i||1===dp(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Yn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+B1(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?s1(this.value_):this.value_,this.lazyHash_=t1(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,O.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,O.hu)(o>=0,"Unknown leaf type: "+r),(0,O.hu)(c>=0,"Unknown leaf type: "+i),o===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-o}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const nr=new class YU extends sD{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return 0===o?Mm(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return sn.MIN}maxPost(){return new sn(Yd,new Ev("[PRIORITY-POST]",G1))}makePost(e,t){const r=H1(e);return new sn(t,new Ev("[PRIORITY-POST]",r))}toString(){return".priority"}},QU=Math.log(2);class JU{constructor(e){this.count=parseInt(Math.log(e+1)/QU,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const lD=function(n,e,t,r){n.sort(e);const i=function(_,y){const I=y-_;let D,R;if(0===I)return null;if(1===I)return D=n[_],R=t?t(D):D,new eu(R,D.node,eu.BLACK,null,null);{const L=parseInt(I/2,10)+_,$=i(_,L),X=i(L+1,y);return D=n[L],R=t?t(D):D,new eu(R,D.node,eu.BLACK,$,X)}},h=function(_){let y=null,I=null,D=n.length;const R=function($,X){const ce=D-$,qe=D;D-=$;const ut=i(ce+1,qe),at=n[ce],Et=t?t(at):at;L(new eu(Et,at.node,X,null,ut))},L=function($){y?(y.left=$,y=$):(I=$,y=$)};for(let $=0;$<_.count;++$){const X=_.nextBitIsOne(),ce=Math.pow(2,_.count-($+1));X?R(ce,eu.BLACK):(R(ce,eu.BLACK),R(ce,eu.RED))}return I}(new JU(n.length));return new ho(r||e,h)};let Cx;const Cv={};class Qd{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,O.hu)(Cv&&nr,"ChildrenNode.ts has not been loaded"),Cx=Cx||new Qd({".priority":Cv},{".priority":nr}),Cx}get(e){const t=(0,O.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ho?t:null}hasIndex(e){return(0,O.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,O.hu)(e!==gc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=t.getIterator(sn.Wrap);let h,c=o.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=o.getNext();h=i?lD(r,e.getCompare()):Cv;const _=e.toString(),y=Object.assign({},this.indexSet_);y[_]=e;const I=Object.assign({},this.indexes_);return I[_]=h,new Qd(I,y)}addToIndexes(e,t){const r=(0,O.UI)(this.indexes_,(i,o)=>{const c=(0,O.DV)(this.indexSet_,o);if((0,O.hu)(c,"Missing index implementation for "+o),i===Cv){if(c.isDefinedOn(e.node)){const h=[],_=t.getIterator(sn.Wrap);let y=_.getNext();for(;y;)y.name!==e.name&&h.push(y),y=_.getNext();return h.push(e),lD(h,c.getCompare())}return Cv}{const h=t.get(e.name);let _=i;return h&&(_=_.remove(new sn(e.name,h))),_.insert(e,e.node)}});return new Qd(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,O.UI)(this.indexes_,i=>{if(i===Cv)return i;{const o=t.get(e.name);return o?i.remove(new sn(e.name,o)):i}});return new Qd(r,this.indexSet_)}}let PE,qt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&$1(this.priorityNode_),this.children_.isEmpty()&&(0,O.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return PE||(PE=new n(new ho(wx),null,Qd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||PE}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?PE:r}}getChild(t){const r=tn(t);return null===r?this:this.getImmediateChild(r).getChild(Yn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,O.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new sn(t,r);let o,c;r.isEmpty()?(o=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const h=o.isEmpty()?PE:this.priorityNode_;return new n(o,h,c)}}updateChild(t,r){const i=tn(t);if(null===i)return r;{(0,O.hu)(".priority"!==tn(t)||1===dp(t),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(Yn(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,o=0,c=!0;if(this.forEachChild(nr,(h,_)=>{r[h]=_.val(t),i++,c&&n.INTEGER_REGEXP_.test(h)?o=Math.max(o,Number(h)):c=!1}),!t&&c&&o<2*i){const h=[];for(const _ in r)h[_]=r[_];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+B1(this.getPriority().val())+":"),this.forEachChild(nr,(r,i)=>{const o=i.hash();""!==o&&(t+=":"+r+":"+o)}),this.lazyHash_=""===t?"":t1(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const o=this.resolveIndex_(i);if(o){const c=o.getPredecessorKey(new sn(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new sn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new sn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,sn.Wrap);let c=o.peek();for(;null!=c&&r.compare(c,t)<0;)o.getNext(),c=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,sn.Wrap);let c=o.peek();for(;null!=c&&r.compare(c,t)>0;)o.getNext(),c=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===OE?-1:0}withIndex(t){if(t===gc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===gc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(nr),o=r.getIterator(nr);let c=i.getNext(),h=o.getNext();for(;c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=i.getNext(),h=o.getNext()}return null===c&&null===h}return!1}return!1}}resolveIndex_(t){return t===gc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const OE=new class XU extends qt{constructor(){super(new ho(wx),qt.EMPTY_NODE,Qd.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return qt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(sn,{MIN:{value:new sn(up,qt.EMPTY_NODE)},MAX:{value:new sn(Yd,OE)}}),U1.__EMPTY_NODE=qt.EMPTY_NODE,Ev.__childrenNodeConstructor=qt,function ZU(n){Ex=n}(OE),function KU(n){G1=n}(OE);const eB=!0;function xr(n,e=null){if(null===n)return qt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,O.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Ev(n,xr(e));if(n instanceof Array||!eB){let t=qt.EMPTY_NODE;return Fi(n,(r,i)=>{if((0,O.r3)(n,r)&&"."!==r.substring(0,1)){const o=xr(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(xr(e))}{const t=[];let r=!1;if(Fi(n,(c,h)=>{if("."!==c.substring(0,1)){const _=xr(h);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new sn(c,_)))}}),0===t.length)return qt.EMPTY_NODE;const o=lD(t,qU,c=>c.name,wx);if(r){const c=lD(t,nr.getCompare());return new qt(o,xr(e),new Qd({".priority":c},{".priority":nr}))}return new qt(o,xr(e),Qd.Default)}}!function WU(n){H1=n}(xr);class Ix extends sD{constructor(e){super(),this.indexPath_=e,(0,O.hu)(!nn(e)&&".priority"!==tn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),o=r.compareTo(i);return 0===o?Mm(e.name,t.name):o}makePost(e,t){const r=xr(e),i=qt.EMPTY_NODE.updateChild(this.indexPath_,r);return new sn(t,i)}maxPost(){const e=qt.EMPTY_NODE.updateChild(this.indexPath_,OE);return new sn(Yd,e)}toString(){return NE(this.indexPath_,0).join("/")}}const bx=new class tB extends sD{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Mm(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return sn.MIN}maxPost(){return sn.MAX}makePost(e,t){const r=xr(e);return new sn(t,r)}toString(){return".value"}};function z1(n){return{type:"value",snapshotNode:n}}function Iv(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function kE(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function FE(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Tx{constructor(e){this.index_=e}updateChild(e,t,r,i,o,c){(0,O.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(kE(t,h)):(0,O.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?c.trackChildChange(Iv(t,r)):c.trackChildChange(FE(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(nr,(i,o)=>{t.hasChild(i)||r.trackChildChange(kE(i,o))}),t.isLeafNode()||t.forEachChild(nr,(i,o)=>{if(e.hasChild(i)){const c=e.getImmediateChild(i);c.equals(o)||r.trackChildChange(FE(i,o,c))}else r.trackChildChange(Iv(i,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?qt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class LE{constructor(e){this.indexedFilter_=new Tx(e.getIndex()),this.index_=e.getIndex(),this.startPost_=LE.getStartPost_(e),this.endPost_=LE.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,o,c){return this.matches(new sn(t,r))||(r=qt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,o,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=qt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(qt.EMPTY_NODE);const o=this;return t.forEachChild(nr,(c,h)=>{o.matches(new sn(c,h))||(i=i.updateImmediateChild(c,qt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class rB{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new LE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,o,c){return this.rangedFilter_.matches(new sn(t,r))||(r=qt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,o,c):this.fullLimitUpdateChild_(e,t,r,o,c)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=qt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let o;i=qt.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;o.hasNext()&&c<this.limit_;){const h=o.getNext();if(this.withinDirectionalStart(h)){if(!this.withinDirectionalEnd(h))break;i=i.updateImmediateChild(h.name,h.node),c++}}}else{let o;i=t.withIndex(this.index_),i=i.updatePriority(qt.EMPTY_NODE),o=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let c=0;for(;o.hasNext();){const h=o.getNext();c<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?c++:i=i.updateImmediateChild(h.name,qt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,o){let c;if(this.reverse_){const D=this.index_.getCompare();c=(R,L)=>D(L,R)}else c=this.index_.getCompare();const h=e;(0,O.hu)(h.numChildren()===this.limit_,"");const _=new sn(t,r),y=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),I=this.rangedFilter_.matches(_);if(h.hasChild(t)){const D=h.getImmediateChild(t);let R=i.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=R&&(R.name===t||h.hasChild(R.name));)R=i.getChildAfterChild(this.index_,R,this.reverse_);const L=null==R?1:c(R,_);if(I&&!r.isEmpty()&&L>=0)return o?.trackChildChange(FE(t,r,D)),h.updateImmediateChild(t,r);{o?.trackChildChange(kE(t,D));const X=h.updateImmediateChild(t,qt.EMPTY_NODE);return null!=R&&this.rangedFilter_.matches(R)?(o?.trackChildChange(Iv(R.name,R.node)),X.updateImmediateChild(R.name,R.node)):X}}return r.isEmpty()?e:I&&c(y,_)>=0?(null!=o&&(o.trackChildChange(kE(y.name,y.node)),o.trackChildChange(Iv(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(y.name,qt.EMPTY_NODE)):e}}class uD{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=nr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,O.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,O.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:up}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,O.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,O.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Yd}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,O.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===nr}copy(){const e=new uD;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Dx(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function Sx(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function cD(n,e){const t=n.copy();return t.index_=e,t}function q1(n){const e={};if(n.isDefault())return e;let t;if(n.index_===nr?t="$priority":n.index_===bx?t="$value":n.index_===gc?t="$key":((0,O.hu)(n.index_ instanceof Ix,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,O.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,O.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,O.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,O.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,O.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Z1(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==nr&&(e.i=n.index_.toString()),e}class dD extends N1{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=SE("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,O.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const c=dD.getListenId_(e,r),h={};this.listens_[c]=h;const _=q1(e._queryParams);this.restRequest_(o+".json",_,(y,I)=>{let D=I;if(404===y&&(D=null,y=null),null===y&&this.onDataUpdate_(o,D,!1,r),(0,O.DV)(this.listens_,c)===h){let R;R=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(R,null)}})}unlisten(e,t){const r=dD.getListenId_(e,t);delete this.listens_[r]}get(e){const t=q1(e._queryParams),r=e._path.toString(),i=new O.BH;return this.restRequest_(r+".json",t,(o,c)=>{let h=c;404===o&&(h=null,o=null),null===o?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,O.xO)(t);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let _=null;if(h.status>=200&&h.status<300){try{_=(0,O.cI)(h.responseText)}catch{gs("Failed to parse JSON response for "+c+": "+h.responseText)}r(null,_)}else 401!==h.status&&404!==h.status&&gs("Got unsuccessful REST response for "+c+" Status: "+h.status),r(h.status);r=null}},h.open("GET",c,!0),h.send()})}}class uB{constructor(){this.rootNode_=qt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function hD(){return{value:null,children:new Map}}function bv(n,e,t){if(nn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=tn(e);n.children.has(r)||n.children.set(r,hD()),bv(n.children.get(r),e=Yn(e),t)}}function Ax(n,e){if(nn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(nr,(r,i)=>{bv(n,new Nn(r),i)}),Ax(n,e)}}if(n.children.size>0){const t=tn(e);return e=Yn(e),n.children.has(t)&&Ax(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Mx(n,e,t){null!==n.value?t(e,n.value):function cB(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{Mx(i,new Nn(e.toString()+"/"+r),t)})}class dB{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Fi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class pB{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new dB(e);const r=1e4+2e4*Math.random();ME(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Fi(e,(i,o)=>{o>0&&(0,O.r3)(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),ME(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Wa=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Wa||(Wa={})),Wa))();function Rx(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class fD{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Wa.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(nn(this.path)){if(null!=this.affectedTree.value)return(0,O.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Nn(e));return new fD(In(),t,this.revert)}}return(0,O.hu)(tn(this.path)===e,"operationForChild called for unrelated child."),new fD(Yn(this.path),this.affectedTree,this.revert)}}class VE{constructor(e,t){this.source=e,this.path=t,this.type=Wa.LISTEN_COMPLETE}operationForChild(e){return nn(this.path)?new VE(this.source,In()):new VE(this.source,Yn(this.path))}}class Rm{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Wa.OVERWRITE}operationForChild(e){return nn(this.path)?new Rm(this.source,In(),this.snap.getImmediateChild(e)):new Rm(this.source,Yn(this.path),this.snap)}}class Tv{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Wa.MERGE}operationForChild(e){if(nn(this.path)){const t=this.children.subtree(new Nn(e));return t.isEmpty()?null:t.value?new Rm(this.source,In(),t.value):new Tv(this.source,In(),t)}return(0,O.hu)(tn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Tv(this.source,Yn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class hp{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(nn(e))return this.isFullyInitialized()&&!this.filtered_;const t=tn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class gB{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function UE(n,e,t,r,i,o){const c=r.filter(h=>h.type===t);c.sort((h,_)=>function yB(n,e,t){if(null==e.childName||null==t.childName)throw(0,O.g5)("Should only compare child_ events.");const r=new sn(e.childName,e.snapshotNode),i=new sn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,_)),c.forEach(h=>{const _=function _B(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,o);i.forEach(y=>{y.respondsTo(h.type)&&e.push(y.createEvent(_,n.query_))})})}function pD(n,e){return{eventCache:n,serverCache:e}}function BE(n,e,t,r){return pD(new hp(e,t,r),n.serverCache)}function K1(n,e,t,r){return pD(n.eventCache,new hp(e,t,r))}function gD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Pm(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Px;class rr{constructor(e,t=(()=>(Px||(Px=new ho(nU)),Px))()){this.value=e,this.children=t}static fromObject(e){let t=new rr(null);return Fi(e,(r,i)=>{t=t.set(new Nn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:In(),value:this.value};if(nn(e))return null;{const r=tn(e),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(Yn(e),t);return null!=o?{path:vr(new Nn(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(nn(e))return this;{const t=tn(e),r=this.children.get(t);return null!==r?r.subtree(Yn(e)):new rr(null)}}set(e,t){if(nn(e))return new rr(t,this.children);{const r=tn(e),o=(this.children.get(r)||new rr(null)).set(Yn(e),t),c=this.children.insert(r,o);return new rr(this.value,c)}}remove(e){if(nn(e))return this.children.isEmpty()?new rr(null):new rr(null,this.children);{const t=tn(e),r=this.children.get(t);if(r){const i=r.remove(Yn(e));let o;return o=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&o.isEmpty()?new rr(null):new rr(this.value,o)}return this}}get(e){if(nn(e))return this.value;{const t=tn(e),r=this.children.get(t);return r?r.get(Yn(e)):null}}setTree(e,t){if(nn(e))return t;{const r=tn(e),o=(this.children.get(r)||new rr(null)).setTree(Yn(e),t);let c;return c=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new rr(this.value,c)}}fold(e){return this.fold_(In(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(vr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,In(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(nn(e))return null;{const o=tn(e),c=this.children.get(o);return c?c.findOnPath_(Yn(e),vr(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,In(),t)}foreachOnPath_(e,t,r){if(nn(e))return this;{this.value&&r(t,this.value);const i=tn(e),o=this.children.get(i);return o?o.foreachOnPath_(Yn(e),vr(t,i),r):new rr(null)}}foreach(e){this.foreach_(In(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(vr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class tu{constructor(e){this.writeTree_=e}static empty(){return new tu(new rr(null))}}function $E(n,e,t){if(nn(e))return new tu(new rr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let o=r.value;const c=zs(i,e);return o=o.updateChild(c,t),new tu(n.writeTree_.set(i,o))}{const i=new rr(t),o=n.writeTree_.setTree(e,i);return new tu(o)}}}function Ox(n,e,t){let r=n;return Fi(t,(i,o)=>{r=$E(r,vr(e,i),o)}),r}function Y1(n,e){if(nn(e))return tu.empty();{const t=n.writeTree_.setTree(e,new rr(null));return new tu(t)}}function kx(n,e){return null!=Om(n,e)}function Om(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(zs(t.path,e)):null}function Q1(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(nr,(r,i)=>{e.push(new sn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new sn(r,i.value))}),e}function fp(n,e){if(nn(e))return n;{const t=Om(n,e);return new tu(null!=t?new rr(t):n.writeTree_.subtree(e))}}function Fx(n){return n.writeTree_.isEmpty()}function Dv(n,e){return J1(In(),n.writeTree_,e)}function J1(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{".priority"===i?((0,O.hu)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):t=J1(vr(n,i),o,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(vr(n,".priority"),r)),t}}function mD(n,e){return rO(e,n)}function bB(n,e){if(n.snap)return Za(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Za(vr(n.path,t),e))return!0;return!1}function DB(n){return n.visible}function X1(n,e,t){let r=tu.empty();for(let i=0;i<n.length;++i){const o=n[i];if(e(o)){const c=o.path;let h;if(o.snap)Za(t,c)?(h=zs(t,c),r=$E(r,h,o.snap)):Za(c,t)&&(h=zs(c,t),r=$E(r,In(),o.snap.getChild(h)));else{if(!o.children)throw(0,O.g5)("WriteRecord should have .snap or .children");if(Za(t,c))h=zs(t,c),r=Ox(r,h,o.children);else if(Za(c,t))if(h=zs(c,t),nn(h))r=Ox(r,In(),o.children);else{const _=(0,O.DV)(o.children,tn(h));if(_){const y=_.getChild(Yn(h));r=$E(r,In(),y)}}}}}return r}function eO(n,e,t,r,i){if(r||i){const o=fp(n.visibleWrites,e);return!i&&Fx(o)?t:i||null!=t||kx(o,In())?Dv(X1(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(Za(y.path,e)||Za(e,y.path))},e),t||qt.EMPTY_NODE):null}{const o=Om(n.visibleWrites,e);if(null!=o)return o;{const c=fp(n.visibleWrites,e);return Fx(c)?t:null!=t||kx(c,In())?Dv(c,t||qt.EMPTY_NODE):null}}}function _D(n,e,t,r){return eO(n.writeTree,n.treePath,e,t,r)}function Lx(n,e){return function SB(n,e,t){let r=qt.EMPTY_NODE;const i=Om(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(nr,(o,c)=>{r=r.updateImmediateChild(o,c)}),r;if(t){const o=fp(n.visibleWrites,e);return t.forEachChild(nr,(c,h)=>{const _=Dv(fp(o,new Nn(c)),h);r=r.updateImmediateChild(c,_)}),Q1(o).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return Q1(fp(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function tO(n,e,t,r){return function AB(n,e,t,r,i){(0,O.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=vr(e,t);if(kx(n.visibleWrites,o))return null;{const c=fp(n.visibleWrites,o);return Fx(c)?i.getChild(t):Dv(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function yD(n,e){return function xB(n,e){return Om(n.visibleWrites,e)}(n.writeTree,vr(n.treePath,e))}function Vx(n,e,t){return function MB(n,e,t,r){const i=vr(e,t),o=Om(n.visibleWrites,i);return null!=o?o:r.isCompleteForChild(t)?Dv(fp(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function nO(n,e){return rO(vr(n.treePath,e),n.writeTree)}function rO(n,e){return{treePath:n,writeTree:e}}class OB{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,O.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,O.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===t&&"child_removed"===o)this.changeMap.set(r,FE(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===o)this.changeMap.set(r,kE(r,i.oldSnap));else if("child_changed"===t&&"child_added"===o)this.changeMap.set(r,Iv(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==o)throw(0,O.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,FE(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const iO=new class kB{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class Ux{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new hp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Vx(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Pm(this.viewCache_),o=function PB(n,e,t,r,i,o){return function NB(n,e,t,r,i,o,c){let h;const _=fp(n.visibleWrites,e),y=Om(_,In());if(null!=y)h=y;else{if(null==t)return[];h=Dv(_,t)}if(h=h.withIndex(c),h.isEmpty()||h.isLeafNode())return[];{const I=[],D=c.getCompare(),R=o?h.getReverseIteratorFrom(r,c):h.getIteratorFrom(r,c);let L=R.getNext();for(;L&&I.length<i;)0!==D(L,r)&&I.push(L),L=R.getNext();return I}}(n.writeTree,n.treePath,e,t,r,i,o)}(this.writes_,i,t,1,r,e);return 0===o.length?null:o[0]}}function sO(n,e,t,r,i,o){const c=e.eventCache;if(null!=yD(r,t))return e;{let h,_;if(nn(t))if((0,O.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=Pm(e),D=Lx(r,y instanceof qt?y:qt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),D,o)}else{const y=_D(r,Pm(e));h=n.filter.updateFullNode(e.eventCache.getNode(),y,o)}else{const y=tn(t);if(".priority"===y){(0,O.hu)(1===dp(t),"Can't have a priority with additional path components");const I=c.getNode();_=e.serverCache.getNode();const D=tO(r,t,I,_);h=null!=D?n.filter.updatePriority(I,D):c.getNode()}else{const I=Yn(t);let D;if(c.isCompleteForChild(y)){_=e.serverCache.getNode();const R=tO(r,t,c.getNode(),_);D=null!=R?c.getNode().getImmediateChild(y).updateChild(I,R):c.getNode().getImmediateChild(y)}else D=Vx(r,y,e.serverCache);h=null!=D?n.filter.updateChild(c.getNode(),y,D,I,i,o):c.getNode()}}return BE(e,h,c.isFullyInitialized()||nn(t),n.filter.filtersNodes())}}function vD(n,e,t,r,i,o,c,h){const _=e.serverCache;let y;const I=c?n.filter:n.filter.getIndexedFilter();if(nn(t))y=I.updateFullNode(_.getNode(),r,null);else if(I.filtersNodes()&&!_.isFiltered()){const L=_.getNode().updateChild(t,r);y=I.updateFullNode(_.getNode(),L,null)}else{const L=tn(t);if(!_.isCompleteForPath(t)&&dp(t)>1)return e;const $=Yn(t),ce=_.getNode().getImmediateChild(L).updateChild($,r);y=".priority"===L?I.updatePriority(_.getNode(),ce):I.updateChild(_.getNode(),L,ce,$,iO,null)}const D=K1(e,y,_.isFullyInitialized()||nn(t),I.filtersNodes());return sO(n,D,t,i,new Ux(i,D,o),h)}function Bx(n,e,t,r,i,o,c){const h=e.eventCache;let _,y;const I=new Ux(i,e,o);if(nn(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,c),_=BE(e,y,!0,n.filter.filtersNodes());else{const D=tn(t);if(".priority"===D)y=n.filter.updatePriority(e.eventCache.getNode(),r),_=BE(e,y,h.isFullyInitialized(),h.isFiltered());else{const R=Yn(t),L=h.getNode().getImmediateChild(D);let $;if(nn(R))$=r;else{const X=I.getCompleteChild(D);$=null!=X?".priority"===_x(R)&&X.getChild(k1(R)).isEmpty()?X:X.updateChild(R,r):qt.EMPTY_NODE}_=L.equals($)?e:BE(e,n.filter.updateChild(h.getNode(),D,$,R,I,c),h.isFullyInitialized(),n.filter.filtersNodes())}}return _}function oO(n,e){return n.eventCache.isCompleteForChild(e)}function aO(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function $x(n,e,t,r,i,o,c,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,_=e;y=nn(t)?r:new rr(null).setTree(t,r);const I=e.serverCache.getNode();return y.children.inorderTraversal((D,R)=>{if(I.hasChild(D)){const $=aO(0,e.serverCache.getNode().getImmediateChild(D),R);_=vD(n,_,new Nn(D),$,i,o,c,h)}}),y.children.inorderTraversal((D,R)=>{const L=!e.serverCache.isCompleteForChild(D)&&null===R.value;if(!I.hasChild(D)&&!L){const X=aO(0,e.serverCache.getNode().getImmediateChild(D),R);_=vD(n,_,new Nn(D),X,i,o,c,h)}}),_}class GB{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Tx(r.getIndex()),o=function iB(n){return n.loadsAllData()?new Tx(n.getIndex()):n.hasLimit()?new rB(n):new LE(n)}(r);this.processor_=function FB(n){return{filter:n}}(o);const c=t.serverCache,h=t.eventCache,_=i.updateFullNode(qt.EMPTY_NODE,c.getNode(),null),y=o.updateFullNode(qt.EMPTY_NODE,h.getNode(),null),I=new hp(_,c.isFullyInitialized(),i.filtersNodes()),D=new hp(y,h.isFullyInitialized(),o.filtersNodes());this.viewCache_=pD(D,I),this.eventGenerator_=new gB(this.query_)}get query(){return this.query_}}function ZB(n,e){const t=Pm(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!nn(e)&&!t.getImmediateChild(tn(e)).isEmpty())?t.getChild(e):null}function lO(n){return 0===n.eventRegistrations_.length}function uO(n,e,t){const r=[];if(t){(0,O.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(o=>{const c=o.createCancelEvent(t,i);c&&r.push(c)})}if(e){let i=[];for(let o=0;o<n.eventRegistrations_.length;++o){const c=n.eventRegistrations_[o];if(c.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(o+1));break}}else i.push(c)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function cO(n,e,t,r){e.type===Wa.MERGE&&null!==e.source.queryId&&((0,O.hu)(Pm(n.viewCache_),"We should always have a full cache before handling merges"),(0,O.hu)(gD(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,o=function VB(n,e,t,r,i){const o=new OB;let c,h;if(t.type===Wa.OVERWRITE){const y=t;y.source.fromUser?c=Bx(n,e,y.path,y.snap,r,i,o):((0,O.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered()&&!nn(y.path),c=vD(n,e,y.path,y.snap,r,i,h,o))}else if(t.type===Wa.MERGE){const y=t;y.source.fromUser?c=function BB(n,e,t,r,i,o,c){let h=e;return r.foreach((_,y)=>{const I=vr(t,_);oO(e,tn(I))&&(h=Bx(n,h,I,y,i,o,c))}),r.foreach((_,y)=>{const I=vr(t,_);oO(e,tn(I))||(h=Bx(n,h,I,y,i,o,c))}),h}(n,e,y.path,y.children,r,i,o):((0,O.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered(),c=$x(n,e,y.path,y.children,r,i,h,o))}else if(t.type===Wa.ACK_USER_WRITE){const y=t;c=y.revert?function HB(n,e,t,r,i,o){let c;if(null!=yD(r,t))return e;{const h=new Ux(r,e,i),_=e.eventCache.getNode();let y;if(nn(t)||".priority"===tn(t)){let I;if(e.serverCache.isFullyInitialized())I=_D(r,Pm(e));else{const D=e.serverCache.getNode();(0,O.hu)(D instanceof qt,"serverChildren would be complete if leaf node"),I=Lx(r,D)}y=n.filter.updateFullNode(_,I,o)}else{const I=tn(t);let D=Vx(r,I,e.serverCache);null==D&&e.serverCache.isCompleteForChild(I)&&(D=_.getImmediateChild(I)),y=null!=D?n.filter.updateChild(_,I,D,Yn(t),h,o):e.eventCache.getNode().hasChild(I)?n.filter.updateChild(_,I,qt.EMPTY_NODE,Yn(t),h,o):_,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=_D(r,Pm(e)),c.isLeafNode()&&(y=n.filter.updateFullNode(y,c,o)))}return c=e.serverCache.isFullyInitialized()||null!=yD(r,In()),BE(e,y,c,n.filter.filtersNodes())}}(n,e,y.path,r,i,o):function $B(n,e,t,r,i,o,c){if(null!=yD(i,t))return e;const h=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(nn(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return vD(n,e,t,_.getNode().getChild(t),i,o,h,c);if(nn(t)){let y=new rr(null);return _.getNode().forEachChild(gc,(I,D)=>{y=y.set(new Nn(I),D)}),$x(n,e,t,y,i,o,h,c)}return e}{let y=new rr(null);return r.foreach((I,D)=>{const R=vr(t,I);_.isCompleteForPath(R)&&(y=y.set(I,_.getNode().getChild(R)))}),$x(n,e,t,y,i,o,h,c)}}(n,e,y.path,y.affectedTree,r,i,o)}else{if(t.type!==Wa.LISTEN_COMPLETE)throw(0,O.g5)("Unknown operation type: "+t.type);c=function jB(n,e,t,r,i){const o=e.serverCache;return sO(n,K1(e,o.getNode(),o.isFullyInitialized()||nn(t),o.isFiltered()),t,r,iO,i)}(n,e,t.path,r,o)}const _=o.getChanges();return function UB(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=gD(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(z1(gD(e)))}}(e,c,_),{viewCache:c,changes:_}}(n.processor_,i,e,t,r);return function LB(n,e){(0,O.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,O.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),(0,O.hu)(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,dO(n,o.changes,o.viewCache.eventCache.getNode(),null)}function dO(n,e,t,r){return function mB(n,e,t,r){const i=[],o=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&o.push(function nB(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),UE(n,i,"child_removed",e,r,t),UE(n,i,"child_added",e,r,t),UE(n,i,"child_moved",o,r,t),UE(n,i,"child_changed",e,r,t),UE(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let wD,CD;class hO{constructor(){this.views=new Map}}function jx(n,e,t,r){const i=e.source.queryId;if(null!==i){const o=n.views.get(i);return(0,O.hu)(null!=o,"SyncTree gave us an op for an invalid query."),cO(o,e,t,r)}{let o=[];for(const c of n.views.values())o=o.concat(cO(c,e,t,r));return o}}function fO(n,e,t,r,i){const c=n.views.get(e._queryIdentifier);if(!c){let h=_D(t,i?r:null),_=!1;h?_=!0:r instanceof qt?(h=Lx(t,r),_=!1):(h=qt.EMPTY_NODE,_=!1);const y=pD(new hp(h,_,!1),new hp(r,i,!1));return new GB(e,y)}return c}function pO(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function pp(n,e){let t=null;for(const r of n.views.values())t=t||ZB(r,e);return t}function gO(n,e){return e._queryParams.loadsAllData()?ED(n):n.views.get(e._queryIdentifier)}function mO(n,e){return null!=gO(n,e)}function gp(n){return null!=ED(n)}function ED(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let r$=1;class _O{constructor(e){this.listenProvider_=e,this.syncPointTree_=new rr(null),this.pendingWriteTree_=function RB(){return{visibleWrites:tu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Hx(n,e,t,r,i){return function wB(n,e,t,r,i){(0,O.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=$E(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Sv(n,new Rm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function mp(n,e,t=!1){const r=function CB(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function IB(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,O.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,o=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const h=n.allWrites[c];h.visible&&(c>=t&&bB(h,r.path)?i=!1:Za(r.path,h.path)&&(o=!0)),c--}return!!i&&(o?(function TB(n){n.visibleWrites=X1(n.allWrites,DB,In()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=Y1(n.visibleWrites,r.path):Fi(r.children,_=>{n.visibleWrites=Y1(n.visibleWrites,vr(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let o=new rr(null);return null!=r.snap?o=o.set(In(),!0):Fi(r.children,c=>{o=o.set(new Nn(c),!0)}),Sv(n,new fD(r.path,o,t))}return[]}function jE(n,e,t){return Sv(n,new Rm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function ID(n,e,t,r,i=!1){const o=e._path,c=n.syncPointTree_.get(o);let h=[];if(c&&("default"===e._queryIdentifier||mO(c,e))){const _=function e$(n,e,t,r){const i=e._queryIdentifier,o=[];let c=[];const h=gp(n);if("default"===i)for(const[_,y]of n.views.entries())c=c.concat(uO(y,t,r)),lO(y)&&(n.views.delete(_),y.query._queryParams.loadsAllData()||o.push(y.query));else{const _=n.views.get(i);_&&(c=c.concat(uO(_,t,r)),lO(_)&&(n.views.delete(i),_.query._queryParams.loadsAllData()||o.push(_.query)))}return h&&!gp(n)&&o.push(new(function QB(){return(0,O.hu)(wD,"Reference.ts has not been loaded"),wD}())(e._repo,e._path)),{removed:o,events:c}}(c,e,t,r);(function JB(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const y=_.removed;if(h=_.events,!i){const I=-1!==y.findIndex(R=>R._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(o,(R,L)=>gp(L));if(I&&!D){const R=n.syncPointTree_.subtree(o);if(!R.isEmpty()){const L=function c$(n){return n.fold((e,t,r)=>{if(t&&gp(t))return[ED(t)];{let i=[];return t&&(i=pO(t)),Fi(r,(o,c)=>{i=i.concat(c)}),i}})}(R);for(let $=0;$<L.length;++$){const X=L[$],ce=X.query,qe=EO(n,X);n.listenProvider_.startListening(GE(ce),HE(n,ce),qe.hashFn,qe.onComplete)}}}!D&&y.length>0&&!r&&(I?n.listenProvider_.stopListening(GE(e),null):y.forEach(R=>{const L=n.queryToTagMap.get(TD(R));n.listenProvider_.stopListening(GE(R),L)}))}!function d$(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=TD(r),o=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(o)}}}(n,y)}return h}function yO(n,e,t,r){const i=zx(n,r);if(null!=i){const o=qx(i),c=o.path,h=o.queryId,_=zs(c,e);return Zx(n,c,new Rm(Rx(h),_,t))}return[]}function Gx(n,e,t,r=!1){const i=e._path;let o=null,c=!1;n.syncPointTree_.foreachOnPath(i,(R,L)=>{const $=zs(R,i);o=o||pp(L,$),c=c||gp(L)});let _,h=n.syncPointTree_.get(i);h?(c=c||gp(h),o=o||pp(h,In())):(h=new hO,n.syncPointTree_=n.syncPointTree_.set(i,h)),null!=o?_=!0:(_=!1,o=qt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((L,$)=>{const X=pp($,In());X&&(o=o.updateImmediateChild(L,X))}));const y=mO(h,e);if(!y&&!e._queryParams.loadsAllData()){const R=TD(e);(0,O.hu)(!n.queryToTagMap.has(R),"View does not exist, but we have a tag");const L=function h$(){return r$++}();n.queryToTagMap.set(R,L),n.tagToQueryMap.set(L,R)}let D=function XB(n,e,t,r,i,o){const c=fO(n,e,r,i,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function WB(n,e){n.eventRegistrations_.push(e)}(c,t),function KB(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(nr,(o,c)=>{r.push(Iv(o,c))}),t.isFullyInitialized()&&r.push(z1(t.getNode())),dO(n,r,t.getNode(),e)}(c,t)}(h,e,t,mD(n.pendingWriteTree_,i),o,_);if(!y&&!c&&!r){const R=gO(h,e);D=D.concat(function f$(n,e,t){const r=e._path,i=HE(n,e),o=EO(n,t),c=n.listenProvider_.startListening(GE(e),i,o.hashFn,o.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,O.hu)(!gp(h.value),"If we're adding a query, it shouldn't be shadowed");else{const _=h.fold((y,I,D)=>{if(!nn(y)&&I&&gp(I))return[ED(I).query];{let R=[];return I&&(R=R.concat(pO(I).map(L=>L.query))),Fi(D,(L,$)=>{R=R.concat($)}),R}});for(let y=0;y<_.length;++y){const I=_[y];n.listenProvider_.stopListening(GE(I),HE(n,I))}}return c}(n,e,R))}return D}function bD(n,e,t){const i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(c,h)=>{const y=pp(h,zs(c,e));if(y)return y});return eO(i,e,o,t,!0)}function Sv(n,e){return vO(e,n.syncPointTree_,null,mD(n.pendingWriteTree_,In()))}function vO(n,e,t,r){if(nn(n.path))return wO(n,e,t,r);{const i=e.get(In());null==t&&null!=i&&(t=pp(i,In()));let o=[];const c=tn(n.path),h=n.operationForChild(c),_=e.children.get(c);if(_&&h){const y=t?t.getImmediateChild(c):null,I=nO(r,c);o=o.concat(vO(h,_,y,I))}return i&&(o=o.concat(jx(i,n,r,t))),o}}function wO(n,e,t,r){const i=e.get(In());null==t&&null!=i&&(t=pp(i,In()));let o=[];return e.children.inorderTraversal((c,h)=>{const _=t?t.getImmediateChild(c):null,y=nO(r,c),I=n.operationForChild(c);I&&(o=o.concat(wO(I,h,_,y)))}),i&&(o=o.concat(jx(i,n,r,t))),o}function EO(n,e){const t=e.query,r=HE(n,t);return{hashFn:()=>(function zB(n){return n.viewCache_.serverCache.getNode()}(e)||qt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function a$(n,e,t){const r=zx(n,t);if(r){const i=qx(r),o=i.path,c=i.queryId,h=zs(o,e);return Zx(n,o,new VE(Rx(c),h))}return[]}(n,t._path,r):function o$(n,e){return Sv(n,new VE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const o=function sU(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return ID(n,t,null,o)}}}}function HE(n,e){const t=TD(e);return n.queryToTagMap.get(t)}function TD(n){return n._path.toString()+"$"+n._queryIdentifier}function zx(n,e){return n.tagToQueryMap.get(e)}function qx(n){const e=n.indexOf("$");return(0,O.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Nn(n.substr(0,e))}}function Zx(n,e,t){const r=n.syncPointTree_.get(e);return(0,O.hu)(r,"Missing sync point for query tag that we're tracking"),jx(r,t,mD(n.pendingWriteTree_,e),null)}function GE(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function n$(){return(0,O.hu)(CD,"Reference.ts has not been loaded"),CD}())(n._repo,n._path):n}class Wx{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Wx(t)}node(){return this.node_}}class Kx{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=vr(this.path_,e);return new Kx(this.syncTree_,t)}node(){return bD(this.syncTree_,this.path_)}}const p$=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},CO=function(n,e,t){return n&&"object"==typeof n?((0,O.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?g$(n[".sv"],e,t):"object"==typeof n[".sv"]?m$(n[".sv"],e):void(0,O.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},g$=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,O.hu)(!1,"Unexpected server value: "+n)},m$=function(n,e,t){n.hasOwnProperty("increment")||(0,O.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,O.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,O.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},IO=function(n,e,t,r){return Qx(e,new Kx(t,n),r)},Yx=function(n,e,t){return Qx(n,new Wx(e),t)};function Qx(n,e,t){const r=n.getPriority().val(),i=CO(r,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const c=n,h=CO(c.getValue(),e,t);return h!==c.getValue()||i!==c.getPriority().val()?new Ev(h,xr(i)):n}{const c=n;return o=c,i!==c.getPriority().val()&&(o=o.updatePriority(new Ev(i))),c.forEachChild(nr,(h,_)=>{const y=Qx(_,e.getImmediateChild(h),t);y!==_&&(o=o.updateImmediateChild(h,y))}),o}}class Jx{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function DD(n,e){let t=e instanceof Nn?e:new Nn(e),r=n,i=tn(t);for(;null!==i;){const o=(0,O.DV)(r.node.children,i)||{children:{},childCount:0};r=new Jx(i,r,o),t=Yn(t),i=tn(t)}return r}function km(n){return n.node.value}function Xx(n,e){n.node.value=e,eN(n)}function bO(n){return n.node.childCount>0}function SD(n,e){Fi(n.node.children,(t,r)=>{e(new Jx(t,n,r))})}function TO(n,e,t,r){t&&!r&&e(n),SD(n,i=>{TO(i,e,!0,r)}),t&&r&&e(n)}function zE(n){return new Nn(null===n.parent?n.name:zE(n.parent)+"/"+n.name)}function eN(n){null!==n.parent&&function v$(n,e,t){const r=function _$(n){return void 0===km(n)&&!bO(n)}(t),i=(0,O.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,eN(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,eN(n))}(n.parent,n.name,n)}const w$=/[\[\].#$\/\u0000-\u001F\u007F]/,E$=/[\[\].#$\u0000-\u001F\u007F]/,tN=10485760,AD=function(n){return"string"==typeof n&&0!==n.length&&!w$.test(n)},DO=function(n){return"string"==typeof n&&0!==n.length&&!E$.test(n)},qE=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!tD(n)||n&&"object"==typeof n&&(0,O.r3)(n,".sv")},mc=function(n,e,t,r){r&&void 0===e||ZE((0,O.gK)(n,"value"),e,t)},ZE=function(n,e,t){const r=t instanceof Nn?new VU(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+xm(r));if("function"==typeof e)throw new Error(n+"contains a function "+xm(r)+" with contents = "+e.toString());if(tD(e))throw new Error(n+"contains "+e.toString()+" "+xm(r));if("string"==typeof e&&e.length>tN/3&&(0,O.ug)(e)>tN)throw new Error(n+"contains a string greater than "+tN+" utf8 bytes "+xm(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,o=!1;if(Fi(e,(c,h)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(o=!0,!AD(c)))throw new Error(n+" contains an invalid key ("+c+") "+xm(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function UU(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,O.ug)(e),F1(n)})(r,c),ZE(n,h,r),function BU(n){const e=n.parts_.pop();n.byteLength_-=(0,O.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&o)throw new Error(n+' contains ".value" child '+xm(r)+" in addition to actual children.")}},SO=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,O.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const o=[];Fi(e,(c,h)=>{const _=new Nn(c);if(ZE(i,h,vr(t,_)),".priority"===_x(_)&&!qE(h))throw new Error(i+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(_)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const o=NE(r);for(let c=0;c<o.length;c++)if((".priority"!==o[c]||c!==o.length-1)&&!AD(o[c]))throw new Error(n+"contains an invalid key ("+o[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(LU);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Za(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,o)},nN=function(n,e,t){if(!t||void 0!==e){if(tD(e))throw new Error((0,O.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!qE(e))throw new Error((0,O.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},WE=function(n,e,t,r){if(!(r&&void 0===t||AD(t)))throw new Error((0,O.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},KE=function(n,e,t,r){if(!(r&&void 0===t||DO(t)))throw new Error((0,O.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},b$=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),KE(n,e,t,r)},Ka=function(n,e){if(".info"===tn(e))throw new Error(n+" failed = Can't modify data under /.info/")},AO=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!AD(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),DO(n)}(t))throw new Error((0,O.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class T${constructor(){this.eventLists_=[],this.recursionDepth_=0}}function MD(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],o=i.getPath();null!==t&&!yx(o,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)}function MO(n,e,t){MD(n,t),xO(n,r=>yx(r,e))}function Ko(n,e,t){MD(n,t),xO(n,r=>Za(r,e)||Za(e,r))}function xO(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(D$(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function D$(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Am&&ki("event: "+t.toString()),vv(r)}}}const NO="repo_interrupt",S$=25;class A${constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new T$,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=hD(),this.transactionQueueTree_=new Jx,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function RO(n){const t=n.infoData_.getNode(new Nn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function YE(n){return p$({timestamp:RO(n)})}function PO(n,e,t,r,i){n.dataUpdateCount++;const o=new Nn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const _=(0,O.UI)(t,y=>xr(y));c=function l$(n,e,t,r){const i=zx(n,r);if(i){const o=qx(i),c=o.path,h=o.queryId,_=zs(c,e),y=rr.fromObject(t);return Zx(n,c,new Tv(Rx(h),_,y))}return[]}(n.serverSyncTree_,o,_,i)}else{const _=xr(t);c=yO(n.serverSyncTree_,o,_,i)}else if(r){const _=(0,O.UI)(t,y=>xr(y));c=function s$(n,e,t){const r=rr.fromObject(t);return Sv(n,new Tv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,o,_)}else{const _=xr(t);c=jE(n.serverSyncTree_,o,_)}let h=o;c.length>0&&(h=Mv(n,o)),Ko(n.eventQueue_,h,c)}function OO(n,e){rN(n,"connected",e),!1===e&&function P$(n){Av(n,"onDisconnectEvents");const e=YE(n),t=hD();Mx(n.onDisconnect_,In(),(i,o)=>{const c=IO(i,o,n.serverSyncTree_,e);bv(t,i,c)});let r=[];Mx(t,In(),(i,o)=>{r=r.concat(jE(n.serverSyncTree_,i,o));const c=aN(n,i);Mv(n,c)}),n.onDisconnect_=hD(),Ko(n.eventQueue_,In(),r)}(n)}function rN(n,e,t){const r=new Nn("/.info/"+e),i=xr(t);n.infoData_.updateSnapshot(r,i);const o=jE(n.infoSyncTree_,r,i);Ko(n.eventQueue_,r,o)}function xD(n){return n.nextWriteId_++}function iN(n,e,t,r,i){Av(n,"set",{path:e.toString(),value:t,priority:r});const o=YE(n),c=xr(t,r),h=bD(n.serverSyncTree_,e),_=Yx(c,h,o),y=xD(n),I=Hx(n.serverSyncTree_,e,_,y,!0);MD(n.eventQueue_,I),n.server_.put(e.toString(),c.val(!0),(R,L)=>{const $="ok"===R;$||gs("set at "+e+" failed: "+R);const X=mp(n.serverSyncTree_,y,!$);Ko(n.eventQueue_,e,X),_p(0,i,R,L)});const D=aN(n,e);Mv(n,D),Ko(n.eventQueue_,D,[])}function O$(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&Ax(n.onDisconnect_,e),_p(0,t,r,i)})}function kO(n,e,t,r){const i=xr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(o,c)=>{"ok"===o&&bv(n.onDisconnect_,e,i),_p(0,r,o,c)})}function sN(n,e,t){let r;r=".info"===tn(e._path)?ID(n.infoSyncTree_,e,t):ID(n.serverSyncTree_,e,t),MO(n.eventQueue_,e._path,r)}function FO(n){n.persistentConnection_&&n.persistentConnection_.interrupt(NO)}function Av(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),ki(t,...e)}function _p(n,e,t,r){e&&vv(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let o=i;r&&(o+=": "+r);const c=new Error(o);c.code=i,e(c)}})}function oN(n,e,t){return bD(n.serverSyncTree_,e,t)||qt.EMPTY_NODE}function ND(n,e=n.transactionQueueTree_){if(e||RD(n,e),km(e)){const t=VO(n,e);(0,O.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function B$(n,e,t){const r=t.map(y=>y.currentWriteId),i=oN(n,e,r);let o=i;const c=i.hash();for(let y=0;y<t.length;y++){const I=t[y];(0,O.hu)(0===I.status,"tryToSendTransactionQueue_: items in queue should all be run."),I.status=1,I.retryCount++;const D=zs(e,I.path);o=o.updateChild(D,I.currentOutputSnapshotRaw)}const h=o.val(!0),_=e;n.server_.put(_.toString(),h,y=>{Av(n,"transaction put response",{path:_.toString(),status:y});let I=[];if("ok"===y){const D=[];for(let R=0;R<t.length;R++)t[R].status=2,I=I.concat(mp(n.serverSyncTree_,t[R].currentWriteId)),t[R].onComplete&&D.push(()=>t[R].onComplete(null,!0,t[R].currentOutputSnapshotResolved)),t[R].unwatcher();RD(n,DD(n.transactionQueueTree_,e)),ND(n,n.transactionQueueTree_),Ko(n.eventQueue_,e,I);for(let R=0;R<D.length;R++)vv(D[R])}else{if("datastale"===y)for(let D=0;D<t.length;D++)t[D].status=3===t[D].status?4:0;else{gs("transaction at "+_.toString()+" failed: "+y);for(let D=0;D<t.length;D++)t[D].status=4,t[D].abortReason=y}Mv(n,e)}},c)}(n,zE(e),t)}else bO(e)&&SD(e,t=>{ND(n,t)})}function Mv(n,e){const t=LO(n,e),r=zE(t);return function $$(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const _=e[h],y=zs(t,_.path);let D,I=!1;if((0,O.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)I=!0,D=_.abortReason,i=i.concat(mp(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=S$)I=!0,D="maxretry",i=i.concat(mp(n.serverSyncTree_,_.currentWriteId,!0));else{const R=oN(n,_.path,c);_.currentInputSnapshot=R;const L=e[h].update(R.val());if(void 0!==L){ZE("transaction failed: Data returned ",L,_.path);let $=xr(L);"object"==typeof L&&null!=L&&(0,O.r3)(L,".priority")||($=$.updatePriority(R.getPriority()));const ce=_.currentWriteId,qe=YE(n),ut=Yx($,R,qe);_.currentOutputSnapshotRaw=$,_.currentOutputSnapshotResolved=ut,_.currentWriteId=xD(n),c.splice(c.indexOf(ce),1),i=i.concat(Hx(n.serverSyncTree_,_.path,ut,_.currentWriteId,_.applyLocally)),i=i.concat(mp(n.serverSyncTree_,ce,!0))}else I=!0,D="nodata",i=i.concat(mp(n.serverSyncTree_,_.currentWriteId,!0))}Ko(n.eventQueue_,t,i),i=[],I&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===D?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(D),!1,null)))}RD(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)vv(r[h]);ND(n,n.transactionQueueTree_)}(n,VO(n,t),r),r}function LO(n,e){let t,r=n.transactionQueueTree_;for(t=tn(e);null!==t&&void 0===km(r);)r=DD(r,t),t=tn(e=Yn(e));return r}function VO(n,e){const t=[];return UO(n,e,t),t.sort((r,i)=>r.order-i.order),t}function UO(n,e,t){const r=km(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);SD(e,i=>{UO(n,i,t)})}function RD(n,e){const t=km(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,Xx(e,t.length>0?t:void 0)}SD(e,r=>{RD(n,r)})}function aN(n,e){const t=zE(LO(n,e)),r=DD(n.transactionQueueTree_,e);return function y$(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{lN(n,i)}),lN(n,r),TO(r,i=>{lN(n,i)}),t}function lN(n,e){const t=km(e);if(t){const r=[];let i=[],o=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,O.hu)(o===c-1,"All SENT items should be at beginning of queue."),o=c,t[c].status=3,t[c].abortReason="set"):((0,O.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(mp(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===o?Xx(e,void 0):t.length=o+1,Ko(n.eventQueue_,zE(e),i);for(let c=0;c<r.length;c++)vv(r[c])}}const uN=function(n,e){const t=G$(n),r=t.namespace;return"firebase.com"===t.domain&&pc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&pc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&gs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new dx(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Nn(t.pathString)}},G$=function(n){let e="",t="",r="",i="",o="",c=!0,h="https",_=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(h=n.substring(0,y-1),n=n.substring(y+2));let I=n.indexOf("/");-1===I&&(I=n.length);let D=n.indexOf("?");-1===D&&(D=n.length),e=n.substring(0,Math.min(I,D)),I<D&&(i=function j$(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(I,D)));const R=function H$(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):gs(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,D)));y=e.indexOf(":"),y>=0?(c="https"===h||"wss"===h,_=parseInt(e.substring(y+1),10)):y=e.length;const L=e.slice(0,y);if("localhost"===L.toLowerCase())t="localhost";else if(L.split(".").length<=2)t=L;else{const $=e.indexOf(".");r=e.substring(0,$).toLowerCase(),t=e.substring($+1),o=r}"ns"in R&&(o=R.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:c,scheme:h,pathString:i,namespace:o}},BO="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",z$=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const o=new Array(8);for(i=7;i>=0;i--)o[i]=BO.charAt(t%64),t=Math.floor(t/64);(0,O.hu)(0===t,"Cannot push at time == 0");let c=o.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)c+=BO.charAt(e[i]);return(0,O.hu)(20===c.length,"nextPushId: Length should be 20."),c}}();class $O{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,O.Wl)(this.snapshot.exportVal())}}class jO{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class cN{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,O.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class HO{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new O.BH;return O$(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Ka("OnDisconnect.remove",this._path);const e=new O.BH;return kO(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Ka("OnDisconnect.set",this._path),mc("OnDisconnect.set",e,this._path,!1);const t=new O.BH;return kO(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Ka("OnDisconnect.setWithPriority",this._path),mc("OnDisconnect.setWithPriority",e,this._path,!1),nN("OnDisconnect.setWithPriority",t,!1);const r=new O.BH;return function k$(n,e,t,r,i){const o=xr(t,r);n.server_.onDisconnectPut(e.toString(),o.val(!0),(c,h)=>{"ok"===c&&bv(n.onDisconnect_,e,o),_p(0,i,c,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Ka("OnDisconnect.update",this._path),SO("OnDisconnect.update",e,this._path,!1);const t=new O.BH;return function F$(n,e,t,r){if((0,O.xb)(t))return ki("onDisconnect().update() called with empty data.  Don't do anything."),void _p(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,o)=>{"ok"===i&&Fi(t,(c,h)=>{const _=xr(h);bv(n.onDisconnect_,vr(e,c),_)}),_p(0,r,i,o)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class fo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return nn(this._path)?null:_x(this._path)}get ref(){return new Ya(this._repo,this._path)}get _queryIdentifier(){const e=Z1(this._queryParams),t=ux(e);return"{}"===t?"default":t}get _queryObject(){return Z1(this._queryParams)}isEqual(e){if(!((e=(0,O.m9)(e))instanceof fo))return!1;const t=this._repo===e._repo,r=yx(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function FU(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function PD(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function yp(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===gc){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==up)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Yd)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===nr){if(null!=e&&!qE(e)||null!=t&&!qE(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,O.hu)(n.getIndex()instanceof Ix||n.getIndex()===bx,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function OD(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ya extends fo{constructor(e,t){super(e,t,new uD,!1)}get parent(){const e=k1(this._path);return null===e?null:new Ya(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Fm{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Nn(e),r=Lm(this.ref,e);return new Fm(this._node.getChild(t),r,nr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Fm(i,Lm(this.ref,r),nr)))}hasChild(e){const t=new Nn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function GO(n,e){return(n=(0,O.m9)(n))._checkNotDeleted("ref"),void 0!==e?Lm(n._root,e):n._root}function zO(n,e){(n=(0,O.m9)(n))._checkNotDeleted("refFromURL");const t=uN(e,n._repo.repoInfo_.nodeAdmin);AO("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&pc("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),GO(n,t.path.toString())}function Lm(n,e){return null===tn((n=(0,O.m9)(n))._path)?b$("child","path",e,!1):KE("child","path",e,!1),new Ya(n._repo,vr(n._path,e))}function dN(n,e){n=(0,O.m9)(n),Ka("set",n._path),mc("set",e,n._path,!1);const t=new O.BH;return iN(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function Y$(n,e){SO("update",e,n._path,!1);const t=new O.BH;return function R$(n,e,t,r){Av(n,"update",{path:e.toString(),value:t});let i=!0;const o=YE(n),c={};if(Fi(t,(h,_)=>{i=!1,c[h]=IO(vr(e,h),xr(_),n.serverSyncTree_,o)}),i)ki("update() called with empty data.  Don't do anything."),_p(0,r,"ok",void 0);else{const h=xD(n),_=function i$(n,e,t,r){!function EB(n,e,t,r){(0,O.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=Ox(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=rr.fromObject(t);return Sv(n,new Tv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,c,h);MD(n.eventQueue_,_),n.server_.merge(e.toString(),t,(y,I)=>{const D="ok"===y;D||gs("update at "+e+" failed: "+y);const R=mp(n.serverSyncTree_,h,!D),L=R.length>0?Mv(n,e):e;Ko(n.eventQueue_,L,R),_p(0,r,y,I)}),Fi(t,y=>{const I=aN(n,vr(e,y));Mv(n,I)}),Ko(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function Q$(n){n=(0,O.m9)(n);const e=new cN(()=>{}),t=new QE(e);return function N$(n,e,t){const r=function u$(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(y,I)=>{const D=zs(y,t);r=r||pp(I,D)});let i=n.syncPointTree_.get(t);i?r=r||pp(i,In()):(i=new hO,n.syncPointTree_=n.syncPointTree_.set(t,i));const o=null!=r,c=o?new hp(r,!0,!1):null;return function qB(n){return gD(n.viewCache_)}(fO(i,e,mD(n.pendingWriteTree_,e._path),o?c.getNode():qt.EMPTY_NODE,o))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const o=xr(i).withIndex(e._queryParams.getIndex());let c;if(Gx(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())c=jE(n.serverSyncTree_,e._path,o);else{const h=HE(n.serverSyncTree_,e);c=yO(n.serverSyncTree_,e._path,o,h)}return Ko(n.eventQueue_,e._path,c),ID(n.serverSyncTree_,e,t,null,!0),o},i=>(Av(n,"get for query "+(0,O.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Fm(r,new Ya(n._repo,n._path),n._queryParams.getIndex()))}class QE{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new $O("value",this,new Fm(e.snapshotNode,new Ya(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new jO(this,e,t):null}matches(e){return e instanceof QE&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class kD{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new jO(this,e,t):null}createEvent(e,t){(0,O.hu)(null!=e.childName,"Child events should have a childName.");const r=Lm(new Ya(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new $O(e.type,this,new Fm(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof kD&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function JE(n,e,t,r,i){let o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){const _=t,y=(I,D)=>{sN(n._repo,n,h),_(I,D)};y.userCallback=t.userCallback,y.context=t.context,t=y}const c=new cN(t,o||void 0),h="value"===e?new QE(c):new kD(e,c);return function L$(n,e,t){let r;r=".info"===tn(e._path)?Gx(n.infoSyncTree_,e,t):Gx(n.serverSyncTree_,e,t),MO(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>sN(n._repo,n,h)}function hN(n,e,t,r){return JE(n,"value",e,t,r)}function qO(n,e,t,r){return JE(n,"child_added",e,t,r)}function ZO(n,e,t,r){return JE(n,"child_changed",e,t,r)}function WO(n,e,t,r){return JE(n,"child_moved",e,t,r)}function KO(n,e,t,r){return JE(n,"child_removed",e,t,r)}function YO(n,e,t){let r=null;const i=t?new cN(t):null;"value"===e?r=new QE(i):e&&(r=new kD(e,i)),sN(n._repo,n,r)}class nu{}class QO extends nu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){mc("endAt",this._value,e._path,!0);const t=Sx(e._queryParams,this._value,this._key);if(OD(t),yp(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new fo(e._repo,e._path,t,e._orderByCalled)}}class X$ extends nu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){mc("endBefore",this._value,e._path,!1);const t=function lB(n,e,t){let r;return r=Sx(n,e,n.index_===gc||t?t:up),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(OD(t),yp(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new fo(e._repo,e._path,t,e._orderByCalled)}}class JO extends nu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){mc("startAt",this._value,e._path,!0);const t=Dx(e._queryParams,this._value,this._key);if(OD(t),yp(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new fo(e._repo,e._path,t,e._orderByCalled)}}class nj extends nu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){mc("startAfter",this._value,e._path,!1);const t=function aB(n,e,t){let r;return r=Dx(n,e,n.index_===gc||t?t:Yd),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(OD(t),yp(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new fo(e._repo,e._path,t,e._orderByCalled)}}class ij extends nu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new fo(e._repo,e._path,function sB(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class oj extends nu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new fo(e._repo,e._path,function oB(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class lj extends nu{constructor(e){super(),this._path=e}_apply(e){PD(e,"orderByChild");const t=new Nn(this._path);if(nn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Ix(t),i=cD(e._queryParams,r);return yp(i),new fo(e._repo,e._path,i,!0)}}class cj extends nu{_apply(e){PD(e,"orderByKey");const t=cD(e._queryParams,gc);return yp(t),new fo(e._repo,e._path,t,!0)}}class hj extends nu{_apply(e){PD(e,"orderByPriority");const t=cD(e._queryParams,nr);return yp(t),new fo(e._repo,e._path,t,!0)}}class pj extends nu{_apply(e){PD(e,"orderByValue");const t=cD(e._queryParams,bx);return yp(t),new fo(e._repo,e._path,t,!0)}}class mj extends nu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(mc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new QO(this._value,this._key)._apply(new JO(this._value,this._key)._apply(e))}}function ru(n,...e){let t=(0,O.m9)(n);for(const r of e)t=r._apply(t);return t}(function YB(n){(0,O.hu)(!wD,"__referenceConstructor has already been defined"),wD=n})(Ya),function t$(n){(0,O.hu)(!CD,"__referenceConstructor has already been defined"),CD=n}(Ya);const yj="FIREBASE_DATABASE_EMULATOR_HOST",fN={};let XO=!1;function ek(n,e,t,r,i){let o=r||n.options.databaseURL;void 0===o&&(n.options.projectId||pc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ki("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,y,c=uN(o,i),h=c.repoInfo;typeof process<"u"&&process.env&&(y=process.env[yj]),y?(_=!0,o=`http://${y}?ns=${h.namespace}`,c=uN(o,i),h=c.repoInfo):_=!c.repoInfo.secure;const I=i&&_?new xE(xE.OWNER):new dU(n.name,n.options,e);AO("Invalid Firebase Database URL",c),nn(c.path)||pc("Database URL must point to the root of a Firebase Database (not including a child path).");const D=function Ej(n,e,t,r){let i=fN[e.name];i||(i={},fN[e.name]=i);let o=i[n.toURLString()];return o&&pc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new A$(n,XO,t,r),i[n.toURLString()]=o,o}(h,n,I,new cU(n.name,t));return new Ij(D,n)}class Ij{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function M$(n,e,t){if(n.stats_=px(n.repoInfo_),n.forceRestClient_||uU())n.server_=new dD(n.repoInfo_,(r,i,o,c)=>{PO(n,r,i,o,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>OO(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,O.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Nm(n.repoInfo_,e,(r,i,o,c)=>{PO(n,r,i,o,c)},r=>{OO(n,r)},r=>{!function x$(n,e){Fi(e,(t,r)=>{rN(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function pU(n,e){const t=n.toString();return fx[t]||(fx[t]=e()),fx[t]}(n.repoInfo_,()=>new pB(n.stats_,n.server_)),n.infoData_=new uB,n.infoSyncTree_=new _O({startListening:(r,i,o,c)=>{let h=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(h=jE(n.infoSyncTree_,r._path,_),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),rN(n,"connected",!1),n.serverSyncTree_=new _O({startListening:(r,i,o,c)=>(n.server_.listen(r,o,i,(h,_)=>{const y=c(h,_);Ko(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ya(this._repo,In())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function wj(n,e){const t=fN[e];(!t||t[n.key]!==n)&&pc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),FO(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&pc("Cannot call "+e+" on a deleted database.")}}function tk(){I1.IS_TRANSPORT_INITIALIZED&&gs("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function bj(){tk(),cp.forceDisallow()}function Tj(){tk(),wv.forceDisallow(),cp.forceAllow()}function Aj(n,e){r1(n,e)}const xj={".sv":"timestamp"};class Pj{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Nm.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Nm.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function Mj(n){JP(rt.SDK_VERSION),(0,rt._registerComponent)(new ht.wA("database",(e,{instanceIdentifier:t})=>ek(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,rt.registerVersion)(YP,"0.14.4",n),(0,rt.registerVersion)(YP,"0.14.4","esm2017")}();const Lj=new Ot.Yd("@firebase/database-compat"),rk=function(n){Lj.warn("FIREBASE WARNING: "+n)};class Bj{constructor(e){this._delegate=e}cancel(e){(0,O.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,O.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,O.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,O.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,O.Dv)("OnDisconnect.set",1,2,arguments.length),(0,O.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,O.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,O.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),o=>r(o)),i}update(e,t){if((0,O.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,rk("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,O.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class $j{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,O.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class vp{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,O.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,O.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,O.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,O.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,O.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),KE("DataSnapshot.child","path",e,!1),new vp(this._database,this._delegate.child(e))}hasChild(e){return(0,O.Dv)("DataSnapshot.hasChild",1,1,arguments.length),KE("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,O.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,O.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,O.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new vp(this._database,t)))}hasChildren(){return(0,O.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,O.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,O.Dv)("DataSnapshot.ref",0,0,arguments.length),new Yo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class rs{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var o;(0,O.Dv)("Query.on",2,4,arguments.length),(0,O.Wj)("Query.on","callback",t,!1);const c=rs.getCancelAndContextArgs_("Query.on",r,i),h=(y,I)=>{t.call(c.context,new vp(this.database,y),I)};h.userCallback=t,h.context=c.context;const _=null===(o=c.cancel)||void 0===o?void 0:o.bind(c.context);switch(e){case"value":return hN(this._delegate,h,_),t;case"child_added":return qO(this._delegate,h,_),t;case"child_removed":return KO(this._delegate,h,_),t;case"child_changed":return ZO(this._delegate,h,_),t;case"child_moved":return WO(this._delegate,h,_),t;default:throw new Error((0,O.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,O.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,O.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,O.Wj)("Query.off","callback",t,!0),(0,O.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,YO(this._delegate,e,i)}else YO(this._delegate,e)}get(){return Q$(this._delegate).then(e=>new vp(this.database,e))}once(e,t,r,i){(0,O.Dv)("Query.once",1,4,arguments.length),(0,O.Wj)("Query.once","callback",t,!0);const o=rs.getCancelAndContextArgs_("Query.once",r,i),c=new O.BH,h=(y,I)=>{const D=new vp(this.database,y);t&&t.call(o.context,D,I),c.resolve(D)};h.userCallback=t,h.context=o.context;const _=y=>{o.cancel&&o.cancel.call(o.context,y),c.reject(y)};switch(e){case"value":hN(this._delegate,h,_,{onlyOnce:!0});break;case"child_added":qO(this._delegate,h,_,{onlyOnce:!0});break;case"child_removed":KO(this._delegate,h,_,{onlyOnce:!0});break;case"child_changed":ZO(this._delegate,h,_,{onlyOnce:!0});break;case"child_moved":WO(this._delegate,h,_,{onlyOnce:!0});break;default:throw new Error((0,O.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,O.Dv)("Query.limitToFirst",1,1,arguments.length),new rs(this.database,ru(this._delegate,function sj(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new ij(n)}(e)))}limitToLast(e){return(0,O.Dv)("Query.limitToLast",1,1,arguments.length),new rs(this.database,ru(this._delegate,function aj(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new oj(n)}(e)))}orderByChild(e){return(0,O.Dv)("Query.orderByChild",1,1,arguments.length),new rs(this.database,ru(this._delegate,function uj(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return KE("orderByChild","path",n,!1),new lj(n)}(e)))}orderByKey(){return(0,O.Dv)("Query.orderByKey",0,0,arguments.length),new rs(this.database,ru(this._delegate,function dj(){return new cj}()))}orderByPriority(){return(0,O.Dv)("Query.orderByPriority",0,0,arguments.length),new rs(this.database,ru(this._delegate,function fj(){return new hj}()))}orderByValue(){return(0,O.Dv)("Query.orderByValue",0,0,arguments.length),new rs(this.database,ru(this._delegate,function gj(){return new pj}()))}startAt(e=null,t){return(0,O.Dv)("Query.startAt",0,2,arguments.length),new rs(this.database,ru(this._delegate,function tj(n=null,e){return WE("startAt","key",e,!0),new JO(n,e)}(e,t)))}startAfter(e=null,t){return(0,O.Dv)("Query.startAfter",0,2,arguments.length),new rs(this.database,ru(this._delegate,function rj(n,e){return WE("startAfter","key",e,!0),new nj(n,e)}(e,t)))}endAt(e=null,t){return(0,O.Dv)("Query.endAt",0,2,arguments.length),new rs(this.database,ru(this._delegate,function J$(n,e){return WE("endAt","key",e,!0),new QO(n,e)}(e,t)))}endBefore(e=null,t){return(0,O.Dv)("Query.endBefore",0,2,arguments.length),new rs(this.database,ru(this._delegate,function ej(n,e){return WE("endBefore","key",e,!0),new X$(n,e)}(e,t)))}equalTo(e,t){return(0,O.Dv)("Query.equalTo",1,2,arguments.length),new rs(this.database,ru(this._delegate,function _j(n,e){return WE("equalTo","key",e,!0),new mj(n,e)}(e,t)))}toString(){return(0,O.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,O.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,O.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof rs))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,O.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,O.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,O.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Yo(this.database,new Ya(this._delegate._repo,this._delegate._path))}}class Yo extends rs{constructor(e,t){super(e,new fo(t._repo,t._path,new uD,!1)),this.database=e,this._delegate=t}getKey(){return(0,O.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,O.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Yo(this.database,Lm(this._delegate,e))}getParent(){(0,O.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Yo(this.database,e):null}getRoot(){return(0,O.Dv)("Reference.root",0,0,arguments.length),new Yo(this.database,this._delegate.root)}set(e,t){(0,O.Dv)("Reference.set",1,2,arguments.length),(0,O.Wj)("Reference.set","onComplete",t,!0);const r=dN(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,O.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,rk("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ka("Reference.update",this._delegate._path),(0,O.Wj)("Reference.update","onComplete",t,!0);const r=Y$(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,O.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,O.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function K$(n,e,t){if(Ka("setWithPriority",n._path),mc("setWithPriority",e,n._path,!1),nN("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new O.BH;return iN(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),o=>r(o)),i}remove(e){(0,O.Dv)("Reference.remove",0,1,arguments.length),(0,O.Wj)("Reference.remove","onComplete",e,!0);const t=function Z$(n){return Ka("remove",n._path),dN(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,O.Dv)("Reference.transaction",1,3,arguments.length),(0,O.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,O.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,O.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function Oj(n,e,t){var r;if(n=(0,O.m9)(n),Ka("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,o=new O.BH,h=hN(n,()=>{});return function U$(n,e,t,r,i,o){Av(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:e1(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=oN(n,e,void 0);c.currentInputSnapshot=h;const _=c.update(h.val());if(void 0===_)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{ZE("transaction failed: Data returned ",_,c.path),c.status=0;const y=DD(n.transactionQueueTree_,e),I=km(y)||[];let D;I.push(c),Xx(y,I),"object"==typeof _&&null!==_&&(0,O.r3)(_,".priority")?(D=(0,O.DV)(_,".priority"),(0,O.hu)(qE(D),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):D=(bD(n.serverSyncTree_,e)||qt.EMPTY_NODE).getPriority().val();const R=YE(n),L=xr(_,D),$=Yx(L,h,R);c.currentOutputSnapshotRaw=L,c.currentOutputSnapshotResolved=$,c.currentWriteId=xD(n);const X=Hx(n.serverSyncTree_,e,$,c.currentWriteId,c.applyLocally);Ko(n.eventQueue_,e,X),ND(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(_,y,I)=>{let D=null;_?o.reject(_):(D=new Fm(I,new Ya(n._repo,n._path),nr),o.resolve(new Pj(y,D)))},h,i),o.promise}(this._delegate,e,{applyLocally:r}).then(o=>new $j(o.committed,new vp(this.database,o.snapshot)));return t&&i.then(o=>t(null,o.committed,o.snapshot),o=>t(o,!1,null)),i}setPriority(e,t){(0,O.Dv)("Reference.setPriority",1,2,arguments.length),(0,O.Wj)("Reference.setPriority","onComplete",t,!0);const r=function W$(n,e){n=(0,O.m9)(n),Ka("setPriority",n._path),nN("setPriority",e,!1);const t=new O.BH;return iN(n._repo,vr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,O.Dv)("Reference.push",0,2,arguments.length),(0,O.Wj)("Reference.push","onComplete",t,!0);const r=function q$(n,e){n=(0,O.m9)(n),Ka("push",n._path),mc("push",e,n._path,!0);const t=RO(n._repo),r=z$(t),i=Lm(n,r),o=Lm(n,r);let c;return c=null!=e?dN(o,e).then(()=>o):Promise.resolve(o),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}(this._delegate,e),i=r.then(c=>new Yo(this.database,c));t&&i.then(()=>t(null),c=>t(c));const o=new Yo(this.database,r);return o.then=i.then.bind(i),o.catch=i.catch.bind(i,void 0),o}onDisconnect(){return Ka("Reference.onDisconnect",this._delegate._path),new Bj(new HO(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class XE{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:bj,forceLongPolling:Tj}}useEmulator(e,t,r={}){!function nk(n,e,t,r={}){(n=(0,O.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&pc("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&pc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new xE(xE.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,O.Sg)(r.mockUserToken,n.app.options.projectId);o=new xE(c)}!function vj(n,e,t,r){n.repoInfo_=new dx(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,o)}(this._delegate,e,t,r)}ref(e){if((0,O.Dv)("database.ref",0,1,arguments.length),e instanceof Yo){const t=zO(this._delegate,e.toString());return new Yo(this,t)}{const t=GO(this._delegate,e);return new Yo(this,t)}}refFromURL(e){(0,O.Dv)("database.refFromURL",1,1,arguments.length);const r=zO(this._delegate,e);return new Yo(this,r)}goOffline(){return(0,O.Dv)("database.goOffline",0,0,arguments.length),function Dj(n){(n=(0,O.m9)(n))._checkNotDeleted("goOffline"),FO(n._repo)}(this._delegate)}goOnline(){return(0,O.Dv)("database.goOnline",0,0,arguments.length),function Sj(n){(n=(0,O.m9)(n))._checkNotDeleted("goOnline"),function V$(n){n.persistentConnection_&&n.persistentConnection_.resume(NO)}(n._repo)}(this._delegate)}}XE.ServerValue={TIMESTAMP:function Nj(){return xj}(),increment:n=>function Rj(n){return{".sv":{increment:n}}}(n)};var Hj=Object.freeze({__proto__:null,initStandalone:function jj({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:o=!1}){JP(t);const c=new ht.zt("auth-internal",new ht.H0("database-standalone"));return c.setComponent(new ht.wA("auth-internal",()=>r,"PRIVATE")),{instance:new XE(ek(n,c,void 0,e,o),n),namespace:i}}});const Gj=XE.ServerValue;function ik(n){return null==n}function sk(n){return"function"==typeof n.set}function ok(n,e){return sk(e)?e:n.ref(e)}function ak(n,e){if(function qj(n){return"string"==typeof n}(n))return e.stringCase();if(sk(n))return e.firebaseCase();if(function Zj(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function eC(n,e,t="on",r=Ji.z){return new Wr.y(i=>{let o=null;return o=n[t](e,(c,h)=>{r.schedule(()=>{i.next({snapshot:c,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},c=>{r.schedule(()=>i.error(c))}),"on"===t?{unsubscribe(){null!=o&&n.off(e,o)}}:{unsubscribe(){}}}).pipe((0,vt.U)(i=>{const{snapshot:o,prevKey:c}=i;let h=null;return o.exists()&&(h=o.key),{type:e,payload:o,prevKey:c,key:h}}),(0,pP.B)())}function lk(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function Yj(n,e){const{payload:t,prevKey:r,key:i}=e,o=lk(n,i),c=function Kj(n,e){if(ik(e))return 0;{const t=lk(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(_=>{const y={payload:_,type:"value",prevKey:h,key:_.key};return h=_.key,n=[...n,y],!1})}return n;case"child_added":if(o>-1){const h=n[o-1];(h&&h.key||null)!==r&&(n=n.filter(_=>_.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(o>-1){const h=n.splice(o,1)[0];return(n=n.slice()).splice(c,0,h),n}return n;default:return n}}function uk(n){return(ik(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function ck(n,e,t){return function Wj(n,e,t){return eC(n,"value","once",t).pipe(Di(r=>{const i=[mt(r)];return e.forEach(o=>i.push(eC(n,o,"on",t))),(0,AM.T)(...i).pipe(T(Yj,[]))}),x())}(n,e=uk(e),t)}function dk(n,e,t){const r=(e=uk(e)).map(i=>eC(n,i,"on",t));return(0,AM.T)(...r)}function hk(n,e){return function(r,i){return ak(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function eH(n){return function(t){return t?ak(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function fk(n,e){return function(){return eC(n,"value","on",e)}}!function zj(n){n.INTERNAL.registerComponent(new ht.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new XE(i,r)},"PUBLIC").setServiceProps({Reference:Yo,Query:rs,Database:XE,DataSnapshot:vp,enableLogging:Aj,INTERNAL:Hj,ServerValue:Gj}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(Me.Z);const rH=new u.OlP("angularfire2.realtimeDatabaseURL"),iH=new u.OlP("angularfire2.database.use-emulator");let sH=(()=>{class n{constructor(t,r,i,o,c,h,_,y,I,D,R,L,$,X,ce){this.schedulers=h;const qe=_,ut=(0,gr.on)(t,c,r);y&&nx(ut,c,I,R,L,$,D,X),this.database=(0,gr.cc)(`${ut.name}.database.${i}`,"AngularFireDatabase",ut.name,()=>{const at=c.runOutsideAngular(()=>ut.database(i||void 0));return qe&&at.useEmulator(...qe),at},[qe])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>ok(this.database,t));let o=i;return r&&(o=r(i)),function tH(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:hk(r,"update"),set:hk(r,"set"),push:i=>r.push(i),remove:eH(r),snapshotChanges:i=>ck(n,i,t).pipe(bn.iC),stateChanges:i=>dk(n,i,t).pipe(bn.iC),auditTrail:i=>function Qj(n,e,t){return function Xj(n,e,t){return function Jj(n,e){return eC(n,"value","on",e).pipe((0,vt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function Y2(...n){const e=(0,no.jO)(n);return(0,mr.e)((t,r)=>{const i=n.length,o=new Array(i);let c=n.map(()=>!1),h=!1;for(let _=0;_<i;_++)(0,CE.Xf)(n[_]).subscribe((0,Un.x)(r,y=>{o[_]=y,!h&&!c[_]&&(c[_]=!0,(h=c.every(S.y))&&(c=null))},K2.Z));t.subscribe((0,Un.x)(r,_=>{if(h){const y=[_,...o];r.next(e?e(...y):y)}}))})}(e),(0,vt.U)(([i,o])=>{const c=i.lastKeyToLoad,h=o.map(_=>_.key);return{actions:o,lastKeyToLoad:c,loadedKeys:h}}),function Q2(n){return(0,mr.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,Un.x)(t,o=>(r||(r=!n(o,i++)))&&t.next(o)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,vt.U)(i=>i.actions))}(n,dk(n,e).pipe(T((i,o)=>[...i,o],[])),t)}(n,i,t).pipe(bn.iC),valueChanges:(i,o)=>ck(n,i,t).pipe((0,vt.U)(h=>h.map(_=>o&&o.idField?Object.assign(Object.assign({},_.payload.val()),{[o.idField]:_.key}):_.payload.val())),bn.iC)}}(o,this)}object(t){return function nH(n,e){return{query:n,snapshotChanges:()=>fk(n,e.schedulers.outsideAngular)().pipe(bn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>fk(n,e.schedulers.outsideAngular)().pipe(bn.iC,(0,vt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>ok(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(gr.Dh),u.LFG(gr.xv,8),u.LFG(rH,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(bn.HU),u.LFG(iH,8),u.LFG(rx,8),u.LFG(YM,8),u.LFG(QM,8),u.LFG(JM,8),u.LFG(XM,8),u.LFG(ex,8),u.LFG(tx,8),u.LFG(XT,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),oH=(()=>{class n{constructor(){$P.Z.registerVersion("angularfire",bn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[sH]}),n})();class Qa extends Gs.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:aH}=Array,{getPrototypeOf:lH,prototype:uH,keys:cH}=Object;function pk(n){if(1===n.length){const e=n[0];if(aH(e))return{args:e,keys:null};if(function dH(n){return n&&"object"==typeof n&&lH(n)===uH}(e)){const t=cH(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:hH}=Array;function gk(n){return(0,vt.U)(e=>function fH(n,e){return hH(e)?n(...e):n(e)}(n,e))}function mk(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var pH=F(9672);function _k(...n){const e=(0,no.yG)(n),t=(0,no.jO)(n),{args:r,keys:i}=pk(n);if(0===r.length)return(0,Xt.D)([],e);const o=new Wr.y(function gH(n,e,t=S.y){return r=>{yk(e,()=>{const{length:i}=n,o=new Array(i);let c=i,h=i;for(let _=0;_<i;_++)yk(e,()=>{const y=(0,Xt.D)(n[_],e);let I=!1;y.subscribe((0,Un.x)(r,D=>{o[_]=D,I||(I=!0,h--),h||r.next(t(o.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>mk(i,c):S.y));return t?o.pipe(gk(t)):o}function yk(n,e,t){n?(0,pH.f)(t,n,e):e()}function vk(n){return new Wr.y(e=>{(0,CE.Xf)(n()).subscribe(e)})}var mH=F(9635);function tC(n,e){const t=(0,MM.m)(n)?n:()=>n,r=i=>i.error(t());return new Wr.y(e?i=>e.schedule(r,0,i):r)}var wk=F(727);function pN(){return(0,mr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Un.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Ek extends Wr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,mr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new wk.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Un.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=wk.w0.EMPTY)}return e}refCount(){return pN()(this)}}var qs=F(5577);function Vm(n,e){return(0,MM.m)(e)?(0,qs.z)(n,e,1):(0,qs.z)(n,1)}var ms=F(8505);function wp(n){return(0,mr.e)((e,t)=>{let o,r=null,i=!1;r=e.subscribe((0,Un.x)(t,void 0,void 0,c=>{o=(0,CE.Xf)(n(c,wp(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function gN(n){return n<=0?()=>lp.E:(0,mr.e)((e,t)=>{let r=[];e.subscribe((0,Un.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Ck(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Y((i,o)=>n(i,o,r)):S.y,gN(1),t?zT(e):mP(()=>new GT))}function mN(n){return(0,mr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Zt="primary",nC=Symbol("RouteTitle");class vH{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function xv(n){return new vH(n)}function wH(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const c=r[o],h=n[o];if(c.startsWith(":"))i[c.substring(1)]=h;else if(c!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function _c(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!Ik(n[i],e[i]))return!1;return!0}function Ik(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function bk(n){return Array.prototype.concat.apply([],n)}function Tk(n){return n.length>0?n[n.length-1]:null}function is(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ep(n){return(0,u.CqO)(n)?n:(0,u.QGY)(n)?(0,Xt.D)(Promise.resolve(n)):mt(n)}const FD=!1,CH={exact:function Ak(n,e,t){if(!Um(n.segments,e.segments)||!LD(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Ak(n.children[r],e.children[r],t))return!1;return!0},subset:Mk},Dk={exact:function IH(n,e){return _c(n,e)},subset:function bH(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Ik(n[t],e[t]))},ignored:()=>!0};function Sk(n,e,t){return CH[t.paths](n.root,e.root,t.matrixParams)&&Dk[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Mk(n,e,t){return xk(n,e,e.segments,t)}function xk(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Um(i,t)||e.hasChildren()||!LD(i,t,r))}if(n.segments.length===t.length){if(!Um(n.segments,t)||!LD(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Mk(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(Um(n.segments,i)&&LD(n.segments,i,r)&&n.children[Zt])&&xk(n.children[Zt],e,o,r)}}function LD(n,e,t){return e.every((r,i)=>Dk[t](n[i].parameters,r.parameters))}class Cp{constructor(e=new rn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xv(this.queryParams)),this._queryParamMap}toString(){return SH.serialize(this)}}class rn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,is(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return VD(this)}}class rC{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=xv(this.parameters)),this._parameterMap}toString(){return Pk(this)}}function Um(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let iC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return new _N},providedIn:"root"}),n})();class _N{parse(e){const t=new FH(e);return new Cp(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${sC(e.root,!0)}`,r=function xH(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${UD(t)}=${UD(i)}`).join("&"):`${UD(t)}=${UD(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function AH(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const SH=new _N;function VD(n){return n.segments.map(e=>Pk(e)).join("/")}function sC(n,e){if(!n.hasChildren())return VD(n);if(e){const t=n.children[Zt]?sC(n.children[Zt],!1):"",r=[];return is(n.children,(i,o)=>{o!==Zt&&r.push(`${o}:${sC(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function DH(n,e){let t=[];return is(n.children,(r,i)=>{i===Zt&&(t=t.concat(e(r,i)))}),is(n.children,(r,i)=>{i!==Zt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Zt?[sC(n.children[Zt],!1)]:[`${i}:${sC(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Zt]?`${VD(n)}/${t[0]}`:`${VD(n)}/(${t.join("//")})`}}function Nk(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function UD(n){return Nk(n).replace(/%3B/gi,";")}function yN(n){return Nk(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function BD(n){return decodeURIComponent(n)}function Rk(n){return BD(n.replace(/\+/g,"%20"))}function Pk(n){return`${yN(n.path)}${function MH(n){return Object.keys(n).map(e=>`;${yN(e)}=${yN(n[e])}`).join("")}(n.parameters)}`}const NH=/^[^\/()?;=#]+/;function $D(n){const e=n.match(NH);return e?e[0]:""}const RH=/^[^=?&#]+/,OH=/^[^&#]+/;class FH{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new rn([],{}):new rn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Zt]=new rn(e,t)),r}parseSegment(){const e=$D(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new u.vHH(4009,FD);return this.capture(e),new rC(BD(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=$D(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=$D(this.remaining);i&&(r=i,this.capture(r))}e[BD(t)]=BD(r)}parseQueryParam(e){const t=function PH(n){const e=n.match(RH);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function kH(n){const e=n.match(OH);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=Rk(t),o=Rk(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=$D(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new u.vHH(4010,FD);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Zt);const c=this.parseChildren();t[o]=1===Object.keys(c).length?c[Zt]:new rn([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new u.vHH(4011,FD)}}function vN(n){return n.segments.length>0?new rn([],{[Zt]:n}):n}function jD(n){const e={};for(const r of Object.keys(n.children)){const o=jD(n.children[r]);(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function LH(n){if(1===n.numberOfChildren&&n.children[Zt]){const e=n.children[Zt];return new rn(n.segments.concat(e.segments),e.children)}return n}(new rn(n.segments,e))}function Bm(n){return n instanceof Cp}const wN=!1;function VH(n,e,t,r,i){if(0===t.length)return Nv(e.root,e.root,e.root,r,i);const o=function Vk(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Lk(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,c)=>{if("object"==typeof o&&null!=o){if(o.outlets){const h={};return is(o.outlets,(_,y)=>{h[y]="string"==typeof _?_.split("/"):_}),[...i,{outlets:h}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===c?(o.split("/").forEach((h,_)=>{0==_&&"."===h||(0==_&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,o]},[]);return new Lk(t,e,r)}(t);return o.toRoot()?Nv(e.root,e.root,new rn([],{}),r,i):function c(_){const y=function BH(n,e,t,r){if(n.isAbsolute)return new Rv(e.root,!0,0);if(-1===r)return new Rv(t,t===e.root,0);return function Uk(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new u.vHH(4005,wN&&"Invalid number of '../'");i=r.segments.length}return new Rv(r,!1,i-o)}(t,r+(oC(n.commands[0])?0:1),n.numberOfDoubleDots)}(o,e,n.snapshot?._urlSegment,_),I=y.processChildren?Pv(y.segmentGroup,y.index,o.commands):EN(y.segmentGroup,y.index,o.commands);return Nv(e.root,y.segmentGroup,I,r,i)}(n.snapshot?._lastPathIndex)}function oC(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function aC(n){return"object"==typeof n&&null!=n&&n.outlets}function Nv(n,e,t,r,i){let c,o={};r&&is(r,(_,y)=>{o[y]=Array.isArray(_)?_.map(I=>`${I}`):`${_}`}),c=n===e?t:Fk(n,e,t);const h=vN(jD(c));return new Cp(h,o,i)}function Fk(n,e,t){const r={};return is(n.children,(i,o)=>{r[o]=i===e?t:Fk(i,e,t)}),new rn(n.segments,r)}class Lk{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&oC(r[0]))throw new u.vHH(4003,wN&&"Root segment cannot have matrix parameters");const i=r.find(aC);if(i&&i!==Tk(r))throw new u.vHH(4004,wN&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Rv{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function EN(n,e,t){if(n||(n=new rn([],{})),0===n.segments.length&&n.hasChildren())return Pv(n,e,t);const r=function jH(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const c=n.segments[i],h=t[r];if(aC(h))break;const _=`${h}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&y&&"object"==typeof y&&void 0===y.outlets){if(!$k(_,y,c))return o;r+=2}else{if(!$k(_,{},c))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new rn(n.segments.slice(0,r.pathIndex),{});return o.children[Zt]=new rn(n.segments.slice(r.pathIndex),n.children),Pv(o,0,i)}return r.match&&0===i.length?new rn(n.segments,{}):r.match&&!n.hasChildren()?CN(n,e,t):r.match?Pv(n,0,i):CN(n,e,t)}function Pv(n,e,t){if(0===t.length)return new rn(n.segments,{});{const r=function $H(n){return aC(n[0])?n[0].outlets:{[Zt]:n}}(t),i={};if(!r[Zt]&&n.children[Zt]&&1===n.numberOfChildren&&0===n.children[Zt].segments.length){const o=Pv(n.children[Zt],e,t);return new rn(n.segments,o.children)}return is(r,(o,c)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[c]=EN(n.children[c],e,o))}),is(n.children,(o,c)=>{void 0===r[c]&&(i[c]=o)}),new rn(n.segments,i)}}function CN(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(aC(o)){const _=HH(o.outlets);return new rn(r,_)}if(0===i&&oC(t[0])){r.push(new rC(n.segments[e].path,Bk(t[0]))),i++;continue}const c=aC(o)?o.outlets[Zt]:`${o}`,h=i<t.length-1?t[i+1]:null;c&&h&&oC(h)?(r.push(new rC(c,Bk(h))),i+=2):(r.push(new rC(c,{})),i++)}return new rn(r,{})}function HH(n){const e={};return is(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=CN(new rn([],{}),0,t))}),e}function Bk(n){const e={};return is(n,(t,r)=>e[r]=`${t}`),e}function $k(n,e,t){return n==t.path&&_c(e,t.parameters)}const lC="imperative";class yc{constructor(e,t){this.id=e,this.url=t}}class IN extends yc{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class $m extends yc{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class HD extends yc{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class GD extends yc{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class bN extends yc{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class GH extends yc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zH extends yc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qH extends yc{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ZH extends yc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class WH extends yc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class KH{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class YH{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class QH{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class JH{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class XH{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class e3{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jk{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let r3=(()=>{class n{createUrlTree(t,r,i,o,c,h){return VH(t||r.root,i,o,c,h)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),s3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(e){return r3.\u0275fac(e)},providedIn:"root"}),n})();class Hk{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=TN(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=TN(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=DN(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return DN(e,this._root).map(t=>t.value)}}function TN(n,e){if(n===e.value)return e;for(const t of e.children){const r=TN(n,t);if(r)return r}return null}function DN(n,e){if(n===e.value)return[e];for(const t of e.children){const r=DN(n,t);if(r.length)return r.unshift(e),r}return[]}class Jd{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ov(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Gk extends Hk{constructor(e,t){super(e),this.snapshot=t,SN(this,e)}toString(){return this.snapshot.toString()}}function zk(n,e){const t=function o3(n,e){const c=new zD([],{},{},"",{},Zt,e,null,n.root,-1,{});return new Zk("",new Jd(c,[]))}(n,e),r=new Qa([new rC("",{})]),i=new Qa({}),o=new Qa({}),c=new Qa({}),h=new Qa(""),_=new jm(r,i,c,h,o,Zt,e,t.root);return _.snapshot=t.root,new Gk(new Jd(_,[]),t)}class jm{constructor(e,t,r,i,o,c,h,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=c,this.component=h,this.title=this.data?.pipe((0,vt.U)(y=>y[nC]))??mt(void 0),this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,vt.U)(e=>xv(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,vt.U)(e=>xv(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function qk(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function a3(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class zD{get title(){return this.data?.[nC]}constructor(e,t,r,i,o,c,h,_,y,I,D){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=c,this.component=h,this.routeConfig=_,this._urlSegment=y,this._lastPathIndex=I,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=xv(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xv(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Zk extends Hk{constructor(e,t){super(t),this.url=e,SN(this,t)}toString(){return Wk(this._root)}}function SN(n,e){e.value._routerState=n,e.children.forEach(t=>SN(n,t))}function Wk(n){const e=n.children.length>0?` { ${n.children.map(Wk).join(", ")} } `:"";return`${n.value}${e}`}function AN(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,_c(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),_c(e.params,t.params)||n.params.next(t.params),function EH(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!_c(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),_c(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function MN(n,e){const t=_c(n.params,e.params)&&function TH(n,e){return Um(n,e)&&n.every((t,r)=>_c(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||MN(n.parent,e.parent))}function uC(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function u3(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return uC(n,r,i);return uC(n,r)})}(n,e,t);return new Jd(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const c=o.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(h=>uC(n,h)),c}}const r=function c3(n){return new jm(new Qa(n.url),new Qa(n.params),new Qa(n.queryParams),new Qa(n.fragment),new Qa(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>uC(n,o));return new Jd(r,i)}}const xN="ngNavigationCancelingError";function Kk(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Bm(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Yk(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function Yk(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[xN]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Qk(n){return Jk(n)&&Bm(n.url)}function Jk(n){return n&&n[xN]}class d3{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new cC,this.attachRef=null}}let cC=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new d3,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const qD=!1;let NN=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Zt,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.parentContexts=(0,u.f3M)(cC),this.location=(0,u.f3M)(u.s_b),this.changeDetector=(0,u.f3M)(u.sBO),this.environmentInjector=(0,u.f3M)(u.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new u.vHH(4012,qD);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new u.vHH(4012,qD);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new u.vHH(4012,qD);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new u.vHH(4013,qD);this._activatedRoute=t;const i=this.location,c=t.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,_=new h3(t,h,i.injector);if(r&&function f3(n){return!!n.resolveComponentFactory}(r)){const y=r.resolveComponentFactory(c);this.activated=i.createComponent(y,i.length,_)}else this.activated=i.createComponent(c,{index:i.length,injector:_,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[u.TTD]}),n})();class h3{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===jm?this.route:e===cC?this.childContexts:this.parent.get(e,t)}}let RN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[u.jDz],decls:1,vars:0,template:function(t,r){1&t&&u._UZ(0,"router-outlet")},dependencies:[NN],encapsulation:2}),n})();function Xk(n,e){return n.providers&&!n._injector&&(n._injector=(0,u.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ON(n){const e=n.children&&n.children.map(ON),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Zt&&(t.component=RN),t}function Ja(n){return n.outlet||Zt}function eF(n,e){const t=n.filter(r=>Ja(r)===e);return t.push(...n.filter(r=>Ja(r)!==e)),t}function dC(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class y3{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),AN(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Ov(t);e.children.forEach(o=>{const c=o.value.outlet;this.deactivateRoutes(o,i[c],r),delete i[c]}),is(i,(o,c)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ov(e);for(const c of Object.keys(o))this.deactivateRouteAndItsChildren(o[c],i);if(r&&r.outlet){const c=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ov(e);for(const c of Object.keys(o))this.deactivateRouteAndItsChildren(o[c],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Ov(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new e3(o.value.snapshot))}),e.children.length&&this.forwardEvent(new JH(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(AN(i),i===o)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(h.contexts),c.attachRef=h.componentRef,c.route=h.route.value,c.outlet&&c.outlet.attach(h.componentRef,h.route.value),AN(h.route.value),this.activateChildRoutes(e,null,c.children)}else{const h=dC(i.snapshot),_=h?.get(u._Vd)??null;c.attachRef=null,c.route=i,c.resolver=_,c.injector=h,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class tF{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ZD{constructor(e,t){this.component=e,this.route=t}}function v3(n,e,t){const r=n._root;return hC(r,e?e._root:null,t,[r.value])}function kv(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,u.Z0I)(n)?e.get(n):n:r}function hC(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Ov(e);return n.children.forEach(c=>{(function E3(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,c=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(c&&o.routeConfig===c.routeConfig){const _=function C3(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Um(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Um(n.url,e.url)||!_c(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!MN(n,e)||!_c(n.queryParams,e.queryParams);default:return!MN(n,e)}}(c,o,o.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new tF(r)):(o.data=c.data,o._resolvedData=c._resolvedData),hC(n,e,o.component?h?h.children:null:t,r,i),_&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new ZD(h.outlet.component,c))}else c&&fC(e,h,i),i.canActivateChecks.push(new tF(r)),hC(n,null,o.component?h?h.children:null:t,r,i)})(c,o[c.value.outlet],t,r.concat([c.value]),i),delete o[c.value.outlet]}),is(o,(c,h)=>fC(c,t.getContext(h),i)),i}function fC(n,e,t){const r=Ov(n),i=n.value;is(r,(o,c)=>{fC(o,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new ZD(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function pC(n){return"function"==typeof n}function kN(n){return n instanceof GT||"EmptyError"===n?.name}const WD=Symbol("INITIAL_VALUE");function Fv(){return Di(n=>_k(n.map(e=>e.pipe(mv(1),ro(WD)))).pipe((0,vt.U)(e=>{for(const t of e)if(!0!==t){if(t===WD)return WD;if(!1===t||t instanceof Cp)return t}return!0}),Y(e=>e!==WD),mv(1)))}function nF(n){return(0,mH.z)((0,ms.b)(e=>{if(Bm(e))throw Kk(0,e)}),(0,vt.U)(e=>!0===e))}const FN={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function rF(n,e,t,r,i){const o=LN(n,e,t);return o.matched?function U3(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?mt(i.map(c=>{const h=kv(c,n);return Ep(function A3(n){return n&&pC(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))})).pipe(Fv(),nF()):mt(!0)}(r=Xk(e,r),e,t).pipe((0,vt.U)(c=>!0===c?o:{...FN})):mt(o)}function LN(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...FN}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||wH)(t,n,e);if(!i)return{...FN};const o={};is(i.posParams,(h,_)=>{o[_]=h.path});const c=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function KD(n,e,t,r){if(t.length>0&&function j3(n,e,t){return t.some(r=>YD(n,e,r)&&Ja(r)!==Zt)}(n,t,r)){const o=new rn(e,function $3(n,e,t,r){const i={};i[Zt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const o of t)if(""===o.path&&Ja(o)!==Zt){const c=new rn([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[Ja(o)]=c}return i}(n,e,r,new rn(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function H3(n,e,t){return t.some(r=>YD(n,e,r))}(n,t,r)){const o=new rn(n.segments,function B3(n,e,t,r,i){const o={};for(const c of r)if(YD(n,t,c)&&!i[Ja(c)]){const h=new rn([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,o[Ja(c)]=h}return{...i,...o}}(n,e,t,r,n.children));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const i=new rn(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function YD(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function iF(n,e,t,r){return!!(Ja(n)===r||r!==Zt&&YD(e,t,n))&&("**"===n.path||LN(e,n,t).matched)}function sF(n,e,t){return 0===e.length&&!n.children[t]}const QD=!1;class JD{constructor(e){this.segmentGroup=e||null}}class oF{constructor(e){this.urlTree=e}}function gC(n){return tC(new JD(n))}function aF(n){return tC(new oF(n))}function G3(n){return tC(new u.vHH(4e3,QD&&`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class Z3{constructor(e,t,r,i,o){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0}apply(){const e=KD(this.urlTree.root,[],[],this.config).segmentGroup,t=new rn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Zt).pipe((0,vt.U)(o=>this.createUrlTree(jD(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(wp(o=>{if(o instanceof oF)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof JD?this.noMatchError(o):o}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Zt).pipe((0,vt.U)(i=>this.createUrlTree(jD(i),e.queryParams,e.fragment))).pipe(wp(i=>{throw i instanceof JD?this.noMatchError(i):i}))}noMatchError(e){return new u.vHH(4002,QD&&`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=vN(e);return new Cp(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,vt.U)(o=>new rn([],o))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return(0,Xt.D)(i).pipe(Vm(o=>{const c=r.children[o],h=eF(t,o);return this.expandSegmentGroup(e,h,c,o).pipe((0,vt.U)(_=>({segment:_,outlet:o})))}),T((o,c)=>(o[c.outlet]=c.segment,o),{}),Ck())}expandSegment(e,t,r,i,o,c){return(0,Xt.D)(r).pipe(Vm(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,o,c).pipe(wp(y=>{if(y instanceof JD)return mt(null);throw y}))),Kd(h=>!!h),wp((h,_)=>{if(kN(h))return sF(t,i,o)?mt(new rn([],{})):gC(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,o,c,h){return iF(i,t,o,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,o,c):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,c):gC(t):gC(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?aF(o):this.lineralizeSegments(r,o).pipe((0,qs.z)(c=>{const h=new rn(c,{});return this.expandSegment(e,h,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,c){const{matched:h,consumedSegments:_,remainingSegments:y,positionalParamSegments:I}=LN(t,i,o);if(!h)return gC(t);const D=this.applyRedirectCommands(_,i.redirectTo,I);return i.redirectTo.startsWith("/")?aF(D):this.lineralizeSegments(i,D).pipe((0,qs.z)(R=>this.expandSegment(e,t,r,R.concat(y),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,o){return"**"===r.path?(e=Xk(r,e),r.loadChildren?(r._loadedRoutes?mt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,vt.U)(h=>(r._loadedRoutes=h.routes,r._loadedInjector=h.injector,new rn(i,{})))):mt(new rn(i,{}))):rF(t,r,i,e).pipe(Di(({matched:c,consumedSegments:h,remainingSegments:_})=>c?this.getChildConfig(e=r._injector??e,r,i).pipe((0,qs.z)(I=>{const D=I.injector??e,R=I.routes,{segmentGroup:L,slicedSegments:$}=KD(t,h,_,R),X=new rn(L.segments,L.children);if(0===$.length&&X.hasChildren())return this.expandChildren(D,R,X).pipe((0,vt.U)(at=>new rn(h,at)));if(0===R.length&&0===$.length)return mt(new rn(h,{}));const ce=Ja(r)===o;return this.expandSegment(D,X,R,$,ce?Zt:o,!0).pipe((0,vt.U)(ut=>new rn(h.concat(ut.segments),ut.children)))})):gC(t)))}getChildConfig(e,t,r){return t.children?mt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?mt({routes:t._loadedRoutes,injector:t._loadedInjector}):function V3(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?mt(!0):mt(i.map(c=>{const h=kv(c,n);return Ep(function b3(n){return n&&pC(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))})).pipe(Fv(),nF())}(e,t,r).pipe((0,qs.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,ms.b)(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function z3(n){return tC(Yk(QD&&`Cannot load children because the guard of the route "path: '${n.path}'" returned false`,3))}(t))):mt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return mt(r);if(i.numberOfChildren>1||!i.children[Zt])return G3(e.redirectTo);i=i.children[Zt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new Cp(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return is(e,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[o]=t[h]}else r[o]=i}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let c={};return is(t.children,(h,_)=>{c[_]=this.createSegmentGroup(e,h,r,i)}),new rn(o,c)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new u.vHH(4001,QD&&`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class K3{}class J3{constructor(e,t,r,i,o,c,h){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=o,this.paramsInheritanceStrategy=c,this.urlSerializer=h}recognize(){const e=KD(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Zt).pipe((0,vt.U)(t=>{if(null===t)return null;const r=new zD([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Zt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Jd(r,t),o=new Zk(this.url,i);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(e){const t=e.value,r=qk(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,Xt.D)(Object.keys(r.children)).pipe(Vm(i=>{const o=r.children[i],c=eF(t,i);return this.processSegmentGroup(e,c,o,i)}),T((i,o)=>i&&o?(i.push(...o),i):null),function _H(n,e=!1){return(0,mr.e)((t,r)=>{let i=0;t.subscribe((0,Un.x)(r,o=>{const c=n(o,i++);(c||e)&&r.next(o),!c&&r.complete()}))})}(i=>null!==i),zT(null),Ck(),(0,vt.U)(i=>{if(null===i)return null;const o=uF(i);return function X3(n){n.sort((e,t)=>e.value.outlet===Zt?-1:t.value.outlet===Zt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}))}processSegment(e,t,r,i,o){return(0,Xt.D)(t).pipe(Vm(c=>this.processSegmentAgainstRoute(c._injector??e,c,r,i,o)),Kd(c=>!!c),wp(c=>{if(kN(c))return sF(r,i,o)?mt([]):mt(null);throw c}))}processSegmentAgainstRoute(e,t,r,i,o){if(t.redirectTo||!iF(t,r,i,o))return mt(null);let c;if("**"===t.path){const h=i.length>0?Tk(i).parameters:{},_=dF(r)+i.length;c=mt({snapshot:new zD(i,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,hF(t),Ja(t),t.component??t._loadedComponent??null,t,cF(r),_,fF(t)),consumedSegments:[],remainingSegments:[]})}else c=rF(r,t,i,e).pipe((0,vt.U)(({matched:h,consumedSegments:_,remainingSegments:y,parameters:I})=>{if(!h)return null;const D=dF(r)+_.length;return{snapshot:new zD(_,I,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,hF(t),Ja(t),t.component??t._loadedComponent??null,t,cF(r),D,fF(t)),consumedSegments:_,remainingSegments:y}}));return c.pipe(Di(h=>{if(null===h)return mt(null);const{snapshot:_,consumedSegments:y,remainingSegments:I}=h;e=t._injector??e;const D=t._loadedInjector??e,R=function eG(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:L,slicedSegments:$}=KD(r,y,I,R.filter(ce=>void 0===ce.redirectTo));if(0===$.length&&L.hasChildren())return this.processChildren(D,R,L).pipe((0,vt.U)(ce=>null===ce?null:[new Jd(_,ce)]));if(0===R.length&&0===$.length)return mt([new Jd(_,[])]);const X=Ja(t)===o;return this.processSegment(D,R,L,$,X?Zt:o).pipe((0,vt.U)(ce=>null===ce?null:[new Jd(_,ce)]))}))}}function tG(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function uF(n){const e=[],t=new Set;for(const r of n){if(!tG(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=uF(r.children);e.push(new Jd(r.value,i))}return e.filter(r=>!t.has(r))}function cF(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function dF(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function hF(n){return n.data||{}}function fF(n){return n.resolve||{}}function pF(n){return"string"==typeof n.title||null===n.title}function VN(n){return Di(e=>{const t=n(e);return t?(0,Xt.D)(t).pipe((0,vt.U)(()=>e)):mt(e)})}const Lv=new u.OlP("ROUTES");let UN=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,u.f3M)(u.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return mt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ep(t.loadComponent()).pipe((0,vt.U)(mF),(0,ms.b)(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),mN(()=>{this.componentLoaders.delete(t)})),i=new Ek(r,()=>new Gs.x).pipe(pN());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return mt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,vt.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,y,I=!1;Array.isArray(h)?y=h:(_=h.create(t).injector,y=bk(_.get(Lv,[],u.XFs.Self|u.XFs.Optional)));return{routes:y.map(ON),injector:_}}),mN(()=>{this.childrenLoaders.delete(r)})),c=new Ek(o,()=>new Gs.x).pipe(pN());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return Ep(t()).pipe((0,vt.U)(mF),(0,qs.z)(r=>r instanceof u.YKP||Array.isArray(r)?mt(r):(0,Xt.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function mF(n){return function uG(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let eS=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Gs.x,this.configLoader=(0,u.f3M)(UN),this.environmentInjector=(0,u.f3M)(u.lqb),this.urlSerializer=(0,u.f3M)(iC),this.rootContexts=(0,u.f3M)(cC),this.navigationId=0,this.afterPreactivation=()=>mt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new YH(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new KH(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Qa({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:lC,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Y(r=>0!==r.id),(0,vt.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Di(r=>{let i=!1,o=!1;return mt(r).pipe((0,ms.b)(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Di(c=>{const h=t.browserUrlTree.toString(),_=!t.navigated||c.extractedUrl.toString()!==h||h!==t.currentUrlTree.toString();if(!_&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const I="";return this.events.next(new GD(c.id,t.serializeUrl(r.rawUrl),I,0)),t.rawUrlTree=c.rawUrl,c.resolve(null),lp.E}if(t.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return _F(c.source)&&(t.browserUrlTree=c.extractedUrl),mt(c).pipe(Di(I=>{const D=this.transitions?.getValue();return this.events.next(new IN(I.id,this.urlSerializer.serialize(I.extractedUrl),I.source,I.restoredState)),D!==this.transitions?.getValue()?lp.E:Promise.resolve(I)}),function W3(n,e,t,r){return Di(i=>function q3(n,e,t,r,i){return new Z3(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,vt.U)(o=>({...i,urlAfterRedirects:o}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,ms.b)(I=>{this.currentNavigation={...this.currentNavigation,finalUrl:I.urlAfterRedirects},r.urlAfterRedirects=I.urlAfterRedirects}),function rG(n,e,t,r,i){return(0,qs.z)(o=>function Q3(n,e,t,r,i,o,c="emptyOnly"){return new J3(n,e,t,r,i,c,o).recognize().pipe(Di(h=>null===h?function Y3(n){return new Wr.y(e=>e.error(n))}(new K3):mt(h)))}(n,e,t,o.urlAfterRedirects,r.serialize(o.urlAfterRedirects),r,i).pipe((0,vt.U)(c=>({...o,targetSnapshot:c}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,ms.b)(I=>{if(r.targetSnapshot=I.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!I.extras.skipLocationChange){const R=t.urlHandlingStrategy.merge(I.urlAfterRedirects,I.rawUrl);t.setBrowserUrl(R,I)}t.browserUrlTree=I.urlAfterRedirects}const D=new GH(I.id,this.urlSerializer.serialize(I.extractedUrl),this.urlSerializer.serialize(I.urlAfterRedirects),I.targetSnapshot);this.events.next(D)}));if(_&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:I,extractedUrl:D,source:R,restoredState:L,extras:$}=c,X=new IN(I,this.urlSerializer.serialize(D),R,L);this.events.next(X);const ce=zk(D,this.rootComponentType).snapshot;return mt(r={...c,targetSnapshot:ce,urlAfterRedirects:D,extras:{...$,skipLocationChange:!1,replaceUrl:!1}})}{const I="";return this.events.next(new GD(c.id,t.serializeUrl(r.extractedUrl),I,1)),t.rawUrlTree=c.rawUrl,c.resolve(null),lp.E}}),(0,ms.b)(c=>{const h=new zH(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}),(0,vt.U)(c=>r={...c,guards:v3(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),function x3(n,e){return(0,qs.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:c}}=t;return 0===c.length&&0===o.length?mt({...t,guardsResult:!0}):function N3(n,e,t,r){return(0,Xt.D)(n).pipe((0,qs.z)(i=>function L3(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?mt(o.map(h=>{const _=dC(e)??i,y=kv(h,_);return Ep(function S3(n){return n&&pC(n.canDeactivate)}(y)?y.canDeactivate(n,e,t,r):_.runInContext(()=>y(n,e,t,r))).pipe(Kd())})).pipe(Fv()):mt(!0)}(i.component,i.route,t,e,r)),Kd(i=>!0!==i,!0))}(c,r,i,n).pipe((0,qs.z)(h=>h&&function I3(n){return"boolean"==typeof n}(h)?function R3(n,e,t,r){return(0,Xt.D)(e).pipe(Vm(i=>xs(function O3(n,e){return null!==n&&e&&e(new QH(n)),mt(!0)}(i.route.parent,r),function P3(n,e){return null!==n&&e&&e(new XH(n)),mt(!0)}(i.route,r),function F3(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(c=>function w3(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>vk(()=>mt(c.guards.map(_=>{const y=dC(c.node)??t,I=kv(_,y);return Ep(function D3(n){return n&&pC(n.canActivateChild)}(I)?I.canActivateChild(r,n):y.runInContext(()=>I(r,n))).pipe(Kd())})).pipe(Fv())));return mt(o).pipe(Fv())}(n,i.path,t),function k3(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return mt(!0);const i=r.map(o=>vk(()=>{const c=dC(e)??t,h=kv(o,c);return Ep(function T3(n){return n&&pC(n.canActivate)}(h)?h.canActivate(e,n):c.runInContext(()=>h(e,n))).pipe(Kd())}));return mt(i).pipe(Fv())}(n,i.route,t))),Kd(i=>!0!==i,!0))}(r,o,n,e):mt(h)),(0,vt.U)(h=>({...t,guardsResult:h})))})}(this.environmentInjector,c=>this.events.next(c)),(0,ms.b)(c=>{if(r.guardsResult=c.guardsResult,Bm(c.guardsResult))throw Kk(0,c.guardsResult);const h=new qH(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(h)}),Y(c=>!!c.guardsResult||(t.restoreHistory(c),this.cancelNavigationTransition(c,"",3),!1)),VN(c=>{if(c.guards.canActivateChecks.length)return mt(c).pipe((0,ms.b)(h=>{const _=new ZH(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(_)}),Di(h=>{let _=!1;return mt(h).pipe(function iG(n,e){return(0,qs.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return mt(t);let o=0;return(0,Xt.D)(i).pipe(Vm(c=>function sG(n,e,t,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!pF(i)&&(o[nC]=i.title),function oG(n,e,t,r){const i=function aG(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return mt({});const o={};return(0,Xt.D)(i).pipe((0,qs.z)(c=>function lG(n,e,t,r){const i=dC(e)??r,o=kv(n,i);return Ep(o.resolve?o.resolve(e,t):i.runInContext(()=>o(e,t)))}(n[c],e,t,r).pipe(Kd(),(0,ms.b)(h=>{o[c]=h}))),gN(1),function yH(n){return(0,vt.U)(()=>n)}(o),wp(c=>kN(c)?lp.E:tC(c)))}(o,n,e,r).pipe((0,vt.U)(c=>(n._resolvedData=c,n.data=qk(n,t).resolve,i&&pF(i)&&(n.data[nC]=i.title),null)))}(c.route,r,n,e)),(0,ms.b)(()=>o++),gN(1),(0,qs.z)(c=>o===i.length?mt(t):lp.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,ms.b)({next:()=>_=!0,complete:()=>{_||(t.restoreHistory(h),this.cancelNavigationTransition(h,"",2))}}))}),(0,ms.b)(h=>{const _=new WH(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(_)}))}),VN(c=>{const h=_=>{const y=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&y.push(this.configLoader.loadComponent(_.routeConfig).pipe((0,ms.b)(I=>{_.component=I}),(0,vt.U)(()=>{})));for(const I of _.children)y.push(...h(I));return y};return _k(h(c.targetSnapshot.root)).pipe(zT(),mv(1))}),VN(()=>this.afterPreactivation()),(0,vt.U)(c=>{const h=function l3(n,e,t){const r=uC(n,e._root,t?t._root:void 0);return new Gk(r,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return r={...c,targetRouterState:h}}),(0,ms.b)(c=>{t.currentUrlTree=c.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(c.urlAfterRedirects,c.rawUrl),t.routerState=c.targetRouterState,"deferred"===t.urlUpdateStrategy&&(c.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,c),t.browserUrlTree=c.urlAfterRedirects)}),((n,e,t)=>(0,vt.U)(r=>(new y3(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c)),mv(1),(0,ms.b)({next:c=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new $m(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{i=!0}}),mN(()=>{i||o||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),wp(c=>{if(o=!0,Jk(c)){Qk(c)||(t.navigated=!0,t.restoreHistory(r,!0));const h=new HD(r.id,this.urlSerializer.serialize(r.extractedUrl),c.message,c.cancellationCode);if(this.events.next(h),Qk(c)){const _=t.urlHandlingStrategy.merge(c.url,t.rawUrlTree),y={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||_F(r.source)};t.scheduleNavigation(_,lC,null,y,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const h=new bN(r.id,this.urlSerializer.serialize(r.extractedUrl),c,r.targetSnapshot??void 0);this.events.next(h);try{r.resolve(t.errorHandler(c))}catch(_){r.reject(_)}}return lp.E}))}))}cancelNavigationTransition(t,r,i){const o=new HD(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function _F(n){return n!==lC}let yF=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Zt);return r}getResolvedTitleForRoute(t){return t.data[nC]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(cG)},providedIn:"root"}),n})(),cG=(()=>{class n extends yF{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(l_))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),dG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(fG)},providedIn:"root"}),n})();class hG{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let fG=(()=>{class n extends hG{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const tS=new u.OlP("",{providedIn:"root",factory:()=>({})});let gG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(mG)},providedIn:"root"}),n})(),mG=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function _G(n){throw n}function yG(n,e,t){return e.parse("/")}const vG={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},wG={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let wr=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,u.f3M)(u.c2e),this.isNgZoneEnabled=!1,this.options=(0,u.f3M)(tS,{optional:!0})||{},this.errorHandler=this.options.errorHandler||_G,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||yG,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,u.f3M)(gG),this.routeReuseStrategy=(0,u.f3M)(dG),this.urlCreationStrategy=(0,u.f3M)(s3),this.titleStrategy=(0,u.f3M)(yF),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=bk((0,u.f3M)(Lv,{optional:!0})??[]),this.navigationTransitions=(0,u.f3M)(eS),this.urlSerializer=(0,u.f3M)(iC),this.location=(0,u.f3M)(Be),this.isNgZoneEnabled=(0,u.f3M)(u.R0b)instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Cp,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=zk(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),lC,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const o={replaceUrl:!0},c=i?.navigationId?i:null;if(i){const _={...i};delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(o.state=_)}const h=this.parseUrl(t);this.scheduleNavigation(h,r,c,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(ON),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:c,queryParamsHandling:h,preserveFragment:_}=r,y=_?this.currentUrlTree.fragment:c;let I=null;switch(h){case"merge":I={...this.currentUrlTree.queryParams,...o};break;case"preserve":I=this.currentUrlTree.queryParams;break;default:I=o||null}return null!==I&&(I=this.removeEmptyProps(I)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,I,y??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Bm(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,lC,null,r)}navigate(t,r={skipLocationChange:!1}){return function EG(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new u.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...vG}:!1===r?{...wG}:r,Bm(t))return Sk(this.currentUrlTree,t,i);const o=this.parseUrl(t);return Sk(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}scheduleNavigation(t,r,i,o,c){if(this.disposed)return Promise.resolve(!1);let h,_,y,I;return c?(h=c.resolve,_=c.reject,y=c.promise):y=new Promise((D,R)=>{h=D,_=R}),I="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:I,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:h,reject:_,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(D=>Promise.reject(D))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const c={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",c)}else{const o={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(i,"",o)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-(this.browserPageId??this.currentPageId);0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Hm=(()=>{class n{constructor(t,r,i,o,c,h){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=c,this.locationStrategy=h,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Gs.x;const _=c.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===_||"area"===_,this.isAnchorElement?this.subscription=t.events.subscribe(y=>{y instanceof $m&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,u.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,u.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,u.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,o,c){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||o||c||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,u.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(wr),u.Y36(jm),u.$8M("tabindex"),u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(dt))},n.\u0275dir=u.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&u.NdJ("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&t&&u.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[u.TTD]}),n})();class vF{}let bG=(()=>{class n{constructor(t,r,i,o,c){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(Y(t=>t instanceof $m),Vm(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=(0,u.MMx)(o.providers,t,`Route: ${o.path}`));const c=o._injector??t,h=o._loadedInjector??c;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(c,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(h,o.children??o._loadedRoutes))}return(0,Xt.D)(i).pipe((0,Ei.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):mt(null);const o=i.pipe((0,qs.z)(c=>null===c?mt(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,Xt.D)([o,c]).pipe((0,Ei.J)())}return o})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(wr),u.LFG(u.Sil),u.LFG(u.lqb),u.LFG(vF),u.LFG(UN))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $N=new u.OlP("");let wF=(()=>{class n{constructor(t,r,i,o,c={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},c.scrollPositionRestoration=c.scrollPositionRestoration||"disabled",c.anchorScrolling=c.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof IN?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof $m&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof jk&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new jk(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();var Qo=(()=>((Qo=Qo||{})[Qo.COMPLETE=0]="COMPLETE",Qo[Qo.FAILED=1]="FAILED",Qo[Qo.REDIRECTING=2]="REDIRECTING",Qo))();const Vv=!1;function Ip(n,e){return{\u0275kind:n,\u0275providers:e}}const jN=new u.OlP("",{providedIn:"root",factory:()=>!1});function CF(){const n=(0,u.f3M)(u.zs3);return e=>{const t=n.get(u.z2F);if(e!==t.components[0])return;const r=n.get(wr),i=n.get(IF);1===n.get(HN)&&r.initialNavigation(),n.get(bF,null,u.XFs.Optional)?.setUpPreloading(),n.get($N,null,u.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const IF=new u.OlP(Vv?"bootstrap done indicator":"",{factory:()=>new Gs.x}),HN=new u.OlP(Vv?"initial navigation":"",{providedIn:"root",factory:()=>1});function MG(){let n=[];return n=Vv?[{provide:u.Xts,multi:!0,useFactory:()=>{const e=(0,u.f3M)(wr);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function t3(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],Ip(1,n)}const bF=new u.OlP(Vv?"router preloader":"");function xG(n){return Ip(0,[{provide:bF,useExisting:bG},{provide:vF,useExisting:n}])}const mC=!1,TF=new u.OlP(mC?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),NG=[Be,{provide:iC,useClass:_N},wr,cC,{provide:jm,useFactory:function EF(n){return n.routerState.root},deps:[wr]},UN,mC?{provide:jN,useValue:!0}:[]];function RG(){return new u.PXZ("Router",wr)}let GN=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[NG,mC&&r?.enableTracing?MG().\u0275providers:[],{provide:Lv,multi:!0,useValue:t},{provide:TF,useFactory:FG,deps:[[wr,new u.FiY,new u.tp0]]},{provide:tS,useValue:r||{}},r?.useHash?{provide:dt,useClass:be}:{provide:dt,useClass:Se},{provide:$N,useFactory:()=>{const n=(0,u.f3M)(hl),e=(0,u.f3M)(u.R0b),t=(0,u.f3M)(tS),r=(0,u.f3M)(eS),i=(0,u.f3M)(iC);return t.scrollOffset&&n.setOffset(t.scrollOffset),new wF(i,r,n,e,t)}},r?.preloadingStrategy?xG(r.preloadingStrategy).\u0275providers:[],{provide:u.PXZ,multi:!0,useFactory:RG},r?.initialNavigation?LG(r):[],[{provide:DF,useFactory:CF},{provide:u.tb,multi:!0,useExisting:DF}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Lv,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(TF,8))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[RN]}),n})();function FG(n){if(mC&&n)throw new u.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function LG(n){return["disabled"===n.initialNavigation?Ip(3,[{provide:u.ip1,multi:!0,useFactory:()=>{const e=(0,u.f3M)(wr);return()=>{e.setUpLocationChangeListener()}}},{provide:HN,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Ip(2,[{provide:HN,useValue:0},{provide:u.ip1,multi:!0,deps:[u.zs3],useFactory:e=>{const t=e.get(he,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(wr),o=e.get(IF);(function TG(n,e){n.events.pipe(Y(t=>t instanceof $m||t instanceof HD||t instanceof bN||t instanceof GD),(0,vt.U)(t=>t instanceof $m||t instanceof GD?Qo.COMPLETE:t instanceof HD&&(0===t.code||1===t.code)?Qo.REDIRECTING:Qo.FAILED),Y(t=>t!==Qo.REDIRECTING),mv(1)).subscribe(()=>{e()})})(i,()=>{r(!0)}),e.get(eS).afterPreactivation=()=>(r(!0),o.closed?mt(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const DF=new u.OlP(mC?"Router Initializer":""),UG=[];let BG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[GN.forRoot(UG),GN]}),n})(),bp=(()=>{class n{constructor(t){this.fireStore=t}validate(t,r){return this.fireStore.collection("user",i=>i.where("email","==",t).where("password","==",r)).snapshotChanges()}register(t){return this.fireStore.collection("user").add({...t})}get displayName(){return localStorage.getItem("displayName")}get loggedInUserId(){return localStorage.getItem("loggedInUserId")}get isAdmin(){return"true"===localStorage.getItem("isAdmin")}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(TE))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),_C=(()=>{class n{constructor(t){this.authService=t,this.cartItems=[],this._cartItemsQuantity=0,this._cartItemsTotal=0,this.cartCount=new Qa(0),this.cartCount$=this.cartCount.asObservable(),this.loadCartItems()}get CartItems(){return this.loadCartItems(),this.cartItems}get CartItemsCount(){return this._cartItemsQuantity}get CartItemsTotal(){return this._cartItemsTotal}addItemToCart(t){this.loadCartItems();const r=this.cartItems.findIndex(i=>i.id===t.id);r>-1?(this.cartItems[r].quantity+=1,this.cartItems[r].totalPrice=this.cartItems[r].quantity*this.cartItems[r].price):this.cartItems.push(t),this.saveCartItem()}removeItemFromCart(t){this.loadCartItems();const r=this.cartItems.findIndex(i=>i.id===t.id&&i.quantity>1);if(r>-1)this.cartItems[r].quantity+=-1,this.cartItems[r].totalPrice=this.cartItems[r].quantity*this.cartItems[r].price;else{let i=this.cartItems.findIndex(o=>o.id===t.id);this.cartItems.splice(i,1)}this.saveCartItem()}clearCartItems(){let r=this.authService.loggedInUserId+"cart_count";localStorage.removeItem(this.authService.loggedInUserId+"cart_items"),localStorage.removeItem(r),this.loadCartItems()}loadCartItems(){this.cartItems=JSON.parse(localStorage.getItem(this.authService.loggedInUserId+"cart_items")||"[]");let r=0;this.cartItems.forEach(o=>{r+=o.quantity}),this.cartCount.next(r);let i=0;this.cartItems.forEach(o=>{i+=o.totalPrice}),this._cartItemsQuantity=r,this._cartItemsTotal=i}saveCartItem(){let r=this.authService.loggedInUserId+"cart_count";localStorage.setItem(this.authService.loggedInUserId+"cart_items",JSON.stringify(this.cartItems)),localStorage.setItem(r,this._cartItemsQuantity.toString()),this.cartCount.next(this._cartItemsQuantity)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(bp))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function $G(n,e){1&n&&(u.TgZ(0,"a",16),u._UZ(1,"img",17),u.qZA())}function jG(n,e){if(1&n&&(u.TgZ(0,"a",18),u._UZ(1,"i",19),u.TgZ(2,"span",20),u._uU(3),u.ALo(4,"async"),u.qZA()()),2&n){const t=u.oxw();u.xp6(3),u.Oqu(u.lcZ(4,1,t.shoppingCartItemCount$))}}function HG(n,e){1&n&&(u.TgZ(0,"a",21),u._uU(1,"My Orders"),u.qZA())}function GG(n,e){1&n&&(u.TgZ(0,"a",22),u._uU(1,"My Dashboard"),u.qZA())}function zG(n,e){1&n&&(u.ynx(0),u.TgZ(1,"li")(2,"a",23),u._uU(3,"Admin Orders"),u.qZA()(),u.TgZ(4,"li")(5,"a",24),u._uU(6,"Admin Categories"),u.qZA()(),u.TgZ(7,"li")(8,"a",25),u._uU(9,"Admin Products"),u.qZA()(),u.TgZ(10,"li")(11,"a",26),u._uU(12,"Admin Dashboard"),u.qZA()(),u.BQk())}function qG(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"a",27),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.logout())}),u._uU(1,"Log Out"),u.qZA()}}let SF=(()=>{class n{constructor(t,r,i){this.router=t,this.authService=r,this.shoppingCartService=i,this.shoppingCartItemCount$=i.cartCount$}logout(){localStorage.removeItem("displayName"),localStorage.removeItem("loggedInUserId"),localStorage.removeItem("isAdmin"),this.shoppingCartService.clearCartItems(),this.router.navigate(["/login"])}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(wr),u.Y36(bp),u.Y36(_C))},n.\u0275cmp=u.Xpm({type:n,selectors:[["nav-bar"]],decls:20,vars:7,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light","sticky-top"],[1,"container"],["class","navbar-brand","routerLink","/userproduct",4,"ngIf"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNavDropdown","aria-controls","navbarNavDropdown","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNavDropdown"],[1,"navbar-nav"],[1,"nav-item"],["class","nav-link","routerLink","/shoppin-cart",4,"ngIf"],[1,"nav-item","dropdown"],["href","#","id","navbarDropdownMenuLink","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["aria-labelledby","navbarDropdownMenuLink",1,"dropdown-menu"],["class","dropdown-item","routerLink","/my-orders",4,"ngIf"],["class","dropdown-item","routerLink","/my-dashboard",4,"ngIf"],[4,"ngIf"],["class","dropdown-item","style","cursor:pointer",3,"click",4,"ngIf"],["routerLink","/userproduct",1,"navbar-brand"],["height","25px","src","assets/images.png"],["routerLink","/shoppin-cart",1,"nav-link"],[1,"bi","bi-cart-fill"],[1,"badge","rounded-pill","bg-warning","text-dark"],["routerLink","/my-orders",1,"dropdown-item"],["routerLink","/my-dashboard",1,"dropdown-item"],["routerLink","/admin/admin-orders",1,"dropdown-item"],["routerLink","/admin/categories",1,"dropdown-item"],["routerLink","/admin/products",1,"dropdown-item"],["routerLink","/admin/dashboard",1,"dropdown-item"],[1,"dropdown-item",2,"cursor","pointer",3,"click"]],template:function(t,r){1&t&&(u.TgZ(0,"nav",0)(1,"div",1),u.YNc(2,$G,2,0,"a",2),u.TgZ(3,"button",3),u._UZ(4,"span",4),u.qZA(),u.TgZ(5,"div",5)(6,"ul",6)(7,"li",7),u.YNc(8,jG,5,3,"a",8),u.qZA(),u.TgZ(9,"li",9)(10,"a",10),u._uU(11),u.qZA(),u.TgZ(12,"ul",11)(13,"li"),u.YNc(14,HG,2,0,"a",12),u.qZA(),u.TgZ(15,"li"),u.YNc(16,GG,2,0,"a",13),u.qZA(),u.YNc(17,zG,13,0,"ng-container",14),u.TgZ(18,"li"),u.YNc(19,qG,2,0,"a",15),u.qZA()()()()()()()),2&t&&(u.xp6(2),u.Q6J("ngIf",r.authService.displayName),u.xp6(6),u.Q6J("ngIf",r.authService.displayName),u.xp6(3),u.hij(" ",r.authService.displayName," "),u.xp6(3),u.Q6J("ngIf",r.authService.displayName),u.xp6(2),u.Q6J("ngIf",r.authService.displayName),u.xp6(1),u.Q6J("ngIf",r.authService.isAdmin),u.xp6(2),u.Q6J("ngIf",r.authService.displayName))},dependencies:[ci,Hm,Gr],styles:[".sticky-top[_ngcontent-%COMP%]{top:0}.dropdown-toggle[_ngcontent-%COMP%]{cursor:pointer}.a-disabled[_ngcontent-%COMP%]{pointer-events:none;cursor:default}"]}),n})(),ZG=(()=>{class n{constructor(t){this.authService=t,this.title="ecommerce"}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(bp))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&u._UZ(0,"nav-bar")(1,"router-outlet")},dependencies:[NN,SF],styles:[".componentStyle[_ngcontent-%COMP%]{width:50%;margin:auto;padding:20px}.ng-touched.ng-invalid[_ngcontent-%COMP%]{border:1px solid red!important}"]}),n})();class AF{}let MF=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n}),n})(),Gm=(()=>{class n extends MF{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,features:[u.qOj]}),n})();const vc=new u.OlP("NgValueAccessor"),YG={provide:vc,useExisting:(0,u.Gpc)(()=>Xd),multi:!0},JG=new u.OlP("CompositionEventMode");let Xd=(()=>{class n extends MF{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function QG(){const n=k()?k().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(JG,8))},n.\u0275dir=u.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&u.NdJ("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[u._Bn([YG]),u.qOj]}),n})();const XG=!1;function Tp(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function NF(n){return null!=n&&"number"==typeof n.length}const _s=new u.OlP("NgValidators"),Dp=new u.OlP("NgAsyncValidators"),ez=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ys{static min(e){return function RF(n){return e=>{if(Tp(e.value)||Tp(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function PF(n){return e=>{if(Tp(e.value)||Tp(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return OF(e)}static requiredTrue(e){return function kF(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function FF(n){return Tp(n.value)||ez.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function LF(n){return e=>Tp(e.value)||!NF(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function VF(n){return e=>NF(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function UF(n){if(!n)return nS;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Tp(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return zF(e)}static composeAsync(e){return qF(e)}}function OF(n){return Tp(n.value)?{required:!0}:null}function nS(n){return null}function BF(n){return null!=n}function $F(n){const e=(0,u.QGY)(n)?(0,Xt.D)(n):n;if(XG&&!(0,u.CqO)(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new u.vHH(-1101,t)}return e}function jF(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function HF(n,e){return e.map(t=>t(n))}function GF(n){return n.map(e=>function tz(n){return!n.validate}(e)?e:t=>e.validate(t))}function zF(n){if(!n)return null;const e=n.filter(BF);return 0==e.length?null:function(t){return jF(HF(t,e))}}function zN(n){return null!=n?zF(GF(n)):null}function qF(n){if(!n)return null;const e=n.filter(BF);return 0==e.length?null:function(t){return function WG(...n){const e=(0,no.jO)(n),{args:t,keys:r}=pk(n),i=new Wr.y(o=>{const{length:c}=t;if(!c)return void o.complete();const h=new Array(c);let _=c,y=c;for(let I=0;I<c;I++){let D=!1;(0,CE.Xf)(t[I]).subscribe((0,Un.x)(o,R=>{D||(D=!0,y--),h[I]=R},()=>_--,void 0,()=>{(!_||!D)&&(y||o.next(r?mk(r,h):h),o.complete())}))}});return e?i.pipe(gk(e)):i}(HF(t,e).map($F)).pipe((0,vt.U)(jF))}}function qN(n){return null!=n?qF(GF(n)):null}function ZF(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function WF(n){return n._rawValidators}function KF(n){return n._rawAsyncValidators}function ZN(n){return n?Array.isArray(n)?n:[n]:[]}function rS(n,e){return Array.isArray(n)?n.includes(e):n===e}function YF(n,e){const t=ZN(e);return ZN(n).forEach(i=>{rS(t,i)||t.push(i)}),t}function QF(n,e){return ZN(e).filter(t=>!rS(n,t))}class JF{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=zN(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=qN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Zs extends JF{get formDirective(){return null}get path(){return null}}class Sp extends JF{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class XF{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let zm=(()=>{class n extends XF{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Sp,2))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&u.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[u.qOj]}),n})(),Uv=(()=>{class n extends XF{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Zs,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&u.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[u.qOj]}),n})();function eL(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const YN=!1,yC="VALID",sS="INVALID",Bv="PENDING",vC="DISABLED";function QN(n){return(oS(n)?n.validators:n)||null}function JN(n,e){return(oS(e)?e.asyncValidators:n)||null}function oS(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class rL{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===yC}get invalid(){return this.status===sS}get pending(){return this.status==Bv}get disabled(){return this.status===vC}get enabled(){return this.status!==vC}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(YF(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(YF(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(QF(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(QF(e,this._rawAsyncValidators))}hasValidator(e){return rS(this._rawValidators,e)}hasAsyncValidator(e){return rS(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Bv,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=vC,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=yC,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===yC||this.status===Bv)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?vC:yC}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Bv,this._hasOwnPendingAsyncValidator=!0;const t=$F(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?vC:this.errors?sS:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Bv)?Bv:this._anyControlsHaveStatus(sS)?sS:yC}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){oS(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function lz(n){return Array.isArray(n)?zN(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function uz(n){return Array.isArray(n)?qN(n):n||null}(this._rawAsyncValidators)}}class qm extends rL{constructor(e,t,r){super(QN(t),JN(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function nL(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new u.vHH(1002,YN?function az(n,e){return`Must supply a value for form control ${eL(n,e)}`}(e,i):"")})})(this,!0,e),Object.keys(e).forEach(r=>{(function tL(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new u.vHH(1e3,YN?function sz(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!r[t])throw new u.vHH(1001,YN?function oz(n,e){return`Cannot find form control ${eL(n,e)}`}(e,t):"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Zm=new u.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>wC}),wC="always";function aS(n,e){return[...e.path,n]}function EC(n,e,t=wC){XN(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function hz(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&iL(n,e)})}(n,e),function pz(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function fz(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&iL(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function dz(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function lS(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),cS(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function uS(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function XN(n,e){const t=WF(n);null!==e.validator?n.setValidators(ZF(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=KF(n);null!==e.asyncValidator?n.setAsyncValidators(ZF(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();uS(e._rawValidators,i),uS(e._rawAsyncValidators,i)}function cS(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=WF(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(c=>c!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(null!==e.asyncValidator){const i=KF(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(c=>c!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}const r=()=>{};return uS(e._rawValidators,r),uS(e._rawAsyncValidators,r),t}function iL(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function sL(n,e){XN(n,e)}function tR(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function oL(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function nR(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===Xd?t=o:function _z(n){return Object.getPrototypeOf(n.constructor)===Gm}(o)?r=o:i=o}),i||r||t||null}const vz={provide:Zs,useExisting:(0,u.Gpc)(()=>IC)},CC=(()=>Promise.resolve())();let IC=(()=>{class n extends Zs{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new u.vpe,this.form=new qm({},zN(t),qN(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){CC.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),EC(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){CC.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){CC.then(()=>{const r=this._findContainer(t.path),i=new qm({});sL(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){CC.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){CC.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,oL(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(_s,10),u.Y36(Dp,10),u.Y36(Zm,8))},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&u.NdJ("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([vz]),u.qOj]}),n})();function aL(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function lL(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Li=class extends rL{constructor(e=null,t,r){super(QN(t),JN(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),oS(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=lL(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){aL(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){aL(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){lL(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Cz={provide:Sp,useExisting:(0,u.Gpc)(()=>$v)},dL=(()=>Promise.resolve())();let $v=(()=>{class n extends Sp{constructor(t,r,i,o,c,h){super(),this._changeDetectorRef=c,this.callSetDisabledState=h,this.control=new Li,this._registered=!1,this.update=new u.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=nR(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),tR(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){EC(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){dL.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,u.D6c)(r);dL.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?aS(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Zs,9),u.Y36(_s,10),u.Y36(Dp,10),u.Y36(vc,10),u.Y36(u.sBO,8),u.Y36(Zm,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[u._Bn([Cz]),u.qOj,u.TTD]}),n})(),jv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const Iz={provide:vc,useExisting:(0,u.Gpc)(()=>rR),multi:!0};let rR=(()=>{class n extends Gm{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&u.NdJ("input",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},features:[u._Bn([Iz]),u.qOj]}),n})(),hL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const iR=new u.OlP("NgModelWithFormControlWarning"),Az={provide:Zs,useExisting:(0,u.Gpc)(()=>Hv)};let Hv=(()=>{class n extends Zs{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new u.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(cS(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return EC(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){lS(t.control||null,t,!1),function yz(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,oL(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(lS(r||null,t),(n=>n instanceof Li)(i)&&(EC(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);sL(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function gz(n,e){return cS(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){XN(this.form,this),this._oldForm&&cS(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(_s,10),u.Y36(Dp,10),u.Y36(Zm,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&u.NdJ("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([Az]),u.qOj,u.TTD]}),n})();const Nz={provide:Sp,useExisting:(0,u.Gpc)(()=>bC)};let bC=(()=>{class n extends Sp{set isDisabled(t){}constructor(t,r,i,o,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new u.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=nR(0,o)}ngOnChanges(t){this._added||this._setUpControl(),tR(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return aS(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(u.Y36(Zs,13),u.Y36(_s,10),u.Y36(Dp,10),u.Y36(vc,10),u.Y36(iR,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[u._Bn([Nz]),u.qOj,u.TTD]}),n})();const Rz={provide:vc,useExisting:(0,u.Gpc)(()=>TC),multi:!0};function _L(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let TC=(()=>{class n extends Gm{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=_L(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function Pz(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&u.NdJ("change",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[u._Bn([Rz]),u.qOj]}),n})(),aR=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(_L(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(TC,9))},n.\u0275dir=u.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const Oz={provide:vc,useExisting:(0,u.Gpc)(()=>lR),multi:!0};function yL(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let lR=(()=>{class n extends Gm{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(o=>this._getOptionId(o));r=(o,c)=>{o._setSelected(i.indexOf(c.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],o=r.selectedOptions;if(void 0!==o){const c=o;for(let h=0;h<c.length;h++){const y=this._getOptionValue(c[h].value);i.push(y)}}else{const c=r.options;for(let h=0;h<c.length;h++){const _=c[h];if(_.selected){const y=this._getOptionValue(_.value);i.push(y)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function kz(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&u.NdJ("change",function(o){return r.onChange(o.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[u._Bn([Oz]),u.qOj]}),n})(),uR=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(yL(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(yL(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(lR,9))},n.\u0275dir=u.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),Wm=(()=>{class n{constructor(){this._validator=nS}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):nS,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,features:[u.TTD]}),n})();const Vz={provide:_s,useExisting:(0,u.Gpc)(()=>dS),multi:!0};let dS=(()=>{class n extends Wm{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=u.D6c,this.createValidator=t=>OF}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&u.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[u._Bn([Vz]),u.qOj]}),n})(),AL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[hL]}),n})(),zz=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Zm,useValue:t.callSetDisabledState??wC}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[AL]}),n})(),qz=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:iR,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Zm,useValue:t.callSetDisabledState??wC}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[AL]}),n})();class ML{}class Zz{}const eh="*";function Wz(n,e){return{type:7,name:n,definitions:e,options:{}}}function xL(n,e=null){return{type:4,styles:e,timings:n}}function NL(n,e=null){return{type:2,steps:n,options:e}}function DC(n){return{type:6,styles:n,offset:null}}function cR(n,e,t){return{type:0,name:n,styles:e,options:t}}function RL(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function PL(n){Promise.resolve().then(n)}class SC{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){PL(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class OL{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const o=this.players.length;0==o?PL(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==o&&this._onFinish()}),c.onDestroy(()=>{++r==o&&this._onDestroy()}),c.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((c,h)=>Math.max(c,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const dR="!",kL=["toast-component",""];function Kz(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",5),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.remove())}),u.TgZ(1,"span",6),u._uU(2,"\xd7"),u.qZA()()}}function Yz(n,e){if(1&n&&(u.ynx(0),u._uU(1),u.BQk()),2&n){const t=u.oxw(2);u.xp6(1),u.hij("[",t.duplicatesCount+1,"]")}}function Qz(n,e){if(1&n&&(u.TgZ(0,"div"),u._uU(1),u.YNc(2,Yz,2,1,"ng-container",4),u.qZA()),2&n){const t=u.oxw();u.Tol(t.options.titleClass),u.uIk("aria-label",t.title),u.xp6(1),u.hij(" ",t.title," "),u.xp6(1),u.Q6J("ngIf",t.duplicatesCount)}}function Jz(n,e){if(1&n&&u._UZ(0,"div",7),2&n){const t=u.oxw();u.Tol(t.options.messageClass),u.Q6J("innerHTML",t.message,u.oJD)}}function Xz(n,e){if(1&n&&(u.TgZ(0,"div",8),u._uU(1),u.qZA()),2&n){const t=u.oxw();u.Tol(t.options.messageClass),u.uIk("aria-label",t.message),u.xp6(1),u.hij(" ",t.message," ")}}function eq(n,e){if(1&n&&(u.TgZ(0,"div"),u._UZ(1,"div",9),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Udp("width",t.width+"%")}}class aq{constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class lq{attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}class uq{constructor(e){this._overlayRef=e,this.duplicatesCount=0,this._afterClosed=new Gs.x,this._activate=new Gs.x,this._manualClose=new Gs.x,this._resetTimeout=new Gs.x,this._countDuplicate=new Gs.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class hS{constructor(e,t,r,i,o,c){this.toastId=e,this.config=t,this.message=r,this.title=i,this.toastType=o,this.toastRef=c,this._onTap=new Gs.x,this._onAction=new Gs.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const LL=new u.OlP("ToastConfig");class cq extends lq{constructor(e,t,r){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=r}attachComponentPortal(e,t){const r=this._componentFactoryResolver.resolveComponentFactory(e.component);let i;return i=r.create(e.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}class dq{constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let hq=(()=>{class n{constructor(t){this._document=t}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(re))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),fq=(()=>{class n{constructor(t,r,i,o){this._overlayContainer=t,this._componentFactoryResolver=r,this._appRef=i,this._document=o,this._paneElements=new Map}create(t,r){return this._createOverlayRef(this.getPaneElement(t,r))}getPaneElement(t="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[t]||(this._paneElements.get(r)[t]=this._createPaneElement(t,r)),this._paneElements.get(r)[t]}_createPaneElement(t,r){const i=this._document.createElement("div");return i.id="toast-container",i.classList.add(t),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(t){return new cq(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new dq(this._createPortalHost(t))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(hq),u.LFG(u._Vd),u.LFG(u.z2F),u.LFG(re))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ap=(()=>{class n{constructor(t,r,i,o,c){this.overlay=r,this._injector=i,this.sanitizer=o,this.ngZone=c,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig={...t.default,...t.config},t.config.iconClasses&&(this.toastrConfig.iconClasses={...t.default.iconClasses,...t.config.iconClasses})}show(t,r,i={},o=""){return this._preBuildNotification(o,t,r,this.applyConfig(i))}success(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,r,this.applyConfig(i))}error(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,r,this.applyConfig(i))}info(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,r,this.applyConfig(i))}warning(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,r,this.applyConfig(i))}clear(t){for(const r of this.toasts)if(void 0!==t){if(r.toastId===t)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(t){const r=this._findToast(t);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(t="",r="",i,o){const{includeTitleDuplicates:c}=this.toastrConfig;for(const h of this.toasts)if((!c||c&&h.title===t)&&h.message===r)return h.toastRef.onDuplicate(i,o),h;return null}applyConfig(t={}){return{...this.toastrConfig,...t}}_findToast(t){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===t)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(t,r,i,o){return o.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,r,i,o)):this._buildNotification(t,r,i,o)}_buildNotification(t,r,i,o){if(!o.toastComponent)throw new Error("toastComponent required");const c=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&o.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&null!==c)return c;this.previousToastMessage=r;let h=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(h=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const _=this.overlay.create(o.positionClass,this.overlayContainer);this.index=this.index+1;let y=r;r&&o.enableHtml&&(y=this.sanitizer.sanitize(u.q3G.HTML,r));const I=new uq(_),D=new hS(this.index,o,y,i,t,I),L=u.zs3.create({providers:[{provide:hS,useValue:D}],parent:this._injector}),$=new aq(o.toastComponent,L),X=_.attach($,o.newestOnTop);I.componentInstance=X.instance;const ce={toastId:this.index,title:i||"",message:r||"",toastRef:I,onShown:I.afterActivate(),onHidden:I.afterClosed(),onTap:D.onTap(),onAction:D.onAction(),portal:X};return h||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{ce.toastRef.activate()})),this.toasts.push(ce),ce}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(LL),u.LFG(fq),u.LFG(u.zs3),u.LFG(Pl),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const pq={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",toastComponent:(()=>{class n{get displayStyle(){if("inactive"===this.state.value)return"none"}constructor(t,r,i){this.toastrService=t,this.toastPackage=r,this.ngZone=i,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(o=>{this.duplicatesCount=o})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&"extendedTimeOut"!==this.options.disableTimeOut&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),r)):this.timeout=setTimeout(()=>t(),r)}outsideInterval(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),r)):this.intervalId=setInterval(()=>t(),r)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Ap),u.Y36(hS),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,r){1&t&&u.NdJ("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&t&&(u.d8E("@flyInOut",r.state),u.Tol(r.toastClasses),u.Udp("display",r.displayStyle))},attrs:kL,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(t,r){1&t&&(u.YNc(0,Kz,3,0,"button",0),u.YNc(1,Qz,3,5,"div",1),u.YNc(2,Jz,1,3,"div",2),u.YNc(3,Xz,2,4,"div",3),u.YNc(4,eq,2,2,"div",4)),2&t&&(u.Q6J("ngIf",r.options.closeButton),u.xp6(1),u.Q6J("ngIf",r.title),u.xp6(1),u.Q6J("ngIf",r.message&&r.options.enableHtml),u.xp6(1),u.Q6J("ngIf",r.message&&!r.options.enableHtml),u.xp6(1),u.Q6J("ngIf",r.options.progressBar))},dependencies:[ci],encapsulation:2,data:{animation:[Wz("flyInOut",[cR("inactive",DC({opacity:0})),cR("active",DC({opacity:1})),cR("removed",DC({opacity:0})),RL("inactive => active",xL("{{ easeTime }}ms {{ easing }}")),RL("active => removed",xL("{{ easeTime }}ms {{ easing }}"))])]}}),n})()};let gq=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[{provide:LL,useValue:{default:pq,config:t}}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[cu]}),n})();function mq(n,e){1&n&&(u.TgZ(0,"span"),u._uU(1,"*please enter yor valide email address"),u.qZA())}function _q(n,e){1&n&&(u.TgZ(0,"span"),u._uU(1,"*Please enter Password"),u.qZA())}let VL=(()=>{class n{get email(){return this.loginform.get("email")}get password(){return this.loginform.get("password")}constructor(t,r,i){this.authService=t,this.toster=r,this.router=i,this.userDetail=new AF,this.loginform=new qm({email:new Li(null,ys.required),password:new Li(null,ys.required)})}login(){console.log(this.userDetail.email,this.userDetail.password),this.authService.validate(this.userDetail.email,this.userDetail.password).subscribe({next:this.handleSuccess.bind(this),error:this.handleError.bind(this)})}handleSuccess(t){let r=t.map(i=>({id:i.payload.doc.id,...i.payload.doc.data()}));if(r&&r.length>0){let i=r.shift();localStorage.setItem("displayName",i.displayName),localStorage.setItem("loggedInUserId",i.id),localStorage.setItem("isAdmin",i.isAdmin?"true":"false"),this.toster.success("Login successfully"),this.router.navigate(["/userproduct"])}else this.toster.error("In-valid credentials..!")}handleError(t){this.toster.error("In-valid credentials..!")}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(bp),u.Y36(Ap),u.Y36(wr))},n.\u0275cmp=u.Xpm({type:n,selectors:[["login"]],decls:29,vars:6,consts:[[2,"width","100%","margin-top","30px"],[2,"float","left","width","50%"],["src","assets/login-page-5000918-4165667.webp",2,"width","300px","margin-left","300px"],[2,"float","right","width","50%"],[1,"card",2,"margin-top","20px","padding","20px","margin-left","30px","box-shadow","dimgray","margin-right","20px","width","80%","margin","auto"],[2,"box-shadow","lightblue"],[3,"formGroup"],[1,"mb-3"],[4,"ngIf"],["name","email","for","exampleFormControlInput1",1,"form-label"],["name","email","type","email","id","exampleFormControlInput1","placeholder","Mail","formControlName","email","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","exampleFormControlTextarea1",1,"form-label"],["name","password","type","password","id","exampleFormControlInput1","placeholder","enter password","formControlName","password","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","button",2,"background-color","green","width","100%","color","white",3,"disabled","click"],["href","registration",1,"icon-link"],["aria-hidden","true",1,"bi"],[0,"xlink","href","#arrow-right"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div",1),u._UZ(2,"img",2),u.qZA(),u.TgZ(3,"div",3)(4,"div")(5,"div",4)(6,"div",5)(7,"h2"),u._uU(8,"SingIn"),u.qZA()(),u.TgZ(9,"form",6)(10,"div",7),u.YNc(11,mq,2,0,"span",8),u.TgZ(12,"label",9),u._uU(13,"Email address"),u.qZA(),u.TgZ(14,"input",10),u.NdJ("ngModelChange",function(o){return r.userDetail.email=o}),u.qZA()(),u.TgZ(15,"div",7)(16,"label",11),u._uU(17,"Password"),u.qZA(),u.YNc(18,_q,2,0,"span",8),u.TgZ(19,"input",12),u.NdJ("ngModelChange",function(o){return r.userDetail.password=o}),u.qZA()(),u.TgZ(20,"div")(21,"button",13),u.NdJ("click",function(){return r.login()}),u._uU(22,"Sing-in "),u.qZA()()(),u.TgZ(23,"div"),u._uU(24,"if you new account "),u.TgZ(25,"a",14),u._uU(26," Registration Now "),u.O4$(),u.TgZ(27,"svg",15),u._UZ(28,"use",16),u.qZA()()()()()()()),2&t&&(u.xp6(9),u.Q6J("formGroup",r.loginform),u.xp6(2),u.Q6J("ngIf",(null==r.email?null:r.email.touched)&&(null==r.email?null:r.email.invalid)),u.xp6(3),u.Q6J("ngModel",r.userDetail.email),u.xp6(4),u.Q6J("ngIf",(null==r.password?null:r.password.touched)&&(null==r.password?null:r.password.invalid)),u.xp6(1),u.Q6J("ngModel",r.userDetail.password),u.xp6(2),u.Q6J("disabled",r.loginform.invalid))},dependencies:[ci,jv,Xd,zm,Uv,dS,Hv,bC],styles:[".ng-touched.ng-invalid[_ngcontent-%COMP%]{border-color:red!important}body[_ngcontent-%COMP%]{background-color:#f2f7fb}.login-block[_ngcontent-%COMP%]{margin:auto;min-height:85.6vh}.login-block[_ngcontent-%COMP%]   .auth-box[_ngcontent-%COMP%]{margin:20px auto 0;max-width:450px!important}.card[_ngcontent-%COMP%]{border-radius:5px;box-shadow:0 0 5px #2b2b2b1a,0 11px 6px -7px #2b2b2b1a;border:none;margin-bottom:30px;transition:all .3s ease-in-out;background-color:#fff}.card[_ngcontent-%COMP%]   .card-block[_ngcontent-%COMP%]{padding:1.25rem}.f-80[_ngcontent-%COMP%]{font-size:80px}.form-group[_ngcontent-%COMP%]{margin-bottom:1.25em}.form-material[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{display:inline-block;height:43px;width:100%;border:none;border-radius:0;font-size:16px;font-weight:400;padding:9px;background-color:transparent;box-shadow:none;border-bottom:1px solid #ccc}.btn-primary[_ngcontent-%COMP%]{background-color:#4099ff;border-color:#4099ff;color:#fff;cursor:pointer;transition:all ease-in .3s}.btn[_ngcontent-%COMP%]{border-radius:2px;text-transform:capitalize;font-size:15px;padding:10px 19px;cursor:pointer}.m-b-20[_ngcontent-%COMP%]{margin-bottom:20px}.btn-md[_ngcontent-%COMP%]{padding:10px 16px;font-size:15px;line-height:23px}.heading[_ngcontent-%COMP%]{font-size:21px}#infoMessage[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:red!important}.btn-google[_ngcontent-%COMP%]{color:#545454;background-color:#fff;box-shadow:0 1px 2px 1px #ddd}.or-container[_ngcontent-%COMP%]{align-items:center;color:#ccc;display:flex;margin:25px 0}.line-separator[_ngcontent-%COMP%]{background-color:#ccc;flex-grow:5;height:1px}.or-label[_ngcontent-%COMP%]{flex-grow:1;margin:0 15px;text-align:center}.bg-footer[_ngcontent-%COMP%]{background-color:green}"]}),n})();class hR{}let fR=(()=>{class n{constructor(t){this.fireStore=t}create(t){return this.fireStore.collection("products").add({...t})}read(t,r=""){return t&&r?this.fireStore.collection("products",i=>i.where("category","==",r).orderBy("title").startAt(t).endAt(`${t}\uf8ff`)).snapshotChanges():r?this.fireStore.collection("products",i=>i.where("category","==",r)).snapshotChanges():t?this.fireStore.collection("products",i=>i.orderBy("title").startAt(t).endAt(`${t}\uf8ff`)).snapshotChanges():this.fireStore.collection("products").snapshotChanges()}update(t,r){return this.fireStore.doc("products/"+t).update({...r})}delete(t){return this.fireStore.doc("products/"+t).delete()}getById(t){return this.fireStore.doc("products/"+t).valueChanges()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(TE))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),fS=(()=>{class n{constructor(t){this.firestore=t}create(t){return this.firestore.collection("category").add({...t})}read(){return this.firestore.collection("category").snapshotChanges()}update(t,r){return this.firestore.doc("category/"+t).update({...r})}delete(t){return this.firestore.doc("category/"+t).delete()}getById(t){return this.firestore.doc("category/"+t).valueChanges()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(TE))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function yq(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"a",12),u.NdJ("keyup.enter",function(){u.CHM(t),u.oxw(3);const i=u.MAs(1);return u.KtG(i.previous())})("click",function(){u.CHM(t),u.oxw(3);const i=u.MAs(1);return u.KtG(i.previous())}),u._uU(1),u.TgZ(2,"span",13),u._uU(3),u.qZA()()}if(2&n){const t=u.oxw(3);u.xp6(1),u.hij(" ",t.previousLabel," "),u.xp6(2),u.Oqu(t.screenReaderPageLabel)}}function vq(n,e){if(1&n&&(u.TgZ(0,"span",14),u._uU(1),u.TgZ(2,"span",13),u._uU(3),u.qZA()()),2&n){const t=u.oxw(3);u.xp6(1),u.hij(" ",t.previousLabel," "),u.xp6(2),u.Oqu(t.screenReaderPageLabel)}}function wq(n,e){if(1&n&&(u.TgZ(0,"li",9),u.YNc(1,yq,4,2,"a",10),u.YNc(2,vq,4,2,"span",11),u.qZA()),2&n){u.oxw(2);const t=u.MAs(1);u.ekj("disabled",t.isFirstPage()),u.xp6(1),u.Q6J("ngIf",1<t.getCurrent()),u.xp6(1),u.Q6J("ngIf",t.isFirstPage())}}function Eq(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"a",12),u.NdJ("keyup.enter",function(){u.CHM(t);const i=u.oxw().$implicit;u.oxw(2);const o=u.MAs(1);return u.KtG(o.setCurrent(i.value))})("click",function(){u.CHM(t);const i=u.oxw().$implicit;u.oxw(2);const o=u.MAs(1);return u.KtG(o.setCurrent(i.value))}),u.TgZ(1,"span",13),u._uU(2),u.qZA(),u.TgZ(3,"span"),u._uU(4),u.ALo(5,"number"),u.qZA()()}if(2&n){const t=u.oxw().$implicit,r=u.oxw(2);u.xp6(2),u.hij("",r.screenReaderPageLabel," "),u.xp6(2),u.Oqu("..."===t.label?t.label:u.xi3(5,2,t.label,""))}}function Cq(n,e){if(1&n&&(u.ynx(0),u.TgZ(1,"span",16)(2,"span",13),u._uU(3),u.qZA(),u.TgZ(4,"span"),u._uU(5),u.ALo(6,"number"),u.qZA()(),u.BQk()),2&n){const t=u.oxw().$implicit,r=u.oxw(2);u.xp6(3),u.hij("",r.screenReaderCurrentLabel," "),u.xp6(2),u.Oqu("..."===t.label?t.label:u.xi3(6,2,t.label,""))}}function Iq(n,e){if(1&n&&(u.TgZ(0,"li"),u.YNc(1,Eq,6,5,"a",10),u.YNc(2,Cq,7,5,"ng-container",15),u.qZA()),2&n){const t=e.$implicit;u.oxw(2);const r=u.MAs(1);u.ekj("current",r.getCurrent()===t.value)("ellipsis","..."===t.label),u.xp6(1),u.Q6J("ngIf",r.getCurrent()!==t.value),u.xp6(1),u.Q6J("ngIf",r.getCurrent()===t.value)}}function bq(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"a",12),u.NdJ("keyup.enter",function(){u.CHM(t),u.oxw(3);const i=u.MAs(1);return u.KtG(i.next())})("click",function(){u.CHM(t),u.oxw(3);const i=u.MAs(1);return u.KtG(i.next())}),u._uU(1),u.TgZ(2,"span",13),u._uU(3),u.qZA()()}if(2&n){const t=u.oxw(3);u.xp6(1),u.hij(" ",t.nextLabel," "),u.xp6(2),u.Oqu(t.screenReaderPageLabel)}}function Tq(n,e){if(1&n&&(u.TgZ(0,"span",14),u._uU(1),u.TgZ(2,"span",13),u._uU(3),u.qZA()()),2&n){const t=u.oxw(3);u.xp6(1),u.hij(" ",t.nextLabel," "),u.xp6(2),u.Oqu(t.screenReaderPageLabel)}}function Dq(n,e){if(1&n&&(u.TgZ(0,"li",17),u.YNc(1,bq,4,2,"a",10),u.YNc(2,Tq,4,2,"span",11),u.qZA()),2&n){u.oxw(2);const t=u.MAs(1);u.ekj("disabled",t.isLastPage()),u.xp6(1),u.Q6J("ngIf",!t.isLastPage()),u.xp6(1),u.Q6J("ngIf",t.isLastPage())}}function Sq(n,e){if(1&n&&(u.TgZ(0,"ul",4),u.YNc(1,wq,3,4,"li",5),u.TgZ(2,"li",6),u._uU(3),u.qZA(),u.YNc(4,Iq,3,6,"li",7),u.YNc(5,Dq,3,4,"li",8),u.qZA()),2&n){const t=u.oxw(),r=u.MAs(1);u.ekj("responsive",t.responsive),u.xp6(1),u.Q6J("ngIf",t.directionLinks),u.xp6(2),u.AsE(" ",r.getCurrent()," / ",r.getLastPage()," "),u.xp6(1),u.Q6J("ngForOf",r.pages)("ngForTrackBy",t.trackByIndex),u.xp6(1),u.Q6J("ngIf",t.directionLinks)}}class pR{constructor(){this.change=new u.vpe,this.instances={},this.DEFAULT_ID="DEFAULT_PAGINATION_ID"}defaultId(){return this.DEFAULT_ID}register(e){return null==e.id&&(e.id=this.DEFAULT_ID),this.instances[e.id]?this.updateInstance(e):(this.instances[e.id]=e,!0)}updateInstance(e){let t=!1;for(let r in this.instances[e.id])e[r]!==this.instances[e.id][r]&&(this.instances[e.id][r]=e[r],t=!0);return t}getCurrentPage(e){return this.instances[e]?this.instances[e].currentPage:1}setCurrentPage(e,t){if(this.instances[e]){let r=this.instances[e];t<=Math.ceil(r.totalItems/r.itemsPerPage)&&1<=t&&(this.instances[e].currentPage=t,this.change.emit(e))}}setTotalItems(e,t){this.instances[e]&&0<=t&&(this.instances[e].totalItems=t,this.change.emit(e))}setItemsPerPage(e,t){this.instances[e]&&(this.instances[e].itemsPerPage=t,this.change.emit(e))}getInstance(e=this.DEFAULT_ID){return this.instances[e]?this.clone(this.instances[e]):{}}clone(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}}const Aq=Number.MAX_SAFE_INTEGER;let UL=(()=>{class n{constructor(t){this.service=t,this.state={}}transform(t,r){if(!(t instanceof Array)){let D=r.id||this.service.defaultId();return this.state[D]?this.state[D].slice:t}let h,_,i=r.totalItems&&r.totalItems!==t.length,o=this.createInstance(t,r),c=o.id,y=o.itemsPerPage,I=this.service.register(o);if(!i&&t instanceof Array){if(y=+y||Aq,h=(o.currentPage-1)*y,_=h+y,this.stateIsIdentical(c,t,h,_))return this.state[c].slice;{let R=t.slice(h,_);return this.saveState(c,t,R,h,_),this.service.change.emit(c),R}}return I&&this.service.change.emit(c),this.saveState(c,t,t,h,_),t}createInstance(t,r){return this.checkConfig(r),{id:null!=r.id?r.id:this.service.defaultId(),itemsPerPage:+r.itemsPerPage||0,currentPage:+r.currentPage||1,totalItems:+r.totalItems||t.length}}checkConfig(t){const i=["itemsPerPage","currentPage"].filter(o=>!(o in t));if(0<i.length)throw new Error(`PaginatePipe: Argument is missing the following required properties: ${i.join(", ")}`)}saveState(t,r,i,o,c){this.state[t]={collection:r,size:r.length,slice:i,start:o,end:c}}stateIsIdentical(t,r,i,o){let c=this.state[t];return!(!c||c.size!==r.length||c.start!==i||c.end!==o)&&c.slice.every((_,y)=>_===r[i+y])}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(pR,16))},n.\u0275pipe=u.Yjl({name:"paginate",type:n,pure:!1}),n})(),Mq=(()=>{class n{constructor(t,r){this.service=t,this.changeDetectorRef=r,this.maxSize=7,this.pageChange=new u.vpe,this.pageBoundsCorrection=new u.vpe,this.pages=[],this.changeSub=this.service.change.subscribe(i=>{this.id===i&&(this.updatePageLinks(),this.changeDetectorRef.markForCheck(),this.changeDetectorRef.detectChanges())})}ngOnInit(){void 0===this.id&&(this.id=this.service.defaultId()),this.updatePageLinks()}ngOnChanges(t){this.updatePageLinks()}ngOnDestroy(){this.changeSub.unsubscribe()}previous(){this.checkValidId(),this.setCurrent(this.getCurrent()-1)}next(){this.checkValidId(),this.setCurrent(this.getCurrent()+1)}isFirstPage(){return 1===this.getCurrent()}isLastPage(){return this.getLastPage()===this.getCurrent()}setCurrent(t){this.pageChange.emit(t)}getCurrent(){return this.service.getCurrentPage(this.id)}getLastPage(){let t=this.service.getInstance(this.id);return t.totalItems<1?1:Math.ceil(t.totalItems/t.itemsPerPage)}getTotalItems(){return this.service.getInstance(this.id).totalItems}checkValidId(){null==this.service.getInstance(this.id).id&&console.warn(`PaginationControlsDirective: the specified id "${this.id}" does not match any registered PaginationInstance`)}updatePageLinks(){let t=this.service.getInstance(this.id);const r=this.outOfBoundCorrection(t);r!==t.currentPage?setTimeout(()=>{this.pageBoundsCorrection.emit(r),this.pages=this.createPageArray(t.currentPage,t.itemsPerPage,t.totalItems,this.maxSize)}):this.pages=this.createPageArray(t.currentPage,t.itemsPerPage,t.totalItems,this.maxSize)}outOfBoundCorrection(t){const r=Math.ceil(t.totalItems/t.itemsPerPage);return r<t.currentPage&&0<r?r:t.currentPage<1?1:t.currentPage}createPageArray(t,r,i,o){o=+o;let c=[];const h=Math.max(Math.ceil(i/r),1),_=Math.ceil(o/2),y=t<=_,I=h-_<t,D=!y&&!I;let R=o<h,L=1;for(;L<=h&&L<=o;){let $,X=this.calculatePageNumber(L,t,o,h);$=R&&(2===L&&(D||I)||L===o-1&&(D||y))?"...":X,c.push({label:$,value:X}),L++}return c}calculatePageNumber(t,r,i,o){let c=Math.ceil(i/2);return t===i?o:1===t?t:i<o?o-c<r?o-i+t:c<r?r-c+t:t:t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(pR),u.Y36(u.sBO))},n.\u0275dir=u.lG2({type:n,selectors:[["pagination-template"],["","pagination-template",""]],inputs:{id:"id",maxSize:"maxSize"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},exportAs:["paginationApi"],features:[u.TTD]}),n})();function gR(n){return!!n&&"false"!==n}let BL=(()=>{class n{constructor(){this.maxSize=7,this.previousLabel="Previous",this.nextLabel="Next",this.screenReaderPaginationLabel="Pagination",this.screenReaderPageLabel="page",this.screenReaderCurrentLabel="You're on page",this.pageChange=new u.vpe,this.pageBoundsCorrection=new u.vpe,this._directionLinks=!0,this._autoHide=!1,this._responsive=!1}get directionLinks(){return this._directionLinks}set directionLinks(t){this._directionLinks=gR(t)}get autoHide(){return this._autoHide}set autoHide(t){this._autoHide=gR(t)}get responsive(){return this._responsive}set responsive(t){this._responsive=gR(t)}trackByIndex(t){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["pagination-controls"]],inputs:{id:"id",maxSize:"maxSize",directionLinks:"directionLinks",autoHide:"autoHide",responsive:"responsive",previousLabel:"previousLabel",nextLabel:"nextLabel",screenReaderPaginationLabel:"screenReaderPaginationLabel",screenReaderPageLabel:"screenReaderPageLabel",screenReaderCurrentLabel:"screenReaderCurrentLabel"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},decls:4,vars:4,consts:[[3,"id","maxSize","pageChange","pageBoundsCorrection"],["p","paginationApi"],["role","navigation"],["class","ngx-pagination",3,"responsive",4,"ngIf"],[1,"ngx-pagination"],["class","pagination-previous",3,"disabled",4,"ngIf"],[1,"small-screen"],[3,"current","ellipsis",4,"ngFor","ngForOf","ngForTrackBy"],["class","pagination-next",3,"disabled",4,"ngIf"],[1,"pagination-previous"],["tabindex","0",3,"keyup.enter","click",4,"ngIf"],["aria-disabled","true",4,"ngIf"],["tabindex","0",3,"keyup.enter","click"],[1,"show-for-sr"],["aria-disabled","true"],[4,"ngIf"],["aria-live","polite"],[1,"pagination-next"]],template:function(t,r){if(1&t&&(u.TgZ(0,"pagination-template",0,1),u.NdJ("pageChange",function(o){return r.pageChange.emit(o)})("pageBoundsCorrection",function(o){return r.pageBoundsCorrection.emit(o)}),u.TgZ(2,"nav",2),u.YNc(3,Sq,6,8,"ul",3),u.qZA()()),2&t){const i=u.MAs(1);u.Q6J("id",r.id)("maxSize",r.maxSize),u.xp6(2),u.uIk("aria-label",r.screenReaderPaginationLabel),u.xp6(1),u.Q6J("ngIf",!(r.autoHide&&i.pages.length<=1))}},dependencies:[Mq,ci,Ir,Ac],styles:['.ngx-pagination{margin-left:0;margin-bottom:1rem}.ngx-pagination:before,.ngx-pagination:after{content:" ";display:table}.ngx-pagination:after{clear:both}.ngx-pagination li{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;margin-right:.0625rem;border-radius:0}.ngx-pagination li{display:inline-block}.ngx-pagination a,.ngx-pagination button{color:#0a0a0a;display:block;padding:.1875rem .625rem;border-radius:0}.ngx-pagination a:hover,.ngx-pagination button:hover{background:#e6e6e6}.ngx-pagination .current{padding:.1875rem .625rem;background:#2199e8;color:#fefefe;cursor:default}.ngx-pagination .disabled{padding:.1875rem .625rem;color:#cacaca;cursor:default}.ngx-pagination .disabled:hover{background:transparent}.ngx-pagination a,.ngx-pagination button{cursor:pointer}.ngx-pagination .pagination-previous a:before,.ngx-pagination .pagination-previous.disabled:before{content:"\\ab";display:inline-block;margin-right:.5rem}.ngx-pagination .pagination-next a:after,.ngx-pagination .pagination-next.disabled:after{content:"\\bb";display:inline-block;margin-left:.5rem}.ngx-pagination .show-for-sr{position:absolute!important;width:1px;height:1px;overflow:hidden;clip:rect(0,0,0,0)}.ngx-pagination .small-screen{display:none}@media screen and (max-width: 601px){.ngx-pagination.responsive .small-screen{display:inline-block}.ngx-pagination.responsive li:not(.small-screen):not(.pagination-previous):not(.pagination-next){display:none}}\n'],encapsulation:2,changeDetection:0}),n})(),xq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[pR],imports:[[cu]]}),n})();function Nq(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"tr")(1,"td"),u._uU(2),u.qZA(),u.TgZ(3,"td"),u._uU(4),u.qZA(),u.TgZ(5,"td"),u._uU(6),u.ALo(7,"currency"),u.qZA(),u.TgZ(8,"td"),u._uU(9),u.qZA(),u.TgZ(10,"td"),u._UZ(11,"img",29),u.qZA(),u.TgZ(12,"td")(13,"button",30),u.NdJ("click",function(){const o=u.CHM(t).$implicit,c=u.oxw();return u.KtG(c.editeProduct(o))}),u._uU(14,"Edite"),u.qZA(),u._uU(15," \xa0 "),u.TgZ(16,"button",31),u.NdJ("click",function(){const o=u.CHM(t).$implicit,c=u.oxw();return u.KtG(c.deleteProduct(o.id))}),u._uU(17,"Delete "),u.qZA()()()}if(2&n){const t=e.$implicit,r=e.index;u.xp6(2),u.Oqu(r+1),u.xp6(2),u.Oqu(t.title),u.xp6(2),u.Oqu(u.xi3(7,5,t.price,"INR")),u.xp6(3),u.Oqu(t.category),u.xp6(2),u.s9C("src",t.imageUrl,u.LSH)}}function Rq(n,e){if(1&n&&(u.TgZ(0,"option",32),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.Q6J("value",t.id),u.xp6(1),u.hij(" ",t.name," ")}}const Pq=function(n){return{itemsPerPage:5,currentPage:n}};let Oq=(()=>{class n{constructor(t,r,i,o){this.productService=t,this.toaster=r,this.router=i,this.categoryService=o,this.currunPage=1,this.productform=new qm({title:new Li(null,ys.required),price:new Li(null,ys.required),imageUrl:new Li(null,ys.required),category:new Li(null,ys.required)}),this.modeleHeader="",this.products=[],this.categories=[],this.product=new hR,this.page=1,this.pageSize=4,this.showLoader=!1}addProduct(){this.modeleHeader="Add product",this.product=new hR}editeProduct(t){this.modeleHeader="Edite product",this.product=t}deleteProduct(t){this.productService.delete(t).then(r=>{this.toaster.success("delete success fully.....!")}).catch(r=>{this.toaster.error("un-handeles exception occured...!")})}saveProduct(){this.product.id?this.productService.update(this.product.id,this.product).then(t=>{this.toaster.success("update successfully....!"),this.router.navigate(["/category"])}).catch(t=>{this.toaster.error("un-handeles exception occured...!")}):this.productService.create(this.product).then(t=>{this.toaster.success("product add successfully....!")}).catch(t=>{this.toaster.error("un-handeles exception occured...!")})}ngOnInit(){this.loadProducts(),this.loadCategory()}loadProducts(){this.showLoader=!0,this.productService.read(this.searchTerm).subscribe(t=>{this.products=t.map(r=>({id:r.payload.doc.id,...r.payload.doc.data()})),this.showLoader=!1})}loadCategory(){this.categoryService.read().subscribe(t=>{this.categories=t.map(r=>({id:r.payload.doc.id,...r.payload.doc.data()}))})}filterData(){this.loadProducts()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(fR),u.Y36(Ap),u.Y36(wr),u.Y36(fS))},n.\u0275cmp=u.Xpm({type:n,selectors:[["products"]],decls:55,vars:14,consts:[[1,"shadow-none","p-3","mb-5","bg-body-tertiary","rounded",2,"width","100%"],[1,"row"],[1,"col-md-12"],[1,"mb-3","mt-3",2,"text-align","right","margin-right","1rem !important"],["data-bs-toggle","modal","data-bs-target","#productModal",1,"btn","btn-primary",3,"click"],[1,"form-group","form-inline",2,"margin","0rem 1rem 1rem 1rem !important"],["type","text","placeholder","Search product...","name","searchTerm",1,"form-control","ml-2",3,"ngModel","ngModelChange","keyup"],[1,"table"],[4,"ngFor","ngForOf"],["colspan","6"],[3,"pageChange"],["id","productModal","tabindex","-1","aria-labelledby","productModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","productModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"componentStyle",2,"padding","10px"],[3,"formGroup"],[1,"mb-3"],["type","text","name","title","placeholder","title","formControlName","title",1,"form-control",3,"ngModel","ngModelChange"],["type","number","formControlName","price","name","price","placeholder","Price",1,"form-control",3,"ngModel","ngModelChange"],["formControlName","category","aria-label",".form-select-lg example","placeholder","title","aria-placeholder","Category","name","category",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","imageUrl","type","imageUrl","name","imageUrl","placeholder","Enter the imageUrl",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["data-bs-target","#productModal","data-bs-dismiss","modal","data-bs-toggle","model","type","button",1,"btn","btn-primary",3,"click"],["width","30","height","30",1,"rounded-circle",3,"src"],["data-bs-toggle","modal","data-bs-target","#productModal",1,"btn","btn-secondary",3,"click"],[1,"btn","btn-danger",3,"click"],[3,"value"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),u.NdJ("click",function(){return r.addProduct()}),u._uU(5,"New Product"),u.qZA()()()(),u.TgZ(6,"div",5)(7,"input",6),u.NdJ("ngModelChange",function(o){return r.searchTerm=o})("keyup",function(){return r.filterData()}),u.qZA()(),u.TgZ(8,"div")(9,"div")(10,"table",7)(11,"thead")(12,"tr")(13,"th"),u._uU(14,"#S.No"),u.qZA(),u.TgZ(15,"th"),u._uU(16,"Title"),u.qZA(),u.TgZ(17,"th"),u._uU(18,"Price"),u.qZA(),u.TgZ(19,"th"),u._uU(20,"Category"),u.qZA(),u.TgZ(21,"th"),u._uU(22,"ImgUrl"),u.qZA(),u.TgZ(23,"th"),u._uU(24,"Action(s)"),u.qZA()()(),u.TgZ(25,"tbody"),u.YNc(26,Nq,18,8,"tr",8),u.ALo(27,"paginate"),u.TgZ(28,"tr")(29,"td",9)(30,"pagination-controls",10),u.NdJ("pageChange",function(o){return r.currunPage=o}),u.qZA()()()()()()(),u.TgZ(31,"div",11)(32,"div",12)(33,"div",13)(34,"div",14)(35,"h1",15),u._uU(36),u.qZA(),u._UZ(37,"button",16),u.qZA(),u.TgZ(38,"div",17)(39,"div",18)(40,"form",19)(41,"div",20)(42,"input",21),u.NdJ("ngModelChange",function(o){return r.product.title=o}),u.qZA()(),u.TgZ(43,"div",20)(44,"input",22),u.NdJ("ngModelChange",function(o){return r.product.price=o}),u.qZA()(),u.TgZ(45,"div",20)(46,"select",23),u.NdJ("ngModelChange",function(o){return r.product.category=o}),u.YNc(47,Rq,2,2,"option",24),u.qZA()(),u.TgZ(48,"div",20)(49,"input",25),u.NdJ("ngModelChange",function(o){return r.product.imageUrl=o}),u.qZA()()()()(),u.TgZ(50,"div",26)(51,"button",27),u._uU(52,"Close"),u.qZA(),u.TgZ(53,"button",28),u.NdJ("click",function(){return r.saveProduct()}),u._uU(54,"Save changes"),u.qZA()()()()()()),2&t&&(u.xp6(7),u.Q6J("ngModel",r.searchTerm),u.xp6(19),u.Q6J("ngForOf",u.xi3(27,9,r.products,u.VKq(12,Pq,r.currunPage))),u.xp6(10),u.Oqu(r.modeleHeader),u.xp6(4),u.Q6J("formGroup",r.productform),u.xp6(2),u.Q6J("ngModel",r.product.title),u.xp6(2),u.Q6J("ngModel",r.product.price),u.xp6(2),u.Q6J("ngModel",r.product.category),u.xp6(1),u.Q6J("ngForOf",r.categories),u.xp6(2),u.Q6J("ngModel",r.product.imageUrl))},dependencies:[Ir,jv,aR,uR,Xd,rR,TC,zm,Uv,$v,Hv,bC,BL,bs,UL],styles:[".table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:bottom;border-bottom:1px solid #dee2e6}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:500}"]}),n})();function kq(n,e){1&n&&(u.TgZ(0,"span"),u._uU(1," * please enter valide Email"),u.qZA())}function Fq(n,e){1&n&&(u.TgZ(0,"span"),u._uU(1,"* please enter firatName"),u.qZA())}function Lq(n,e){1&n&&(u.TgZ(0,"span"),u._uU(1,"* please enter last Name"),u.qZA())}function Vq(n,e){1&n&&(u.TgZ(0,"span"),u._uU(1,"* enter Display Name"),u.qZA())}function Uq(n,e){1&n&&(u.TgZ(0,"span"),u._uU(1,"* please enter valide passward"),u.qZA())}function Bq(n,e){1&n&&(u.TgZ(0,"span"),u._uU(1,"* please enter valide passward confirmpassword"),u.qZA())}let $q=(()=>{class n{get email(){return this.singupform.get("email")}get firatName(){return this.singupform.get("firatName")}get lastName(){return this.singupform.get("lastName")}get displayName(){return this.singupform.get("displayName")}get password(){return this.singupform.get("password")}get confirmpassword(){return this.singupform.get("confirmpassword")}constructor(t,r,i){this.authService=t,this.toster=r,this.router=i,this.singupform=new qm({email:new Li(null,ys.required),firatName:new Li(null,ys.required),lastName:new Li(null,ys.required),displayName:new Li(null,ys.required),password:new Li(null,ys.required),confirmpassword:new Li(null,ys.required)}),this.user=new AF}register(){this.authService.register(this.user).then(t=>{this.toster.success("Registration successfully....!"),this.router.navigate(["/login"])}).catch(t=>{this.toster.error("Internal server error..!")})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(bp),u.Y36(Ap),u.Y36(wr))},n.\u0275cmp=u.Xpm({type:n,selectors:[["registration"]],decls:36,vars:13,consts:[[2,"width","100%"],[2,"float","left","width","50%"],["src","assets/registration.img.jpg",2,"width","700px","height","300px","margin-top","30px"],[2,"float","right","width","50%"],[1,"card","componentStyle",2,"padding","20px","margin-left","50px","margin-top","10px"],[2,"margin-bottom","20px"],[1,"form-signin",3,"formGroup"],[1,"mb-3"],[4,"ngIf"],["type","email","name","email","placeholder","Email Address","formControlName","email",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","firatName","placeholder","first Name","formControlName","firatName",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","lastName","placeholder","Last Name","formControlName","lastName",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","displayName","placeholder","Display Name","formControlName","displayName",1,"form-control",3,"ngModel","ngModelChange"],["type","password","name","password","placeholder","password","formControlName","password",1,"form-control",3,"ngModel","ngModelChange"],["type","password","name","confirmpassword","placeholder","Confirm password","formControlName","password","view","passward",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",2,"background-color","green","width","100%","color","white",3,"click"],["href","login",1,"icon-link","icon-link-hover"],["aria-hidden","true",1,"bi"],[0,"xlink","href","#arrow-right"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div",1),u._UZ(2,"img",2),u.qZA(),u.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"b"),u._uU(7," Sing Up"),u.qZA()(),u.TgZ(8,"form",6)(9,"div",7),u.YNc(10,kq,2,0,"span",8),u.TgZ(11,"input",9),u.NdJ("ngModelChange",function(o){return r.user.email=o}),u.qZA()(),u.TgZ(12,"div",7),u.YNc(13,Fq,2,0,"span",8),u.TgZ(14,"input",10),u.NdJ("ngModelChange",function(o){return r.user.firstName=o}),u.qZA()(),u.TgZ(15,"div",7),u.YNc(16,Lq,2,0,"span",8),u.TgZ(17,"input",11),u.NdJ("ngModelChange",function(o){return r.user.lastName=o}),u.qZA()(),u.TgZ(18,"div",7),u.YNc(19,Vq,2,0,"span",8),u.TgZ(20,"input",12),u.NdJ("ngModelChange",function(o){return r.user.displayName=o}),u.qZA()(),u.TgZ(21,"div",7),u.YNc(22,Uq,2,0,"span",8),u.TgZ(23,"input",13),u.NdJ("ngModelChange",function(o){return r.user.password=o}),u.qZA()(),u.TgZ(24,"div",7),u.YNc(25,Bq,2,0,"span",8),u.TgZ(26,"input",14),u.NdJ("ngModelChange",function(o){return r.user.password=o}),u.qZA()(),u.TgZ(27,"div")(28,"button",15),u.NdJ("click",function(){return r.register()}),u._uU(29," Sing up"),u.qZA()(),u.TgZ(30,"div"),u._uU(31," if you have a account please "),u.TgZ(32,"a",16),u._uU(33," Login Now "),u.O4$(),u.TgZ(34,"svg",17),u._UZ(35,"use",18),u.qZA()()()()()()()),2&t&&(u.xp6(8),u.Q6J("formGroup",r.singupform),u.xp6(2),u.Q6J("ngIf",(null==r.email?null:r.email.touched)&&(null==r.email?null:r.email.invalid)),u.xp6(1),u.Q6J("ngModel",r.user.email),u.xp6(2),u.Q6J("ngIf",(null==r.firatName?null:r.firatName.touched)&&(null==r.firatName?null:r.firatName.invalid)),u.xp6(1),u.Q6J("ngModel",r.user.firstName),u.xp6(2),u.Q6J("ngIf",(null==r.lastName?null:r.lastName.touched)&&(null==r.lastName?null:r.lastName.invalid)),u.xp6(1),u.Q6J("ngModel",r.user.lastName),u.xp6(2),u.Q6J("ngIf",(null==r.displayName?null:r.displayName.touched)&&(null==r.displayName?null:r.displayName.invalid)),u.xp6(1),u.Q6J("ngModel",r.user.displayName),u.xp6(2),u.Q6J("ngIf",(null==r.password?null:r.password.touched)&&(null==r.password?null:r.password.invalid)),u.xp6(1),u.Q6J("ngModel",r.user.password),u.xp6(2),u.Q6J("ngIf",(null==r.confirmpassword?null:r.confirmpassword.touched)&&(null==r.confirmpassword?null:r.confirmpassword.invalid)),u.xp6(1),u.Q6J("ngModel",r.user.password))},dependencies:[ci,jv,Xd,zm,Uv,Hv,bC],styles:[".ng-touched.ng-invalid[_ngcontent-%COMP%]{border-color:red!important}body[_ngcontent-%COMP%]{background-color:#f2f7fb}.login-block[_ngcontent-%COMP%]{margin:auto;min-height:85.6vh}.login-block[_ngcontent-%COMP%]   .auth-box[_ngcontent-%COMP%]{margin:20px auto 0;max-width:450px!important}.card[_ngcontent-%COMP%]{border-radius:5px;box-shadow:0 0 5px #2b2b2b1a,0 11px 6px -7px #2b2b2b1a;border:none;margin-bottom:30px;transition:all .3s ease-in-out;background-color:#fff}.card[_ngcontent-%COMP%]   .card-block[_ngcontent-%COMP%]{padding:1.25rem}.f-80[_ngcontent-%COMP%]{font-size:80px}.form-group[_ngcontent-%COMP%]{margin-bottom:1.25em}.form-material[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{display:inline-block;height:43px;width:100%;border:none;border-radius:0;font-size:16px;font-weight:400;padding:9px;background-color:transparent;box-shadow:none;border-bottom:1px solid #ccc}.btn-primary[_ngcontent-%COMP%]{background-color:#4099ff;border-color:#4099ff;color:#fff;cursor:pointer;transition:all ease-in .3s}.btn[_ngcontent-%COMP%]{border-radius:2px;text-transform:capitalize;font-size:15px;padding:10px 19px;cursor:pointer}.m-b-20[_ngcontent-%COMP%]{margin-bottom:20px}.btn-md[_ngcontent-%COMP%]{padding:10px 16px;font-size:15px;line-height:23px}.heading[_ngcontent-%COMP%]{font-size:21px}#infoMessage[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:red!important}.btn-google[_ngcontent-%COMP%]{color:#545454;background-color:#fff;box-shadow:0 1px 2px 1px #ddd}.or-container[_ngcontent-%COMP%]{align-items:center;color:#ccc;display:flex;margin:25px 0}.line-separator[_ngcontent-%COMP%]{background-color:#ccc;flex-grow:5;height:1px}.or-label[_ngcontent-%COMP%]{flex-grow:1;margin:0 15px;text-align:center}.bg-footer[_ngcontent-%COMP%]{background-color:green}"]}),n})();class $L{}function jq(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"tr",5)(1,"td"),u._uU(2),u.qZA(),u.TgZ(3,"td"),u._uU(4),u.qZA(),u.TgZ(5,"td"),u._uU(6),u.qZA(),u.TgZ(7,"td")(8,"button",20),u.NdJ("click",function(){const o=u.CHM(t).$implicit,c=u.oxw();return u.KtG(c.editeCategory(o))}),u._uU(9,"Edite"),u.qZA(),u._uU(10," \xa0 "),u.TgZ(11,"button",21),u.NdJ("click",function(){const o=u.CHM(t).$implicit,c=u.oxw();return u.KtG(c.deleteCategory(o.id))}),u._uU(12," delete"),u.qZA()()()}if(2&n){const t=e.$implicit,r=e.index;u.xp6(2),u.Oqu(r+1),u.xp6(2),u.Oqu(t.name),u.xp6(2),u.Oqu(t.description)}}let Hq=(()=>{class n{constructor(t,r,i){this.categoryService=t,this.toastr=r,this.router=i,this.modelHeader="",this.categoryes=[],this.category=new $L}ngOnInit(){this.loadData()}loadData(){console.log(this.categoryes),this.categoryService.read().subscribe(t=>{this.categoryes=t.map(r=>({id:r.payload.doc.id,...r.payload.doc.data()}))})}addCategory(){this.modelHeader="Add categoryes",this.category=new $L}editeCategory(t){this.modelHeader="Edite Category",this.category=t}deleteCategory(t){this.categoryService.delete(t).then(r=>({}))}saveCategory(){this.category.id?this.categoryService.update(this.category.id,this.category).then(t=>{this.toastr.success("category successfully....!")}).catch(t=>{this.toastr.error("un-handeles exception occured...!")}):this.categoryService.create(this.category).then(t=>{this.toastr.success("Category add successfully....!")}).catch(t=>{this.toastr.error("un-handeles exception occured...!")})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(fS),u.Y36(Ap),u.Y36(wr))},n.\u0275cmp=u.Xpm({type:n,selectors:[["category"]],decls:36,vars:4,consts:[[1,"card","componentStyle"],[1,"col-md-12"],[1,"mb-3","mt-3",2,"text-align","right","margin-right","1rem !important"],["data-bs-toggle","modal","data-bs-target","#categoryModal",1,"btn","btn-primary",3,"click"],[1,"card",2,"margin-left","10px","margin-right","10px","margin-bottom","10px"],[2,"margin-left","5px"],["style","margin-left: 5px;",4,"ngFor","ngForOf"],["id","categoryModal","tabindex","-1","aria-labelledby","categoryModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","categoryModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"mb-3"],["type","text","name","name","id","name","placeholder","Name",1,"form-control",3,"ngModel","ngModelChange"],["name","description","id","","cols","60","rows","4","placeholder","Enter Discription",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["data-bs-target","#productModal","data-bs-toggle","model","type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"click"],["data-bs-toggle","modal","data-bs-target","#categoryModal",1,"btnnn",2,"background-color","blue","border-radius","5px","border","none",3,"click"],[1,"btnnn",2,"background-color","solid red","border-radius","5px","border","none",3,"click"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div")(2,"div",1)(3,"div",2)(4,"button",3),u.NdJ("click",function(){return r.addCategory()}),u._uU(5,"New Category"),u.qZA()()()(),u.TgZ(6,"div",4)(7,"table")(8,"tr",5)(9,"th",5),u._uU(10,"S.No"),u.qZA(),u.TgZ(11,"th"),u._uU(12,"Name"),u.qZA(),u.TgZ(13,"th"),u._uU(14,"Description"),u.qZA(),u.TgZ(15,"th"),u._uU(16,"Action(s)"),u.qZA()(),u.YNc(17,jq,13,3,"tr",6),u.qZA()(),u.TgZ(18,"div",7)(19,"div",8)(20,"div",9)(21,"div",10)(22,"h1",11),u._uU(23),u.qZA(),u._UZ(24,"button",12),u.qZA(),u.TgZ(25,"div",13)(26,"form")(27,"div",14)(28,"input",15),u.NdJ("ngModelChange",function(o){return r.category.name=o}),u.qZA()(),u.TgZ(29,"div",14)(30,"textarea",16),u.NdJ("ngModelChange",function(o){return r.category.description=o}),u.qZA()()()(),u.TgZ(31,"div",17)(32,"button",18),u._uU(33,"Close"),u.qZA(),u.TgZ(34,"button",19),u.NdJ("click",function(){return r.saveCategory()}),u._uU(35,"Save changes"),u.qZA()()()()()()),2&t&&(u.xp6(17),u.Q6J("ngForOf",r.categoryes),u.xp6(6),u.Oqu(r.modelHeader),u.xp6(5),u.Q6J("ngModel",r.category.name),u.xp6(2),u.Q6J("ngModel",r.category.description))},dependencies:[Ir,jv,Xd,zm,Uv,$v,IC],styles:["table[_ngcontent-%COMP%]{font-family:arial,sans-serif;border-collapse:collapse;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{border:1px solid #dddddd;text-align:left;padding:8px}"]}),n})();const Gq_firebaseConfig={apiKey:"AIzaSyAj-bDJcIADwJwhTeAXBEBVpPfk4jhUJXU",authDomain:"e-shoping-8c75f.firebaseapp.com",projectId:"e-shoping-8c75f",storageBucket:"e-shoping-8c75f.appspot.com",messagingSenderId:"776213789244",appId:"1:776213789244:web:71166664c60703dc036139"};function zq(n,e){if(1&n&&(u.TgZ(0,"option",11),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.Q6J("ngValue",t.id),u.xp6(1),u.hij(" ",t.name," ")}}function qq(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",22),u.NdJ("click",function(){u.CHM(t);const i=u.oxw().$implicit,o=u.oxw();return u.KtG(o.addToCart(i))}),u._UZ(1,"i",23),u._uU(2," Add to Cart "),u.qZA()}}function Zq(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",24)(1,"div",25)(2,"button",22),u.NdJ("click",function(){u.CHM(t);const i=u.oxw().$implicit,o=u.oxw();return u.KtG(o.removeItemFromtCart(i))}),u._UZ(3,"i",26),u.qZA()(),u.TgZ(4,"div",27),u._uU(5),u.qZA(),u.TgZ(6,"div",25)(7,"button",22),u.NdJ("click",function(){u.CHM(t);const i=u.oxw().$implicit,o=u.oxw();return u.KtG(o.addToCart(i))}),u._UZ(8,"i",28),u.qZA()()()}if(2&n){const t=u.oxw().$implicit,r=u.oxw();u.xp6(5),u.hij(" ",r.getQuntity(t)," in cart ")}}function Wq(n,e){1&n&&u._UZ(0,"div",29)}function Kq(n,e){if(1&n&&(u.ynx(0),u.TgZ(1,"div",12)(2,"div",13),u._UZ(3,"img",14),u.TgZ(4,"div",15)(5,"h6",16),u._uU(6),u.qZA(),u.TgZ(7,"p",17),u._uU(8),u.ALo(9,"currency"),u.qZA()(),u.TgZ(10,"div",18),u.YNc(11,qq,3,0,"button",19),u.YNc(12,Zq,9,1,"ng-template",null,20,u.W1O),u.qZA()()(),u.YNc(14,Wq,1,0,"div",21),u.BQk()),2&n){const t=e.$implicit,r=e.index,i=u.MAs(13),o=u.oxw();u.xp6(3),u.s9C("alt",t.title),u.Q6J("src",t.imageUrl,u.LSH),u.xp6(3),u.Oqu(t.title),u.xp6(2),u.Oqu(u.xi3(9,7,t.price,"INR")),u.xp6(3),u.Q6J("ngIf",0===o.getQuntity(t))("ngIfElse",i),u.xp6(3),u.Q6J("ngIf",(r+1)%4==0)}}let Yq=(()=>{class n{constructor(t,r,i,o){this.productService=t,this.toasterService=r,this.catagoryService=i,this.shoppingCartSercice=o,this.userproducts=[],this.ueserProduct=new hR,this.categories=[],this.page=1,this.pageSize=4,this.selectCategoris=""}ngOnInit(){this.loadProducts(),this.loadCatagories()}loadProducts(){this.productService.read(this.searchTerm,this.selectCategoris).subscribe(t=>{this.userproducts=t.map(r=>({id:r.payload.doc.id,...r.payload.doc.data()})),console.log(this.userproducts)})}loadCatagories(){this.catagoryService.read().subscribe(t=>{this.categories=t.map(r=>({id:r.payload.doc.id,...r.payload.doc.data()}))})}changeCategory(t){this.selectCategoris=t.target.selectedIndex>0?this.categories[t.target.selectedIndex-1].id:"",this.loadProducts()}addToCart(t){let r=t;r.quantity=1,r.totalPrice=r.quantity*r.price,this.shoppingCartSercice.addItemToCart(r)}removeItemFromtCart(t){let r=t;r.quantity=-1,this.shoppingCartSercice.removeItemFromCart(r)}getQuntity(t){let r=0;return this.shoppingCartSercice.CartItems.filter(i=>i.id===t.id).forEach(i=>{r+=i.quantity}),r}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(fR),u.Y36(Ap),u.Y36(fS),u.Y36(_C))},n.\u0275cmp=u.Xpm({type:n,selectors:[["userproduct"]],decls:13,vars:4,consts:[[1,"card","componentStyle"],[1,"row","filterCard"],[1,"col-md-3"],[1,"form-control",3,"ngModel","change"],["value",""],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col-md-9"],["type","text","placeholder","Search product...","name","searchTerm",1,"form-control","ml-2",3,"ngModel","ngModelChange","keyup"],[1,"col-md-12"],[1,"row","p-3"],[4,"ngFor","ngForOf"],[3,"ngValue"],[1,"col"],[1,"card"],[1,"card-img-top",3,"src","alt"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"card-footer"],["class","btn btn-secondary",3,"click",4,"ngIf","ngIfElse"],["updateQuantity",""],["class","w-100",4,"ngIf"],[1,"btn","btn-secondary",3,"click"],[1,"bi","bi-cart"],[1,"row"],[1,"col-3",2,"display","grid"],[1,"bi","bi-dash-lg"],[1,"col","text-center","quantity"],[1,"bi","bi-plus-lg"],[1,"w-100"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"select",3),u.NdJ("change",function(o){return r.changeCategory(o)}),u.TgZ(4,"option",4),u._uU(5,"All Categories"),u.qZA(),u.YNc(6,zq,2,2,"option",5),u.qZA()(),u.TgZ(7,"div",6)(8,"input",7),u.NdJ("ngModelChange",function(o){return r.searchTerm=o})("keyup",function(){return r.loadProducts()}),u.qZA()(),u.TgZ(9,"div",8),u._UZ(10,"hr"),u.qZA()(),u.TgZ(11,"div",9),u.YNc(12,Kq,15,10,"ng-container",10),u.qZA()()),2&t&&(u.xp6(3),u.Q6J("ngModel",r.selectCategoris),u.xp6(3),u.Q6J("ngForOf",r.categories),u.xp6(2),u.Q6J("ngModel",r.searchTerm),u.xp6(4),u.Q6J("ngForOf",r.userproducts))},dependencies:[Ir,ci,aR,uR,Xd,TC,zm,$v,bs],styles:[".card[_ngcontent-%COMP%]{margin-bottom:30px}.quantity[_ngcontent-%COMP%]{height:37px;line-height:37px;display:grid!important}.card-img-top[_ngcontent-%COMP%]{height:200px}.vertical[_ngcontent-%COMP%]{border-left:3px solid rgb(45,160,168);height:70%;position:absolute;left:50%}.card-footer[_ngcontent-%COMP%]{padding:0;background:#fff;display:grid!important}.card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;text-transform:uppercase}.filterCard[_ngcontent-%COMP%]{padding-top:1rem;padding-left:1rem;padding-right:1rem}"]}),n})();function Qq(n,e){1&n&&(u.TgZ(0,"div",15)(1,"a",16),u._uU(2,"Add Item(s)"),u.qZA()())}function Jq(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",17),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.clearCart())}),u._uU(1,"Clear Shopping Cart"),u.qZA()}}function Xq(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"tr")(1,"td"),u._UZ(2,"div",18),u.qZA(),u.TgZ(3,"td",19),u._uU(4),u.qZA(),u.TgZ(5,"td",19)(6,"div",20)(7,"div",21)(8,"button",22),u.NdJ("click",function(){const o=u.CHM(t).$implicit,c=u.oxw();return u.KtG(c.removeFromCart(o))}),u._UZ(9,"i",23),u.qZA()(),u.TgZ(10,"div",24),u._uU(11),u.qZA(),u.TgZ(12,"div",21)(13,"button",22),u.NdJ("click",function(){const o=u.CHM(t).$implicit,c=u.oxw();return u.KtG(c.addToCart(o))}),u._UZ(14,"i",25),u.qZA()()()(),u.TgZ(15,"td",26),u._uU(16),u.ALo(17,"currency"),u.qZA()()}if(2&n){const t=e.$implicit;u.xp6(2),u.Udp("background-image","url("+t.imageUrl+")"),u.xp6(2),u.hij(" ",t.title," "),u.xp6(7),u.hij(" ",t.quantity," in cart "),u.xp6(5),u.hij(" ",u.Dn7(17,5,t.totalPrice,"INR","symbol")," ")}}function e6(n,e){1&n&&(u.TgZ(0,"div")(1,"a",27),u._UZ(2,"i",28),u._uU(3," Add more item(s)"),u.qZA()())}let t6=(()=>{class n{constructor(t,r){this._cartService=t,this.router=r,this.cartItems=[]}ngOnInit(){this.cartItems=this._cartService.CartItems}clearCart(){this._cartService.clearCartItems(),this.cartItems=this._cartService.CartItems}checkOut(){this.router.navigate(["/check-out"])}addToCart(t){this._cartService.addItemToCart(t),this.cartItems=this._cartService.CartItems}removeFromCart(t){this._cartService.removeItemFromCart(t),this.cartItems=this._cartService.CartItems}getQuantity(t){let r=0;return this._cartService.CartItems.filter(i=>i.id===t.id).forEach(i=>{r+=i.quantity}),r}get totalPrice(){return this._cartService.CartItemsTotal}get totalItemsCount(){return this._cartService.CartItemsCount}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(_C),u.Y36(wr))},n.\u0275cmp=u.Xpm({type:n,selectors:[["shoppin-cart"]],decls:45,vars:11,consts:[[1,"card","componentStyle"],[1,"row","p-3"],[1,"col-md-6",2,"padding","1rem"],[1,"col-md-6"],["style","text-align: right;margin-top : 2rem",4,"ngIf"],[1,"card","m-3"],[1,"card-body"],["class","float-end btn btn-light btn-sm btn-outline-warning",3,"click",4,"ngIf"],[1,"table",2,"margin-bottom","0rem !important"],[1,"text-center",2,"width","250px"],[4,"ngFor","ngForOf"],[1,"text-center"],[4,"ngIf"],[1,"btn","btn-primary",3,"disabled","click"],[1,"bi","bi-cart-check"],[2,"text-align","right","margin-top","2rem"],["routerLink","/userproduct",1,"btn","btn-primary"],[1,"float-end","btn","btn-light","btn-sm","btn-outline-warning",3,"click"],[1,"thumbnail"],[2,"vertical-align","middle"],[1,"row","no-gutters"],[1,"col-2"],[1,"btn","btn-secondary","btn-block",3,"click"],[1,"bi","bi-dash-lg"],[1,"col","text-center","quantity"],[1,"bi","bi-plus-lg"],[1,"text-center",2,"vertical-align","middle"],["routerLink","/userproduct",1,"btn","btn-secondary"],[1,"bi","bi-cart-plus"]],template:function(t,r){1&t&&(u.TgZ(0,"p"),u._uU(1,"shoppin-cart works!"),u.qZA(),u.TgZ(2,"div",0)(3,"div",1)(4,"div",2)(5,"h1"),u._uU(6,"Shopping Cart"),u.qZA()(),u.TgZ(7,"div",3),u.YNc(8,Qq,3,0,"div",4),u.qZA()(),u.TgZ(9,"div",5)(10,"div",6)(11,"p"),u._uU(12),u.YNc(13,Jq,2,0,"button",7),u.qZA(),u._UZ(14,"hr"),u.qZA(),u.TgZ(15,"table",8)(16,"thead")(17,"tr"),u._UZ(18,"th"),u.TgZ(19,"th"),u._uU(20,"Product"),u.qZA(),u.TgZ(21,"th",9),u._uU(22,"Quantity"),u.qZA(),u.TgZ(23,"th",9),u._uU(24,"Price"),u.qZA()()(),u.TgZ(25,"tbody"),u.YNc(26,Xq,18,9,"tr",10),u.qZA(),u.TgZ(27,"tfoot")(28,"tr")(29,"th"),u._uU(30,"Total Amount"),u.qZA(),u._UZ(31,"th")(32,"th"),u.TgZ(33,"th",11),u._uU(34),u.ALo(35,"currency"),u.qZA()(),u.TgZ(36,"tr")(37,"th"),u.YNc(38,e6,4,0,"div",12),u.qZA(),u._UZ(39,"th")(40,"th"),u.TgZ(41,"th",11)(42,"button",13),u.NdJ("click",function(){return r.checkOut()}),u._UZ(43,"i",14),u._uU(44," Check Out"),u.qZA()()()()()()()),2&t&&(u.xp6(8),u.Q6J("ngIf",0==r.totalItemsCount),u.xp6(4),u.hij(" You have ",r.totalItemsCount," items in your shopping cart. "),u.xp6(1),u.Q6J("ngIf",r.totalItemsCount>0),u.xp6(13),u.Q6J("ngForOf",r.cartItems),u.xp6(8),u.Oqu(u.Dn7(35,7,r.totalPrice,"INR","symbol")),u.xp6(4),u.Q6J("ngIf",r.totalItemsCount>0),u.xp6(4),u.Q6J("disabled",0==r.totalItemsCount))},dependencies:[Ir,ci,Hm,bs],styles:[".thumbnail[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:100%;background-size:cover}.card[_ngcontent-%COMP%]{margin-bottom:80px}"]}),n})();function jL(n){return new u.vHH(3e3,!1)}function F6(){return typeof window<"u"&&typeof window.document<"u"}function mR(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Mp(n){switch(n.length){case 0:return new SC;case 1:return n[0];default:return new OL(n)}}function HL(n,e,t,r,i=new Map,o=new Map){const c=[],h=[];let _=-1,y=null;if(r.forEach(I=>{const D=I.get("offset"),R=D==_,L=R&&y||new Map;I.forEach(($,X)=>{let ce=X,qe=$;if("offset"!==X)switch(ce=e.normalizePropertyName(ce,c),qe){case dR:qe=i.get(X);break;case eh:qe=o.get(X);break;default:qe=e.normalizeStyleValue(X,ce,qe,c)}L.set(ce,qe)}),R||h.push(L),y=L,_=D}),c.length)throw function b6(n){return new u.vHH(3502,!1)}();return h}function _R(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&yR(t,"start",n)));break;case"done":n.onDone(()=>r(t&&yR(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&yR(t,"destroy",n)))}}function yR(n,e,t){const o=vR(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),c=n._data;return null!=c&&(o._data=c),o}function vR(n,e,t,r,i="",o=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:o,disabled:!!c}}function Jo(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function GL(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let wR=(n,e)=>!1,zL=(n,e,t)=>[],qL=null;function ER(n){const e=n.parentNode||n.host;return e===qL?null:e}(mR()||typeof Element<"u")&&(F6()?(qL=(()=>document.documentElement)(),wR=(n,e)=>{for(;e;){if(e===n)return!0;e=ER(e)}return!1}):wR=(n,e)=>n.contains(e),zL=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Km=null,ZL=!1;const WL=wR,KL=zL;let YL=(()=>{class n{validateStyleProperty(t){return function V6(n){Km||(Km=function U6(){return typeof document<"u"?document.body:null}()||{},ZL=!!Km.style&&"WebkitAppearance"in Km.style);let e=!0;return Km.style&&!function L6(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Km.style,!e&&ZL&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Km.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return WL(t,r)}getParentElement(t){return ER(t)}query(t,r,i){return KL(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,o,c,h=[],_){return new SC(i,o)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),CR=(()=>{class n{}return n.NOOP=new YL,n})();const B6=1e3,IR="ng-enter",pS="ng-leave",gS="ng-trigger",mS=".ng-trigger",JL="ng-animating",bR=".ng-animating";function th(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:TR(parseFloat(e[1]),e[2])}function TR(n,e){return"s"===e?n*B6:n}function _S(n,e,t){return n.hasOwnProperty("duration")?n:function j6(n,e,t){let i,o=0,c="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return e.push(jL()),{duration:0,delay:0,easing:""};i=TR(parseFloat(h[1]),h[2]);const _=h[3];null!=_&&(o=TR(parseFloat(_),h[4]));const y=h[5];y&&(c=y)}else i=n;if(!t){let h=!1,_=e.length;i<0&&(e.push(function n6(){return new u.vHH(3100,!1)}()),h=!0),o<0&&(e.push(function r6(){return new u.vHH(3101,!1)}()),h=!0),h&&e.splice(_,0,jL())}return{duration:i,delay:o,easing:c}}(n,e,t)}function AC(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function XL(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function xp(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function tV(n,e,t){return t?e+":"+t+";":""}function nV(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=tV(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=tV(0,q6(t),n.style[t]));n.setAttribute("style",e)}function wc(n,e,t){n.style&&(e.forEach((r,i)=>{const o=SR(i);t&&!t.has(i)&&t.set(i,n.style[o]),n.style[o]=r}),mR()&&nV(n))}function Ym(n,e){n.style&&(e.forEach((t,r)=>{const i=SR(r);n.style[i]=""}),mR()&&nV(n))}function MC(n){return Array.isArray(n)?1==n.length?n[0]:NL(n):n}const DR=new RegExp("{{\\s*(.+?)\\s*}}","g");function rV(n){let e=[];if("string"==typeof n){let t;for(;t=DR.exec(n);)e.push(t[1]);DR.lastIndex=0}return e}function xC(n,e,t){const r=n.toString(),i=r.replace(DR,(o,c)=>{let h=e[c];return null==h&&(t.push(function s6(n){return new u.vHH(3003,!1)}()),h=""),h.toString()});return i==r?n:i}function yS(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const z6=/-+([a-z0-9])/g;function SR(n){return n.replace(z6,(...e)=>e[1].toUpperCase())}function q6(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Xo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function o6(n){return new u.vHH(3004,!1)}()}}function iV(n,e){return window.getComputedStyle(n)[e]}const ES="*";function J6(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function X6(n,e,t){if(":"==n[0]){const _=function eZ(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function w6(n){return new u.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof _)return void e.push(_);n=_}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function v6(n){return new u.vHH(3015,!1)}()),e;const i=r[1],o=r[2],c=r[3];e.push(sV(i,c));"<"==o[0]&&!(i==ES&&c==ES)&&e.push(sV(c,i))}(r,t,e)):t.push(n),t}const CS=new Set(["true","1"]),IS=new Set(["false","0"]);function sV(n,e){const t=CS.has(n)||IS.has(n),r=CS.has(e)||IS.has(e);return(i,o)=>{let c=n==ES||n==i,h=e==ES||e==o;return!c&&t&&"boolean"==typeof i&&(c=i?CS.has(n):IS.has(n)),!h&&r&&"boolean"==typeof o&&(h=o?CS.has(e):IS.has(e)),c&&h}}const tZ=new RegExp("s*:selfs*,?","g");function AR(n,e,t,r){return new nZ(n).build(e,t,r)}class nZ{constructor(e){this._driver=e}build(e,t,r){const i=new sZ(t);return this._resetContextStyleTimingState(i),Xo(this,MC(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const o=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function l6(){return new u.vHH(3006,!1)}()),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(t),0==h.type){const _=h,y=_.name;y.toString().split(/\s*,\s*/).forEach(I=>{_.name=I,o.push(this.visitState(_,t))}),_.name=y}else if(1==h.type){const _=this.visitTransition(h,t);r+=_.queryCount,i+=_.depCount,c.push(_)}else t.errors.push(function u6(){return new u.vHH(3007,!1)}())}),{type:7,name:e.name,states:o,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const o=new Set,c=i||{};r.styles.forEach(h=>{h instanceof Map&&h.forEach(_=>{rV(_).forEach(y=>{c.hasOwnProperty(y)||o.add(y)})})}),o.size&&(yS(o.values()),t.errors.push(function c6(n,e){return new u.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Xo(this,MC(e.animation),t);return{type:1,matchers:J6(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Qm(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Xo(this,r,t)),options:Qm(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const o=e.steps.map(c=>{t.currentTime=r;const h=Xo(this,c,t);return i=Math.max(i,t.currentTime),h});return t.currentTime=i,{type:3,steps:o,options:Qm(e.options)}}visitAnimate(e,t){const r=function aZ(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return MR(_S(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=MR(0,0,"");return o.dynamic=!0,o.strValue=t,o}const i=_S(t,e);return MR(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,o=e.styles?e.styles:DC({});if(5==o.type)i=this.visitKeyframes(o,t);else{let c=e.styles,h=!1;if(!c){h=!0;const y={};r.easing&&(y.easing=r.easing),c=DC(y)}t.currentTime+=r.duration+r.delay;const _=this.visitStyle(c,t);_.isEmptyStep=h,i=_}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let h of i)"string"==typeof h?h===eh?r.push(h):t.errors.push(new u.vHH(3002,!1)):r.push(XL(h));let o=!1,c=null;return r.forEach(h=>{if(h instanceof Map&&(h.has("easing")&&(c=h.get("easing"),h.delete("easing")),!o))for(let _ of h.values())if(_.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:r,easing:c,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,o=t.currentTime;r&&o>0&&(o-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&c.forEach((h,_)=>{const y=t.collectedStyles.get(t.currentQuerySelector),I=y.get(_);let D=!0;I&&(o!=i&&o>=I.startTime&&i<=I.endTime&&(t.errors.push(function h6(n,e,t,r,i){return new u.vHH(3010,!1)}()),D=!1),o=I.startTime),D&&y.set(_,{startTime:o,endTime:i}),t.options&&function G6(n,e,t){const r=e.params||{},i=rV(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||t.push(function i6(n){return new u.vHH(3001,!1)}())})}(h,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function f6(){return new u.vHH(3011,!1)}()),r;let o=0;const c=[];let h=!1,_=!1,y=0;const I=e.steps.map(qe=>{const ut=this._makeStyleAst(qe,t);let at=null!=ut.offset?ut.offset:function oZ(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(ut.styles),Et=0;return null!=at&&(o++,Et=ut.offset=at),_=_||Et<0||Et>1,h=h||Et<y,y=Et,c.push(Et),ut});_&&t.errors.push(function p6(){return new u.vHH(3012,!1)}()),h&&t.errors.push(function g6(){return new u.vHH(3200,!1)}());const D=e.steps.length;let R=0;o>0&&o<D?t.errors.push(function m6(){return new u.vHH(3202,!1)}()):0==o&&(R=1/(D-1));const L=D-1,$=t.currentTime,X=t.currentAnimateTimings,ce=X.duration;return I.forEach((qe,ut)=>{const at=R>0?ut==L?1:R*ut:c[ut],Et=at*ce;t.currentTime=$+X.delay+Et,X.duration=Et,this._validateStyleAst(qe,t),qe.offset=at,r.styles.push(qe)}),r}visitReference(e,t){return{type:8,animation:Xo(this,MC(e.animation),t),options:Qm(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Qm(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Qm(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[o,c]=function rZ(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(tZ,"")),n=n.replace(/@\*/g,mS).replace(/@\w+/g,t=>mS+"-"+t.slice(1)).replace(/:animating/g,bR),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+o:o,Jo(t.collectedStyles,t.currentQuerySelector,new Map);const h=Xo(this,MC(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:h,originalSelector:e.selector,options:Qm(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function _6(){return new u.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:_S(e.timings,t.errors,!0);return{type:12,animation:Xo(this,MC(e.animation),t),timings:r,options:null}}}class sZ{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Qm(n){return n?(n=AC(n)).params&&(n.params=function iZ(n){return n?AC(n):null}(n.params)):n={},n}function MR(n,e,t){return{duration:n,delay:e,easing:t}}function xR(n,e,t,r,i,o,c=null,h=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:c,subTimeline:h}}class bS{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const cZ=new RegExp(":enter","g"),hZ=new RegExp(":leave","g");function NR(n,e,t,r,i,o=new Map,c=new Map,h,_,y=[]){return(new fZ).buildKeyframes(n,e,t,r,i,o,c,h,_,y)}class fZ{buildKeyframes(e,t,r,i,o,c,h,_,y,I=[]){y=y||new bS;const D=new RR(e,t,y,i,o,I,[]);D.options=_;const R=_.delay?th(_.delay):0;D.currentTimeline.delayNextStep(R),D.currentTimeline.setStyles([c],null,D.errors,_),Xo(this,r,D);const L=D.timelines.filter($=>$.containsAnimation());if(L.length&&h.size){let $;for(let X=L.length-1;X>=0;X--){const ce=L[X];if(ce.element===t){$=ce;break}}$&&!$.allowOnlyTimelineStyles()&&$.setStyles([h],null,D.errors,_)}return L.length?L.map($=>$.buildKeyframes()):[xR(t,[],[],[],0,R,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),o=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);o!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const o=i?.delay;if(o){const c="number"==typeof o?o:th(xC(o,i?.params??{},t.errors));r.delayNextStep(c)}}}_visitSubInstructions(e,t,r){let o=t.currentTimeline.currentTime;const c=null!=r.duration?th(r.duration):null,h=null!=r.delay?th(r.delay):null;return 0!==c&&e.forEach(_=>{const y=t.appendInstructionToTimeline(_,c,h);o=Math.max(o,y.duration+y.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),Xo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const o=e.options;if(o&&(o.params||o.delay)&&(i=t.createSubContext(o),i.transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=TS);const c=th(o.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>Xo(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const o=e.options&&e.options.delay?th(e.options.delay):0;e.steps.forEach(c=>{const h=t.createSubContext(e.options);o&&h.delayNextStep(o),Xo(this,c,h),i=Math.max(i,h.currentTimeline.currentTime),r.push(h.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return _S(t.params?xC(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const o=e.style;5==o.type?this.visitKeyframes(o,t):(t.incrementTime(r.duration),this.visitStyle(o,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const o=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(o):r.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,o=r.duration,h=t.createSubContext().currentTimeline;h.easing=r.easing,e.styles.forEach(_=>{h.forwardTime((_.offset||0)*o),h.setStyles(_.styles,_.easing,t.errors,t.options),h.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(h),t.transformIntoNewTimeline(i+o),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},o=i.delay?th(i.delay):0;o&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=TS);let c=r;const h=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=h.length;let _=null;h.forEach((y,I)=>{t.currentQueryIndex=I;const D=t.createSubContext(e.options,y);o&&D.delayNextStep(o),y===t.element&&(_=D.currentTimeline),Xo(this,e.animation,D),D.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,D.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),_&&(t.currentTimeline.mergeTimelineCollectedStyles(_),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,o=e.timings,c=Math.abs(o.duration),h=c*(t.currentQueryTotal-1);let _=c*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":_=h-_;break;case"full":_=r.currentStaggerTime}const I=t.currentTimeline;_&&I.delayNextStep(_);const D=I.currentTime;Xo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-D+(i.startTime-r.currentTimeline.startTime)}}const TS={};class RR{constructor(e,t,r,i,o,c,h,_){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=c,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=TS,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=_||new DS(this._driver,t,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=th(r.duration)),null!=r.delay&&(i.delay=th(r.delay));const o=r.params;if(o){let c=i.params;c||(c=this.options.params={}),Object.keys(o).forEach(h=>{(!t||!c.hasOwnProperty(h))&&(c[h]=xC(o[h],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,o=new RR(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=TS,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},o=new pZ(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,o,c){let h=[];if(i&&h.push(this.element),e.length>0){e=(e=e.replace(cZ,"."+this._enterClassName)).replace(hZ,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=r);0!==r&&(y=r<0?y.slice(y.length+r,y.length):y.slice(0,r)),h.push(...y)}return!o&&0==h.length&&c.push(function y6(n){return new u.vHH(3014,!1)}()),h}}class DS{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new DS(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||eh),this._currentKeyframe.set(t,eh);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const o=i&&i.params||{},c=function gZ(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let o of r)t.set(o,eh)}else xp(i,t)}),t}(e,this._globalTimelineStyles);for(let[h,_]of c){const y=xC(_,o,r);this._pendingStyles.set(h,y),this._localTimelineStyles.has(h)||this._backFill.set(h,this._globalTimelineStyles.get(h)??eh),this._updateStyle(h,y)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((h,_)=>{const y=xp(h,new Map,this._backFill);y.forEach((I,D)=>{I===dR?e.add(D):I===eh&&t.add(D)}),r||y.set("offset",_/this.duration),i.push(y)});const o=e.size?yS(e.values()):[],c=t.size?yS(t.values()):[];if(r){const h=i[0],_=new Map(h);h.set("offset",0),_.set("offset",1),i=[h,_]}return xR(this.element,i,o,c,this.duration,this.startTime,this.easing,!1)}}class pZ extends DS{constructor(e,t,r,i,o,c,h=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=h,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const o=[],c=r+t,h=t/c,_=xp(e[0]);_.set("offset",0),o.push(_);const y=xp(e[0]);y.set("offset",lV(h)),o.push(y);const I=e.length-1;for(let D=1;D<=I;D++){let R=xp(e[D]);const L=R.get("offset");R.set("offset",lV((t+L*r)/c)),o.push(R)}r=c,t=0,i="",e=o}return xR(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function lV(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class PR{}const mZ=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class _Z extends PR{normalizePropertyName(e,t){return SR(e)}normalizeStyleValue(e,t,r,i){let o="";const c=r.toString().trim();if(mZ.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)o="px";else{const h=r.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&i.push(function a6(n,e){return new u.vHH(3005,!1)}())}return c+o}}function uV(n,e,t,r,i,o,c,h,_,y,I,D,R){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:o,toState:r,toStyles:c,timelines:h,queriedElements:_,preStyleProps:y,postStyleProps:I,totalTime:D,errors:R}}const OR={};class cV{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function yZ(n,e,t,r,i){return n.some(o=>o(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,o,c,h,_,y,I){const D=[],R=this.ast.options&&this.ast.options.params||OR,$=this.buildStyles(r,h&&h.params||OR,D),X=_&&_.params||OR,ce=this.buildStyles(i,X,D),qe=new Set,ut=new Map,at=new Map,Et="void"===i,$t={params:vZ(X,R),delay:this.ast.options?.delay},Gt=I?[]:NR(e,t,this.ast.animation,o,c,$,ce,$t,y,D);let Tn=0;if(Gt.forEach(nh=>{Tn=Math.max(nh.duration+nh.delay,Tn)}),D.length)return uV(t,this._triggerName,r,i,Et,$,ce,[],[],ut,at,Tn,D);Gt.forEach(nh=>{const rh=nh.element,SV=Jo(ut,rh,new Set);nh.preStyleProps.forEach(Jm=>SV.add(Jm));const PC=Jo(at,rh,new Set);nh.postStyleProps.forEach(Jm=>PC.add(Jm)),rh!==t&&qe.add(rh)});const Vi=yS(qe.values());return uV(t,this._triggerName,r,i,Et,$,ce,Gt,Vi,ut,at,Tn)}}function vZ(n,e){const t=AC(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class wZ{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=AC(this.defaultParams);return Object.keys(e).forEach(o=>{const c=e[o];null!==c&&(i[o]=c)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((c,h)=>{c&&(c=xC(c,i,t));const _=this.normalizer.normalizePropertyName(h,t);c=this.normalizer.normalizeStyleValue(h,_,c,t),r.set(h,c)})}),r}}class CZ{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new wZ(i.style,i.options&&i.options.params||{},r))}),dV(this.states,"true","1"),dV(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new cV(e,i,this.states))}),this.fallbackTransition=function IZ(n,e,t){return new cV(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,h)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function dV(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const bZ=new bS;class TZ{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],i=[],o=AR(this._driver,t,r,i);if(r.length)throw function T6(n){return new u.vHH(3503,!1)}();this._animations.set(e,o)}_buildPlayer(e,t,r){const i=e.element,o=HL(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],o=this._animations.get(e);let c;const h=new Map;if(o?(c=NR(this._driver,t,o,IR,pS,new Map,new Map,r,bZ,i),c.forEach(I=>{const D=Jo(h,I.element,new Map);I.postStyleProps.forEach(R=>D.set(R,null))})):(i.push(function D6(){return new u.vHH(3300,!1)}()),c=[]),i.length)throw function S6(n){return new u.vHH(3504,!1)}();h.forEach((I,D)=>{I.forEach((R,L)=>{I.set(L,this._driver.computeStyle(D,L,eh))})});const y=Mp(c.map(I=>{const D=h.get(I.element);return this._buildPlayer(I,new Map,D)}));return this._playersById.set(e,y),y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function A6(n){return new u.vHH(3301,!1)}();return t}listen(e,t,r,i){const o=vR(t,"","","");return _R(this._getPlayer(e),r,o,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const o=this._getPlayer(e);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const hV="ng-animate-queued",kR="ng-animate-disabled",xZ=[],fV={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},NZ={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Xa="__ng_removed";class FR{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function kZ(n){return n??null}(r?e.value:e),r){const o=AC(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const NC="void",LR=new FR(NC);class RZ{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,el(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function M6(n,e){return new u.vHH(3302,!1)}();if(null==r||0==r.length)throw function x6(n){return new u.vHH(3303,!1)}();if(!function FZ(n){return"start"==n||"done"==n}(r))throw function N6(n,e){return new u.vHH(3400,!1)}();const o=Jo(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};o.push(c);const h=Jo(this._engine.statesByElement,e,new Map);return h.has(t)||(el(e,gS),el(e,gS+"-"+t),h.set(t,LR)),()=>{this._engine.afterFlush(()=>{const _=o.indexOf(c);_>=0&&o.splice(_,1),this._triggers.has(t)||h.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function R6(n){return new u.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const o=this._getTrigger(t),c=new VR(this.id,t,e);let h=this._engine.statesByElement.get(e);h||(el(e,gS),el(e,gS+"-"+t),this._engine.statesByElement.set(e,h=new Map));let _=h.get(t);const y=new FR(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&_&&y.absorbOptions(_.options),h.set(t,y),_||(_=LR),y.value!==NC&&_.value===y.value){if(!function UZ(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const o=t[i];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}(_.params,y.params)){const X=[],ce=o.matchStyles(_.value,_.params,X),qe=o.matchStyles(y.value,y.params,X);X.length?this._engine.reportError(X):this._engine.afterFlush(()=>{Ym(e,ce),wc(e,qe)})}return}const R=Jo(this._engine.playersByElement,e,[]);R.forEach(X=>{X.namespaceId==this.id&&X.triggerName==t&&X.queued&&X.destroy()});let L=o.matchTransition(_.value,y.value,e,y.params),$=!1;if(!L){if(!i)return;L=o.fallbackTransition,$=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:L,fromState:_,toState:y,player:c,isFallbackTransition:$}),$||(el(e,hV),c.onStart(()=>{Gv(e,hV)})),c.onDone(()=>{let X=this.players.indexOf(c);X>=0&&this.players.splice(X,1);const ce=this._engine.playersByElement.get(e);if(ce){let qe=ce.indexOf(c);qe>=0&&ce.splice(qe,1)}}),this.players.push(c),R.push(c),c}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,mS,!0);r.forEach(i=>{if(i[Xa])return;const o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const o=this._engine.statesByElement.get(e),c=new Map;if(o){const h=[];if(o.forEach((_,y)=>{if(c.set(y,_.value),this._triggers.has(y)){const I=this.trigger(e,y,NC,i);I&&h.push(I)}}),h.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&Mp(h).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(o=>{const c=o.name;if(i.has(c))return;i.add(c);const _=this._triggers.get(c).fallbackTransition,y=r.get(c)||LR,I=new FR(NC),D=new VR(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:_,fromState:y,toState:I,player:D,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const o=r.players.length?r.playersByQueriedElement.get(e):[];if(o&&o.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const o=e[Xa];(!o||o===fV)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){el(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const o=r.element,c=this._elementListeners.get(o);c&&c.forEach(h=>{if(h.name==r.triggerName){const _=vR(o,r.triggerName,r.fromState.value,r.toState.value);_._data=e,_R(r.player,h.phase,_,h.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const o=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==o||0==c?o-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class PZ{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,o)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new RZ(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let c=!1,h=this.driver.getParentElement(t);for(;h;){const _=i.get(h);if(_){const y=r.indexOf(_);r.splice(y+1,0,e),c=!0;break}h=this.driver.getParentElement(h)}c||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const o=this._fetchNamespace(i.namespaceId);o&&t.add(o)}return t}trigger(e,t,r,i){if(SS(t)){const o=this._fetchNamespace(e);if(o)return o.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!SS(t))return;const o=t[Xa];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),el(e,kR)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Gv(e,kR))}removeNode(e,t,r,i){if(SS(t)){const o=e?this._fetchNamespace(e):null;if(o?o.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,o){this.collectedLeaveElements.push(t),t[Xa]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,r,i,o){return SS(t)?this._fetchNamespace(e).listen(t,r,i,o):()=>{}}_buildInstruction(e,t,r,i,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,mS,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,bR,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Mp(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Xa];if(t&&t.setForRemoval){if(e[Xa]=fV,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(kR)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)el(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Mp(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function P6(n){return new u.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new bS,i=[],o=new Map,c=[],h=new Map,_=new Map,y=new Map,I=new Set;this.disabledNodes.forEach(yt=>{I.add(yt);const Pt=this.driver.query(yt,".ng-animate-queued",!0);for(let Lt=0;Lt<Pt.length;Lt++)I.add(Pt[Lt])});const D=this.bodyNode,R=Array.from(this.statesByElement.keys()),L=mV(R,this.collectedEnterElements),$=new Map;let X=0;L.forEach((yt,Pt)=>{const Lt=IR+X++;$.set(Pt,Lt),yt.forEach(vn=>el(vn,Lt))});const ce=[],qe=new Set,ut=new Set;for(let yt=0;yt<this.collectedLeaveElements.length;yt++){const Pt=this.collectedLeaveElements[yt],Lt=Pt[Xa];Lt&&Lt.setForRemoval&&(ce.push(Pt),qe.add(Pt),Lt.hasAnimation?this.driver.query(Pt,".ng-star-inserted",!0).forEach(vn=>qe.add(vn)):ut.add(Pt))}const at=new Map,Et=mV(R,Array.from(qe));Et.forEach((yt,Pt)=>{const Lt=pS+X++;at.set(Pt,Lt),yt.forEach(vn=>el(vn,Lt))}),e.push(()=>{L.forEach((yt,Pt)=>{const Lt=$.get(Pt);yt.forEach(vn=>Gv(vn,Lt))}),Et.forEach((yt,Pt)=>{const Lt=at.get(Pt);yt.forEach(vn=>Gv(vn,Lt))}),ce.forEach(yt=>{this.processLeaveNode(yt)})});const $t=[],Gt=[];for(let yt=this._namespaceList.length-1;yt>=0;yt--)this._namespaceList[yt].drainQueuedTransitions(t).forEach(Lt=>{const vn=Lt.player,Ui=Lt.element;if($t.push(vn),this.collectedEnterElements.length){const vs=Ui[Xa];if(vs&&vs.setForMove){if(vs.previousTriggersValues&&vs.previousTriggersValues.has(Lt.triggerName)){const Xm=vs.previousTriggersValues.get(Lt.triggerName),tl=this.statesByElement.get(Lt.element);if(tl&&tl.has(Lt.triggerName)){const NS=tl.get(Lt.triggerName);NS.value=Xm,tl.set(Lt.triggerName,NS)}}return void vn.destroy()}}const Cc=!D||!this.driver.containsElement(D,Ui),ea=at.get(Ui),Np=$.get(Ui),Nr=this._buildInstruction(Lt,r,Np,ea,Cc);if(Nr.errors&&Nr.errors.length)return void Gt.push(Nr);if(Cc)return vn.onStart(()=>Ym(Ui,Nr.fromStyles)),vn.onDestroy(()=>wc(Ui,Nr.toStyles)),void i.push(vn);if(Lt.isFallbackTransition)return vn.onStart(()=>Ym(Ui,Nr.fromStyles)),vn.onDestroy(()=>wc(Ui,Nr.toStyles)),void i.push(vn);const xV=[];Nr.timelines.forEach(vs=>{vs.stretchStartingKeyframe=!0,this.disabledNodes.has(vs.element)||xV.push(vs)}),Nr.timelines=xV,r.append(Ui,Nr.timelines),c.push({instruction:Nr,player:vn,element:Ui}),Nr.queriedElements.forEach(vs=>Jo(h,vs,[]).push(vn)),Nr.preStyleProps.forEach((vs,Xm)=>{if(vs.size){let tl=_.get(Xm);tl||_.set(Xm,tl=new Set),vs.forEach((NS,$R)=>tl.add($R))}}),Nr.postStyleProps.forEach((vs,Xm)=>{let tl=y.get(Xm);tl||y.set(Xm,tl=new Set),vs.forEach((NS,$R)=>tl.add($R))})});if(Gt.length){const yt=[];Gt.forEach(Pt=>{yt.push(function O6(n,e){return new u.vHH(3505,!1)}())}),$t.forEach(Pt=>Pt.destroy()),this.reportError(yt)}const Tn=new Map,Vi=new Map;c.forEach(yt=>{const Pt=yt.element;r.has(Pt)&&(Vi.set(Pt,Pt),this._beforeAnimationBuild(yt.player.namespaceId,yt.instruction,Tn))}),i.forEach(yt=>{const Pt=yt.element;this._getPreviousPlayers(Pt,!1,yt.namespaceId,yt.triggerName,null).forEach(vn=>{Jo(Tn,Pt,[]).push(vn),vn.destroy()})});const nh=ce.filter(yt=>yV(yt,_,y)),rh=new Map;gV(rh,this.driver,ut,y,eh).forEach(yt=>{yV(yt,_,y)&&nh.push(yt)});const PC=new Map;L.forEach((yt,Pt)=>{gV(PC,this.driver,new Set(yt),_,dR)}),nh.forEach(yt=>{const Pt=rh.get(yt),Lt=PC.get(yt);rh.set(yt,new Map([...Array.from(Pt?.entries()??[]),...Array.from(Lt?.entries()??[])]))});const Jm=[],AV=[],MV={};c.forEach(yt=>{const{element:Pt,player:Lt,instruction:vn}=yt;if(r.has(Pt)){if(I.has(Pt))return Lt.onDestroy(()=>wc(Pt,vn.toStyles)),Lt.disabled=!0,Lt.overrideTotalTime(vn.totalTime),void i.push(Lt);let Ui=MV;if(Vi.size>1){let ea=Pt;const Np=[];for(;ea=ea.parentNode;){const Nr=Vi.get(ea);if(Nr){Ui=Nr;break}Np.push(ea)}Np.forEach(Nr=>Vi.set(Nr,Ui))}const Cc=this._buildAnimation(Lt.namespaceId,vn,Tn,o,PC,rh);if(Lt.setRealPlayer(Cc),Ui===MV)Jm.push(Lt);else{const ea=this.playersByElement.get(Ui);ea&&ea.length&&(Lt.parentPlayer=Mp(ea)),i.push(Lt)}}else Ym(Pt,vn.fromStyles),Lt.onDestroy(()=>wc(Pt,vn.toStyles)),AV.push(Lt),I.has(Pt)&&i.push(Lt)}),AV.forEach(yt=>{const Pt=o.get(yt.element);if(Pt&&Pt.length){const Lt=Mp(Pt);yt.setRealPlayer(Lt)}}),i.forEach(yt=>{yt.parentPlayer?yt.syncPlayerEvents(yt.parentPlayer):yt.destroy()});for(let yt=0;yt<ce.length;yt++){const Pt=ce[yt],Lt=Pt[Xa];if(Gv(Pt,pS),Lt&&Lt.hasAnimation)continue;let vn=[];if(h.size){let Cc=h.get(Pt);Cc&&Cc.length&&vn.push(...Cc);let ea=this.driver.query(Pt,bR,!0);for(let Np=0;Np<ea.length;Np++){let Nr=h.get(ea[Np]);Nr&&Nr.length&&vn.push(...Nr)}}const Ui=vn.filter(Cc=>!Cc.destroyed);Ui.length?LZ(this,Pt,Ui):this.processLeaveNode(Pt)}return ce.length=0,Jm.forEach(yt=>{this.players.push(yt),yt.onDone(()=>{yt.destroy();const Pt=this.players.indexOf(yt);this.players.splice(Pt,1)}),yt.play()}),Jm}elementContainsData(e,t){let r=!1;const i=t[Xa];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,o){let c=[];if(t){const h=this.playersByQueriedElement.get(e);h&&(c=h)}else{const h=this.playersByElement.get(e);if(h){const _=!o||o==NC;h.forEach(y=>{y.queued||!_&&y.triggerName!=i||c.push(y)})}}return(r||i)&&(c=c.filter(h=>!(r&&r!=h.namespaceId||i&&i!=h.triggerName))),c}_beforeAnimationBuild(e,t,r){const o=t.element,c=t.isRemovalTransition?void 0:e,h=t.isRemovalTransition?void 0:t.triggerName;for(const _ of t.timelines){const y=_.element,I=y!==o,D=Jo(r,y,[]);this._getPreviousPlayers(y,I,c,h,t.toState).forEach(L=>{const $=L.getRealPlayer();$.beforeDestroy&&$.beforeDestroy(),L.destroy(),D.push(L)})}Ym(o,t.fromStyles)}_buildAnimation(e,t,r,i,o,c){const h=t.triggerName,_=t.element,y=[],I=new Set,D=new Set,R=t.timelines.map($=>{const X=$.element;I.add(X);const ce=X[Xa];if(ce&&ce.removedBeforeQueried)return new SC($.duration,$.delay);const qe=X!==_,ut=function VZ(n){const e=[];return _V(n,e),e}((r.get(X)||xZ).map(Tn=>Tn.getRealPlayer())).filter(Tn=>!!Tn.element&&Tn.element===X),at=o.get(X),Et=c.get(X),$t=HL(0,this._normalizer,0,$.keyframes,at,Et),Gt=this._buildPlayer($,$t,ut);if($.subTimeline&&i&&D.add(X),qe){const Tn=new VR(e,h,X);Tn.setRealPlayer(Gt),y.push(Tn)}return Gt});y.forEach($=>{Jo(this.playersByQueriedElement,$.element,[]).push($),$.onDone(()=>function OZ(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,$.element,$))}),I.forEach($=>el($,JL));const L=Mp(R);return L.onDestroy(()=>{I.forEach($=>Gv($,JL)),wc(_,t.toStyles)}),D.forEach($=>{Jo(i,$,[]).push(L)}),L}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new SC(e.duration,e.delay)}}class VR{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new SC,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>_R(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Jo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function SS(n){return n&&1===n.nodeType}function pV(n,e){const t=n.style.display;return n.style.display=e??"none",t}function gV(n,e,t,r,i){const o=[];t.forEach(_=>o.push(pV(_)));const c=[];r.forEach((_,y)=>{const I=new Map;_.forEach(D=>{const R=e.computeStyle(y,D,i);I.set(D,R),(!R||0==R.length)&&(y[Xa]=NZ,c.push(y))}),n.set(y,I)});let h=0;return t.forEach(_=>pV(_,o[h++])),c}function mV(n,e){const t=new Map;if(n.forEach(h=>t.set(h,[])),0==e.length)return t;const r=1,i=new Set(e),o=new Map;function c(h){if(!h)return r;let _=o.get(h);if(_)return _;const y=h.parentNode;return _=t.has(y)?y:i.has(y)?r:c(y),o.set(h,_),_}return e.forEach(h=>{const _=c(h);_!==r&&t.get(_).push(h)}),t}function el(n,e){n.classList?.add(e)}function Gv(n,e){n.classList?.remove(e)}function LZ(n,e,t){Mp(t).onDone(()=>n.processLeaveNode(e))}function _V(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof OL?_V(r.players,e):e.push(r)}}function yV(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(o=>i.add(o)):e.set(n,r),t.delete(n),!0}class AS{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,o)=>{},this._transitionEngine=new PZ(e,t,r),this._timelineEngine=new TZ(e,t,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(e,t,r,i,o){const c=e+"-"+i;let h=this._triggerCache[c];if(!h){const _=[],y=[],I=AR(this._driver,o,_,y);if(_.length)throw function I6(n,e){return new u.vHH(3404,!1)}();h=function EZ(n,e,t){return new CZ(n,e,t)}(i,I,this._normalizer),this._triggerCache[c]=h}this._transitionEngine.registerTrigger(t,i,h)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[o,c]=GL(r);this._timelineEngine.command(o,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,o){if("@"==r.charAt(0)){const[c,h]=GL(r);return this._timelineEngine.listen(c,t,h,o)}return this._transitionEngine.listen(e,t,r,i,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let $Z=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&wc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(wc(this._element,this._initialStyles),this._endStyles&&(wc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Ym(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ym(this._element,this._endStyles),this._endStyles=null),wc(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function UR(n){let e=null;return n.forEach((t,r)=>{(function jZ(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class vV{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:iV(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class HZ{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return WL(e,t)}getParentElement(e){return ER(e)}query(e,t,r){return KL(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,o,c=[]){const _={duration:r,delay:i,fill:0==i?"both":"forwards"};o&&(_.easing=o);const y=new Map,I=c.filter(L=>L instanceof vV);(function Z6(n,e){return 0===n||0===e})(r,i)&&I.forEach(L=>{L.currentSnapshot.forEach(($,X)=>y.set(X,$))});let D=function H6(n){return n.length?n[0]instanceof Map?n:n.map(e=>XL(e)):[]}(t).map(L=>xp(L));D=function W6(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((o,c)=>{r.has(c)||i.push(c),r.set(c,o)}),i.length)for(let o=1;o<e.length;o++){let c=e[o];i.forEach(h=>c.set(h,iV(n,h)))}}return e}(e,D,y);const R=function BZ(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=UR(e[0]),e.length>1&&(r=UR(e[e.length-1]))):e instanceof Map&&(t=UR(e)),t||r?new $Z(n,t,r):null}(e,D);return new vV(e,D,_,R)}}let GZ=(()=>{class n extends ML{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:u.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?NL(t):t;return wV(this._renderer,null,r,"register",[i]),new zZ(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.FYo),u.LFG(re))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class zZ extends Zz{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new qZ(this._id,e,t||{},this._renderer)}}class qZ{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return wV(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function wV(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const EV="@.disabled";let ZZ=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(o,c)=>{const h=c?.parentNode(o);h&&c.removeChild(h,o)}}createRenderer(t,r){const o=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let I=this._rendererCache.get(o);return I||(I=new CV("",o,this.engine,()=>this._rendererCache.delete(o)),this._rendererCache.set(o,I)),I}const c=r.id,h=r.id+"-"+this._currentId;this._currentId++,this.engine.register(h,t);const _=I=>{Array.isArray(I)?I.forEach(_):this.engine.registerTrigger(c,h,t,I.name,I)};return r.data.animation.forEach(_),new WZ(this,h,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[c,h]=o;c(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.FYo),u.LFG(AS),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class CV{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?o=>t.destroyNode(o):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==EV?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class WZ extends CV{constructor(e,t,r,i,o){super(t,r,i,o),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==EV?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function KZ(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let o=t.slice(1),c="";return"@"!=o.charAt(0)&&([o,c]=function YZ(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(o)),this.engine.listen(this.namespaceId,i,o,c,h=>{this.factory.scheduleListenerCallback(h._data||-1,r,h)})}return this.delegate.listen(e,t,r)}}let QZ=(()=>{class n extends AS{constructor(t,r,i,o){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(re),u.LFG(CR),u.LFG(PR),u.LFG(u.z2F))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const IV=[{provide:ML,useClass:GZ},{provide:PR,useFactory:function JZ(){return new _Z}},{provide:AS,useClass:QZ},{provide:u.FYo,useFactory:function XZ(n,e,t){return new ZZ(n,e,t)},deps:[Vn,AS,u.R0b]}],BR=[{provide:CR,useFactory:()=>new HZ},{provide:u.QbO,useValue:"BrowserAnimations"},...IV],bV=[{provide:CR,useClass:YL},{provide:u.QbO,useValue:"NoopAnimations"},...IV];let eW=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?bV:BR}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:BR,imports:[Oo]}),n})(),tW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["order-success"]],decls:5,vars:0,consts:[[1,"card","text-center"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"h2"),u._uU(2,"Thank you!"),u.qZA(),u.TgZ(3,"p"),u._uU(4,"We received your order and will process it within the next 24 hours!"),u.qZA()())}}),n})();class TV{}class DV{constructor(){this.shippingDetails=new TV,this.items=[]}}let RC=(()=>{class n{constructor(t){this.firestore=t}create(t){return this.firestore.collection("orders").add({...t})}getUserOrders(t){return this.firestore.collection("orders",r=>r.where("userId","==",t)).snapshotChanges()}getAdminOrders(){return this.firestore.collection("orders").snapshotChanges()}getById(t){return this.firestore.doc("orders/"+t).valueChanges()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(TE))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function nW(n,e){if(1&n&&(u.TgZ(0,"li",19),u._uU(1),u.TgZ(2,"div",16),u._uU(3),u.ALo(4,"currency"),u.qZA()()),2&n){const t=e.$implicit;u.xp6(1),u.AsE(" ",t.quantity," * ",t.title," "),u.xp6(2),u.Oqu(u.xi3(4,3,t.totalPrice,"INR"))}}let rW=(()=>{class n{constructor(t,r,i){this.Orderservice=t,this.route=r,this.router=i,this.orderDetails=new DV}ngOnInit(){let t=this.route.snapshot.paramMap.get("id");this.Orderservice.getById(t).subscribe(r=>{this.orderDetails=r,console.log(r)})}redirectToOrdersPage(){"admin"===this.route.snapshot.queryParamMap.get("viewFrom")?this.router.navigate(["admin/admin-orders"]):this.router.navigate(["/my-orders"])}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(RC),u.Y36(jm),u.Y36(wr))},n.\u0275cmp=u.Xpm({type:n,selectors:[["order-details"]],decls:42,vars:12,consts:[[1,"card","componentStyle"],[2,"margin","1rem"],[1,"row"],[1,"col-6"],[2,"float","right","font-weight","bold","margin-top","6px !important"],[1,"col-6","border-line"],[1,"form-group"],["for",""],["type","text","disabled","","name","name","placeholder","Name",1,"form-control",3,"value"],["type","text","disabled","","name","addressLine1","placeholder","AdressLine1",1,"form-control",3,"value"],["type","text","disabled","","name","addressLine2","placeholder","AddressLine2",1,"form-control",3,"value"],["type","text","disabled","","placeholder","City","name","city",1,"form-control",3,"value"],[1,"card-body"],[1,"card-title"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item","fw-bold"],[1,"float-end"],[1,"btn","btn-primary","ripple-surface",2,"min-width","230px","text-align","center",3,"click"],[1,"bi","bi-arrow-left-circle"],[1,"list-group-item"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),u._uU(5,"Orde Details"),u.qZA()(),u.TgZ(6,"div")(7,"p",4),u._uU(8),u.ALo(9,"date"),u.qZA()()(),u._UZ(10,"hr"),u.TgZ(11,"div",2)(12,"div",5)(13,"div",6)(14,"label",7),u._uU(15,"Name"),u.qZA(),u._UZ(16,"input",8),u.qZA(),u.TgZ(17,"div",6)(18,"label",7),u._uU(19,"Address"),u.qZA(),u._UZ(20,"input",9),u.qZA(),u.TgZ(21,"div",6),u._UZ(22,"label",7)(23,"input",10),u.qZA(),u.TgZ(24,"div",6)(25,"label",7),u._uU(26,"City"),u.qZA(),u._UZ(27,"input",11),u.qZA()(),u.TgZ(28,"div",3)(29,"div",12)(30,"h4",13),u._uU(31,"Order Summary"),u.qZA(),u.YNc(32,nW,5,6,"li",14),u.TgZ(33,"li",15),u._uU(34," Total "),u.TgZ(35,"div",16),u._uU(36),u.ALo(37,"currency"),u.qZA()()()()(),u._UZ(38,"hr"),u.TgZ(39,"a",17),u.NdJ("click",function(){return r.redirectToOrdersPage()}),u._UZ(40,"i",18),u._uU(41,"BACK TO ORDERS"),u.qZA()()()),2&t&&(u.xp6(8),u.hij("Date: ",u.lcZ(9,7,r.orderDetails.datePlaced),""),u.xp6(8),u.Q6J("value",r.orderDetails.shippingDetails.name),u.xp6(4),u.Q6J("value",r.orderDetails.shippingDetails.addressLine1),u.xp6(3),u.Q6J("value",r.orderDetails.shippingDetails.addressLine2),u.xp6(4),u.Q6J("value",r.orderDetails.shippingDetails.city),u.xp6(5),u.Q6J("ngForOf",r.orderDetails.items),u.xp6(4),u.hij(" ",u.xi3(37,9,r.orderDetails.amount,"INR")," "))},dependencies:[Ir,bs,er]}),n})();const iW=function(){return{viewFrom:"user"}},sW=function(n){return["/order-details",n]};function oW(n,e){if(1&n&&(u.TgZ(0,"tr")(1,"td"),u._uU(2),u.qZA(),u.TgZ(3,"td"),u._uU(4),u.ALo(5,"date"),u.qZA(),u.TgZ(6,"td"),u._uU(7),u.ALo(8,"currency"),u.qZA(),u.TgZ(9,"td")(10,"a",18),u._uU(11,"View"),u.qZA()()()),2&n){const t=e.$implicit;u.xp6(2),u.hij(" ",t.shippingDetails.name," "),u.xp6(2),u.Oqu(u.lcZ(5,5,t.datePlaced)),u.xp6(3),u.Oqu(u.Dn7(8,7,t.amount,"INR","symbol")),u.xp6(3),u.Q6J("queryParams",u.DdM(11,iW))("routerLink",u.VKq(12,sW,t.id))}}const aW=function(n){return{itemsPerPage:4,currentPage:n}};let lW=(()=>{class n{constructor(t,r){this.orderservice=t,this.router=r,this.currunPage=1,this.myOrders=[],this.itemsPerPage=4}ngOnInit(){this.loadData()}loadData(){let t=localStorage.getItem("loggedInUserId");this.orderservice.getUserOrders(t).subscribe(r=>{this.myOrders=r.map(i=>({id:i.payload.doc.id,...i.payload.doc.data()}))})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(RC),u.Y36(wr))},n.\u0275cmp=u.Xpm({type:n,selectors:[["my-orders"]],decls:28,vars:6,consts:[[1,"card","componentStyle"],[1,"row"],[1,"col-md-12"],[1,"mb-3","mt-3",2,"text-align","right","margin-right","1rem !important"],["routerLink","/userproduct",1,"btn-primary"],[1,"bi","bi-cart-check-fill"],[2,"margin","0rem 1rem 1rem 1rem !important"],[1,"col-12"],[1,"card"],[1,"table-responsive"],[1,"table","mb-0"],[1,"thead-light"],[1,"bg-light"],["sortable","amount"],[1,"customtable"],[4,"ngFor","ngForOf"],["colspan","5"],[3,"pageChange"],[3,"queryParams","routerLink"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4),u._UZ(5,"i",5),u._uU(6,"Place Order"),u.qZA()()()(),u.TgZ(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"table",10)(12,"thead",11)(13,"tr",12)(14,"th"),u._uU(15,"Customer"),u.qZA(),u.TgZ(16,"th"),u._uU(17,"Date"),u.qZA(),u.TgZ(18,"th",13),u._uU(19,"Amount"),u.qZA(),u.TgZ(20,"th"),u._uU(21,"Actions"),u.qZA()()(),u.TgZ(22,"tbody",14),u.YNc(23,oW,12,14,"tr",15),u.ALo(24,"paginate"),u.TgZ(25,"tr")(26,"td",16)(27,"pagination-controls",17),u.NdJ("pageChange",function(o){return r.currunPage=o}),u.qZA()()()()()()()()()()),2&t&&(u.xp6(23),u.Q6J("ngForOf",u.xi3(24,1,r.myOrders,u.VKq(4,aW,r.currunPage))))},dependencies:[Ir,Hm,BL,bs,er,UL]}),n})();function uW(n,e){if(1&n&&(u.TgZ(0,"li",24),u._uU(1),u.TgZ(2,"div",23),u._uU(3),u.ALo(4,"currency"),u.qZA()()),2&n){const t=e.$implicit;u.xp6(1),u.AsE(" ",t.quantity," x ",t.title," "),u.xp6(2),u.hij(" ",u.Dn7(4,3,t.totalPrice,"INR","symbol")," ")}}let cW=(()=>{class n{constructor(t,r,i,o){this.toastr=t,this.router=r,this.shoppingCartService=i,this.orderservice=o,this.checkoutform=new qm({title:new Li(null,ys.required),price:new Li(null,ys.required),imageUrl:new Li(null,ys.required),Category:new Li(null,ys.required)}),this.cartItems=[],this.shiping=new TV}ngOnInit(){this.cartItems=this.shoppingCartService.CartItems}get totalPrice(){return this.shoppingCartService.CartItemsTotal}get totalItems(){return this.shoppingCartService.CartItemsCount}placeOrder(){let t=new DV;t.datePlaced=(new Date).getTime(),t.amount=this.shoppingCartService.CartItemsTotal,t.userId=localStorage.getItem("loggedInUserId"),t.items=this.cartItems,t.shippingDetails={name:this.shiping.name,addressLine1:this.shiping.addressLine1,addressLine2:this.shiping.addressLine2,city:this.shiping.city},this.orderservice.create(t).then(r=>{this.shoppingCartService.clearCartItems(),this.toastr.success("Order placed successfully...!"),this.router.navigate(["/order-successes"])}).catch(r=>{this.toastr.error("Un-handled exception occured...!")})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Ap),u.Y36(wr),u.Y36(_C),u.Y36(RC))},n.\u0275cmp=u.Xpm({type:n,selectors:[["check-out"]],decls:40,vars:10,consts:[[1,"cardComponentStyle"],[2,"margin","1rem"],[1,"row"],[1,"col-6"],["f","ngForm"],[1,"mb-3"],["type","text","placeholder","name","name","name",1,"form-control",3,"ngModel","ngModelChange"],["name","ngModel"],["type","text","placeholder","AdressLine1","name","addressLine1",1,"form-control",3,"ngModel","ngModelChange"],["addressLine1","ngModel"],["type","text","placeholder","AddressLine2","name","addressLine2",1,"form-control",3,"ngModel","ngModelChange"],["addressLine2","ngModel"],["type","text","placeholder","City","name","city",1,"form-control",3,"ngModel","ngModelChange"],["city","ngModel"],[1,"mt-6"],[1,"btn","btn-primary",3,"click"],[1,"bi","bi-cart-check-fill"],[1,"card"],[1,"card-body"],[1,"card-text"],[1,"list-group","list-group-flush"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item","fw-bold"],[1,"float-end"],[1,"list-group-item"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div",1)(2,"h2"),u._uU(3,"Shipping"),u.qZA(),u._UZ(4,"hr"),u.TgZ(5,"div",2)(6,"div",3)(7,"form",null,4)(9,"div",5)(10,"input",6,7),u.NdJ("ngModelChange",function(o){return r.shiping.name=o}),u.qZA()(),u.TgZ(12,"div",5)(13,"input",8,9),u.NdJ("ngModelChange",function(o){return r.shiping.addressLine1=o}),u.qZA()(),u.TgZ(15,"div",5)(16,"input",10,11),u.NdJ("ngModelChange",function(o){return r.shiping.addressLine2=o}),u.qZA()(),u.TgZ(18,"div",5)(19,"input",12,13),u.NdJ("ngModelChange",function(o){return r.shiping.city=o}),u.qZA()(),u._UZ(21,"hr"),u.TgZ(22,"div",14)(23,"button",15),u.NdJ("click",function(){return r.placeOrder()}),u.TgZ(24,"i",16),u._uU(25,"Place Order "),u.qZA()()()()(),u.TgZ(26,"div",3)(27,"div",17)(28,"div",18)(29,"h4"),u._uU(30,"Order Summary"),u.qZA(),u.TgZ(31,"p",19),u._uU(32),u.qZA(),u.TgZ(33,"ul",20),u.YNc(34,uW,5,7,"li",21),u.TgZ(35,"li",22),u._uU(36," Total "),u.TgZ(37,"div",23),u._uU(38),u.ALo(39,"currency"),u.qZA()()()()()()()()()),2&t&&(u.xp6(10),u.Q6J("ngModel",r.shiping.name),u.xp6(3),u.Q6J("ngModel",r.shiping.addressLine1),u.xp6(3),u.Q6J("ngModel",r.shiping.addressLine2),u.xp6(3),u.Q6J("ngModel",r.shiping.city),u.xp6(13),u.hij("You have items",r.totalItems," in your shopping"),u.xp6(2),u.Q6J("ngForOf",r.cartItems),u.xp6(4),u.hij(" ",u.xi3(39,7,r.totalPrice,"INR")," "))},dependencies:[Ir,jv,Xd,zm,Uv,$v,IC,bs]}),n})();const dW=function(){return{viewFrom:"admin"}},hW=function(n){return["/order-details",n]};function fW(n,e){if(1&n&&(u.TgZ(0,"tr")(1,"td"),u._uU(2),u.qZA(),u.TgZ(3,"td"),u._uU(4),u.ALo(5,"date"),u.qZA(),u.TgZ(6,"td"),u._uU(7),u.ALo(8,"currency"),u.qZA(),u.TgZ(9,"td")(10,"a",16),u._uU(11,"View"),u.qZA()()()),2&n){const t=e.$implicit;u.xp6(2),u.Oqu(t.shippingDetails.name),u.xp6(2),u.Oqu(u.lcZ(5,5,t.datePlaced)),u.xp6(3),u.Oqu(u.Dn7(8,7,t.amount,"INR","symbol")),u.xp6(3),u.Q6J("queryParams",u.DdM(11,dW))("routerLink",u.VKq(12,hW,t.id))}}let pW=(()=>{class n{constructor(t){this.orderservice=t,this.adminOrders=[],this.pageSize=4,this.page=1}ngOnInit(){this.loadData()}loadData(){this.orderservice.getAdminOrders().subscribe(t=>{this.adminOrders=t.map(r=>({id:r.payload.doc.id,...r.payload.doc.data()}))})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(RC))},n.\u0275cmp=u.Xpm({type:n,selectors:[["admin-orders"]],decls:25,vars:5,consts:[[1,"card","componentStyle"],[1,"row"],[1,"col-md-12"],[1,"mb-3","mt-3",2,"text-align","right","margin-right","1rem !important"],["routerLink","/userproduct",1,"btn","btn-primary"],[1,"bi","bi-cart-check-fill"],[2,"margin","0rem 1rem 1rem 1rem !important"],[1,"col-12"],[1,"card"],[1,"table-responsive"],[1,"table","mb-0"],[1,"thead-light"],[1,"bg-light"],["sortable","amount"],[1,"customtable"],[4,"ngFor","ngForOf"],[3,"queryParams","routerLink"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4),u._UZ(5,"i",5),u._uU(6," Place Order"),u.qZA()()()(),u.TgZ(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"table",10)(12,"thead",11)(13,"tr",12)(14,"th"),u._uU(15,"Customer"),u.qZA(),u.TgZ(16,"th"),u._uU(17,"Date"),u.qZA(),u.TgZ(18,"th",13),u._uU(19,"Amount"),u.qZA(),u.TgZ(20,"th"),u._uU(21,"Action"),u.qZA()()(),u.TgZ(22,"tbody",14),u.YNc(23,fW,12,14,"tr",15),u.ALo(24,"slice"),u.qZA()()()()()()()),2&t&&(u.xp6(23),u.Q6J("ngForOf",u.Dn7(24,1,r.adminOrders,(r.page-1)*r.pageSize,r.page*r.pageSize)))},dependencies:[Ir,Hm,qi,bs,er]}),n})(),xS=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!(!this.authService.displayName||!this.authService.isAdmin)||(this.router.navigate(["/un-authorised"]),!1)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(bp),u.LFG(wr))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Ec=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!!this.authService.displayName||(this.router.navigate(["un-authorised"]),!1)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(bp),u.LFG(wr))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const gW=[{path:"",component:VL},{path:"login",component:VL},{path:"registration",component:$q},{path:"admin/categories",component:Hq,canActivate:[Ec,xS]},{path:"nav-bar",component:SF},{path:"admin/products",component:Oq,canActivate:[Ec,xS]},{path:"userproduct",component:Yq,canActivate:[Ec]},{path:"shoppin-cart",component:t6,canActivate:[Ec]},{path:"check-out",component:cW,canActivate:[Ec]},{path:"order-successes",component:tW,canActivate:[Ec]},{path:"admin/admin-orders",component:pW,canActivate:[Ec,xS]},{path:"my-orders",component:lW,canActivate:[Ec]},{path:"order-details/:id",component:rW,canActivate:[Ec]},{path:"un-authorised",component:(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["un-authorised"]],decls:4,vars:0,consts:[[1,"card","componentStyle"],["src","assets/access denid.png"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u._UZ(1,"img",1),u.qZA(),u.TgZ(2,"div"),u._uU(3," this page is not Accessble\n"),u.qZA())}}),n})()}];let mW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n,bootstrap:[ZG]}),n.\u0275inj=u.cJS({providers:[bp,fS,fR,_C,RC,xS,Ec],imports:[Oo,eW,BG,gr.hO.initializeApp(Gq_firebaseConfig),W2,oH,gq.forRoot({positionClass:"toast-bottom-right"}),zz,qz,xq,GN.forRoot(gW)]}),n})();Zp().bootstrapModule(mW).catch(n=>console.error(n))},9751:(_t,Te,F)=>{F.d(Te,{y:()=>fe});var u=F(930),te=F(727),k=F(8822),oe=F(9635),se=F(2416),re=F(576),ge=F(2806);let fe=(()=>{class Q{constructor(De){De&&(this._subscribe=De)}lift(De){const Ze=new Q;return Ze.source=this,Ze.operator=De,Ze}subscribe(De,Ze,dt){const me=function z(Q){return Q&&Q instanceof u.Lv||function G(Q){return Q&&(0,re.m)(Q.next)&&(0,re.m)(Q.error)&&(0,re.m)(Q.complete)}(Q)&&(0,te.Nn)(Q)}(De)?De:new u.Hp(De,Ze,dt);return(0,ge.x)(()=>{const{operator:Se,source:be}=this;me.add(Se?Se.call(me,be):be?this._subscribe(me):this._trySubscribe(me))}),me}_trySubscribe(De){try{return this._subscribe(De)}catch(Ze){De.error(Ze)}}forEach(De,Ze){return new(Ze=he(Ze))((dt,me)=>{const Se=new u.Hp({next:be=>{try{De(be)}catch(Be){me(Be),Se.unsubscribe()}},error:me,complete:dt});this.subscribe(Se)})}_subscribe(De){var Ze;return null===(Ze=this.source)||void 0===Ze?void 0:Ze.subscribe(De)}[k.L](){return this}pipe(...De){return(0,oe.U)(De)(this)}toPromise(De){return new(De=he(De))((Ze,dt)=>{let me;this.subscribe(Se=>me=Se,Se=>dt(Se),()=>Ze(me))})}}return Q.create=He=>new Q(He),Q})();function he(Q){var He;return null!==(He=Q??se.v.Promise)&&void 0!==He?He:Promise}},7579:(_t,Te,F)=>{F.d(Te,{x:()=>ge});var u=F(9751),te=F(727);const oe=(0,F(3888).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=F(8737),re=F(2806);let ge=(()=>{class he extends u.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(z){const Q=new fe(this,this);return Q.operator=z,Q}_throwIfClosed(){if(this.closed)throw new oe}next(z){(0,re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next(z)}})}error(z){(0,re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=z;const{observers:Q}=this;for(;Q.length;)Q.shift().error(z)}})}complete(){(0,re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:z}=this;for(;z.length;)z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var z;return(null===(z=this.observers)||void 0===z?void 0:z.length)>0}_trySubscribe(z){return this._throwIfClosed(),super._trySubscribe(z)}_subscribe(z){return this._throwIfClosed(),this._checkFinalizedStatuses(z),this._innerSubscribe(z)}_innerSubscribe(z){const{hasError:Q,isStopped:He,observers:De}=this;return Q||He?te.Lc:(this.currentObservers=null,De.push(z),new te.w0(()=>{this.currentObservers=null,(0,se.P)(De,z)}))}_checkFinalizedStatuses(z){const{hasError:Q,thrownError:He,isStopped:De}=this;Q?z.error(He):De&&z.complete()}asObservable(){const z=new u.y;return z.source=this,z}}return he.create=(G,z)=>new fe(G,z),he})();class fe extends ge{constructor(G,z){super(),this.destination=G,this.source=z}next(G){var z,Q;null===(Q=null===(z=this.destination)||void 0===z?void 0:z.next)||void 0===Q||Q.call(z,G)}error(G){var z,Q;null===(Q=null===(z=this.destination)||void 0===z?void 0:z.error)||void 0===Q||Q.call(z,G)}complete(){var G,z;null===(z=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===z||z.call(G)}_subscribe(G){var z,Q;return null!==(Q=null===(z=this.source)||void 0===z?void 0:z.subscribe(G))&&void 0!==Q?Q:te.Lc}}},930:(_t,Te,F)=>{F.d(Te,{Hp:()=>dt,Lv:()=>Q});var u=F(576),te=F(727),k=F(2416),oe=F(7849),se=F(5032);const re=he("C",void 0,void 0);function he(ke,Ce,we){return{kind:ke,value:Ce,error:we}}var G=F(3410),z=F(2806);class Q extends te.w0{constructor(Ce){super(),this.isStopped=!1,Ce?(this.destination=Ce,(0,te.Nn)(Ce)&&Ce.add(this)):this.destination=Be}static create(Ce,we,ze){return new dt(Ce,we,ze)}next(Ce){this.isStopped?be(function fe(ke){return he("N",ke,void 0)}(Ce),this):this._next(Ce)}error(Ce){this.isStopped?be(function ge(ke){return he("E",void 0,ke)}(Ce),this):(this.isStopped=!0,this._error(Ce))}complete(){this.isStopped?be(re,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ce){this.destination.next(Ce)}_error(Ce){try{this.destination.error(Ce)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function De(ke,Ce){return He.call(ke,Ce)}class Ze{constructor(Ce){this.partialObserver=Ce}next(Ce){const{partialObserver:we}=this;if(we.next)try{we.next(Ce)}catch(ze){me(ze)}}error(Ce){const{partialObserver:we}=this;if(we.error)try{we.error(Ce)}catch(ze){me(ze)}else me(Ce)}complete(){const{partialObserver:Ce}=this;if(Ce.complete)try{Ce.complete()}catch(we){me(we)}}}class dt extends Q{constructor(Ce,we,ze){let Pe;if(super(),(0,u.m)(Ce)||!Ce)Pe={next:Ce??void 0,error:we??void 0,complete:ze??void 0};else{let de;this&&k.v.useDeprecatedNextContext?(de=Object.create(Ce),de.unsubscribe=()=>this.unsubscribe(),Pe={next:Ce.next&&De(Ce.next,de),error:Ce.error&&De(Ce.error,de),complete:Ce.complete&&De(Ce.complete,de)}):Pe=Ce}this.destination=new Ze(Pe)}}function me(ke){k.v.useDeprecatedSynchronousErrorHandling?(0,z.O)(ke):(0,oe.h)(ke)}function be(ke,Ce){const{onStoppedNotification:we}=k.v;we&&G.z.setTimeout(()=>we(ke,Ce))}const Be={closed:!0,next:se.Z,error:function Se(ke){throw ke},complete:se.Z}},727:(_t,Te,F)=>{F.d(Te,{Lc:()=>re,w0:()=>se,Nn:()=>ge});var u=F(576);const k=(0,F(3888).d)(he=>function(z){he(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((Q,He)=>`${He+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z});var oe=F(8737);class se{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:z}=this;if(z)if(this._parentage=null,Array.isArray(z))for(const De of z)De.remove(this);else z.remove(this);const{initialTeardown:Q}=this;if((0,u.m)(Q))try{Q()}catch(De){G=De instanceof k?De.errors:[De]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const De of He)try{fe(De)}catch(Ze){G=G??[],Ze instanceof k?G=[...G,...Ze.errors]:G.push(Ze)}}if(G)throw new k(G)}}add(G){var z;if(G&&G!==this)if(this.closed)fe(G);else{if(G instanceof se){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._finalizers=null!==(z=this._finalizers)&&void 0!==z?z:[]).push(G)}}_hasParent(G){const{_parentage:z}=this;return z===G||Array.isArray(z)&&z.includes(G)}_addParent(G){const{_parentage:z}=this;this._parentage=Array.isArray(z)?(z.push(G),z):z?[z,G]:G}_removeParent(G){const{_parentage:z}=this;z===G?this._parentage=null:Array.isArray(z)&&(0,oe.P)(z,G)}remove(G){const{_finalizers:z}=this;z&&(0,oe.P)(z,G),G instanceof se&&G._removeParent(this)}}se.EMPTY=(()=>{const he=new se;return he.closed=!0,he})();const re=se.EMPTY;function ge(he){return he instanceof se||he&&"closed"in he&&(0,u.m)(he.remove)&&(0,u.m)(he.add)&&(0,u.m)(he.unsubscribe)}function fe(he){(0,u.m)(he)?he():he.unsubscribe()}},2416:(_t,Te,F)=>{F.d(Te,{v:()=>u});const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(_t,Te,F)=>{F.d(Te,{E:()=>te});const te=new(F(9751).y)(se=>se.complete())},8996:(_t,Te,F)=>{F.d(Te,{D:()=>Ce});var u=F(8421),te=F(5363),k=F(9468),re=F(9751),fe=F(2202),he=F(576),G=F(9672);function Q(we,ze){if(!we)throw new Error("Iterable cannot be null");return new re.y(Pe=>{(0,G.f)(Pe,ze,()=>{const de=we[Symbol.asyncIterator]();(0,G.f)(Pe,ze,()=>{de.next().then(q=>{q.done?Pe.complete():Pe.next(q.value)})},0,!0)})})}var He=F(3670),De=F(8239),Ze=F(1144),dt=F(6495),me=F(2206),Se=F(4532),be=F(3260);function Ce(we,ze){return ze?function ke(we,ze){if(null!=we){if((0,He.c)(we))return function oe(we,ze){return(0,u.Xf)(we).pipe((0,k.R)(ze),(0,te.Q)(ze))}(we,ze);if((0,Ze.z)(we))return function ge(we,ze){return new re.y(Pe=>{let de=0;return ze.schedule(function(){de===we.length?Pe.complete():(Pe.next(we[de++]),Pe.closed||this.schedule())})})}(we,ze);if((0,De.t)(we))return function se(we,ze){return(0,u.Xf)(we).pipe((0,k.R)(ze),(0,te.Q)(ze))}(we,ze);if((0,me.D)(we))return Q(we,ze);if((0,dt.T)(we))return function z(we,ze){return new re.y(Pe=>{let de;return(0,G.f)(Pe,ze,()=>{de=we[fe.h](),(0,G.f)(Pe,ze,()=>{let q,$e;try{({value:q,done:$e}=de.next())}catch(Ge){return void Pe.error(Ge)}$e?Pe.complete():Pe.next(q)},0,!0)}),()=>(0,he.m)(de?.return)&&de.return()})}(we,ze);if((0,be.L)(we))return function Be(we,ze){return Q((0,be.Q)(we),ze)}(we,ze)}throw(0,Se.z)(we)}(we,ze):(0,u.Xf)(we)}},8421:(_t,Te,F)=>{F.d(Te,{Xf:()=>He});var u=F(655),te=F(1144),k=F(8239),oe=F(9751),se=F(3670),re=F(2206),ge=F(4532),fe=F(6495),he=F(3260),G=F(576),z=F(7849),Q=F(8822);function He(ke){if(ke instanceof oe.y)return ke;if(null!=ke){if((0,se.c)(ke))return function De(ke){return new oe.y(Ce=>{const we=ke[Q.L]();if((0,G.m)(we.subscribe))return we.subscribe(Ce);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ke);if((0,te.z)(ke))return function Ze(ke){return new oe.y(Ce=>{for(let we=0;we<ke.length&&!Ce.closed;we++)Ce.next(ke[we]);Ce.complete()})}(ke);if((0,k.t)(ke))return function dt(ke){return new oe.y(Ce=>{ke.then(we=>{Ce.closed||(Ce.next(we),Ce.complete())},we=>Ce.error(we)).then(null,z.h)})}(ke);if((0,re.D)(ke))return Se(ke);if((0,fe.T)(ke))return function me(ke){return new oe.y(Ce=>{for(const we of ke)if(Ce.next(we),Ce.closed)return;Ce.complete()})}(ke);if((0,he.L)(ke))return function be(ke){return Se((0,he.Q)(ke))}(ke)}throw(0,ge.z)(ke)}function Se(ke){return new oe.y(Ce=>{(function Be(ke,Ce){var we,ze,Pe,de;return(0,u.mG)(this,void 0,void 0,function*(){try{for(we=(0,u.KL)(ke);!(ze=yield we.next()).done;)if(Ce.next(ze.value),Ce.closed)return}catch(q){Pe={error:q}}finally{try{ze&&!ze.done&&(de=we.return)&&(yield de.call(we))}finally{if(Pe)throw Pe.error}}Ce.complete()})})(ke,Ce).catch(we=>Ce.error(we))})}},6451:(_t,Te,F)=>{F.d(Te,{T:()=>re});var u=F(8189),te=F(8421),k=F(515),oe=F(7669),se=F(8996);function re(...ge){const fe=(0,oe.yG)(ge),he=(0,oe._6)(ge,1/0),G=ge;return G.length?1===G.length?(0,te.Xf)(G[0]):(0,u.J)(he)((0,se.D)(G,fe)):k.E}},5403:(_t,Te,F)=>{F.d(Te,{x:()=>te});var u=F(930);function te(oe,se,re,ge,fe){return new k(oe,se,re,ge,fe)}class k extends u.Lv{constructor(se,re,ge,fe,he,G){super(se),this.onFinalize=he,this.shouldUnsubscribe=G,this._next=re?function(z){try{re(z)}catch(Q){se.error(Q)}}:super._next,this._error=fe?function(z){try{fe(z)}catch(Q){se.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=ge?function(){try{ge()}catch(z){se.error(z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:re}=this;super.unsubscribe(),!re&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},4004:(_t,Te,F)=>{F.d(Te,{U:()=>k});var u=F(4482),te=F(5403);function k(oe,se){return(0,u.e)((re,ge)=>{let fe=0;re.subscribe((0,te.x)(ge,he=>{ge.next(oe.call(se,he,fe++))}))})}},8189:(_t,Te,F)=>{F.d(Te,{J:()=>k});var u=F(5577),te=F(4671);function k(oe=1/0){return(0,u.z)(te.y,oe)}},5577:(_t,Te,F)=>{F.d(Te,{z:()=>fe});var u=F(4004),te=F(8421),k=F(4482),oe=F(9672),se=F(5403),ge=F(576);function fe(he,G,z=1/0){return(0,ge.m)(G)?fe((Q,He)=>(0,u.U)((De,Ze)=>G(Q,De,He,Ze))((0,te.Xf)(he(Q,He))),z):("number"==typeof G&&(z=G),(0,k.e)((Q,He)=>function re(he,G,z,Q,He,De,Ze,dt){const me=[];let Se=0,be=0,Be=!1;const ke=()=>{Be&&!me.length&&!Se&&G.complete()},Ce=ze=>Se<Q?we(ze):me.push(ze),we=ze=>{De&&G.next(ze),Se++;let Pe=!1;(0,te.Xf)(z(ze,be++)).subscribe((0,se.x)(G,de=>{He?.(de),De?Ce(de):G.next(de)},()=>{Pe=!0},void 0,()=>{if(Pe)try{for(Se--;me.length&&Se<Q;){const de=me.shift();Ze?(0,oe.f)(G,Ze,()=>we(de)):we(de)}ke()}catch(de){G.error(de)}}))};return he.subscribe((0,se.x)(G,Ce,()=>{Be=!0,ke()})),()=>{dt?.()}}(Q,He,he,z)))}},5363:(_t,Te,F)=>{F.d(Te,{Q:()=>oe});var u=F(9672),te=F(4482),k=F(5403);function oe(se,re=0){return(0,te.e)((ge,fe)=>{ge.subscribe((0,k.x)(fe,he=>(0,u.f)(fe,se,()=>fe.next(he),re),()=>(0,u.f)(fe,se,()=>fe.complete(),re),he=>(0,u.f)(fe,se,()=>fe.error(he),re)))})}},3099:(_t,Te,F)=>{F.d(Te,{B:()=>se});var u=F(8421),te=F(7579),k=F(930),oe=F(4482);function se(ge={}){const{connector:fe=(()=>new te.x),resetOnError:he=!0,resetOnComplete:G=!0,resetOnRefCountZero:z=!0}=ge;return Q=>{let He,De,Ze,dt=0,me=!1,Se=!1;const be=()=>{De?.unsubscribe(),De=void 0},Be=()=>{be(),He=Ze=void 0,me=Se=!1},ke=()=>{const Ce=He;Be(),Ce?.unsubscribe()};return(0,oe.e)((Ce,we)=>{dt++,!Se&&!me&&be();const ze=Ze=Ze??fe();we.add(()=>{dt--,0===dt&&!Se&&!me&&(De=re(ke,z))}),ze.subscribe(we),!He&&dt>0&&(He=new k.Hp({next:Pe=>ze.next(Pe),error:Pe=>{Se=!0,be(),De=re(Be,he,Pe),ze.error(Pe)},complete:()=>{me=!0,be(),De=re(Be,G),ze.complete()}}),(0,u.Xf)(Ce).subscribe(He))})(Q)}}function re(ge,fe,...he){if(!0===fe)return void ge();if(!1===fe)return;const G=new k.Hp({next:()=>{G.unsubscribe(),ge()}});return(0,u.Xf)(fe(...he)).subscribe(G)}},9468:(_t,Te,F)=>{F.d(Te,{R:()=>te});var u=F(4482);function te(k,oe=0){return(0,u.e)((se,re)=>{re.add(k.schedule(()=>se.subscribe(re),oe))})}},8505:(_t,Te,F)=>{F.d(Te,{b:()=>se});var u=F(576),te=F(4482),k=F(5403),oe=F(4671);function se(re,ge,fe){const he=(0,u.m)(re)||ge||fe?{next:re,error:ge,complete:fe}:re;return he?(0,te.e)((G,z)=>{var Q;null===(Q=he.subscribe)||void 0===Q||Q.call(he);let He=!0;G.subscribe((0,k.x)(z,De=>{var Ze;null===(Ze=he.next)||void 0===Ze||Ze.call(he,De),z.next(De)},()=>{var De;He=!1,null===(De=he.complete)||void 0===De||De.call(he),z.complete()},De=>{var Ze;He=!1,null===(Ze=he.error)||void 0===Ze||Ze.call(he,De),z.error(De)},()=>{var De,Ze;He&&(null===(De=he.unsubscribe)||void 0===De||De.call(he)),null===(Ze=he.finalize)||void 0===Ze||Ze.call(he)}))}):oe.y}},4408:(_t,Te,F)=>{F.d(Te,{o:()=>se});var u=F(727);class te extends u.w0{constructor(ge,fe){super()}schedule(ge,fe=0){return this}}const k={setInterval(re,ge,...fe){const{delegate:he}=k;return he?.setInterval?he.setInterval(re,ge,...fe):setInterval(re,ge,...fe)},clearInterval(re){const{delegate:ge}=k;return(ge?.clearInterval||clearInterval)(re)},delegate:void 0};var oe=F(8737);class se extends te{constructor(ge,fe){super(ge,fe),this.scheduler=ge,this.work=fe,this.pending=!1}schedule(ge,fe=0){var he;if(this.closed)return this;this.state=ge;const G=this.id,z=this.scheduler;return null!=G&&(this.id=this.recycleAsyncId(z,G,fe)),this.pending=!0,this.delay=fe,this.id=null!==(he=this.id)&&void 0!==he?he:this.requestAsyncId(z,this.id,fe),this}requestAsyncId(ge,fe,he=0){return k.setInterval(ge.flush.bind(ge,this),he)}recycleAsyncId(ge,fe,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return fe;null!=fe&&k.clearInterval(fe)}execute(ge,fe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(ge,fe);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ge,fe){let G,he=!1;try{this.work(ge)}catch(z){he=!0,G=z||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:ge,scheduler:fe}=this,{actions:he}=fe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(he,this),null!=ge&&(this.id=this.recycleAsyncId(fe,ge,null)),this.delay=null,super.unsubscribe()}}}},7565:(_t,Te,F)=>{F.d(Te,{v:()=>k});var u=F(6063);class te{constructor(se,re=te.now){this.schedulerActionCtor=se,this.now=re}schedule(se,re=0,ge){return new this.schedulerActionCtor(this,se).schedule(ge,re)}}te.now=u.l.now;class k extends te{constructor(se,re=te.now){super(se,re),this.actions=[],this._active=!1}flush(se){const{actions:re}=this;if(this._active)return void re.push(se);let ge;this._active=!0;do{if(ge=se.execute(se.state,se.delay))break}while(se=re.shift());if(this._active=!1,ge){for(;se=re.shift();)se.unsubscribe();throw ge}}}},4986:(_t,Te,F)=>{F.d(Te,{z:()=>k});var u=F(4408);const k=new(F(7565).v)(u.o)},6063:(_t,Te,F)=>{F.d(Te,{l:()=>u});const u={now:()=>(u.delegate||Date).now(),delegate:void 0}},3410:(_t,Te,F)=>{F.d(Te,{z:()=>u});const u={setTimeout(te,k,...oe){const{delegate:se}=u;return se?.setTimeout?se.setTimeout(te,k,...oe):setTimeout(te,k,...oe)},clearTimeout(te){const{delegate:k}=u;return(k?.clearTimeout||clearTimeout)(te)},delegate:void 0}},2202:(_t,Te,F)=>{F.d(Te,{h:()=>te});const te=function u(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(_t,Te,F)=>{F.d(Te,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(_t,Te,F)=>{F.d(Te,{_6:()=>re,jO:()=>oe,yG:()=>se});var u=F(576);function k(ge){return ge[ge.length-1]}function oe(ge){return(0,u.m)(k(ge))?ge.pop():void 0}function se(ge){return function te(ge){return ge&&(0,u.m)(ge.schedule)}(k(ge))?ge.pop():void 0}function re(ge,fe){return"number"==typeof k(ge)?ge.pop():fe}},8737:(_t,Te,F)=>{function u(te,k){if(te){const oe=te.indexOf(k);0<=oe&&te.splice(oe,1)}}F.d(Te,{P:()=>u})},3888:(_t,Te,F)=>{function u(te){const oe=te(se=>{Error.call(se),se.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}F.d(Te,{d:()=>u})},2806:(_t,Te,F)=>{F.d(Te,{O:()=>oe,x:()=>k});var u=F(2416);let te=null;function k(se){if(u.v.useDeprecatedSynchronousErrorHandling){const re=!te;if(re&&(te={errorThrown:!1,error:null}),se(),re){const{errorThrown:ge,error:fe}=te;if(te=null,ge)throw fe}}else se()}function oe(se){u.v.useDeprecatedSynchronousErrorHandling&&te&&(te.errorThrown=!0,te.error=se)}},9672:(_t,Te,F)=>{function u(te,k,oe,se=0,re=!1){const ge=k.schedule(function(){oe(),re?te.add(this.schedule(null,se)):this.unsubscribe()},se);if(te.add(ge),!re)return ge}F.d(Te,{f:()=>u})},4671:(_t,Te,F)=>{function u(te){return te}F.d(Te,{y:()=>u})},1144:(_t,Te,F)=>{F.d(Te,{z:()=>u});const u=te=>te&&"number"==typeof te.length&&"function"!=typeof te},2206:(_t,Te,F)=>{F.d(Te,{D:()=>te});var u=F(576);function te(k){return Symbol.asyncIterator&&(0,u.m)(k?.[Symbol.asyncIterator])}},576:(_t,Te,F)=>{function u(te){return"function"==typeof te}F.d(Te,{m:()=>u})},3670:(_t,Te,F)=>{F.d(Te,{c:()=>k});var u=F(8822),te=F(576);function k(oe){return(0,te.m)(oe[u.L])}},6495:(_t,Te,F)=>{F.d(Te,{T:()=>k});var u=F(2202),te=F(576);function k(oe){return(0,te.m)(oe?.[u.h])}},8239:(_t,Te,F)=>{F.d(Te,{t:()=>te});var u=F(576);function te(k){return(0,u.m)(k?.then)}},3260:(_t,Te,F)=>{F.d(Te,{L:()=>oe,Q:()=>k});var u=F(655),te=F(576);function k(se){return(0,u.FC)(this,arguments,function*(){const ge=se.getReader();try{for(;;){const{value:fe,done:he}=yield(0,u.qq)(ge.read());if(he)return yield(0,u.qq)(void 0);yield yield(0,u.qq)(fe)}}finally{ge.releaseLock()}})}function oe(se){return(0,te.m)(se?.getReader)}},4482:(_t,Te,F)=>{F.d(Te,{A:()=>te,e:()=>k});var u=F(576);function te(oe){return(0,u.m)(oe?.lift)}function k(oe){return se=>{if(te(se))return se.lift(function(re){try{return oe(re,this)}catch(ge){this.error(ge)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(_t,Te,F)=>{function u(){}F.d(Te,{Z:()=>u})},9635:(_t,Te,F)=>{F.d(Te,{U:()=>k,z:()=>te});var u=F(4671);function te(...oe){return k(oe)}function k(oe){return 0===oe.length?u.y:1===oe.length?oe[0]:function(re){return oe.reduce((ge,fe)=>fe(ge),re)}}},7849:(_t,Te,F)=>{F.d(Te,{h:()=>k});var u=F(2416),te=F(3410);function k(oe){te.z.setTimeout(()=>{const{onUnhandledError:se}=u.v;if(!se)throw oe;se(oe)})}},4532:(_t,Te,F)=>{function u(te){return new TypeError(`You provided ${null!==te&&"object"==typeof te?"an invalid object":`'${te}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Te,{z:()=>u})},655:(_t,Te,F)=>{function oe(ae,_e){var Ee={};for(var Ae in ae)Object.prototype.hasOwnProperty.call(ae,Ae)&&_e.indexOf(Ae)<0&&(Ee[Ae]=ae[Ae]);if(null!=ae&&"function"==typeof Object.getOwnPropertySymbols){var Fe=0;for(Ae=Object.getOwnPropertySymbols(ae);Fe<Ae.length;Fe++)_e.indexOf(Ae[Fe])<0&&Object.prototype.propertyIsEnumerable.call(ae,Ae[Fe])&&(Ee[Ae[Fe]]=ae[Ae[Fe]])}return Ee}function Q(ae,_e,Ee,Ae){return new(Ee||(Ee=Promise))(function(je,ot){function tt(Yt){try{Ye(Ae.next(Yt))}catch(Tt){ot(Tt)}}function bt(Yt){try{Ye(Ae.throw(Yt))}catch(Tt){ot(Tt)}}function Ye(Yt){Yt.done?je(Yt.value):function Fe(je){return je instanceof Ee?je:new Ee(function(ot){ot(je)})}(Yt.value).then(tt,bt)}Ye((Ae=Ae.apply(ae,_e||[])).next())})}function ke(ae){return this instanceof ke?(this.v=ae,this):new ke(ae)}function Ce(ae,_e,Ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Fe,Ae=Ee.apply(ae,_e||[]),je=[];return Fe={},ot("next"),ot("throw"),ot("return"),Fe[Symbol.asyncIterator]=function(){return this},Fe;function ot(on){Ae[on]&&(Fe[on]=function(wn){return new Promise(function(_n,kn){je.push([on,wn,_n,kn])>1||tt(on,wn)})})}function tt(on,wn){try{!function bt(on){on.value instanceof ke?Promise.resolve(on.value.v).then(Ye,Yt):Tt(je[0][2],on)}(Ae[on](wn))}catch(_n){Tt(je[0][3],_n)}}function Ye(on){tt("next",on)}function Yt(on){tt("throw",on)}function Tt(on,wn){on(wn),je.shift(),je.length&&tt(je[0][0],je[0][1])}}function ze(ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ee,_e=ae[Symbol.asyncIterator];return _e?_e.call(ae):(ae=function dt(ae){var _e="function"==typeof Symbol&&Symbol.iterator,Ee=_e&&ae[_e],Ae=0;if(Ee)return Ee.call(ae);if(ae&&"number"==typeof ae.length)return{next:function(){return ae&&Ae>=ae.length&&(ae=void 0),{value:ae&&ae[Ae++],done:!ae}}};throw new TypeError(_e?"Object is not iterable.":"Symbol.iterator is not defined.")}(ae),Ee={},Ae("next"),Ae("throw"),Ae("return"),Ee[Symbol.asyncIterator]=function(){return this},Ee);function Ae(je){Ee[je]=ae[je]&&function(ot){return new Promise(function(tt,bt){!function Fe(je,ot,tt,bt){Promise.resolve(bt).then(function(Ye){je({value:Ye,done:tt})},ot)}(tt,bt,(ot=ae[je](ot)).done,ot.value)})}}}F.d(Te,{FC:()=>Ce,KL:()=>ze,_T:()=>oe,mG:()=>Q,qq:()=>ke})},4650:(_t,Te,F)=>{F.d(Te,{$8M:()=>Tu,$WT:()=>as,$Z:()=>uI,AFp:()=>yi,ALo:()=>Gb,AaK:()=>fe,AsE:()=>cy,BQk:()=>ey,CHM:()=>Nc,CRH:()=>Gy,CZH:()=>xn,CqO:()=>$w,D6c:()=>IM,DdM:()=>ky,Dn7:()=>Zb,EJc:()=>Wn,EiD:()=>Uu,EpF:()=>Zn,F4k:()=>Ug,FYo:()=>pd,FiY:()=>Ns,GfV:()=>WC,Gpc:()=>z,JOm:()=>io,JVY:()=>jl,JZr:()=>dt,KtG:()=>pu,L6k:()=>nf,LAX:()=>wg,LFG:()=>an,LSH:()=>ad,Lbi:()=>pT,Lck:()=>kA,MAs:()=>Rd,MMx:()=>um,NdJ:()=>jw,O4$:()=>Gp,OlP:()=>Jt,Oqu:()=>Yl,P3R:()=>ud,PXZ:()=>qd,Q6J:()=>Zl,QGY:()=>Sf,QbO:()=>sM,Qsj:()=>OS,R0b:()=>co,RDi:()=>yg,Rgc:()=>Hd,SBq:()=>pf,Sil:()=>aM,Suo:()=>ja,TTD:()=>dl,TgZ:()=>Vg,Tol:()=>ly,Udp:()=>ay,VKq:()=>Fy,W1O:()=>tT,X6Q:()=>XR,XFs:()=>pt,Xpm:()=>$i,Xts:()=>x_,Y36:()=>wf,YKP:()=>D0,YNc:()=>RI,Yjl:()=>bc,Yz7:()=>Tt,Z0I:()=>kn,ZZ4:()=>fv,_Bn:()=>xy,_UZ:()=>X_,_Vd:()=>ff,_c5:()=>EM,_uU:()=>rc,aQg:()=>pv,c2e:()=>lE,cJS:()=>wn,cg1:()=>Of,d8E:()=>Pf,dDg:()=>hM,dqk:()=>hn,eBb:()=>Ri,eFA:()=>MT,eJc:()=>Wy,ekj:()=>Yw,eoX:()=>uc,f3M:()=>Ie,g9A:()=>vm,h0i:()=>$s,hGG:()=>CM,hij:()=>ic,iGM:()=>Xb,ifc:()=>ve,ip1:()=>oE,jDz:()=>Ry,kL8:()=>u0,lG2:()=>ta,lcZ:()=>qb,lqb:()=>ju,lri:()=>cE,mCW:()=>Hl,n5z:()=>Dl,oAB:()=>il,oJD:()=>sd,oxw:()=>Gw,pB0:()=>rf,q3G:()=>qn,q4F:()=>KC,qLn:()=>gf,qOj:()=>Z_,qZA:()=>Wl,qzn:()=>Lo,rWj:()=>wm,s9C:()=>Bg,sBO:()=>pM,s_b:()=>$y,soG:()=>rv,tb:()=>bT,tp0:()=>Ea,uIk:()=>Y_,vHH:()=>me,vpe:()=>$a,wAp:()=>Mt,xi3:()=>R0,xp6:()=>un,ynx:()=>ec,z2F:()=>Zo,z3N:()=>Os,zSh:()=>Ig,zs3:()=>Jr});var u=F(7579),te=F(727),k=F(9751),oe=F(6451),se=F(3099);function re(s){for(let a in s)if(s[a]===re)return a;throw Error("Could not find renamed property on target object.")}function ge(s,a){for(const l in a)a.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=a[l])}function fe(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(fe).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const a=s.toString();if(null==a)return""+a;const l=a.indexOf("\n");return-1===l?a:a.substring(0,l)}function he(s,a){return null==s||""===s?null===a?"":a:null==a||""===a?s:s+" "+a}const G=re({__forward_ref__:re});function z(s){return s.__forward_ref__=z,s.toString=function(){return fe(this())},s}function Q(s){return He(s)?s():s}function He(s){return"function"==typeof s&&s.hasOwnProperty(G)&&s.__forward_ref__===z}function De(s){return s&&!!s.\u0275providers}const dt="https://g.co/ng/security#xss";class me extends Error{constructor(a,l){super(Se(a,l)),this.code=a}}function Se(s,a){return`NG0${Math.abs(s)}${a?": "+a.trim():""}`}function be(s){return"string"==typeof s?s:null==s?"":String(s)}function ze(s,a){throw new me(-201,!1)}function ot(s,a){null==s&&function tt(s,a,l,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${l} ${d} ${a} <=Actual]`))}(a,s,null,"!=")}function Tt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function wn(s){return{providers:s.providers||[],imports:s.imports||[]}}function _n(s){return oi(s,Rr)||oi(s,Es)}function kn(s){return null!==_n(s)}function oi(s,a){return s.hasOwnProperty(a)?s[a]:null}function Ws(s){return s&&(s.hasOwnProperty(ws)||s.hasOwnProperty(jn))?s[ws]:null}const Rr=re({\u0275prov:re}),ws=re({\u0275inj:re}),Es=re({ngInjectableDef:re}),jn=re({ngInjectorDef:re});var pt=(()=>((pt=pt||{})[pt.Default=0]="Default",pt[pt.Host=1]="Host",pt[pt.Self=2]="Self",pt[pt.SkipSelf=4]="SkipSelf",pt[pt.Optional=8]="Optional",pt))();let ai;function Qn(s){const a=ai;return ai=s,a}function ss(s,a,l){const d=_n(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:l&pt.Optional?null:void 0!==a?a:void ze(fe(s))}const hn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Si={},li="__NG_DI_FLAG__",Jn="ngTempTokenPath",Or="ngTokenPath",Er=/\n/gm,rl="\u0275",mn="__source";let Bi;function Wt(s){const a=Bi;return Bi=s,a}function po(s,a=pt.Default){if(void 0===Bi)throw new me(-203,!1);return null===Bi?ss(s,void 0,a):Bi.get(s,a&pt.Optional?null:void 0,a)}function an(s,a=pt.Default){return(function nl(){return ai}()||po)(Q(s),a)}function Ie(s,a=pt.Default){return an(s,Je(a))}function Je(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function kt(s){const a=[];for(let l=0;l<s.length;l++){const d=Q(s[l]);if(Array.isArray(d)){if(0===d.length)throw new me(900,!1);let f,m=pt.Default;for(let w=0;w<d.length;w++){const C=d[w],b=fn(C);"number"==typeof b?-1===b?f=C.token:m|=b:f=C}a.push(an(f,m))}else a.push(an(d))}return a}function It(s,a){return s[li]=a,s.prototype[li]=a,s}function fn(s){return s[li]}function B(s){return{toString:s}.toString()}var K=(()=>((K=K||{})[K.OnPush=0]="OnPush",K[K.Default=1]="Default",K))(),ve=(()=>{return(s=ve||(ve={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",ve;var s})();const ne={},Le=[],Nt=re({\u0275cmp:re}),pn=re({\u0275dir:re}),ir=re({\u0275pipe:re}),Xn=re({\u0275mod:re}),gn=re({\u0275fac:re}),Qt=re({__NG_ELEMENT_ID__:re});let os=0;function $i(s){return B(()=>{const a=ih(s),l={...a,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===K.OnPush,directiveDefs:null,pipeDefs:null,dependencies:a.standalone&&s.dependencies||null,getStandaloneInjector:null,data:s.data||{},encapsulation:s.encapsulation||ve.Emulated,id:"c"+os++,styles:s.styles||Le,_:null,schemas:s.schemas||null,tView:null};ui(l);const d=s.dependencies;return l.directiveDefs=sl(d,!1),l.pipeDefs=sl(d,!0),l})}function e_(s){return ln(s)||sr(s)}function su(s){return null!==s}function il(s){return B(()=>({type:s.type,bootstrap:s.bootstrap||Le,declarations:s.declarations||Le,imports:s.imports||Le,exports:s.exports||Le,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function Ic(s,a){if(null==s)return ne;const l={};for(const d in s)if(s.hasOwnProperty(d)){let f=s[d],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),l[f]=d,a&&(a[f]=m)}return l}function ta(s){return B(()=>{const a=ih(s);return ui(a),a})}function bc(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function ln(s){return s[Nt]||null}function sr(s){return s[pn]||null}function Cr(s){return s[ir]||null}function as(s){const a=ln(s)||sr(s)||Cr(s);return null!==a&&a.standalone}function kr(s,a){const l=s[Xn]||null;if(!l&&!0===a)throw new Error(`Type ${fe(s)} does not have '\u0275mod' property.`);return l}function ih(s){const a={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,exportAs:s.exportAs||null,standalone:!0===s.standalone,selectors:s.selectors||Le,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ic(s.inputs,a),outputs:Ic(s.outputs)}}function ui(s){s.features?.forEach(a=>a(s))}function sl(s,a){if(!s)return null;const l=a?Cr:e_;return()=>("function"==typeof s?s():s).map(d=>l(d)).filter(su)}const dr=0,nt=1,Vt=2,Fn=3,Kt=4,Ks=5,Fr=6,Ir=7,Pn=8,ol=9,ci=10,jt=11,Tc=12,ji=13,au=14,Hi=15,Lr=16,na=17,go=18,Gi=19,ra=20,Dc=21,yn=22,Sc=1,lu=2,ia=7,Cs=8,Gr=9,br=10;function zr(s){return Array.isArray(s)&&"object"==typeof s[Sc]}function zi(s){return Array.isArray(s)&&!0===s[Sc]}function al(s){return 0!=(4&s.flags)}function ll(s){return s.componentOffset>-1}function ul(s){return 1==(1&s.flags)}function er(s){return!!s.template}function Is(s){return 0!=(256&s[Vt])}function Zi(s,a){return s.hasOwnProperty(gn)?s[gn]:null}class vo{constructor(a,l,d){this.previousValue=a,this.currentValue=l,this.firstChange=d}isFirstChange(){return this.firstChange}}function dl(){return hl}function hl(s){return s.type.prototype.ngOnChanges&&(s.setInput=Ts),ah}function ah(){const s=oa(this),a=s?.current;if(a){const l=s.previous;if(l===ne)s.previous=a;else for(let d in a)l[d]=a[d];s.current=null,this.ngOnChanges(a)}}function Ts(s,a,l,d){const f=this.declaredInputs[l],m=oa(s)||function lh(s,a){return s[hu]=a}(s,{previous:ne,current:null}),w=m.current||(m.current={}),C=m.previous,b=C[f];w[f]=new vo(b&&b.currentValue,a,C===ne),s[d]=a}dl.ngInherit=!0;const hu="__ngSimpleChanges__";function oa(s){return s[hu]||null}const Ln=function(s,a,l){},or="svg";function Gn(s){for(;Array.isArray(s);)s=s[dr];return s}function Io(s,a){return Gn(a[s])}function hr(s,a){return Gn(a[s.index])}function aa(s,a){return s.data[a]}function Ds(s,a){return s[a]}function fr(s,a){const l=a[s];return zr(l)?l:l[dr]}function la(s){return 64==(64&s[Vt])}function Wi(s,a){return null==a?null:s[a]}function fu(s){s[go]=0}function bo(s,a){s[Ks]+=a;let l=s,d=s[Fn];for(;null!==d&&(1===a&&1===l[Ks]||-1===a&&0===l[Ks]);)d[Ks]+=a,l=d,d=d[Fn]}const Rt={lFrame:mh(null),bindingsEnabled:!0};function hh(){return Rt.bindingsEnabled}function pe(){return Rt.lFrame.lView}function zt(){return Rt.lFrame.tView}function Nc(s){return Rt.lFrame.contextLView=s,s[Pn]}function pu(s){return Rt.lFrame.contextLView=null,s}function zn(){let s=Rc();for(;null!==s&&64===s.type;)s=s.parent;return s}function Rc(){return Rt.lFrame.currentTNode}function Ki(s,a){const l=Rt.lFrame;l.currentTNode=s,l.isParent=a}function da(){return Rt.lFrame.isParent}function fh(){Rt.lFrame.isParent=!1}function Vr(){const s=Rt.lFrame;let a=s.bindingRootIndex;return-1===a&&(a=s.bindingRootIndex=s.tView.bindingStartIndex),a}function Ss(){return Rt.lFrame.bindingIndex++}function Ys(s){const a=Rt.lFrame,l=a.bindingIndex;return a.bindingIndex=a.bindingIndex+s,l}function Up(s,a){const l=Rt.lFrame;l.bindingIndex=l.bindingRootIndex=s,ml(a)}function ml(s){Rt.lFrame.currentDirectiveIndex=s}function mu(s){const a=Rt.lFrame.currentDirectiveIndex;return-1===a?null:s[a]}function Pc(){return Rt.lFrame.currentQueryIndex}function Oc(s){Rt.lFrame.currentQueryIndex=s}function _u(s){const a=s[nt];return 2===a.type?a.declTNode:1===a.type?s[Fr]:null}function $p(s,a,l){if(l&pt.SkipSelf){let f=a,m=s;for(;!(f=f.parent,null!==f||l&pt.Host||(f=_u(m),null===f||(m=m[Hi],10&f.type))););if(null===f)return!1;a=f,s=m}const d=Rt.lFrame=jp();return d.currentTNode=a,d.lView=s,!0}function pa(s){const a=jp(),l=s[nt];Rt.lFrame=a,a.currentTNode=l.firstChild,a.lView=s,a.tView=l,a.contextLView=s,a.bindingIndex=l.bindingStartIndex,a.inI18n=!1}function jp(){const s=Rt.lFrame,a=null===s?null:s.child;return null===a?mh(s):a}function mh(s){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=a),a}function r_(){const s=Rt.lFrame;return Rt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const _l=r_;function Hp(){const s=r_();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Zr(){return Rt.lFrame.selectedIndex}function Qs(s){Rt.lFrame.selectedIndex=s}function Dn(){const s=Rt.lFrame;return aa(s.tView,s.selectedIndex)}function Gp(){Rt.lFrame.currentNamespace=or}function yu(s,a){for(let l=a.directiveStart,d=a.directiveEnd;l<d;l++){const m=s.data[l].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:C,ngAfterViewInit:b,ngAfterViewChecked:M,ngOnDestroy:P}=m;w&&(s.contentHooks??(s.contentHooks=[])).push(-l,w),C&&((s.contentHooks??(s.contentHooks=[])).push(l,C),(s.contentCheckHooks??(s.contentCheckHooks=[])).push(l,C)),b&&(s.viewHooks??(s.viewHooks=[])).push(-l,b),M&&((s.viewHooks??(s.viewHooks=[])).push(l,M),(s.viewCheckHooks??(s.viewCheckHooks=[])).push(l,M)),null!=P&&(s.destroyHooks??(s.destroyHooks=[])).push(l,P)}}function Fc(s,a,l){vu(s,a,3,l)}function yh(s,a,l,d){(3&s[Vt])===l&&vu(s,a,l,d)}function vh(s,a){let l=s[Vt];(3&l)===a&&(l&=2047,l+=1,s[Vt]=l)}function vu(s,a,l,d){const m=d??-1,w=a.length-1;let C=0;for(let b=void 0!==d?65535&s[go]:0;b<w;b++)if("number"==typeof a[b+1]){if(C=a[b],null!=d&&C>=d)break}else a[b]<0&&(s[go]+=65536),(C<m||-1==m)&&(So(s,l,a,b),s[go]=(4294901760&s[go])+b+2),b++}function So(s,a,l,d){const f=l[d]<0,m=l[d+1],C=s[f?-l[d]:l[d]];if(f){if(s[Vt]>>11<s[go]>>16&&(3&s[Vt])===a){s[Vt]+=2048,Ln(4,C,m);try{m.call(C)}finally{Ln(5,C,m)}}}else{Ln(4,C,m);try{m.call(C)}finally{Ln(5,C,m)}}}const yl=-1;class As{constructor(a,l,d){this.factory=a,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=d}}function Eu(s,a,l){let d=0;for(;d<l.length;){const f=l[d];if("number"==typeof f){if(0!==f)break;d++;const m=l[d++],w=l[d++],C=l[d++];s.setAttribute(a,w,C,m)}else{const m=f,w=l[++d];ga(m)?s.setProperty(a,m,w):s.setAttribute(a,m,w),d++}}return d}function Cu(s){return 3===s||4===s||6===s}function ga(s){return 64===s.charCodeAt(0)}function Ms(s,a){if(null!==a&&0!==a.length)if(null===s||0===s.length)s=a.slice();else{let l=-1;for(let d=0;d<a.length;d++){const f=a[d];"number"==typeof f?l=f:0===l||Mo(s,l,f,null,-1===l||2===l?a[++d]:null)}}return s}function Mo(s,a,l,d,f){let m=0,w=s.length;if(-1===a)w=-1;else for(;m<s.length;){const C=s[m++];if("number"==typeof C){if(C===a){w=-1;break}if(C>a){w=m-1;break}}}for(;m<s.length;){const C=s[m];if("number"==typeof C)break;if(C===l){if(null===d)return void(null!==f&&(s[m+1]=f));if(d===s[m+1])return void(s[m+2]=f)}m++,null!==d&&m++,null!==f&&m++}-1!==w&&(s.splice(w,0,a),m=w+1),s.splice(m++,0,l),null!==d&&s.splice(m++,0,d),null!==f&&s.splice(m++,0,f)}function xo(s){return s!==yl}function vl(s){return 32767&s}function wl(s,a){let l=function Iu(s){return s>>16}(s),d=a;for(;l>0;)d=d[Hi],l--;return d}let El=!0;function Cl(s){const a=El;return El=s,a}const zp=255,Js=5;let qp=0;const Vn={};function ma(s,a){const l=Il(s,a);if(-1!==l)return l;const d=a[nt];d.firstCreatePass&&(s.injectorIndex=a.length,Xs(d.data,s),Xs(a,null),Xs(d.blueprint,null));const f=Sn(s,a),m=s.injectorIndex;if(xo(f)){const w=vl(f),C=wl(f,a),b=C[nt].data;for(let M=0;M<8;M++)a[m+M]=C[w+M]|b[w+M]}return a[m+8]=f,m}function Xs(s,a){s.push(0,0,0,0,0,0,0,0,a)}function Il(s,a){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===a[s.injectorIndex+8]?-1:s.injectorIndex}function Sn(s,a){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,d=null,f=a;for(;null!==f;){if(d=Al(f),null===d)return yl;if(l++,f=f[Hi],-1!==d.injectorIndex)return d.injectorIndex|l<<16}return yl}function _a(s,a,l){!function Uc(s,a,l){let d;"string"==typeof l?d=l.charCodeAt(0)||0:l.hasOwnProperty(Qt)&&(d=l[Qt]),null==d&&(d=l[Qt]=qp++);const f=d&zp;a.data[s+(f>>Js)]|=1<<f}(s,a,l)}function Ih(s,a,l){if(l&pt.Optional||void 0!==s)return s;ze()}function No(s,a,l,d){if(l&pt.Optional&&void 0===d&&(d=null),!(l&(pt.Self|pt.Host))){const f=s[ol],m=Qn(void 0);try{return f?f.get(a,d,l&pt.Optional):ss(a,d,l&pt.Optional)}finally{Qn(m)}}return Ih(d,0,l)}function bh(s,a,l,d=pt.Default,f){if(null!==s){if(1024&a[Vt]){const w=function Zp(s,a,l,d,f){let m=s,w=a;for(;null!==m&&null!==w&&1024&w[Vt]&&!(256&w[Vt]);){const C=bu(m,w,l,d|pt.Self,Vn);if(C!==Vn)return C;let b=m.parent;if(!b){const M=w[Dc];if(M){const P=M.get(l,Vn,d);if(P!==Vn)return P}b=Al(w),w=w[Hi]}m=b}return f}(s,a,l,d,Vn);if(w!==Vn)return w}const m=bu(s,a,l,d,Vn);if(m!==Vn)return m}return No(a,l,d,f)}function bu(s,a,l,d,f){const m=function Dh(s){if("string"==typeof s)return s.charCodeAt(0)||0;const a=s.hasOwnProperty(Qt)?s[Qt]:void 0;return"number"==typeof a?a>=0?a&zp:Yi:a}(l);if("function"==typeof m){if(!$p(a,s,d))return d&pt.Host?Ih(f,0,d):No(a,l,d,f);try{const w=m(d);if(null!=w||d&pt.Optional)return w;ze()}finally{_l()}}else if("number"==typeof m){let w=null,C=Il(s,a),b=yl,M=d&pt.Host?a[Lr][Fr]:null;for((-1===C||d&pt.SkipSelf)&&(b=-1===C?Sn(s,a):a[C+8],b!==yl&&Tl(d,!1)?(w=a[nt],C=vl(b),a=wl(b,a)):C=-1);-1!==C;){const P=a[nt];if(cs(m,C,P.data)){const V=Th(C,a,l,w,d,M);if(V!==Vn)return V}b=a[C+8],b!==yl&&Tl(d,a[nt].data[C+8]===M)&&cs(m,C,a)?(w=P,C=vl(b),a=wl(b,a)):C=-1}}return f}function Th(s,a,l,d,f,m){const w=a[nt],C=w.data[s+8],P=di(C,w,l,null==d?ll(C)&&El:d!=w&&0!=(3&C.type),f&pt.Host&&m===C);return null!==P?us(a,w,P,C):Vn}function di(s,a,l,d,f){const m=s.providerIndexes,w=a.data,C=1048575&m,b=s.directiveStart,P=m>>20,Z=f?C+P:s.directiveEnd;for(let ee=d?C:C+P;ee<Z;ee++){const ye=w[ee];if(ee<b&&l===ye||ee>=b&&ye.type===l)return ee}if(f){const ee=w[b];if(ee&&er(ee)&&ee.type===l)return b}return null}function us(s,a,l,d){let f=s[l];const m=a.data;if(function o_(s){return s instanceof As}(f)){const w=f;w.resolving&&function ke(s,a){const l=a?`. Dependency path: ${a.join(" > ")} > ${s}`:"";throw new me(-200,`Circular dependency in DI detected for ${s}${l}`)}(function Be(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():be(s)}(m[l]));const C=Cl(w.canSeeViewProviders);w.resolving=!0;const b=w.injectImpl?Qn(w.injectImpl):null;$p(s,d,pt.Default);try{f=s[l]=w.factory(void 0,m,s,d),a.firstCreatePass&&l>=d.directiveStart&&function s_(s,a,l){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:m}=a.type.prototype;if(d){const w=hl(a);(l.preOrderHooks??(l.preOrderHooks=[])).push(s,w),(l.preOrderCheckHooks??(l.preOrderCheckHooks=[])).push(s,w)}f&&(l.preOrderHooks??(l.preOrderHooks=[])).push(0-s,f),m&&((l.preOrderHooks??(l.preOrderHooks=[])).push(s,m),(l.preOrderCheckHooks??(l.preOrderCheckHooks=[])).push(s,m))}(l,m[l],a)}finally{null!==b&&Qn(b),Cl(C),w.resolving=!1,_l()}}return f}function cs(s,a,l){return!!(l[a+(s>>Js)]&1<<s)}function Tl(s,a){return!(s&pt.Self||s&pt.Host&&a)}class Ro{constructor(a,l){this._tNode=a,this._lView=l}get(a,l,d){return bh(this._tNode,this._lView,a,Je(d),l)}}function Yi(){return new Ro(zn(),pe())}function Dl(s){return B(()=>{const a=s.prototype.constructor,l=a[gn]||Sl(a),d=Object.prototype;let f=Object.getPrototypeOf(s.prototype).constructor;for(;f&&f!==d;){const m=f[gn]||Sl(f);if(m&&m!==l)return m;f=Object.getPrototypeOf(f)}return m=>new m})}function Sl(s){return He(s)?()=>{const a=Sl(Q(s));return a&&a()}:Zi(s)}function Al(s){const a=s[nt],l=a.type;return 2===l?a.declTNode:1===l?s[Fr]:null}function Tu(s){return function bl(s,a){if("class"===a)return s.classes;if("style"===a)return s.styles;const l=s.attrs;if(l){const d=l.length;let f=0;for(;f<d;){const m=l[f];if(Cu(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<d&&"string"==typeof l[f];)f++;else{if(m===a)return l[f+1];f+=2}}}return null}(zn(),s)}const Oo="__parameters__";function Ml(s,a,l){return B(()=>{const d=function Wp(s){return function(...l){if(s){const d=s(...l);for(const f in d)this[f]=d[f]}}}(a);function f(...m){if(this instanceof f)return d.apply(this,m),this;const w=new f(...m);return C.annotation=w,C;function C(b,M,P){const V=b.hasOwnProperty(Oo)?b[Oo]:Object.defineProperty(b,Oo,{value:[]})[Oo];for(;V.length<=P;)V.push(null);return(V[P]=V[P]||[]).push(w),b}}return l&&(f.prototype=Object.create(l.prototype)),f.prototype.ngMetadataName=s,f.annotationCls=f,f})}class Jt{constructor(a,l){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=Tt({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function eo(s,a){s.forEach(l=>Array.isArray(l)?eo(l,a):a(l))}function Nl(s,a,l){a>=s.length?s.push(l):s.splice(a,0,l)}function Rl(s,a){return a>=s.length-1?s.pop():s.splice(a,1)[0]}function Qi(s,a,l){let d=Ji(s,a);return d>=0?s[1|d]=l:(d=~d,function wa(s,a,l,d){let f=s.length;if(f==a)s.push(l,d);else if(1===f)s.push(d,s[0]),s[0]=l;else{for(f--,s.push(s[f-1],s[f]);f>a;)s[f]=s[f-2],f--;s[a]=l,s[a+1]=d}}(s,d,a,l)),d}function gr(s,a){const l=Ji(s,a);if(l>=0)return s[1|l]}function Ji(s,a){return function Xt(s,a,l){let d=0,f=s.length>>l;for(;f!==d;){const m=d+(f-d>>1),w=s[m<<l];if(a===w)return m<<l;w>a?f=m:d=m+1}return~(f<<l)}(s,a,1)}const Ns=It(Ml("Optional"),8),Ea=It(Ml("SkipSelf"),4);var io=(()=>((io=io||{})[io.Important=1]="Important",io[io.DashCase=2]="DashCase",io))();const Vh=new Map;let Wv=0;const jh="__ngContext__";function Qr(s,a){zr(a)?(s[jh]=a[ra],function Uh(s){Vh.set(s[ra],s)}(a)):s[jh]=a}let qc;function Fl(s,a){return qc(s,a)}function Nu(s){const a=s[Fn];return zi(a)?a[Fn]:a}function Ru(s){return Gh(s[ji])}function Zc(s){return Gh(s[Kt])}function Gh(s){for(;null!==s&&!zi(s);)s=s[Kt];return s}function Ta(s,a,l,d,f){if(null!=d){let m,w=!1;zi(d)?m=d:zr(d)&&(w=!0,d=d[dr]);const C=Gn(d);0===s&&null!==l?null==f?C_(a,l,C):oo(a,l,C,f||null,!0):1===s&&null!==l?oo(a,l,C,f||null,!0):2===s?function pg(s,a,l){const d=Qc(s,a);d&&function cg(s,a,l,d){s.removeChild(a,l,d)}(s,d,a,l)}(a,C,w):3===s&&a.destroyNode(C),null!=m&&function Jc(s,a,l,d,f){const m=l[ia];m!==Gn(l)&&Ta(a,s,d,m,f);for(let C=br;C<l.length;C++){const b=l[C];Vl(b[nt],b,s,a,d,m)}}(a,s,m,l,f)}}function Wc(s,a,l){return s.createElement(a,l)}function Zh(s,a){const l=s[Gr],d=l.indexOf(a),f=a[Fn];512&a[Vt]&&(a[Vt]&=-513,bo(f,-1)),l.splice(d,1)}function Wh(s,a){if(s.length<=br)return;const l=br+a,d=s[l];if(d){const f=d[na];null!==f&&f!==s&&Zh(f,d),a>0&&(s[l-1][Kt]=d[Kt]);const m=Rl(s,br+a);!function qh(s,a){Vl(s,a,a[jt],2,null,null),a[dr]=null,a[Fr]=null}(d[nt],d);const w=m[Gi];null!==w&&w.detachView(m[nt]),d[Fn]=null,d[Kt]=null,d[Vt]&=-65}return d}function Kh(s,a){if(!(128&a[Vt])){const l=a[jt];l.destroyNode&&Vl(s,a,l,3,null,null),function so(s){let a=s[ji];if(!a)return ug(s[nt],s);for(;a;){let l=null;if(zr(a))l=a[ji];else{const d=a[br];d&&(l=d)}if(!l){for(;a&&!a[Kt]&&a!==s;)zr(a)&&ug(a[nt],a),a=a[Fn];null===a&&(a=s),zr(a)&&ug(a[nt],a),l=a&&a[Kt]}a=l}}(a)}}function ug(s,a){if(!(128&a[Vt])){a[Vt]&=-65,a[Vt]|=128,function Kc(s,a){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let d=0;d<l.length;d+=2){const f=a[l[d]];if(!(f instanceof As)){const m=l[d+1];if(Array.isArray(m))for(let w=0;w<m.length;w+=2){const C=f[m[w]],b=m[w+1];Ln(4,C,b);try{b.call(C)}finally{Ln(5,C,b)}}else{Ln(4,f,m);try{m.call(f)}finally{Ln(5,f,m)}}}}}(s,a),function w_(s,a){const l=s.cleanup,d=a[Ir];let f=-1;if(null!==l)for(let m=0;m<l.length-1;m+=2)if("string"==typeof l[m]){const w=l[m+3];w>=0?d[f=w]():d[f=-w].unsubscribe(),m+=2}else{const w=d[f=l[m+1]];l[m].call(w)}if(null!==d){for(let m=f+1;m<d.length;m++)(0,d[m])();a[Ir]=null}}(s,a),1===a[nt].type&&a[jt].destroy();const l=a[na];if(null!==l&&zi(a[Fn])){l!==a[Fn]&&Zh(l,a);const d=a[Gi];null!==d&&d.detachView(s)}!function Hc(s){Vh.delete(s[ra])}(a)}}function E_(s,a,l){return function Yh(s,a,l){let d=a;for(;null!==d&&40&d.type;)d=(a=d).parent;if(null===d)return l[dr];{const{componentOffset:f}=d;if(f>-1){const{encapsulation:m}=s.data[d.directiveStart+f];if(m===ve.None||m===ve.Emulated)return null}return hr(d,l)}}(s,a.parent,l)}function oo(s,a,l,d,f){s.insertBefore(a,l,d,f)}function C_(s,a,l){s.appendChild(a,l)}function Yc(s,a,l,d,f){null!==d?oo(s,a,l,d,f):C_(s,a,l)}function Qc(s,a){return s.parentNode(a)}let Pu,Bl,ku,Aa,hg=function dg(s,a,l){return 40&s.type?hr(s,l):null};function Qh(s,a,l,d){const f=E_(s,d,a),m=a[jt],C=function Da(s,a,l){return hg(s,a,l)}(d.parent||a[Fr],d,a);if(null!=f)if(Array.isArray(l))for(let b=0;b<l.length;b++)Yc(m,f,l[b],C,!1);else Yc(m,f,l,C,!1);void 0!==Pu&&Pu(m,d,a,l,f)}function Jh(s,a){if(null!==a){const l=a.type;if(3&l)return hr(a,s);if(4&l)return fg(-1,s[a.index]);if(8&l){const d=a.child;if(null!==d)return Jh(s,d);{const f=s[a.index];return zi(f)?fg(-1,f):Gn(f)}}if(32&l)return Fl(a,s)()||Gn(s[a.index]);{const d=ao(s,a);return null!==d?Array.isArray(d)?d[0]:Jh(Nu(s[Lr]),d):Jh(s,a.next)}}return null}function ao(s,a){return null!==a?s[Lr][Fr].projection[a.projection]:null}function fg(s,a){const l=br+s+1;if(l<a.length){const d=a[l],f=d[nt].firstChild;if(null!==f)return Jh(d,f)}return a[ia]}function Fo(s,a,l,d,f,m,w){for(;null!=l;){const C=d[l.index],b=l.type;if(w&&0===a&&(C&&Qr(Gn(C),d),l.flags|=2),32!=(32&l.flags))if(8&b)Fo(s,a,l.child,d,f,m,!1),Ta(a,s,f,C,m);else if(32&b){const M=Fl(l,d);let P;for(;P=M();)Ta(a,s,f,P,m);Ta(a,s,f,C,m)}else 16&b?gg(s,a,d,l,f,m):Ta(a,s,f,C,m);l=w?l.projectionNext:l.next}}function Vl(s,a,l,d,f,m){Fo(l,d,s.firstChild,a,f,m,!1)}function gg(s,a,l,d,f,m){const w=l[Lr],b=w[Fr].projection[d.projection];if(Array.isArray(b))for(let M=0;M<b.length;M++)Ta(a,s,f,b[M],m);else Fo(s,a,b,w[Fn],f,m,!0)}function mg(s,a,l){""===l?s.removeAttribute(a,"class"):s.setAttribute(a,"class",l)}function Ul(s,a,l){const{mergedAttrs:d,classes:f,styles:m}=l;null!==d&&Eu(s,a,d),null!==f&&mg(s,a,f),null!==m&&function Tr(s,a,l){s.setAttribute(a,"style",l)}(s,a,m)}function Sa(s){return function ef(){if(void 0===Bl&&(Bl=null,hn.trustedTypes))try{Bl=hn.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Bl}()?.createHTML(s)||s}function yg(s){ku=s}function pi(){if(void 0===Aa&&(Aa=null,hn.trustedTypes))try{Aa=hn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Aa}function Fu(s){return pi()?.createHTML(s)||s}function td(s){return pi()?.createScriptURL(s)||s}class Ps{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${dt})`}}class tf extends Ps{getTypeName(){return"HTML"}}class S_ extends Ps{getTypeName(){return"Style"}}class vg extends Ps{getTypeName(){return"Script"}}class Qv extends Ps{getTypeName(){return"URL"}}class ds extends Ps{getTypeName(){return"ResourceURL"}}function Os(s){return s instanceof Ps?s.changingThisBreaksApplicationSecurity:s}function Lo(s,a){const l=function nd(s){return s instanceof Ps&&s.getTypeName()||null}(s);if(null!=l&&l!==a){if("ResourceURL"===l&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${l} (see ${dt})`)}return l===a}function jl(s){return new tf(s)}function nf(s){return new S_(s)}function Ri(s){return new vg(s)}function wg(s){return new Qv(s)}function rf(s){return new ds(s)}class Vo{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const l=(new window.DOMParser).parseFromString(Sa(a),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(a):(l.removeChild(l.firstChild),l)}catch{return null}}}class ks{constructor(a){this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(a){const l=this.inertDocument.createElement("template");return l.innerHTML=Sa(a),l}}const rd=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Hl(s){return(s=String(s)).match(rd)?s:"unsafe:"+s}function hs(s){const a={};for(const l of s.split(","))a[l]=!0;return a}function En(...s){const a={};for(const l of s)for(const d in l)l.hasOwnProperty(d)&&(a[d]=!0);return a}const id=hs("area,br,col,hr,img,wbr"),Lu=hs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Vu=hs("rp,rt"),E=En(id,En(Lu,hs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),En(Vu,hs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),En(Vu,Lu)),A=hs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),J=En(A,hs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),hs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),xe=hs("script,style,template");class Ve{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let l=a.firstChild,d=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?d=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,d&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let f=this.checkClobberedElement(l,l.nextSibling);if(f){l=f;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(a){const l=a.nodeName.toLowerCase();if(!E.hasOwnProperty(l))return this.sanitizedSomething=!0,!xe.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const d=a.attributes;for(let f=0;f<d.length;f++){const m=d.item(f),w=m.name,C=w.toLowerCase();if(!J.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let b=m.value;A[C]&&(b=Hl(b)),this.buf.push(" ",w,'="',Bn(b),'"')}return this.buf.push(">"),!0}endElement(a){const l=a.nodeName.toLowerCase();E.hasOwnProperty(l)&&!id.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(a){this.buf.push(Bn(a))}checkClobberedElement(a,l){if(l&&(a.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return l}}const st=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,We=/([^\#-~ |!])/g;function Bn(s){return s.replace(/&/g,"&amp;").replace(st,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(We,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Pi;function Uu(s,a){let l=null;try{Pi=Pi||function Eg(s){const a=new ks(s);return function lo(){try{return!!(new window.DOMParser).parseFromString(Sa(""),"text/html")}catch{return!1}}()?new Vo(a):a}(s);let d=a?String(a):"";l=Pi.getInertBodyElement(d);let f=5,m=d;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,d=m,m=l.innerHTML,l=Pi.getInertBodyElement(d)}while(d!==m);return Sa((new Ve).sanitizeChildren(sf(l)||l))}finally{if(l){const d=sf(l)||l;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function sf(s){return"content"in s&&function af(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var qn=(()=>((qn=qn||{})[qn.NONE=0]="NONE",qn[qn.HTML=1]="HTML",qn[qn.STYLE=2]="STYLE",qn[qn.SCRIPT=3]="SCRIPT",qn[qn.URL=4]="URL",qn[qn.RESOURCE_URL=5]="RESOURCE_URL",qn))();function sd(s){const a=cd();return a?Fu(a.sanitize(qn.HTML,s)||""):Lo(s,"HTML")?Fu(Os(s)):Uu(function $l(){return void 0!==ku?ku:typeof document<"u"?document:void 0}(),be(s))}function ad(s){const a=cd();return a?a.sanitize(qn.URL,s)||"":Lo(s,"URL")?Os(s):Hl(be(s))}function lf(s){const a=cd();if(a)return td(a.sanitize(qn.RESOURCE_URL,s)||"");if(Lo(s,"ResourceURL"))return td(Os(s));throw new me(904,!1)}function ud(s,a,l){return function Cg(s,a){return"src"===a&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===a&&("base"===s||"link"===s)?lf:ad}(a,l)(s)}function cd(){const s=pe();return s&&s[Tc]}const x_=new Jt("ENVIRONMENT_INITIALIZER"),uf=new Jt("INJECTOR",-1),cf=new Jt("INJECTOR_DEF_TYPES");class FC{get(a,l=Si){if(l===Si){const d=new Error(`NullInjectorError: No provider for ${fe(a)}!`);throw d.name="NullInjectorError",d}return l}}function LC(...s){return{\u0275providers:VC(0,s),\u0275fromNgModule:!0}}function VC(s,...a){const l=[],d=new Set;let f;return eo(a,m=>{const w=m;ew(w,l,[],d)&&(f||(f=[]),f.push(w))}),void 0!==f&&UC(f,l),l}function UC(s,a){for(let l=0;l<s.length;l++){const{providers:f}=s[l];N_(f,m=>{a.push(m)})}}function ew(s,a,l,d){if(!(s=Q(s)))return!1;let f=null,m=Ws(s);const w=!m&&ln(s);if(m||w){if(w&&!w.standalone)return!1;f=s}else{const b=s.ngModule;if(m=Ws(b),!m)return!1;f=b}const C=d.has(f);if(w){if(C)return!1;if(d.add(f),w.dependencies){const b="function"==typeof w.dependencies?w.dependencies():w.dependencies;for(const M of b)ew(M,a,l,d)}}else{if(!m)return!1;{if(null!=m.imports&&!C){let M;d.add(f);try{eo(m.imports,P=>{ew(P,a,l,d)&&(M||(M=[]),M.push(P))})}finally{}void 0!==M&&UC(M,a)}if(!C){const M=Zi(f)||(()=>new f);a.push({provide:f,useFactory:M,deps:Le},{provide:cf,useValue:f,multi:!0},{provide:x_,useValue:()=>an(f),multi:!0})}const b=m.providers;null==b||C||N_(b,P=>{a.push(P)})}}return f!==s&&void 0!==s.providers}function N_(s,a){for(let l of s)De(l)&&(l=l.\u0275providers),Array.isArray(l)?N_(l,a):a(l)}const BC=re({provide:String,useValue:re});function df(s){return null!==s&&"object"==typeof s&&BC in s}function Bu(s){return"function"==typeof s}const Ig=new Jt("Set Injector scope."),$u={},jC={};let bg;function dd(){return void 0===bg&&(bg=new FC),bg}class ju{}class Tg extends ju{get destroyed(){return this._destroyed}constructor(a,l,d,f){super(),this.parent=l,this.source=d,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,hf(a,w=>this.processProvider(w)),this.records.set(uf,hd(void 0,this)),f.has("environment")&&this.records.set(ju,hd(void 0,this));const m=this.records.get(Ig);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(cf.multi,Le,pt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const l=Wt(this),d=Qn(void 0);try{return a()}finally{Wt(l),Qn(d)}}get(a,l=Si,d=pt.Default){this.assertNotDestroyed(),d=Je(d);const f=Wt(this),m=Qn(void 0);try{if(!(d&pt.SkipSelf)){let C=this.records.get(a);if(void 0===C){const b=function GC(s){return"function"==typeof s||"object"==typeof s&&s instanceof Jt}(a)&&_n(a);C=b&&this.injectableDefInScope(b)?hd(nw(a),$u):null,this.records.set(a,C)}if(null!=C)return this.hydrate(a,C)}return(d&pt.Self?dd():this.parent).get(a,l=d&pt.Optional&&l===Si?null:l)}catch(w){if("NullInjectorError"===w.name){if((w[Jn]=w[Jn]||[]).unshift(fe(a)),f)throw w;return function Hn(s,a,l,d){const f=s[Jn];throw a[mn]&&f.unshift(a[mn]),s.message=function j(s,a,l,d=null){s=s&&"\n"===s.charAt(0)&&s.charAt(1)==rl?s.slice(2):s;let f=fe(a);if(Array.isArray(a))f=a.map(fe).join(" -> ");else if("object"==typeof a){let m=[];for(let w in a)if(a.hasOwnProperty(w)){let C=a[w];m.push(w+":"+("string"==typeof C?JSON.stringify(C):fe(C)))}f=`{${m.join(", ")}}`}return`${l}${d?"("+d+")":""}[${f}]: ${s.replace(Er,"\n  ")}`}("\n"+s.message,f,l,d),s[Or]=f,s[Jn]=null,s}(w,a,"R3InjectorError",this.source)}throw w}finally{Qn(m),Wt(f)}}resolveInjectorInitializers(){const a=Wt(this),l=Qn(void 0);try{const d=this.get(x_.multi,Le,pt.Self);for(const f of d)f()}finally{Wt(a),Qn(l)}}toString(){const a=[],l=this.records;for(const d of l.keys())a.push(fe(d));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new me(205,!1)}processProvider(a){let l=Bu(a=Q(a))?a:Q(a&&a.provide);const d=function Dg(s){return df(s)?hd(void 0,s.useValue):hd(rw(s),$u)}(a);if(Bu(a)||!0!==a.multi)this.records.get(l);else{let f=this.records.get(l);f||(f=hd(void 0,$u,!0),f.factory=()=>kt(f.multi),this.records.set(l,f)),l=a,f.multi.push(a)}this.records.set(l,d)}hydrate(a,l){return l.value===$u&&(l.value=jC,l.value=l.factory()),"object"==typeof l.value&&l.value&&function sw(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(a){if(!a.providedIn)return!1;const l=Q(a.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function nw(s){const a=_n(s),l=null!==a?a.factory:Zi(s);if(null!==l)return l;if(s instanceof Jt)throw new me(204,!1);if(s instanceof Function)return function HC(s){const a=s.length;if(a>0)throw function to(s,a){const l=[];for(let d=0;d<s;d++)l.push(a);return l}(a,"?"),new me(204,!1);const l=function Hr(s){return s&&(s[Rr]||s[Es])||null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new me(204,!1)}function rw(s,a,l){let d;if(Bu(s)){const f=Q(s);return Zi(f)||nw(f)}if(df(s))d=()=>Q(s.useValue);else if(function Ma(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...kt(s.deps||[]));else if(function tw(s){return!(!s||!s.useExisting)}(s))d=()=>an(Q(s.useExisting));else{const f=Q(s&&(s.useClass||s.provide));if(!function iw(s){return!!s.deps}(s))return Zi(f)||nw(f);d=()=>new f(...kt(s.deps))}return d}function hd(s,a,l=!1){return{factory:s,value:a,multi:l?[]:void 0}}function hf(s,a){for(const l of s)Array.isArray(l)?hf(l,a):l&&De(l)?hf(l.\u0275providers,a):a(l)}class zC{}class ow{}class qC{resolveComponentFactory(a){throw function fd(s){const a=Error(`No component factory found for ${fe(s)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=s,a}(a)}}let ff=(()=>{class s{}return s.NULL=new qC,s})();function R_(){return gi(zn(),pe())}function gi(s,a){return new pf(hr(s,a))}let pf=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=R_,s})();function ZC(s){return s instanceof pf?s.nativeElement:s}class pd{}let OS=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function kS(){const s=pe(),l=fr(zn().index,s);return(zr(l)?l:s)[jt]}(),s})(),lw=(()=>{class s{}return s.\u0275prov=Tt({token:s,providedIn:"root",factory:()=>null}),s})();class WC{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const KC=new WC("15.2.8"),P_={},uw="ngOriginalError";function cw(s){return s[uw]}class gf{constructor(){this._console=console}handleError(a){const l=this._findOriginalError(a);this._console.error("ERROR",a),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(a){let l=a&&cw(a);for(;l&&cw(l);)l=cw(l);return l||null}}function Uo(s){return s instanceof Function?s():s}function Br(s,a,l){let d=s.length;for(;;){const f=s.indexOf(a,l);if(-1===f)return f;if(0===f||s.charCodeAt(f-1)<=32){const m=a.length;if(f+m===d||s.charCodeAt(f+m)<=32)return f}l=f+1}}const hw="ng-template";function LS(s,a,l){let d=0,f=!0;for(;d<s.length;){let m=s[d++];if("string"==typeof m&&f){const w=s[d++];if(l&&"class"===m&&-1!==Br(w.toLowerCase(),a,0))return!0}else{if(1===m){for(;d<s.length&&"string"==typeof(m=s[d++]);)if(m.toLowerCase()===a)return!0;return!1}"number"==typeof m&&(f=!1)}}return!1}function YC(s){return 4===s.type&&s.value!==hw}function VS(s,a,l){return a===(4!==s.type||l?s.value:hw)}function US(s,a,l){let d=4;const f=s.attrs||[],m=function BS(s){for(let a=0;a<s.length;a++)if(Cu(s[a]))return a;return s.length}(f);let w=!1;for(let C=0;C<a.length;C++){const b=a[C];if("number"!=typeof b){if(!w)if(4&d){if(d=2|1&d,""!==b&&!VS(s,b,l)||""===b&&1===a.length){if(Bo(d))return!1;w=!0}}else{const M=8&d?b:a[++C];if(8&d&&null!==s.attrs){if(!LS(s.attrs,M,l)){if(Bo(d))return!1;w=!0}continue}const V=QC(8&d?"class":b,f,YC(s),l);if(-1===V){if(Bo(d))return!1;w=!0;continue}if(""!==M){let Z;Z=V>m?"":f[V+1].toLowerCase();const ee=8&d?Z:null;if(ee&&-1!==Br(ee,M,0)||2&d&&M!==Z){if(Bo(d))return!1;w=!0}}}}else{if(!w&&!Bo(d)&&!Bo(b))return!1;if(w&&Bo(b))continue;w=!1,d=b|1&d}}return Bo(d)||w}function Bo(s){return 0==(1&s)}function QC(s,a,l,d){if(null===a)return-1;let f=0;if(d||!l){let m=!1;for(;f<a.length;){const w=a[f];if(w===s)return f;if(3===w||6===w)m=!0;else{if(1===w||2===w){let C=a[++f];for(;"string"==typeof C;)C=a[++f];continue}if(4===w)break;if(0===w){f+=4;continue}}f+=m?1:2}return-1}return function XC(s,a){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const d=s[l];if("number"==typeof d)return-1;if(d===a)return l;l++}return-1}(a,s)}function JC(s,a,l=!1){for(let d=0;d<a.length;d++)if(US(s,a[d],l))return!0;return!1}function gd(s,a){return s?":not("+a.trim()+")":a}function eI(s){let a=s[0],l=1,d=2,f="",m=!1;for(;l<s.length;){let w=s[l];if("string"==typeof w)if(2&d){const C=s[++l];f+="["+w+(C.length>0?'="'+C+'"':"")+"]"}else 8&d?f+="."+w:4&d&&(f+=" "+w);else""!==f&&!Bo(w)&&(a+=gd(m,f),f=""),d=w,m=m||!Bo(d);l++}return""!==f&&(a+=gd(m,f)),a}const Ft={};function un(s){tI(zt(),pe(),Zr()+s,!1)}function tI(s,a,l,d){if(!d)if(3==(3&a[Vt])){const m=s.preOrderCheckHooks;null!==m&&Fc(a,m,l)}else{const m=s.preOrderHooks;null!==m&&yh(a,m,0,l)}Qs(l)}function fw(s,a=null,l=null,d){const f=pw(s,a,l,d);return f.resolveInjectorInitializers(),f}function pw(s,a=null,l=null,d,f=new Set){const m=[l||Le,LC(s)];return d=d||("object"==typeof s?void 0:fe(s)),new Tg(m,a||dd(),d||null,f)}let Jr=(()=>{class s{static create(l,d){if(Array.isArray(l))return fw({name:""},d,l,"");{const f=l.name??"";return fw({name:f},l.parent,l.providers,f)}}}return s.THROW_IF_NOT_FOUND=Si,s.NULL=new FC,s.\u0275prov=Tt({token:s,providedIn:"any",factory:()=>an(uf)}),s.__NG_ELEMENT_ID__=-1,s})();function wf(s,a=pt.Default){const l=pe();return null===l?an(s,a):bh(zn(),l,Q(s),a)}function uI(){throw new Error("invalid")}function cI(s,a){const l=s.contentQueries;if(null!==l)for(let d=0;d<l.length;d+=2){const m=l[d+1];if(-1!==m){const w=s.data[m];Oc(l[d]),w.contentQueries(2,a[m],m)}}}function j_(s,a,l,d,f,m,w,C,b,M,P){const V=a.blueprint.slice();return V[dr]=f,V[Vt]=76|d,(null!==P||s&&1024&s[Vt])&&(V[Vt]|=1024),fu(V),V[Fn]=V[Hi]=s,V[Pn]=l,V[ci]=w||s&&s[ci],V[jt]=C||s&&s[jt],V[Tc]=b||s&&s[Tc]||null,V[ol]=M||s&&s[ol]||null,V[Fr]=m,V[ra]=function p_(){return Wv++}(),V[Dc]=P,V[Lr]=2==a.type?s[Lr]:V,V}function Ef(s,a,l,d,f){let m=s.data[a];if(null===m)m=function ww(s,a,l,d,f){const m=Rc(),w=da(),b=s.data[a]=function fI(s,a,l,d,f,m){return{type:l,index:d,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?m:m&&m.parent,l,a,d,f);return null===s.firstChild&&(s.firstChild=b),null!==m&&(w?null==m.child&&null!==b.parent&&(m.child=b):null===m.next&&(m.next=b,b.prev=m)),b}(s,a,l,d,f),function gh(){return Rt.lFrame.inI18n}()&&(m.flags|=32);else if(64&m.type){m.type=l,m.value=d,m.attrs=f;const w=function ca(){const s=Rt.lFrame,a=s.currentTNode;return s.isParent?a:a.parent}();m.injectorIndex=null===w?-1:w.injectorIndex}return Ki(m,!0),m}function Mg(s,a,l,d){if(0===l)return-1;const f=a.length;for(let m=0;m<l;m++)a.push(d),s.blueprint.push(d),s.data.push(null);return f}function Ew(s,a,l){pa(a);try{const d=s.viewQuery;null!==d&&Aw(1,d,l);const f=s.template;null!==f&&Cw(s,a,f,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&cI(s,a),s.staticViewQueries&&Aw(2,s.viewQuery,l);const m=s.components;null!==m&&function ZS(s,a){for(let l=0;l<a.length;l++)mI(s,a[l])}(a,m)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{a[Vt]&=-5,Hp()}}function H_(s,a,l,d){const f=a[Vt];if(128!=(128&f)){pa(a);try{fu(a),function fa(s){return Rt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&Cw(s,a,l,2,d);const w=3==(3&f);if(w){const M=s.preOrderCheckHooks;null!==M&&Fc(a,M,null)}else{const M=s.preOrderHooks;null!==M&&yh(a,M,0,null),vh(a,0)}if(function Cd(s){for(let a=Ru(s);null!==a;a=Zc(a)){if(!a[lu])continue;const l=a[Gr];for(let d=0;d<l.length;d++){const f=l[d];512&f[Vt]||bo(f[Fn],1),f[Vt]|=512}}}(a),function Dw(s){for(let a=Ru(s);null!==a;a=Zc(a))for(let l=br;l<a.length;l++){const d=a[l],f=d[nt];la(d)&&H_(f,d,f.template,d[Pn])}}(a),null!==s.contentQueries&&cI(s,a),w){const M=s.contentCheckHooks;null!==M&&Fc(a,M)}else{const M=s.contentHooks;null!==M&&yh(a,M,1),vh(a,1)}!function zS(s,a){const l=s.hostBindingOpCodes;if(null!==l)try{for(let d=0;d<l.length;d++){const f=l[d];if(f<0)Qs(~f);else{const m=f,w=l[++d],C=l[++d];Up(w,m),C(2,a[m])}}}finally{Qs(-1)}}(s,a);const C=s.components;null!==C&&function qS(s,a){for(let l=0;l<a.length;l++)Sw(s,a[l])}(a,C);const b=s.viewQuery;if(null!==b&&Aw(2,b,d),w){const M=s.viewCheckHooks;null!==M&&Fc(a,M)}else{const M=s.viewHooks;null!==M&&yh(a,M,2),vh(a,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),a[Vt]&=-41,512&a[Vt]&&(a[Vt]&=-513,bo(a[Fn],-1))}finally{Hp()}}}function Cw(s,a,l,d,f){const m=Zr(),w=2&d;try{Qs(-1),w&&a.length>yn&&tI(s,a,yn,!1),Ln(w?2:0,f),l(d,f)}finally{Qs(m),Ln(w?3:1,f)}}function Iw(s,a,l){if(al(a)){const f=a.directiveEnd;for(let m=a.directiveStart;m<f;m++){const w=s.data[m];w.contentQueries&&w.contentQueries(1,l[m],m)}}}function G_(s,a,l){hh()&&(function _r(s,a,l,d){const f=l.directiveStart,m=l.directiveEnd;ll(l)&&function vd(s,a,l){const d=hr(a,s),f=dI(l),m=s[ci],w=bd(s,j_(s,f,null,l.onPush?32:16,d,a,m,m.createRenderer(d,l),null,null,null));s[a.index]=w}(a,l,s.data[f+l.componentOffset]),s.firstCreatePass||ma(l,a),Qr(d,a);const w=l.initialInputs;for(let C=f;C<m;C++){const b=s.data[C],M=us(a,s,C,l);Qr(M,a),null!==w&&Qu(0,C-f,M,b,0,w),er(b)&&(fr(l.index,a)[Pn]=us(a,s,C,l))}}(s,a,l,hr(l,a)),64==(64&l.flags)&&Wu(s,a,l))}function z_(s,a,l=hr){const d=a.localNames;if(null!==d){let f=a.index+1;for(let m=0;m<d.length;m+=2){const w=d[m+1],C=-1===w?l(a,s):s[w];s[f++]=C}}}function dI(s){const a=s.tView;return null===a||a.incompleteFirstPass?s.tView=xg(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):a}function xg(s,a,l,d,f,m,w,C,b,M){const P=yn+d,V=P+f,Z=function _i(s,a){const l=[];for(let d=0;d<a;d++)l.push(d<s?null:Ft);return l}(P,V),ee="function"==typeof M?M():M;return Z[nt]={type:s,blueprint:Z,template:l,queries:null,viewQuery:C,declTNode:a,data:Z.slice().fill(null,P),bindingStartIndex:P,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:b,consts:ee,incompleteFirstPass:!1}}function qu(s,a,l,d){const f=Mw(a);null===l?f.push(d):(f.push(l),s.firstCreatePass&&ei(s).push(d,f.length-1))}function cr(s,a,l,d){for(let f in s)if(s.hasOwnProperty(f)){l=null===l?{}:l;const m=s[f];null===d?Ng(l,a,f,m):d.hasOwnProperty(f)&&Ng(l,a,d[f],m)}return l}function Ng(s,a,l,d){s.hasOwnProperty(l)?s[l].push(a,d):s[l]=[a,d]}function fs(s,a,l,d,f,m,w,C){const b=hr(a,l);let P,M=a.inputs;!C&&null!=M&&(P=M[d])?(xa(s,l,P,d,f),ll(a)&&function Cf(s,a){const l=fr(a,s);16&l[Vt]||(l[Vt]|=32)}(l,a.index)):3&a.type&&(d=function Mn(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),f=null!=w?w(f,a.value||"",d):f,m.setProperty(b,d,f))}function bw(s,a,l,d){if(hh()){const f=null===d?null:{"":-1},m=function pI(s,a){const l=s.directiveRegistry;let d=null,f=null;if(l)for(let m=0;m<l.length;m++){const w=l[m];if(JC(a,w.selectors,!1))if(d||(d=[]),er(w))if(null!==w.findHostDirectiveDefs){const C=[];f=f||new Map,w.findHostDirectiveDefs(w,C,f),d.unshift(...C,w),yd(s,a,C.length)}else d.unshift(w),yd(s,a,0);else f=f||new Map,w.findHostDirectiveDefs?.(w,d,f),d.push(w)}return null===d?null:[d,f]}(s,l);let w,C;null===m?w=C=null:[w,C]=m,null!==w&&$r(s,a,l,w,f,C),f&&function KS(s,a,l){if(a){const d=s.localNames=[];for(let f=0;f<a.length;f+=2){const m=l[a[f+1]];if(null==m)throw new me(-301,!1);d.push(a[f],m)}}}(l,d,f)}l.mergedAttrs=Ms(l.mergedAttrs,l.attrs)}function $r(s,a,l,d,f,m){for(let M=0;M<d.length;M++)_a(ma(l,a),s,d[M].type);!function Yu(s,a,l){s.flags|=1,s.directiveStart=a,s.directiveEnd=a+l,s.providerIndexes=a}(l,s.data.length,d.length);for(let M=0;M<d.length;M++){const P=d[M];P.providersResolver&&P.providersResolver(P)}let w=!1,C=!1,b=Mg(s,a,d.length,null);for(let M=0;M<d.length;M++){const P=d[M];l.mergedAttrs=Ms(l.mergedAttrs,P.hostAttrs),q_(s,l,a,b,P),Ku(b,P,f),null!==P.contentQueries&&(l.flags|=4),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(l.flags|=64);const V=P.type.prototype;!w&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((s.preOrderHooks??(s.preOrderHooks=[])).push(l.index),w=!0),!C&&(V.ngOnChanges||V.ngDoCheck)&&((s.preOrderCheckHooks??(s.preOrderCheckHooks=[])).push(l.index),C=!0),b++}!function Ci(s,a,l){const f=a.directiveEnd,m=s.data,w=a.attrs,C=[];let b=null,M=null;for(let P=a.directiveStart;P<f;P++){const V=m[P],Z=l?l.get(V):null,ye=Z?Z.outputs:null;b=cr(V.inputs,P,b,Z?Z.inputs:null),M=cr(V.outputs,P,M,ye);const Ue=null===b||null===w||YC(a)?null:gI(b,P,w);C.push(Ue)}null!==b&&(b.hasOwnProperty("class")&&(a.flags|=8),b.hasOwnProperty("style")&&(a.flags|=16)),a.initialInputs=C,a.inputs=b,a.outputs=M}(s,l,m)}function Wu(s,a,l){const d=l.directiveStart,f=l.directiveEnd,m=l.index,w=function Bp(){return Rt.lFrame.currentDirectiveIndex}();try{Qs(m);for(let C=d;C<f;C++){const b=s.data[C],M=a[C];ml(C),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&Tw(b,M)}}finally{Qs(-1),ml(w)}}function Tw(s,a){null!==s.hostBindings&&s.hostBindings(1,a)}function yd(s,a,l){a.componentOffset=l,(s.components??(s.components=[])).push(a.index)}function Ku(s,a,l){if(l){if(a.exportAs)for(let d=0;d<a.exportAs.length;d++)l[a.exportAs[d]]=s;er(a)&&(l[""]=s)}}function q_(s,a,l,d,f){s.data[d]=f;const m=f.factory||(f.factory=Zi(f.type)),w=new As(m,er(f),wf);s.blueprint[d]=w,l[d]=w,function WS(s,a,l,d,f){const m=f.hostBindings;if(m){let w=s.hostBindingOpCodes;null===w&&(w=s.hostBindingOpCodes=[]);const C=~a.index;(function Zu(s){let a=s.length;for(;a>0;){const l=s[--a];if("number"==typeof l&&l<0)return l}return 0})(w)!=C&&w.push(C),w.push(l,d,m)}}(s,a,d,Mg(s,l,f.hostVars,Ft),f)}function Xr(s,a,l,d,f,m){const w=hr(s,a);!function wd(s,a,l,d,f,m,w){if(null==m)s.removeAttribute(a,f,l);else{const C=null==w?be(m):w(m,d||"",f);s.setAttribute(a,f,C,l)}}(a[jt],w,m,s.value,l,d,f)}function Qu(s,a,l,d,f,m){const w=m[a];if(null!==w){const C=d.setInput;for(let b=0;b<w.length;){const M=w[b++],P=w[b++],V=w[b++];null!==C?d.setInput(l,V,M,P):l[P]=V}}}function gI(s,a,l){let d=null,f=0;for(;f<l.length;){const m=l[f];if(0!==m)if(5!==m){if("number"==typeof m)break;if(s.hasOwnProperty(m)){null===d&&(d=[]);const w=s[m];for(let C=0;C<w.length;C+=2)if(w[C]===a){d.push(m,w[C+1],l[f+1]);break}}f+=2}else f+=2;else f+=4}return d}function Ed(s,a,l,d){return[s,!0,!1,a,null,0,d,l,null,null]}function Sw(s,a){const l=fr(a,s);if(la(l)){const d=l[nt];48&l[Vt]?H_(d,l,d.template,l[Pn]):l[Ks]>0&&Id(l)}}function Id(s){for(let d=Ru(s);null!==d;d=Zc(d))for(let f=br;f<d.length;f++){const m=d[f];if(la(m))if(512&m[Vt]){const w=m[nt];H_(w,m,w.template,m[Pn])}else m[Ks]>0&&Id(m)}const l=s[nt].components;if(null!==l)for(let d=0;d<l.length;d++){const f=fr(l[d],s);la(f)&&f[Ks]>0&&Id(f)}}function mI(s,a){const l=fr(a,s),d=l[nt];(function _I(s,a){for(let l=a.length;l<s.blueprint.length;l++)a.push(s.blueprint[l])})(d,l),Ew(d,l,l[Pn])}function bd(s,a){return s[ji]?s[au][Kt]=a:s[ji]=a,s[au]=a,a}function Ju(s){for(;s;){s[Vt]|=32;const a=Nu(s);if(Is(s)&&!a)return s;s=a}return null}function Rg(s,a,l,d=!0){const f=a[ci];f.begin&&f.begin();try{H_(s,a,s.template,l)}catch(w){throw d&&$n(a,w),w}finally{f.end&&f.end()}}function Aw(s,a,l){Oc(0),a(s,l)}function Mw(s){return s[Ir]||(s[Ir]=[])}function ei(s){return s.cleanup||(s.cleanup=[])}function $n(s,a){const l=s[ol],d=l?l.get(gf,null):null;d&&d.handleError(a)}function xa(s,a,l,d,f){for(let m=0;m<l.length;){const w=l[m++],C=l[m++],b=a[w],M=s.data[w];null!==M.setInput?M.setInput(b,f,d,C):b[C]=f}}function Na(s,a,l){const d=Io(a,s);!function v_(s,a,l){s.setValue(a,l)}(s[jt],d,l)}function Pg(s,a,l){let d=l?s.styles:null,f=l?s.classes:null,m=0;if(null!==a)for(let w=0;w<a.length;w++){const C=a[w];"number"==typeof C?m=C:1==m?f=he(f,C):2==m&&(d=he(d,C+": "+a[++w]+";"))}l?s.styles=d:s.stylesWithoutHost=d,l?s.classes=f:s.classesWithoutHost=f}function Gl(s,a,l,d,f=!1){for(;null!==l;){const m=a[l.index];if(null!==m&&d.push(Gn(m)),zi(m))for(let C=br;C<m.length;C++){const b=m[C],M=b[nt].firstChild;null!==M&&Gl(b[nt],b,M,d)}const w=l.type;if(8&w)Gl(s,a,l.child,d);else if(32&w){const C=Fl(l,a);let b;for(;b=C();)d.push(b)}else if(16&w){const C=ao(a,l);if(Array.isArray(C))d.push(...C);else{const b=Nu(a[Lr]);Gl(b[nt],b,C,d,!0)}}l=f?l.projectionNext:l.next}return d}class Og{get rootNodes(){const a=this._lView,l=a[nt];return Gl(l,a,l.firstChild,[])}constructor(a,l){this._lView=a,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Pn]}set context(a){this._lView[Pn]=a}get destroyed(){return 128==(128&this._lView[Vt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[Fn];if(zi(a)){const l=a[Cs],d=l?l.indexOf(this):-1;d>-1&&(Wh(a,d),Rl(l,d))}this._attachedToViewContainer=!1}Kh(this._lView[nt],this._lView)}onDestroy(a){qu(this._lView[nt],this._lView,null,a)}markForCheck(){Ju(this._cdRefInjectingView||this._lView)}detach(){this._lView[Vt]&=-65}reattach(){this._lView[Vt]|=64}detectChanges(){Rg(this._lView[nt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new me(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function fi(s,a){Vl(s,a,a[jt],2,null,null)}(this._lView[nt],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new me(902,!1);this._appRef=a}}class yI extends Og{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;Rg(a[nt],a,a[Pn],!1)}checkNoChanges(){}get context(){return null}}class en extends ff{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const l=ln(a);return new Td(l,this.ngModule)}}function Cn(s){const a=[];for(let l in s)s.hasOwnProperty(l)&&a.push({propName:s[l],templateName:l});return a}class Nw{constructor(a,l){this.injector=a,this.parentInjector=l}get(a,l,d){d=Je(d);const f=this.injector.get(a,P_,d);return f!==P_||l===P_?f:this.parentInjector.get(a,l,d)}}class Td extends ow{get inputs(){return Cn(this.componentDef.inputs)}get outputs(){return Cn(this.componentDef.outputs)}constructor(a,l){super(),this.componentDef=a,this.ngModule=l,this.componentType=a.type,this.selector=function tr(s){return s.map(eI).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!l}create(a,l,d,f){let m=(f=f||this.ngModule)instanceof ju?f:f?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const w=m?new Nw(a,m):a,C=w.get(pd,null);if(null===C)throw new me(407,!1);const b=w.get(lw,null),M=C.createRenderer(null,this.componentDef),P=this.componentDef.selectors[0][0]||"div",V=d?function hI(s,a,l){return s.selectRootElement(a,l===ve.ShadowDom)}(M,d,this.componentDef.encapsulation):Wc(M,P,function If(s){const a=s.toLowerCase();return"svg"===a?or:"math"===a?"math":null}(P)),Z=this.componentDef.onPush?288:272,ee=xg(0,null,null,1,0,null,null,null,null,null),ye=j_(null,ee,null,Z,null,null,C,M,b,w,null);let Ue,Qe;pa(ye);try{const ft=this.componentDef;let Dt,Re=null;ft.findHostDirectiveDefs?(Dt=[],Re=new Map,ft.findHostDirectiveDefs(ft,Dt,Re),Dt.push(ft)):Dt=[ft];const Ut=function EI(s,a){const l=s[nt],d=yn;return s[d]=a,Ef(l,d,2,"#host",null)}(ye,V),Kn=function CI(s,a,l,d,f,m,w,C){const b=f[nt];!function II(s,a,l,d){for(const f of s)a.mergedAttrs=Ms(a.mergedAttrs,f.hostAttrs);null!==a.mergedAttrs&&(Pg(a,a.mergedAttrs,!0),null!==l&&Ul(d,l,a))}(d,s,a,w);const M=m.createRenderer(a,l),P=j_(f,dI(l),null,l.onPush?32:16,f[s.index],s,m,M,C||null,null,null);return b.firstCreatePass&&yd(b,s,d.length-1),bd(f,P),f[s.index]=P}(Ut,V,ft,Dt,ye,C,M);Qe=aa(ee,yn),V&&function JS(s,a,l,d){if(d)Eu(s,l,["ng-version",KC.full]);else{const{attrs:f,classes:m}=function Ct(s){const a=[],l=[];let d=1,f=2;for(;d<s.length;){let m=s[d];if("string"==typeof m)2===f?""!==m&&a.push(m,s[++d]):8===f&&l.push(m);else{if(!Bo(f))break;f=m}d++}return{attrs:a,classes:l}}(a.selectors[0]);f&&Eu(s,l,f),m&&m.length>0&&mg(s,l,m.join(" "))}}(M,ft,V,d),void 0!==l&&function XS(s,a,l){const d=s.projection=[];for(let f=0;f<a.length;f++){const m=l[f];d.push(null!=m?Array.from(m):null)}}(Qe,this.ngContentSelectors,l),Ue=function QS(s,a,l,d,f,m){const w=zn(),C=f[nt],b=hr(w,f);$r(C,f,w,l,null,d);for(let P=0;P<l.length;P++)Qr(us(f,C,w.directiveStart+P,w),f);Wu(C,f,w),b&&Qr(b,f);const M=us(f,C,w.directiveStart+w.componentOffset,w);if(s[Pn]=f[Pn]=M,null!==m)for(const P of m)P(M,a);return Iw(C,w,s),M}(Kn,ft,Dt,Re,ye,[bI]),Ew(ee,ye,null)}finally{Hp()}return new vI(this.componentType,Ue,gi(Qe,ye),ye,Qe)}}class vI extends zC{constructor(a,l,d,f,m){super(),this.location=d,this._rootLView=f,this._tNode=m,this.instance=l,this.hostView=this.changeDetectorRef=new yI(f),this.componentType=a}setInput(a,l){const d=this._tNode.inputs;let f;if(null!==d&&(f=d[a])){const m=this._rootLView;xa(m[nt],m,f,a,l),Ju(fr(this._tNode.index,m))}}get injector(){return new Ro(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function bI(){const s=zn();yu(pe()[nt],s)}function Z_(s){let a=function TI(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const d=[s];for(;a;){let f;if(er(s))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new me(903,!1);f=a.\u0275dir}if(f){if(l){d.push(f);const w=s;w.inputs=Rw(s.inputs),w.declaredInputs=Rw(s.declaredInputs),w.outputs=Rw(s.outputs);const C=f.hostBindings;C&&Dd(s,C);const b=f.viewQuery,M=f.contentQueries;if(b&&tA(s,b),M&&Pw(s,M),ge(s.inputs,f.inputs),ge(s.declaredInputs,f.declaredInputs),ge(s.outputs,f.outputs),er(f)&&f.data.animation){const P=s.data;P.animation=(P.animation||[]).concat(f.data.animation)}}const m=f.features;if(m)for(let w=0;w<m.length;w++){const C=m[w];C&&C.ngInherit&&C(s),C===Z_&&(l=!1)}}a=Object.getPrototypeOf(a)}!function eA(s){let a=0,l=null;for(let d=s.length-1;d>=0;d--){const f=s[d];f.hostVars=a+=f.hostVars,f.hostAttrs=Ms(f.hostAttrs,l=Ms(l,f.hostAttrs))}}(d)}function Rw(s){return s===ne?{}:s===Le?[]:s}function tA(s,a){const l=s.viewQuery;s.viewQuery=l?(d,f)=>{a(d,f),l(d,f)}:a}function Pw(s,a){const l=s.contentQueries;s.contentQueries=l?(d,f,m)=>{a(d,f,m),l(d,f,m)}:a}function Dd(s,a){const l=s.hostBindings;s.hostBindings=l?(d,f)=>{a(d,f),l(d,f)}:a}function Sd(s){return!!Ii(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function Ii(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Ls(s,a,l){return s[a]=l}function bi(s,a,l){return!Object.is(s[a],l)&&(s[a]=l,!0)}function ql(s,a,l,d){const f=bi(s,a,l);return bi(s,a+1,d)||f}function Y_(s,a,l,d){const f=pe();return bi(f,Ss(),a)&&(zt(),Xr(Dn(),f,s,a,l,d)),Y_}function Us(s,a,l,d){return bi(s,Ss(),l)?a+be(l)+d:Ft}function Tf(s,a,l,d,f,m){const C=ql(s,function qr(){return Rt.lFrame.bindingIndex}(),l,f);return Ys(2),C?a+be(l)+d+be(f)+m:Ft}function RI(s,a,l,d,f,m,w,C){const b=pe(),M=zt(),P=s+yn,V=M.firstCreatePass?function nA(s,a,l,d,f,m,w,C,b){const M=a.consts,P=Ef(a,s,4,w||null,Wi(M,C));bw(a,l,P,Wi(M,b)),yu(a,P);const V=P.tView=xg(2,P,d,f,m,a.directiveRegistry,a.pipeRegistry,null,a.schemas,M);return null!==a.queries&&(a.queries.template(a,P),V.queries=a.queries.embeddedTView(P)),P}(P,M,b,a,l,d,f,m,w):M.data[P];Ki(V,!1);const Z=b[jt].createComment("");Qh(M,b,Z,V),Qr(Z,b),bd(b,b[P]=Ed(Z,b,Z,V)),ul(V)&&G_(M,b,V),null!=w&&z_(b,V,C)}function Rd(s){return Ds(function gu(){return Rt.lFrame.contextLView}(),yn+s)}function Zl(s,a,l){const d=pe();return bi(d,Ss(),a)&&fs(zt(),Dn(),d,s,a,d[jt],l,!1),Zl}function J_(s,a,l,d,f){const w=f?"class":"style";xa(s,l,a.inputs[w],w,d)}function Vg(s,a,l,d){const f=pe(),m=zt(),w=yn+s,C=f[jt],b=m.firstCreatePass?function Pd(s,a,l,d,f,m){const w=a.consts,b=Ef(a,s,2,d,Wi(w,f));return bw(a,l,b,Wi(w,m)),null!==b.attrs&&Pg(b,b.attrs,!1),null!==b.mergedAttrs&&Pg(b,b.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,b),b}(w,m,f,a,l,d):m.data[w],M=f[w]=Wc(C,a,function vi(){return Rt.lFrame.currentNamespace}()),P=ul(b);return Ki(b,!0),Ul(C,M,b),32!=(32&b.flags)&&Qh(m,f,M,b),0===function pl(){return Rt.lFrame.elementDepthCount}()&&Qr(M,f),function dh(){Rt.lFrame.elementDepthCount++}(),P&&(G_(m,f,b),Iw(m,b,f)),null!==d&&z_(f,b),Vg}function Wl(){let s=zn();da()?fh():(s=s.parent,Ki(s,!1));const a=s;!function gl(){Rt.lFrame.elementDepthCount--}();const l=zt();return l.firstCreatePass&&(yu(l,s),al(s)&&l.queries.elementEnd(s)),null!=a.classesWithoutHost&&function Ao(s){return 0!=(8&s.flags)}(a)&&J_(l,a,pe(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function Lc(s){return 0!=(16&s.flags)}(a)&&J_(l,a,pe(),a.stylesWithoutHost,!1),Wl}function X_(s,a,l,d){return Vg(s,a,l,d),Wl(),X_}function ec(s,a,l){const d=pe(),f=zt(),m=s+yn,w=f.firstCreatePass?function OI(s,a,l,d,f){const m=a.consts,w=Wi(m,d),C=Ef(a,s,8,"ng-container",w);return null!==w&&Pg(C,w,!0),bw(a,l,C,Wi(m,f)),null!==a.queries&&a.queries.elementStart(a,C),C}(m,f,d,a,l):f.data[m];Ki(w,!0);const C=d[m]=d[jt].createComment("");return Qh(f,d,C,w),Qr(C,d),ul(w)&&(G_(f,d,w),Iw(f,w,d)),null!=l&&z_(d,w),ec}function ey(){let s=zn();const a=zt();return da()?fh():(s=s.parent,Ki(s,!1)),a.firstCreatePass&&(yu(a,s),al(s)&&a.queries.elementEnd(s)),ey}function Zn(){return pe()}function Sf(s){return!!s&&"function"==typeof s.then}function Ug(s){return!!s&&"function"==typeof s.subscribe}const $w=Ug;function jw(s,a,l,d){const f=pe(),m=zt(),w=zn();return function Hw(s,a,l,d,f,m,w){const C=ul(d),M=s.firstCreatePass&&ei(s),P=a[Pn],V=Mw(a);let Z=!0;if(3&d.type||w){const Ue=hr(d,a),Qe=w?w(Ue):Ue,ft=V.length,Dt=w?Ut=>w(Gn(Ut[d.index])):d.index;let Re=null;if(!w&&C&&(Re=function rA(s,a,l,d){const f=s.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const w=f[m];if(w===l&&f[m+1]===d){const C=a[Ir],b=f[m+2];return C.length>b?C[b]:null}"string"==typeof w&&(m+=2)}return null}(s,a,f,d.index)),null!==Re)(Re.__ngLastListenerFn__||Re).__ngNextListenerFn__=m,Re.__ngLastListenerFn__=m,Z=!1;else{m=Oa(d,a,P,m,!1);const Ut=l.listen(Qe,f,m);V.push(m,Ut),M&&M.push(f,Dt,ft,ft+1)}}else m=Oa(d,a,P,m,!1);const ee=d.outputs;let ye;if(Z&&null!==ee&&(ye=ee[f])){const Ue=ye.length;if(Ue)for(let Qe=0;Qe<Ue;Qe+=2){const Kn=a[ye[Qe]][ye[Qe+1]].subscribe(m),On=V.length;V.push(m,Kn),M&&M.push(f,d.index,On,-(On+1))}}}(m,f,f[jt],w,s,a,d),jw}function Od(s,a,l,d){try{return Ln(6,a,l),!1!==l(d)}catch(f){return $n(s,f),!1}finally{Ln(7,a,l)}}function Oa(s,a,l,d,f){return function m(w){if(w===Function)return d;Ju(s.componentOffset>-1?fr(s.index,a):a);let b=Od(a,l,d,w),M=m.__ngNextListenerFn__;for(;M;)b=Od(a,l,M,w)&&b,M=M.__ngNextListenerFn__;return f&&!1===b&&(w.preventDefault(),w.returnValue=!1),b}}function Gw(s=1){return function _h(s){return(Rt.lFrame.contextLView=function kc(s,a){for(;s>0;)a=a[Hi],s--;return a}(s,Rt.lFrame.contextLView))[Pn]}(s)}function Bg(s,a,l){return $g(s,"",a,"",l),Bg}function $g(s,a,l,d,f){const m=pe(),w=Us(m,a,l,d);return w!==Ft&&fs(zt(),Dn(),m,s,w,m[jt],f,!1),$g}function jg(s,a){return s<<17|a<<2}function Kl(s){return s>>17&32767}function kd(s){return 2|s}function Ho(s){return(131068&s)>>2}function xf(s,a){return-131069&s|a<<2}function sy(s){return 1|s}function GI(s,a,l,d,f){const m=s[l+1],w=null===a;let C=d?Kl(m):Ho(m),b=!1;for(;0!==C&&(!1===b||w);){const P=s[C+1];sA(s[C],a)&&(b=!0,s[C+1]=d?sy(P):kd(P)),C=d?Kl(P):Ho(P)}b&&(s[l+1]=d?kd(m):sy(m))}function sA(s,a){return null===s||null==a||(Array.isArray(s)?s[1]:s)===a||!(!Array.isArray(s)||"string"!=typeof a)&&Ji(s,a)>=0}const ni={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function zI(s){return s.substring(ni.key,ni.keyEnd)}function ZI(s,a){const l=ni.textEnd;return l===a?-1:(a=ni.keyEnd=function Fa(s,a,l){for(;a<l&&s.charCodeAt(a)>32;)a++;return a}(s,ni.key=a,l),ka(s,a,l))}function ka(s,a,l){for(;a<l&&s.charCodeAt(a)<=32;)a++;return a}function ay(s,a,l){return uo(s,a,l,!1),ay}function Yw(s,a){return uo(s,a,null,!0),Yw}function ly(s){!function Bs(s,a,l,d){const f=zt(),m=Ys(2);f.firstUpdatePass&&WI(f,null,m,d);const w=pe();if(l!==Ft&&bi(w,m,l)){const C=f.data[Zr()];if(nc(C,d)&&!Qw(f,m)){let b=d?C.classesWithoutHost:C.stylesWithoutHost;null!==b&&(l=he(b,l||"")),J_(f,C,w,l,d)}else!function tc(s,a,l,d,f,m,w,C){f===Ft&&(f=Le);let b=0,M=0,P=0<f.length?f[0]:null,V=0<m.length?m[0]:null;for(;null!==P||null!==V;){const Z=b<f.length?f[b+1]:void 0,ee=M<m.length?m[M+1]:void 0;let Ue,ye=null;P===V?(b+=2,M+=2,Z!==ee&&(ye=V,Ue=ee)):null===V||null!==P&&P<V?(b+=2,ye=P):(M+=2,ye=V,Ue=ee),null!==ye&&Jw(s,a,l,d,ye,Ue,w,C),P=b<f.length?f[b]:null,V=M<m.length?m[M]:null}}(f,C,w,w[jt],w[m+1],w[m+1]=function YI(s,a,l){if(null==l||""===l)return Le;const d=[],f=Os(l);if(Array.isArray(f))for(let m=0;m<f.length;m++)s(d,f[m],!0);else if("object"==typeof f)for(const m in f)f.hasOwnProperty(m)&&s(d,m,f[m]);else"string"==typeof f&&a(d,f);return d}(s,a,l),d,m)}}(JI,Va,s,!0)}function Va(s,a){for(let l=function qI(s){return function qw(s){ni.key=0,ni.keyEnd=0,ni.value=0,ni.valueEnd=0,ni.textEnd=s.length}(s),ZI(s,ka(s,0,ni.textEnd))}(a);l>=0;l=ZI(a,l))Qi(s,zI(a),!0)}function uo(s,a,l,d){const f=pe(),m=zt(),w=Ys(2);m.firstUpdatePass&&WI(m,s,w,d),a!==Ft&&bi(f,w,a)&&Jw(m,m.data[Zr()],f,f[jt],s,f[w+1]=function uy(s,a){return null==s||""===s||("string"==typeof a?s+=a:"object"==typeof s&&(s=fe(Os(s)))),s}(a,l),d,w)}function Qw(s,a){return a>=s.expandoStartIndex}function WI(s,a,l,d){const f=s.data;if(null===f[l+1]){const m=f[Zr()],w=Qw(s,l);nc(m,d)&&null===a&&!w&&(a=!1),a=function KI(s,a,l,d){const f=mu(s);let m=d?a.residualClasses:a.residualStyles;if(null===f)0===(d?a.classBindings:a.styleBindings)&&(l=Ba(l=Ua(null,s,a,l,d),a.attrs,d),m=null);else{const w=a.directiveStylingLast;if(-1===w||s[w]!==f)if(l=Ua(f,s,a,l,d),null===m){let b=function aA(s,a,l){const d=l?a.classBindings:a.styleBindings;if(0!==Ho(d))return s[Kl(d)]}(s,a,d);void 0!==b&&Array.isArray(b)&&(b=Ua(null,s,a,b[1],d),b=Ba(b,a.attrs,d),function lA(s,a,l,d){s[Kl(l?a.classBindings:a.styleBindings)]=d}(s,a,d,b))}else m=function uA(s,a,l){let d;const f=a.directiveEnd;for(let m=1+a.directiveStylingLast;m<f;m++)d=Ba(d,s[m].hostAttrs,l);return Ba(d,a.attrs,l)}(s,a,d)}return void 0!==m&&(d?a.residualClasses=m:a.residualStyles=m),l}(f,m,a,d),function jI(s,a,l,d,f,m){let w=m?a.classBindings:a.styleBindings,C=Kl(w),b=Ho(w);s[d]=l;let P,M=!1;if(Array.isArray(l)?(P=l[1],(null===P||Ji(l,P)>0)&&(M=!0)):P=l,f)if(0!==b){const Z=Kl(s[C+1]);s[d+1]=jg(Z,C),0!==Z&&(s[Z+1]=xf(s[Z+1],d)),s[C+1]=function iy(s,a){return 131071&s|a<<17}(s[C+1],d)}else s[d+1]=jg(C,0),0!==C&&(s[C+1]=xf(s[C+1],d)),C=d;else s[d+1]=jg(b,0),0===C?C=d:s[b+1]=xf(s[b+1],d),b=d;M&&(s[d+1]=kd(s[d+1])),GI(s,P,d,!0),GI(s,P,d,!1),function HI(s,a,l,d,f){const m=f?s.residualClasses:s.residualStyles;null!=m&&"string"==typeof a&&Ji(m,a)>=0&&(l[d+1]=sy(l[d+1]))}(a,P,s,d,m),w=jg(C,b),m?a.classBindings=w:a.styleBindings=w}(f,m,a,l,w,d)}}function Ua(s,a,l,d,f){let m=null;const w=l.directiveEnd;let C=l.directiveStylingLast;for(-1===C?C=l.directiveStart:C++;C<w&&(m=a[C],d=Ba(d,m.hostAttrs,f),m!==s);)C++;return null!==s&&(l.directiveStylingLast=C),d}function Ba(s,a,l){const d=l?1:2;let f=-1;if(null!==a)for(let m=0;m<a.length;m++){const w=a[m];"number"==typeof w?f=w:f===d&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Qi(s,w,!!l||a[++m]))}return void 0===s?null:s}function JI(s,a,l){const d=String(a);""!==d&&!d.includes(" ")&&Qi(s,d,l)}function Jw(s,a,l,d,f,m,w,C){if(!(3&a.type))return;const b=s.data,M=b[C+1],P=function $I(s){return 1==(1&s)}(M)?XI(b,a,l,f,Ho(M),w):void 0;zg(P)||(zg(m)||function zw(s){return 2==(2&s)}(M)&&(m=XI(b,null,l,f,C,w)),function T_(s,a,l,d,f){if(a)f?s.addClass(l,d):s.removeClass(l,d);else{let m=-1===d.indexOf("-")?void 0:io.DashCase;null==f?s.removeStyle(l,d,m):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),m|=io.Important),s.setStyle(l,d,f,m))}}(d,w,Io(Zr(),l),f,m))}function XI(s,a,l,d,f,m){const w=null===a;let C;for(;f>0;){const b=s[f],M=Array.isArray(b),P=M?b[1]:b,V=null===P;let Z=l[f+1];Z===Ft&&(Z=V?Le:void 0);let ee=V?gr(Z,d):P===d?Z:void 0;if(M&&!zg(ee)&&(ee=gr(b,d)),zg(ee)&&(C=ee,w))return C;const ye=s[f+1];f=w?Kl(ye):Ho(ye)}if(null!==a){let b=m?a.residualClasses:a.residualStyles;null!=b&&(C=gr(b,d))}return C}function zg(s){return void 0!==s}function nc(s,a){return 0!=(s.flags&(a?8:16))}function rc(s,a=""){const l=pe(),d=zt(),f=s+yn,m=d.firstCreatePass?Ef(d,f,1,a,null):d.data[f],w=l[f]=function zh(s,a){return s.createText(a)}(l[jt],a);Qh(d,l,w,m),Ki(m,!1)}function Yl(s){return ic("",s,""),Yl}function ic(s,a,l){const d=pe(),f=Us(d,s,a,l);return f!==Ft&&Na(d,Zr(),f),ic}function cy(s,a,l,d,f){const m=pe(),w=Tf(m,s,a,l,d,f);return w!==Ft&&Na(m,Zr(),w),cy}function Pf(s,a,l){const d=pe();if(bi(d,Ss(),a)){const m=zt(),w=Dn();fs(m,w,d,s,a,function xw(s,a,l){return(null===s||er(s))&&(l=function Co(s){for(;Array.isArray(s);){if("object"==typeof s[Sc])return s;s=s[dr]}return null}(l[a.index])),l[jt]}(mu(m.data),w,d),l,!0)}return Pf}const Go=void 0;var lb=["en",[["a","p"],["AM","PM"],Go],[["AM","PM"],Go,Go],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Go,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Go,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Go,"{1} 'at' {0}",Go],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function ab(s){const l=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===d?1:5}];let ri={};function Of(s){const a=function Vd(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=Ql(a);if(l)return l;const d=a.split("-")[0];if(l=Ql(d),l)return l;if("en"===d)return lb;throw new me(701,!1)}function u0(s){return Of(s)[Mt.PluralCase]}function Ql(s){return s in ri||(ri[s]=hn.ng&&hn.ng.common&&hn.ng.common.locales&&hn.ng.common.locales[s]),ri[s]}var Mt=(()=>((Mt=Mt||{})[Mt.LocaleId=0]="LocaleId",Mt[Mt.DayPeriodsFormat=1]="DayPeriodsFormat",Mt[Mt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Mt[Mt.DaysFormat=3]="DaysFormat",Mt[Mt.DaysStandalone=4]="DaysStandalone",Mt[Mt.MonthsFormat=5]="MonthsFormat",Mt[Mt.MonthsStandalone=6]="MonthsStandalone",Mt[Mt.Eras=7]="Eras",Mt[Mt.FirstDayOfWeek=8]="FirstDayOfWeek",Mt[Mt.WeekendRange=9]="WeekendRange",Mt[Mt.DateFormat=10]="DateFormat",Mt[Mt.TimeFormat=11]="TimeFormat",Mt[Mt.DateTimeFormat=12]="DateTimeFormat",Mt[Mt.NumberSymbols=13]="NumberSymbols",Mt[Mt.NumberFormats=14]="NumberFormats",Mt[Mt.CurrencyCode=15]="CurrencyCode",Mt[Mt.CurrencySymbol=16]="CurrencySymbol",Mt[Mt.CurrencyName=17]="CurrencyName",Mt[Mt.Currencies=18]="Currencies",Mt[Mt.Directionality=19]="Directionality",Mt[Mt.PluralCase=20]="PluralCase",Mt[Mt.ExtraData=21]="ExtraData",Mt))();const Ud="en-US";let ub=Ud;function om(s,a,l,d,f){if(s=Q(s),Array.isArray(s))for(let m=0;m<s.length;m++)om(s[m],a,l,d,f);else{const m=zt(),w=pe();let C=Bu(s)?s:Q(s.provide),b=rw(s);const M=zn(),P=1048575&M.providerIndexes,V=M.directiveStart,Z=M.providerIndexes>>20;if(Bu(s)||!s.multi){const ee=new As(b,f,wf),ye=Gf(C,a,f?P:P+Z,V);-1===ye?(_a(ma(M,w),m,C),ac(m,s,a.length),a.push(C),M.directiveStart++,M.directiveEnd++,f&&(M.providerIndexes+=1048576),l.push(ee),w.push(ee)):(l[ye]=ee,w[ye]=ee)}else{const ee=Gf(C,a,P+Z,V),ye=Gf(C,a,P,P+Z),Qe=ye>=0&&l[ye];if(f&&!Qe||!f&&!(ee>=0&&l[ee])){_a(ma(M,w),m,C);const ft=function T0(s,a,l,d,f){const m=new As(s,l,wf);return m.multi=[],m.index=a,m.componentProviders=0,Ay(m,f,d&&!l),m}(f?b0:am,l.length,f,d,b);!f&&Qe&&(l[ye].providerFactory=ft),ac(m,s,a.length,0),a.push(C),M.directiveStart++,M.directiveEnd++,f&&(M.providerIndexes+=1048576),l.push(ft),w.push(ft)}else ac(m,s,ee>-1?ee:ye,Ay(l[f?ye:ee],b,!f&&d));!f&&d&&Qe&&l[ye].componentProviders++}}}function ac(s,a,l,d){const f=Bu(a),m=function $C(s){return!!s.useClass}(a);if(f||m){const b=(m?Q(a.useClass):a).prototype.ngOnDestroy;if(b){const M=s.destroyHooks||(s.destroyHooks=[]);if(!f&&a.multi){const P=M.indexOf(l);-1===P?M.push(l,[d,b]):M[P+1].push(d,b)}else M.push(l,b)}}}function Ay(s,a,l){return l&&s.componentProviders++,s.multi.push(a)-1}function Gf(s,a,l,d){for(let f=l;f<d;f++)if(a[f]===s)return f;return-1}function am(s,a,l,d){return My(this.multi,[])}function b0(s,a,l,d){const f=this.multi;let m;if(this.providerFactory){const w=this.providerFactory.componentProviders,C=us(l,l[nt],this.providerFactory.index,d);m=C.slice(0,w),My(f,m);for(let b=w;b<C.length;b++)m.push(C[b])}else m=[],My(f,m);return m}function My(s,a){for(let l=0;l<s.length;l++)a.push((0,s[l])());return a}function xy(s,a=[]){return l=>{l.providersResolver=(d,f)=>function sm(s,a,l){const d=zt();if(d.firstCreatePass){const f=er(s);om(l,d.data,d.blueprint,f,!0),om(a,d.data,d.blueprint,f,!1)}}(d,f?f(s):s,a)}}class $s{}class D0{}function kA(s,a){return new Rb(s,a??null)}class Rb extends $s{constructor(a,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new en(this);const d=kr(a);this._bootstrapComponents=Uo(d.bootstrap),this._r3Injector=pw(a,l,[{provide:$s,useValue:this},{provide:ff,useValue:this.componentFactoryResolver}],fe(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class lm extends D0{constructor(a){super(),this.moduleType=a}create(a){return new Rb(this.moduleType,a)}}class FA extends $s{constructor(a,l,d){super(),this.componentFactoryResolver=new en(this),this.instance=null;const f=new Tg([...a,{provide:$s,useValue:this},{provide:ff,useValue:this.componentFactoryResolver}],l||dd(),d,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function um(s,a,l=null){return new FA(s,a,l).injector}let Ny=(()=>{class s{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l.id)){const d=VC(0,l.type),f=d.length>0?um([d],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l.id,f)}return this.cachedInjectors.get(l.id)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=Tt({token:s,providedIn:"environment",factory:()=>new s(an(ju))}),s})();function Ry(s){s.getStandaloneInjector=a=>a.get(Ny).getOrCreateStandaloneInjector(s)}function ky(s,a,l){const d=Vr()+s,f=pe();return f[d]===Ft?Ls(f,d,l?a.call(l):a()):function zl(s,a){return s[a]}(f,d)}function Fy(s,a,l,d){return Ly(pe(),Vr(),s,a,l,d)}function cm(s,a){const l=s[a];return l===Ft?void 0:l}function Ly(s,a,l,d,f,m){const w=a+l;return bi(s,w,f)?Ls(s,w+1,m?d.call(m,f):d(f)):cm(s,w+1)}function Uy(s,a,l,d,f,m,w,C){const b=a+l;return function Xu(s,a,l,d,f){const m=ql(s,a,l,d);return bi(s,a+2,f)||m}(s,b,f,m,w)?Ls(s,b+3,C?d.call(C,f,m,w):d(f,m,w)):cm(s,b+3)}function Gb(s,a){const l=zt();let d;const f=s+yn;l.firstCreatePass?(d=function N0(s,a){if(a)for(let l=a.length-1;l>=0;l--){const d=a[l];if(s===d.name)return d}}(a,l.pipeRegistry),l.data[f]=d,d.onDestroy&&(l.destroyHooks??(l.destroyHooks=[])).push(f,d.onDestroy)):d=l.data[f];const m=d.factory||(d.factory=Zi(d.type)),w=Qn(wf);try{const C=Cl(!1),b=m();return Cl(C),function PI(s,a,l,d){l>=s.data.length&&(s.data[l]=null,s.blueprint[l]=null),a[l]=d}(l,pe(),f,b),b}finally{Qn(w)}}function qb(s,a,l){const d=s+yn,f=pe(),m=Ds(f,d);return Kf(f,d)?Ly(f,Vr(),a,m.transform,l,m):m.transform(l)}function R0(s,a,l,d){const f=s+yn,m=pe(),w=Ds(m,f);return Kf(m,f)?function Vy(s,a,l,d,f,m,w){const C=a+l;return ql(s,C,f,m)?Ls(s,C+2,w?d.call(w,f,m):d(f,m)):cm(s,C+2)}(m,Vr(),a,w.transform,l,d,w):w.transform(l,d)}function Zb(s,a,l,d,f){const m=s+yn,w=pe(),C=Ds(w,m);return Kf(w,m)?Uy(w,Vr(),a,C.transform,l,d,f,C):C.transform(l,d,f)}function Kf(s,a){return s[nt].data[a].pure}function P0(s){return a=>{setTimeout(s,void 0,a)}}const $a=class Yb extends u.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,l,d){let f=a,m=l||(()=>null),w=d;if(a&&"object"==typeof a){const b=a;f=b.next?.bind(b),m=b.error?.bind(b),w=b.complete?.bind(b)}this.__isAsync&&(m=P0(m),f&&(f=P0(f)),w&&(w=P0(w)));const C=super.subscribe({next:f,error:m,complete:w});return a instanceof te.w0&&a.add(C),C}};function BA(){return this._results[Symbol.iterator]()}class O0{get changes(){return this._changes||(this._changes=new $a)}constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=O0.prototype;l[Symbol.iterator]||(l[Symbol.iterator]=BA)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,l){return this._results.reduce(a,l)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,l){const d=this;d.dirty=!1;const f=function wi(s){return s.flat(Number.POSITIVE_INFINITY)}(a);(this._changesDetected=!function Xp(s,a,l){if(s.length!==a.length)return!1;for(let d=0;d<s.length;d++){let f=s[d],m=a[d];if(l&&(f=l(f),m=l(m)),m!==f)return!1}return!0}(d._results,f,l))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Hd=(()=>{class s{}return s.__NG_ELEMENT_ID__=$A,s})();const k0=Hd,F0=class extends k0{constructor(a,l,d){super(),this._declarationLView=a,this._declarationTContainer=l,this.elementRef=d}createEmbeddedView(a,l){const d=this._declarationTContainer.tView,f=j_(this._declarationLView,d,a,16,null,d.declTNode,null,null,null,null,l||null);f[na]=this._declarationLView[this._declarationTContainer.index];const w=this._declarationLView[Gi];return null!==w&&(f[Gi]=w.createEmbeddedView(d)),Ew(d,f,a),new Og(f)}};function $A(){return Yf(zn(),pe())}function Yf(s,a){return 4&s.type?new F0(a,s,gi(s,a)):null}let $y=(()=>{class s{}return s.__NG_ELEMENT_ID__=L0,s})();function L0(){return Hy(zn(),pe())}const Qb=$y,jy=class extends Qb{constructor(a,l,d){super(),this._lContainer=a,this._hostTNode=l,this._hostLView=d}get element(){return gi(this._hostTNode,this._hostLView)}get injector(){return new Ro(this._hostTNode,this._hostLView)}get parentInjector(){const a=Sn(this._hostTNode,this._hostLView);if(xo(a)){const l=wl(a,this._hostLView),d=vl(a);return new Ro(l[nt].data[d+8],l)}return new Ro(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const l=V0(this._lContainer);return null!==l&&l[a]||null}get length(){return this._lContainer.length-br}createEmbeddedView(a,l,d){let f,m;"number"==typeof d?f=d:null!=d&&(f=d.index,m=d.injector);const w=a.createEmbeddedView(l||{},m);return this.insert(w,f),w}createComponent(a,l,d,f,m){const w=a&&!function Du(s){return"function"==typeof s}(a);let C;if(w)C=l;else{const V=l||{};C=V.index,d=V.injector,f=V.projectableNodes,m=V.environmentInjector||V.ngModuleRef}const b=w?a:new Td(ln(a)),M=d||this.parentInjector;if(!m&&null==b.ngModule){const Z=(w?M:this.parentInjector).get(ju,null);Z&&(m=Z)}const P=b.create(M,f,void 0,m);return this.insert(P.hostView,C),P}insert(a,l){const d=a._lView,f=d[nt];if(function ch(s){return zi(s[Fn])}(d)){const P=this.indexOf(a);if(-1!==P)this.detach(P);else{const V=d[Fn],Z=new jy(V,V[Fr],V[Fn]);Z.detach(Z.indexOf(a))}}const m=this._adjustIndex(l),w=this._lContainer;!function lg(s,a,l,d){const f=br+d,m=l.length;d>0&&(l[f-1][Kt]=a),d<m-br?(a[Kt]=l[f],Nl(l,br+d,a)):(l.push(a),a[Kt]=null),a[Fn]=l;const w=a[na];null!==w&&l!==w&&function Yv(s,a){const l=s[Gr];a[Lr]!==a[Fn][Fn][Lr]&&(s[lu]=!0),null===l?s[Gr]=[a]:l.push(a)}(w,a);const C=a[Gi];null!==C&&C.insertView(s),a[Vt]|=64}(f,d,w,m);const C=fg(m,w),b=d[jt],M=Qc(b,w[ia]);return null!==M&&function Ur(s,a,l,d,f,m){d[dr]=f,d[Fr]=a,Vl(s,d,l,1,f,m)}(f,w[Fr],b,d,M,C),a.attachToViewContainerRef(),Nl(U0(w),m,a),a}move(a,l){return this.insert(a,l)}indexOf(a){const l=V0(this._lContainer);return null!==l?l.indexOf(a):-1}remove(a){const l=this._adjustIndex(a,-1),d=Wh(this._lContainer,l);d&&(Rl(U0(this._lContainer),l),Kh(d[nt],d))}detach(a){const l=this._adjustIndex(a,-1),d=Wh(this._lContainer,l);return d&&null!=Rl(U0(this._lContainer),l)?new Og(d):null}_adjustIndex(a,l=0){return a??this.length+l}};function V0(s){return s[Cs]}function U0(s){return s[Cs]||(s[Cs]=[])}function Hy(s,a){let l;const d=a[s.index];if(zi(d))l=d;else{let f;if(8&s.type)f=Gn(d);else{const m=a[jt];f=m.createComment("");const w=hr(s,a);oo(m,Qc(m,w),f,function b_(s,a){return s.nextSibling(a)}(m,w),!1)}a[s.index]=l=Ed(d,a,f,s),bd(a,l)}return new jy(l,s,a)}class B0{constructor(a){this.queryList=a,this.matches=null}clone(){return new B0(this.queryList)}setDirty(){this.queryList.setDirty()}}class dm{constructor(a=[]){this.queries=a}createEmbeddedView(a){const l=a.queries;if(null!==l){const d=null!==a.contentQueries?a.contentQueries[0]:l.length,f=[];for(let m=0;m<d;m++){const w=l.getByIndex(m);f.push(this.queries[w.indexInDeclarationView].clone())}return new dm(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let l=0;l<this.queries.length;l++)null!==qy(a,l).matches&&this.queries[l].setDirty()}}class Jb{constructor(a,l,d=null){this.predicate=a,this.flags=l,this.read=d}}class hm{constructor(a=[]){this.queries=a}elementStart(a,l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(a,l)}elementEnd(a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(a)}embeddedTView(a){let l=null;for(let d=0;d<this.length;d++){const f=null!==l?l.length:0,m=this.getByIndex(d).embeddedTView(a,f);m&&(m.indexInDeclarationView=d,null!==l?l.push(m):l=[m])}return null!==l?new hm(l):null}template(a,l){for(let d=0;d<this.queries.length;d++)this.queries[d].template(a,l)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class $0{constructor(a,l=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(a,l){this.isApplyingToNode(l)&&this.matchTNode(a,l)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,l){this.elementStart(a,l)}embeddedTView(a,l){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,l),new $0(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let d=a.parent;for(;null!==d&&8&d.type&&d.index!==l;)d=d.parent;return l===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(a,l){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const m=d[f];this.matchTNodeWithReadOption(a,l,j0(l,m)),this.matchTNodeWithReadOption(a,l,di(l,a,m,!1,!1))}else d===Hd?4&l.type&&this.matchTNodeWithReadOption(a,l,-1):this.matchTNodeWithReadOption(a,l,di(l,a,d,!1,!1))}matchTNodeWithReadOption(a,l,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===pf||f===$y||f===Hd&&4&l.type)this.addMatch(l.index,-2);else{const m=di(l,a,f,!1,!1);null!==m&&this.addMatch(l.index,m)}else this.addMatch(l.index,d)}}addMatch(a,l){null===this.matches?this.matches=[a,l]:this.matches.push(a,l)}}function j0(s,a){const l=s.localNames;if(null!==l)for(let d=0;d<l.length;d+=2)if(l[d]===a)return l[d+1];return null}function G0(s,a,l,d){return-1===l?function H0(s,a){return 11&s.type?gi(s,a):4&s.type?Yf(s,a):null}(a,s):-2===l?function Qf(s,a,l){return l===pf?gi(a,s):l===Hd?Yf(a,s):l===$y?Hy(a,s):void 0}(s,a,d):us(s,s[nt],l,a)}function z0(s,a,l,d){const f=a[Gi].queries[d];if(null===f.matches){const m=s.data,w=l.matches,C=[];for(let b=0;b<w.length;b+=2){const M=w[b];C.push(M<0?null:G0(a,m[M],w[b+1],l.metadata.read))}f.matches=C}return f.matches}function fm(s,a,l,d){const f=s.queries.getByIndex(l),m=f.matches;if(null!==m){const w=z0(s,a,f,l);for(let C=0;C<m.length;C+=2){const b=m[C];if(b>0)d.push(w[C/2]);else{const M=m[C+1],P=a[-b];for(let V=br;V<P.length;V++){const Z=P[V];Z[na]===Z[Fn]&&fm(Z[nt],Z,M,d)}if(null!==P[Gr]){const V=P[Gr];for(let Z=0;Z<V.length;Z++){const ee=V[Z];fm(ee[nt],ee,M,d)}}}}}return d}function Xb(s){const a=pe(),l=zt(),d=Pc();Oc(d+1);const f=qy(l,d);if(s.dirty&&function fl(s){return 4==(4&s[Vt])}(a)===(2==(2&f.metadata.flags))){if(null===f.matches)s.reset([]);else{const m=f.crossesNgTemplate?fm(l,a,d,[]):z0(l,a,f,d);s.reset(m,ZC),s.notifyOnChanges()}return!0}return!1}function ja(s,a,l,d){const f=zt();if(f.firstCreatePass){const m=zn();(function eT(s,a,l){null===s.queries&&(s.queries=new hm),s.queries.track(new $0(a,l))})(f,new Jb(a,l,d),m.index),function HA(s,a){const l=s.contentQueries||(s.contentQueries=[]);a!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,a)}(f,s),2==(2&l)&&(f.staticContentQueries=!0)}!function zy(s,a,l){const d=new O0(4==(4&l));qu(s,a,d,d.destroy),null===a[Gi]&&(a[Gi]=new dm),a[Gi].queries.push(new B0(d))}(f,pe(),l)}function Gy(){return function jA(s,a){return s[Gi].queries[a].queryList}(pe(),Pc())}function qy(s,a){return s.queries.getByIndex(a)}function tT(s,a){return Yf(s,a)}function Wy(s){return!!kr(s)}function ym(...s){}const oE=new Jt("Application Initializer");let xn=(()=>{class s{constructor(l){this.appInits=l,this.resolve=ym,this.reject=ym,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const l=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const m=this.appInits[f]();if(Sf(m))l.push(m);else if($w(m)){const w=new Promise((C,b)=>{m.subscribe({complete:C,error:b})});l.push(w)}}Promise.all(l).then(()=>{d()}).catch(f=>{this.reject(f)}),0===l.length&&d(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(an(oE,8))},s.\u0275prov=Tt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const yi=new Jt("AppId",{providedIn:"root",factory:function zo(){return`${aE()}${aE()}${aE()}`}});function aE(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const vm=new Jt("Platform Initializer"),pT=new Jt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),sM=new Jt("AnimationModuleType");let lE=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Tt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const rv=new Jt("LocaleId",{providedIn:"root",factory:()=>Ie(rv,pt.Optional|pt.SkipSelf)||function oM(){return typeof $localize<"u"&&$localize.locale||Ud}()}),Wn=new Jt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class mT{constructor(a,l){this.ngModuleFactory=a,this.componentFactories=l}}let aM=(()=>{class s{compileModuleSync(l){return new lm(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const d=this.compileModuleSync(l),m=Uo(kr(l).declarations).reduce((w,C)=>{const b=ln(C);return b&&w.push(new Td(b)),w},[]);return new mT(d,m)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Tt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const dM=(()=>Promise.resolve(0))();function uE(s){typeof Zone>"u"?dM.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class co{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new $a(!1),this.onMicrotaskEmpty=new $a(!1),this.onStable=new $a(!1),this.onError=new $a(!1),typeof Zone>"u")throw new me(908,!1);Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&l,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function vT(){let s=hn.requestAnimationFrame,a=hn.cancelAnimationFrame;if(typeof Zone<"u"&&s&&a){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function Gd(s){const a=()=>{!function JR(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(hn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,np(s),s.isCheckStableRunning=!0,qo(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),np(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,d,f,m,w,C)=>{try{return wT(s),l.invokeTask(f,m,w,C)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||s.shouldCoalesceRunChangeDetection)&&a(),ET(s)}},onInvoke:(l,d,f,m,w,C,b)=>{try{return wT(s),l.invoke(f,m,w,C,b)}finally{s.shouldCoalesceRunChangeDetection&&a(),ET(s)}},onHasTask:(l,d,f,m)=>{l.hasTask(f,m),d===f&&("microTask"==m.change?(s._hasPendingMicrotasks=m.microTask,np(s),qo(s)):"macroTask"==m.change&&(s.hasPendingMacrotasks=m.macroTask))},onHandleError:(l,d,f,m)=>(l.handleError(f,m),s.runOutsideAngular(()=>s.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!co.isInAngularZone())throw new me(909,!1)}static assertNotInAngularZone(){if(co.isInAngularZone())throw new me(909,!1)}run(a,l,d){return this._inner.run(a,l,d)}runTask(a,l,d,f){const m=this._inner,w=m.scheduleEventTask("NgZoneEvent: "+f,a,Ga,ym,ym);try{return m.runTask(w,l,d)}finally{m.cancelTask(w)}}runGuarded(a,l,d){return this._inner.runGuarded(a,l,d)}runOutsideAngular(a){return this._outer.run(a)}}const Ga={};function qo(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function np(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function wT(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function ET(s){s._nesting--,qo(s)}class CT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new $a,this.onMicrotaskEmpty=new $a,this.onStable=new $a,this.onError=new $a}run(a,l,d){return a.apply(l,d)}runGuarded(a,l,d){return a.apply(l,d)}runOutsideAngular(a){return a()}runTask(a,l,d,f){return a.apply(l,d)}}const cE=new Jt(""),wm=new Jt("");let zd,hM=(()=>{class s{constructor(l,d,f){this._ngZone=l,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,zd||(function sv(s){zd=s}(f),f.addToWindow(d)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{co.assertNotInAngularZone(),uE(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())uE(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(l)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,d,f){let m=-1;d&&d>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==m),l(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:l,timeoutId:m,updateCb:f})}whenStable(l,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,d,f){return[]}}return s.\u0275fac=function(l){return new(l||s)(an(co),an(uc),an(wm))},s.\u0275prov=Tt({token:s,factory:s.\u0275fac}),s})(),uc=(()=>{class s{constructor(){this._applications=new Map}registerApplication(l,d){this._applications.set(l,d)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,d=!0){return zd?.findTestabilityInTree(this,l,d)??null}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Tt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const za=!1;let qa=null;const IT=new Jt("AllowMultipleToken"),dE=new Jt("PlatformDestroyListeners"),bT=new Jt("appBootstrapListener");class qd{constructor(a,l){this.name=a,this.token=l}}function MT(s,a,l=[]){const d=`Platform: ${a}`,f=new Jt(d);return(m=[])=>{let w=Zd();if(!w||w.injector.get(IT,!1)){const C=[...l,...m,{provide:f,useValue:!0}];s?s(C):function ST(s){if(qa&&!qa.get(IT,!1))throw new me(400,!1);qa=s;const a=s.get(xT);(function ov(s){const a=s.get(vm,null);a&&a.forEach(l=>l())})(s)}(function Em(s=[],a){return Jr.create({name:a,providers:[{provide:Ig,useValue:"platform"},{provide:dE,useValue:new Set([()=>qa=null])},...s]})}(C,d))}return function lv(s){const a=Zd();if(!a)throw new me(401,!1);return a}()}}function Zd(){return qa?.get(xT)??null}let xT=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,d){const f=function fE(s,a){let l;return l="noop"===s?new CT:("zone.js"===s?void 0:s)||new co(a),l}(d?.ngZone,function Cm(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(d)),m=[{provide:co,useValue:f}];return f.run(()=>{const w=Jr.create({providers:m,parent:this.injector,name:l.moduleType.name}),C=l.create(w),b=C.injector.get(gf,null);if(!b)throw new me(402,!1);return f.runOutsideAngular(()=>{const M=f.onError.subscribe({next:P=>{b.handleError(P)}});C.onDestroy(()=>{cc(this._modules,C),M.unsubscribe()})}),function uv(s,a,l){try{const d=l();return Sf(d)?d.catch(f=>{throw a.runOutsideAngular(()=>s.handleError(f)),f}):d}catch(d){throw a.runOutsideAngular(()=>s.handleError(d)),d}}(b,f,()=>{const M=C.injector.get(xn);return M.runInitializers(),M.donePromise.then(()=>(function Jg(s){ot(s,"Expected localeId to be defined"),"string"==typeof s&&(ub=s.toLowerCase().replace(/_/g,"-"))}(C.injector.get(rv,Ud)||Ud),this._moduleDoBootstrap(C),C))})})}bootstrapModule(l,d=[]){const f=rp({},d);return function hE(s,a,l){const d=new lm(l);return Promise.resolve(d)}(0,0,l).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(l){const d=l.injector.get(Zo);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!l.instance.ngDoBootstrap)throw new me(-403,!1);l.instance.ngDoBootstrap(d)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new me(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const l=this._injector.get(dE,null);l&&(l.forEach(d=>d()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(an(Jr))},s.\u0275prov=Tt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function rp(s,a){return Array.isArray(a)?a.reduce(rp,s):{...s,...a}}let Zo=(()=>{class s{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(l,d,f){this._zone=l,this._injector=d,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new k.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),w=new k.y(C=>{let b;this._zone.runOutsideAngular(()=>{b=this._zone.onStable.subscribe(()=>{co.assertNotInAngularZone(),uE(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const M=this._zone.onUnstable.subscribe(()=>{co.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{b.unsubscribe(),M.unsubscribe()}});this.isStable=(0,oe.T)(m,w.pipe((0,se.B)()))}bootstrap(l,d){const f=l instanceof ow;if(!this._injector.get(xn).done){!f&&as(l);throw new me(405,za)}let w;w=f?l:this._injector.get(ff).resolveComponentFactory(l),this.componentTypes.push(w.componentType);const C=function DT(s){return s.isBoundToModule}(w)?void 0:this._injector.get($s),M=w.create(Jr.NULL,[],d||w.selector,C),P=M.location.nativeElement,V=M.injector.get(cE,null);return V?.registerApplication(P),M.onDestroy(()=>{this.detachView(M.hostView),cc(this.components,M),V?.unregisterApplication(P)}),this._loadComponent(M),M}tick(){if(this._runningTick)throw new me(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const d=l;this._views.push(d),d.attachToAppRef(this)}detachView(l){const d=l;cc(this._views,d),d.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l);const d=this._injector.get(bT,[]);d.push(...this._bootstrapListeners),d.forEach(f=>f(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>cc(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new me(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(l){return new(l||s)(an(co),an(ju),an(gf))},s.\u0275prov=Tt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function cc(s,a){const l=s.indexOf(a);l>-1&&s.splice(l,1)}function XR(){return!1}let pM=(()=>{class s{}return s.__NG_ELEMENT_ID__=gM,s})();function gM(s){return function cv(s,a,l){if(ll(s)&&!l){const d=fr(s.index,a);return new Og(d,d)}return 47&s.type?new Og(a[Lr],a):null}(zn(),pe(),16==(16&s))}class Xl{constructor(){}supports(a){return Sd(a)}create(a){return new LT(a)}}const mM=(s,a)=>a;class LT{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||mM}forEachItem(a){let l;for(l=this._itHead;null!==l;l=l._next)a(l)}forEachOperation(a){let l=this._itHead,d=this._removalsHead,f=0,m=null;for(;l||d;){const w=!d||l&&l.currentIndex<UT(d,f,m)?l:d,C=UT(w,f,m),b=w.currentIndex;if(w===d)f--,d=d._nextRemoved;else if(l=l._next,null==w.previousIndex)f++;else{m||(m=[]);const M=C-f,P=b-f;if(M!=P){for(let Z=0;Z<M;Z++){const ee=Z<m.length?m[Z]:m[Z]=0,ye=ee+Z;P<=ye&&ye<M&&(m[Z]=ee+1)}m[w.previousIndex]=P-M}}C!==b&&a(w,C,b)}}forEachPreviousItem(a){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachMovedItem(a){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}forEachIdentityChange(a){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)a(l)}diff(a){if(null==a&&(a=[]),!Sd(a))throw new me(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,m,w,l=this._itHead,d=!1;if(Array.isArray(a)){this.length=a.length;for(let C=0;C<this.length;C++)m=a[C],w=this._trackByFn(C,m),null!==l&&Object.is(l.trackById,w)?(d&&(l=this._verifyReinsertion(l,m,w,C)),Object.is(l.item,m)||this._addIdentityChange(l,m)):(l=this._mismatch(l,m,w,C),d=!0),l=l._next}else f=0,function Ad(s,a){if(Array.isArray(s))for(let l=0;l<s.length;l++)a(s[l]);else{const l=s[Symbol.iterator]();let d;for(;!(d=l.next()).done;)a(d.value)}}(a,C=>{w=this._trackByFn(f,C),null!==l&&Object.is(l.trackById,w)?(d&&(l=this._verifyReinsertion(l,C,w,f)),Object.is(l.item,C)||this._addIdentityChange(l,C)):(l=this._mismatch(l,C,w,f),d=!0),l=l._next,f++}),this.length=f;return this._truncate(l),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,l,d,f){let m;return null===a?m=this._itTail:(m=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._reinsertAfter(a,m,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._moveAfter(a,m,f)):a=this._addAfter(new _M(l,d),m,f),a}_verifyReinsertion(a,l,d,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==m?a=this._reinsertAfter(m,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const l=a._next;this._addToRemovals(this._unlink(a)),a=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,l,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,m=a._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(a,l,d),this._addToMoves(a,d),a}_moveAfter(a,l,d){return this._unlink(a),this._insertAfter(a,l,d),this._addToMoves(a,d),a}_addAfter(a,l,d){return this._insertAfter(a,l,d),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,l,d){const f=null===l?this._itHead:l._next;return a._next=f,a._prev=l,null===f?this._itTail=a:f._prev=a,null===l?this._itHead=a:l._next=a,null===this._linkedRecords&&(this._linkedRecords=new VT),this._linkedRecords.put(a),a.currentIndex=d,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const l=a._prev,d=a._next;return null===l?this._itHead=d:l._next=d,null===d?this._itTail=l:d._prev=l,a}_addToMoves(a,l){return a.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new VT),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,l){return a.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class _M{constructor(a,l){this.item=a,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class fc{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,l){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===l||l<=d.currentIndex)&&Object.is(d.trackById,a))return d;return null}remove(a){const l=a._prevDup,d=a._nextDup;return null===l?this._head=d:l._nextDup=d,null===d?this._tail=l:d._prevDup=l,null===this._head}}class VT{constructor(){this.map=new Map}put(a){const l=a.trackById;let d=this.map.get(l);d||(d=new fc,this.map.set(l,d)),d.add(a)}get(a,l){const f=this.map.get(a);return f?f.get(a,l):null}remove(a){const l=a.trackById;return this.map.get(l).remove(a)&&this.map.delete(l),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function UT(s,a,l){const d=s.previousIndex;if(null===d)return d;let f=0;return l&&d<l.length&&(f=l[d]),d+a+f}class BT{constructor(){}supports(a){return a instanceof Map||Ii(a)}create(){return new yM}}class yM{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let l;for(l=this._mapHead;null!==l;l=l._next)a(l)}forEachPreviousItem(a){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)a(l)}forEachChangedItem(a){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}diff(a){if(a){if(!(a instanceof Map||Ii(a)))throw new me(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(a,(d,f)=>{if(l&&l.key===f)this._maybeAddToChanges(l,d),this._appendAfter=l,l=l._next;else{const m=this._getOrCreateRecordForKey(f,d);l=this._insertBeforeOrAppend(l,m)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let d=l;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,l){if(a){const d=a._prev;return l._next=a,l._prev=d,a._prev=l,d&&(d._next=l),a===this._mapHead&&(this._mapHead=l),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(a,l){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,l);const m=f._prev,w=f._next;return m&&(m._next=w),w&&(w._prev=m),f._next=null,f._prev=null,f}const d=new vM(a);return this._records.set(a,d),d.currentValue=l,this._addToAdditions(d),d}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,l){Object.is(l,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=l,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,l){a instanceof Map?a.forEach(l):Object.keys(a).forEach(d=>l(a[d],d))}}class vM{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function vE(){return new fv([new Xl])}let fv=(()=>{class s{constructor(l){this.factories=l}static create(l,d){if(null!=d){const f=d.factories.slice();l=l.concat(f)}return new s(l)}static extend(l){return{provide:s,useFactory:d=>s.create(l,d||vE()),deps:[[s,new Ea,new Ns]]}}find(l){const d=this.factories.find(f=>f.supports(l));if(null!=d)return d;throw new me(901,!1)}}return s.\u0275prov=Tt({token:s,providedIn:"root",factory:vE}),s})();function $T(){return new pv([new BT])}let pv=(()=>{class s{constructor(l){this.factories=l}static create(l,d){if(d){const f=d.factories.slice();l=l.concat(f)}return new s(l)}static extend(l){return{provide:s,useFactory:d=>s.create(l,d||$T()),deps:[[s,new Ea,new Ns]]}}find(l){const d=this.factories.find(f=>f.supports(l));if(d)return d;throw new me(901,!1)}}return s.\u0275prov=Tt({token:s,providedIn:"root",factory:$T}),s})();const EM=MT(null,"core",[]);let CM=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(an(Zo))},s.\u0275mod=il({type:s}),s.\u0275inj=wn({}),s})();function IM(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(_t,Te,F)=>{F.d(Te,{Z:()=>Ze});var u=F(2090),te=F(4859),k=F(9681),oe=F(1877);class se{constructor(me,Se){this._delegate=me,this.firebase=Se,(0,k._addComponent)(me,new te.wA("app-compat",()=>this,"PUBLIC")),this.container=me.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(me){this._delegate.automaticDataCollectionEnabled=me}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(me=>{this._delegate.checkDestroyed(),me()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(me,Se=k._DEFAULT_ENTRY_NAME){var be;this._delegate.checkDestroyed();const Be=this._delegate.container.getProvider(me);return!Be.isInitialized()&&"EXPLICIT"===(null===(be=Be.getComponent())||void 0===be?void 0:be.instantiationMode)&&Be.initialize(),Be.getImmediate({identifier:Se})}_removeServiceInstance(me,Se=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(me).clearInstance(Se)}_addComponent(me){(0,k._addComponent)(this._delegate,me)}_addOrOverwriteComponent(me){(0,k._addOrOverwriteComponent)(this._delegate,me)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ge=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function he(){const dt=function fe(dt){const me={},Se={__esModule:!0,initializeApp:function ke(Pe,de={}){const q=k.initializeApp(Pe,de);if((0,u.r3)(me,q.name))return me[q.name];const $e=new dt(q,Se);return me[q.name]=$e,$e},app:Be,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function we(Pe){const de=Pe.name,q=de.replace("-compat","");if(k._registerComponent(Pe)&&"PUBLIC"===Pe.type){const $e=(Ge=Be())=>{if("function"!=typeof Ge[q])throw ge.create("invalid-app-argument",{appName:de});return Ge[q]()};void 0!==Pe.serviceProps&&(0,u.ZB)($e,Pe.serviceProps),Se[q]=$e,dt.prototype[q]=function(...Ge){return this._getService.bind(this,de).apply(this,Pe.multipleInstances?Ge:[])}}return"PUBLIC"===Pe.type?Se[q]:null},removeApp:function be(Pe){delete me[Pe]},useAsService:function ze(Pe,de){return"serverAuth"===de?null:de},modularAPIs:k}};function Be(Pe){if(!(0,u.r3)(me,Pe=Pe||k._DEFAULT_ENTRY_NAME))throw ge.create("no-app",{appName:Pe});return me[Pe]}return Se.default=Se,Object.defineProperty(Se,"apps",{get:function Ce(){return Object.keys(me).map(Pe=>me[Pe])}}),Be.App=dt,Se}(se);return dt.INTERNAL=Object.assign(Object.assign({},dt.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function me(Se){(0,u.ZB)(dt,Se)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),dt}(),z=new oe.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const dt=self.firebase.SDK_VERSION;dt&&dt.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ze=G;!function De(dt){(0,k.registerVersion)("@firebase/app-compat","0.2.8",dt)}()},9681:(_t,Te,F)=>{F.r(Te),F.d(Te,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>Hr,_DEFAULT_ENTRY_NAME:()=>Fe,_addComponent:()=>bt,_addOrOverwriteComponent:()=>Ye,_apps:()=>ot,_clearComponents:()=>wn,_components:()=>tt,_getProvider:()=>Tt,_registerComponent:()=>Yt,_removeServiceInstance:()=>on,deleteApp:()=>Es,getApp:()=>Rr,getApps:()=>ws,initializeApp:()=>Ws,onLog:()=>ai,registerVersion:()=>pt,setLogLevel:()=>nl});var u=F(5861),te=F(4859),k=F(1877),oe=F(2090),se=F(8766);class re{constructor(Ie){this.container=Ie}getPlatformInfoString(){return this.container.getProviders().map(Je=>{if(function ge(it){return"VERSION"===it.getComponent()?.type}(Je)){const kt=Je.getImmediate();return`${kt.library}/${kt.version}`}return null}).filter(Je=>Je).join(" ")}}const fe="@firebase/app",G=new k.Yd("@firebase/app"),Fe="[DEFAULT]",je={[fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ot=new Map,tt=new Map;function bt(it,Ie){try{it.container.addComponent(Ie)}catch(Je){G.debug(`Component ${Ie.name} failed to register with FirebaseApp ${it.name}`,Je)}}function Ye(it,Ie){it.container.addOrOverwriteComponent(Ie)}function Yt(it){const Ie=it.name;if(tt.has(Ie))return G.debug(`There were multiple attempts to register component ${Ie}.`),!1;tt.set(Ie,it);for(const Je of ot.values())bt(Je,it);return!0}function Tt(it,Ie){const Je=it.container.getProvider("heartbeat").getImmediate({optional:!0});return Je&&Je.triggerHeartbeat(),it.container.getProvider(Ie)}function on(it,Ie,Je=Fe){Tt(it,Ie).clearInstance(Je)}function wn(){tt.clear()}const kn=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class oi{constructor(Ie,Je,kt){this._isDeleted=!1,this._options=Object.assign({},Ie),this._config=Object.assign({},Je),this._name=Je.name,this._automaticDataCollectionEnabled=Je.automaticDataCollectionEnabled,this._container=kt,this.container.addComponent(new te.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ie){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ie}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ie){this._isDeleted=Ie}checkDestroyed(){if(this.isDeleted)throw kn.create("app-deleted",{appName:this._name})}}const Hr="9.20.0";function Ws(it,Ie={}){let Je=it;"object"!=typeof Ie&&(Ie={name:Ie});const kt=Object.assign({name:Fe,automaticDataCollectionEnabled:!1},Ie),It=kt.name;if("string"!=typeof It||!It)throw kn.create("bad-app-name",{appName:String(It)});if(Je||(Je=(0,oe.aH)()),!Je)throw kn.create("no-options");const fn=ot.get(It);if(fn){if((0,oe.vZ)(Je,fn.options)&&(0,oe.vZ)(kt,fn.config))return fn;throw kn.create("duplicate-app",{appName:It})}const Hn=new te.H0(It);for(const B of tt.values())Hn.addComponent(B);const j=new oi(Je,kt,Hn);return ot.set(It,j),j}function Rr(it=Fe){const Ie=ot.get(it);if(!Ie&&it===Fe)return Ws();if(!Ie)throw kn.create("no-app",{appName:it});return Ie}function ws(){return Array.from(ot.values())}function Es(it){return jn.apply(this,arguments)}function jn(){return(jn=(0,u.Z)(function*(it){const Ie=it.name;ot.has(Ie)&&(ot.delete(Ie),yield Promise.all(it.container.getProviders().map(Je=>Je.delete())),it.isDeleted=!0)})).apply(this,arguments)}function pt(it,Ie,Je){var kt;let It=null!==(kt=je[it])&&void 0!==kt?kt:it;Je&&(It+=`-${Je}`);const fn=It.match(/\s|\//),Hn=Ie.match(/\s|\//);if(fn||Hn){const j=[`Unable to register library "${It}" with version "${Ie}":`];return fn&&j.push(`library name "${It}" contains illegal characters (whitespace or "/")`),fn&&Hn&&j.push("and"),Hn&&j.push(`version name "${Ie}" contains illegal characters (whitespace or "/")`),void G.warn(j.join(" "))}Yt(new te.wA(`${It}-version`,()=>({library:It,version:Ie}),"VERSION"))}function ai(it,Ie){if(null!==it&&"function"!=typeof it)throw kn.create("invalid-log-argument");(0,k.Am)(it,Ie)}function nl(it){(0,k.Ub)(it)}const Qn="firebase-heartbeat-database",ss=1,Pr="firebase-heartbeat-store";let hn=null;function Rn(){return hn||(hn=(0,se.X3)(Qn,ss,{upgrade:(it,Ie)=>{0===Ie&&it.createObjectStore(Pr)}}).catch(it=>{throw kn.create("idb-open",{originalErrorMessage:it.message})})),hn}function xt(){return(xt=(0,u.Z)(function*(it){try{return(yield Rn()).transaction(Pr).objectStore(Pr).get(Jn(it))}catch(Ie){if(Ie instanceof oe.ZR)G.warn(Ie.message);else{const Je=kn.create("idb-get",{originalErrorMessage:Ie?.message});G.warn(Je.message)}}})).apply(this,arguments)}function Si(it,Ie){return li.apply(this,arguments)}function li(){return(li=(0,u.Z)(function*(it,Ie){try{const kt=(yield Rn()).transaction(Pr,"readwrite");return yield kt.objectStore(Pr).put(Ie,Jn(it)),kt.done}catch(Je){if(Je instanceof oe.ZR)G.warn(Je.message);else{const kt=kn.create("idb-set",{originalErrorMessage:Je?.message});G.warn(kt.message)}}})).apply(this,arguments)}function Jn(it){return`${it.name}!${it.options.appId}`}class rl{constructor(Ie){this.container=Ie,this._heartbeatsCache=null;const Je=this.container.getProvider("app").getImmediate();this._storage=new Wt(Je),this._heartbeatsCachePromise=this._storage.read().then(kt=>(this._heartbeatsCache=kt,kt))}triggerHeartbeat(){var Ie=this;return(0,u.Z)(function*(){const kt=Ie.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),It=mn();if(null===Ie._heartbeatsCache&&(Ie._heartbeatsCache=yield Ie._heartbeatsCachePromise),Ie._heartbeatsCache.lastSentHeartbeatDate!==It&&!Ie._heartbeatsCache.heartbeats.some(fn=>fn.date===It))return Ie._heartbeatsCache.heartbeats.push({date:It,agent:kt}),Ie._heartbeatsCache.heartbeats=Ie._heartbeatsCache.heartbeats.filter(fn=>{const Hn=new Date(fn.date).valueOf();return Date.now()-Hn<=2592e6}),Ie._storage.overwrite(Ie._heartbeatsCache)})()}getHeartbeatsHeader(){var Ie=this;return(0,u.Z)(function*(){if(null===Ie._heartbeatsCache&&(yield Ie._heartbeatsCachePromise),null===Ie._heartbeatsCache||0===Ie._heartbeatsCache.heartbeats.length)return"";const Je=mn(),{heartbeatsToSend:kt,unsentEntries:It}=function Bi(it,Ie=1024){const Je=[];let kt=it.slice();for(const It of it){const fn=Je.find(Hn=>Hn.agent===It.agent);if(fn){if(fn.dates.push(It.date),po(Je)>Ie){fn.dates.pop();break}}else if(Je.push({agent:It.agent,dates:[It.date]}),po(Je)>Ie){Je.pop();break}kt=kt.slice(1)}return{heartbeatsToSend:Je,unsentEntries:kt}}(Ie._heartbeatsCache.heartbeats),fn=(0,oe.L)(JSON.stringify({version:2,heartbeats:kt}));return Ie._heartbeatsCache.lastSentHeartbeatDate=Je,It.length>0?(Ie._heartbeatsCache.heartbeats=It,yield Ie._storage.overwrite(Ie._heartbeatsCache)):(Ie._heartbeatsCache.heartbeats=[],Ie._storage.overwrite(Ie._heartbeatsCache)),fn})()}}function mn(){return(new Date).toISOString().substring(0,10)}class Wt{constructor(Ie){this.app=Ie,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ie=this;return(0,u.Z)(function*(){return(yield Ie._canUseIndexedDBPromise)&&(yield function gt(it){return xt.apply(this,arguments)}(Ie.app))||{heartbeats:[]}})()}overwrite(Ie){var Je=this;return(0,u.Z)(function*(){var kt;if(yield Je._canUseIndexedDBPromise){const fn=yield Je.read();return Si(Je.app,{lastSentHeartbeatDate:null!==(kt=Ie.lastSentHeartbeatDate)&&void 0!==kt?kt:fn.lastSentHeartbeatDate,heartbeats:Ie.heartbeats})}})()}add(Ie){var Je=this;return(0,u.Z)(function*(){var kt;if(yield Je._canUseIndexedDBPromise){const fn=yield Je.read();return Si(Je.app,{lastSentHeartbeatDate:null!==(kt=Ie.lastSentHeartbeatDate)&&void 0!==kt?kt:fn.lastSentHeartbeatDate,heartbeats:[...fn.heartbeats,...Ie.heartbeats]})}})()}}function po(it){return(0,oe.L)(JSON.stringify({version:2,heartbeats:it})).length}!function an(it){Yt(new te.wA("platform-logger",Ie=>new re(Ie),"PRIVATE")),Yt(new te.wA("heartbeat",Ie=>new rl(Ie),"PRIVATE")),pt(fe,"0.9.8",it),pt(fe,"0.9.8","esm2017"),pt("fire-js","")}("")},4859:(_t,Te,F)=>{F.d(Te,{H0:()=>fe,wA:()=>k,zt:()=>se});var u=F(5861),te=F(2090);class k{constructor(G,z,Q){this.name=G,this.instanceFactory=z,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const oe="[DEFAULT]";class se{constructor(G,z){this.name=G,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const z=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(z)){const Q=new te.BH;if(this.instancesDeferred.set(z,Q),this.isInitialized(z)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:z});He&&Q.resolve(He)}catch{}}return this.instancesDeferred.get(z).promise}getImmediate(G){var z;const Q=this.normalizeInstanceIdentifier(G?.identifier),He=null!==(z=G?.optional)&&void 0!==z&&z;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(De){if(He)return null;throw De}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function ge(he){return"EAGER"===he.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:oe})}catch{}for(const[z,Q]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(z);try{const De=this.getOrInitializeService({instanceIdentifier:He});Q.resolve(De)}catch{}}}}clearInstance(G=oe){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,u.Z)(function*(){const z=Array.from(G.instances.values());yield Promise.all([...z.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...z.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=oe){return this.instances.has(G)}getOptions(G=oe){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:z={}}=G,Q=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:Q,options:z});for(const[De,Ze]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(De)&&Ze.resolve(He);return He}onInit(G,z){var Q;const He=this.normalizeInstanceIdentifier(z),De=null!==(Q=this.onInitCallbacks.get(He))&&void 0!==Q?Q:new Set;De.add(G),this.onInitCallbacks.set(He,De);const Ze=this.instances.get(He);return Ze&&G(Ze,He),()=>{De.delete(G)}}invokeOnInitCallbacks(G,z){const Q=this.onInitCallbacks.get(z);if(Q)for(const He of Q)try{He(G,z)}catch{}}getOrInitializeService({instanceIdentifier:G,options:z={}}){let Q=this.instances.get(G);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(he=G,he===oe?void 0:he),options:z}),this.instances.set(G,Q),this.instancesOptions.set(G,z),this.invokeOnInitCallbacks(Q,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,Q)}catch{}var he;return Q||null}normalizeInstanceIdentifier(G=oe){return this.component?this.component.multipleInstances?G:oe:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class fe{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const z=this.getProvider(G.name);if(z.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);z.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const z=new se(G,this);return this.providers.set(G,z),z}getProviders(){return Array.from(this.providers.values())}}},1877:(_t,Te,F)=>{F.d(Te,{Am:()=>he,Ub:()=>fe,Yd:()=>ge,in:()=>te});const u=[];var te=(()=>{return(G=te||(te={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",te;var G})();const k={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},oe=te.INFO,se={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},re=(G,z,...Q)=>{if(z<G.logLevel)return;const He=(new Date).toISOString(),De=se[z];if(!De)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[De](`[${He}]  ${G.name}:`,...Q)};class ge{constructor(z){this.name=z,this._logLevel=oe,this._logHandler=re,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in te))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?k[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...z),this._logHandler(this,te.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...z),this._logHandler(this,te.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,te.INFO,...z),this._logHandler(this,te.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,te.WARN,...z),this._logHandler(this,te.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...z),this._logHandler(this,te.ERROR,...z)}}function fe(G){u.forEach(z=>{z.setLogLevel(G)})}function he(G,z){for(const Q of u){let He=null;z&&z.level&&(He=k[z.level]),Q.userLogHandler=null===G?null:(De,Ze,...dt)=>{const me=dt.map(Se=>{if(null==Se)return null;if("string"==typeof Se)return Se;if("number"==typeof Se||"boolean"==typeof Se)return Se.toString();if(Se instanceof Error)return Se.message;try{return JSON.stringify(Se)}catch{return null}}).filter(Se=>Se).join(" ");Ze>=(He??De.logLevel)&&G({level:te[Ze].toLowerCase(),message:me,args:dt,type:De.name})}}}},259:(_t,Te,F)=>{F.d(Te,{C6:()=>u.getApps,Mq:()=>u.getApp});var u=F(9681);(0,u.registerVersion)("firebase","9.20.0","app")},9260:(_t,Te,F)=>{F.d(Te,{Z:()=>u.Z});var u=F(3942);u.Z.registerVersion("firebase","9.20.0","app-compat")},6689:(_t,Te,F)=>{F.r(Te);var u=F(5861),te=F(3942),k=F(2090),oe=F(9681),se=F(655),re=F(1877),ge=F(4859);const he={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Q_EMAIL_SIGNIN="EMAIL_SIGNIN",Q_PASSWORD_RESET="PASSWORD_RESET",Q_RECOVER_EMAIL="RECOVER_EMAIL",Q_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",Q_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",Q_VERIFY_EMAIL="VERIFY_EMAIL";const Ze=function He(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},dt=function De(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},me=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),be=new re.Yd("@firebase/auth");function ke(v,...p){be.logLevel<=re.in.ERROR&&be.error(`Auth (${oe.SDK_VERSION}): ${v}`,...p)}function Ce(v,...p){throw de(v,...p)}function we(v,...p){return de(v,...p)}function ze(v,p,g){const E=Object.assign(Object.assign({},dt()),{[p]:g});return new k.LL("auth","Firebase",E).create(p,{appName:v.name})}function Pe(v,p,g){if(!(p instanceof g))throw g.name!==p.constructor.name&&Ce(v,"argument-error"),ze(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function de(v,...p){if("string"!=typeof v){const g=p[0],E=[...p.slice(1)];return E[0]&&(E[0].appName=v.name),v._errorFactory.create(g,...E)}return me.create(v,...p)}function q(v,p,...g){if(!v)throw de(p,...g)}function $e(v){const p="INTERNAL ASSERTION FAILED: "+v;throw ke(p),new Error(p)}function Ge(v,p){v||$e(p)}function St(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function et(){return"http:"===ae()||"https:"===ae()}function ae(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Ae{constructor(p,g){this.shortDelay=p,this.longDelay=g,Ge(g>p,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return function _e(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(et()||(0,k.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Fe(v,p){Ge(v.emulator,"Emulator should always be set here");const{url:g}=v.emulator;return p?`${g}${p.startsWith("/")?p.slice(1):p}`:g}class je{static initialize(p,g,E){this.fetchImpl=p,g&&(this.headersImpl=g),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void $e("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void $e("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void $e("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ot={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},tt=new Ae(3e4,6e4);function bt(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function Ye(v,p,g,E){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,u.Z)(function*(v,p,g,E,A={}){return Tt(v,A,(0,u.Z)(function*(){let N={},H={};E&&("GET"===p?H=E:N={body:JSON.stringify(E)});const J=(0,k.xO)(Object.assign({key:v.config.apiKey},H)).slice(1),xe=yield v._getAdditionalHeaders();return xe["Content-Type"]="application/json",v.languageCode&&(xe["X-Firebase-Locale"]=v.languageCode),je.fetch()(kn(v,v.config.apiHost,g,J),Object.assign({method:p,headers:xe,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function Tt(v,p,g){return on.apply(this,arguments)}function on(){return(on=(0,u.Z)(function*(v,p,g){v._canInitEmulator=!1;const E=Object.assign(Object.assign({},ot),p);try{const A=new oi(v),N=yield Promise.race([g(),A.promise]);A.clearNetworkTimeout();const H=yield N.json();if("needConfirmation"in H)throw Hr(v,"account-exists-with-different-credential",H);if(N.ok&&!("errorMessage"in H))return H;{const J=N.ok?H.errorMessage:H.error.message,[xe,Ve]=J.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===xe)throw Hr(v,"credential-already-in-use",H);if("EMAIL_EXISTS"===xe)throw Hr(v,"email-already-in-use",H);if("USER_DISABLED"===xe)throw Hr(v,"user-disabled",H);const st=E[xe]||xe.toLowerCase().replace(/[_\s]+/g,"-");if(Ve)throw ze(v,st,Ve);Ce(v,st)}}catch(A){if(A instanceof k.ZR)throw A;Ce(v,"network-request-failed",{message:String(A)})}})).apply(this,arguments)}function wn(v,p,g,E){return _n.apply(this,arguments)}function _n(){return(_n=(0,u.Z)(function*(v,p,g,E,A={}){const N=yield Ye(v,p,g,E,A);return"mfaPendingCredential"in N&&Ce(v,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function kn(v,p,g,E){const A=`${p}${g}?${E}`;return v.config.emulator?Fe(v.config,A):`${v.config.apiScheme}://${A}`}class oi{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((g,E)=>{this.timer=setTimeout(()=>E(we(this.auth,"network-request-failed")),tt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Hr(v,p,g){const E={appName:v.name};g.email&&(E.email=g.email),g.phoneNumber&&(E.phoneNumber=g.phoneNumber);const A=we(v,p,E);return A.customData._tokenResponse=g,A}function Rr(){return(Rr=(0,u.Z)(function*(v,p){return Ye(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Es(){return(Es=(0,u.Z)(function*(v,p){return Ye(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function pt(){return(pt=(0,u.Z)(function*(v,p){return Ye(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function ai(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function ss(){return(ss=(0,u.Z)(function*(v,p=!1){const g=(0,k.m9)(v),E=yield g.getIdToken(p),A=hn(E);q(A&&A.exp&&A.auth_time&&A.iat,g.auth,"internal-error");const N="object"==typeof A.firebase?A.firebase:void 0,H=N?.sign_in_provider;return{claims:A,token:E,authTime:ai(Pr(A.auth_time)),issuedAtTime:ai(Pr(A.iat)),expirationTime:ai(Pr(A.exp)),signInProvider:H||null,signInSecondFactor:N?.sign_in_second_factor||null}})).apply(this,arguments)}function Pr(v){return 1e3*Number(v)}function hn(v){const[p,g,E]=v.split(".");if(void 0===p||void 0===g||void 0===E)return ke("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,k.tV)(g);return A?JSON.parse(A):(ke("Failed to decode base64 JWT payload"),null)}catch(A){return ke("Caught error parsing JWT payload as JSON",A?.toString()),null}}function gt(v,p){return xt.apply(this,arguments)}function xt(){return(xt=(0,u.Z)(function*(v,p,g=!1){if(g)return p;try{return yield p}catch(E){throw E instanceof k.ZR&&function Si({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(E)&&v.auth.currentUser===v&&(yield v.auth.signOut()),E}})).apply(this,arguments)}class li{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var g;if(p){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const A=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(p=!1){var g=this;if(!this.isRunning)return;const E=this.getInterval(p);this.timerId=setTimeout((0,u.Z)(function*(){yield g.iteration()}),E)}iteration(){var p=this;return(0,u.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&p.schedule(!0))}p.schedule()})()}}class Jn{constructor(p,g){this.createdAt=p,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=ai(this.lastLoginAt),this.creationTime=ai(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Or(v){return Er.apply(this,arguments)}function Er(){return Er=(0,u.Z)(function*(v){var p;const g=v.auth,E=yield v.getIdToken(),A=yield gt(v,function jn(v,p){return pt.apply(this,arguments)}(g,{idToken:E}));q(A?.users.length,g,"internal-error");const N=A.users[0];v._notifyReloadListener(N);const H=null!==(p=N.providerUserInfo)&&void 0!==p&&p.length?function Wt(v){return v.map(p=>{var{providerId:g}=p,E=(0,se._T)(p,["providerId"]);return{providerId:g,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}(N.providerUserInfo):[],J=function Bi(v,p){return[...v.filter(E=>!p.some(A=>A.providerId===E.providerId)),...p]}(v.providerData,H),st=!!v.isAnonymous&&!(v.email&&N.passwordHash||J?.length),We={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:J,metadata:new Jn(N.createdAt,N.lastLoginAt),isAnonymous:st};Object.assign(v,We)}),Er.apply(this,arguments)}function mn(){return(mn=(0,u.Z)(function*(v){const p=(0,k.m9)(v);yield Or(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function an(){return(an=(0,u.Z)(function*(v,p){const g=yield Tt(v,{},(0,u.Z)(function*(){const E=(0,k.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:A,apiKey:N}=v.config,H=kn(v,A,"/v1/token",`key=${N}`),J=yield v._getAdditionalHeaders();return J["Content-Type"]="application/x-www-form-urlencoded",je.fetch()(H,{method:"POST",headers:J,body:E})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class it{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){q(p.idToken,"internal-error"),q(typeof p.idToken<"u","internal-error"),q(typeof p.refreshToken<"u","internal-error");const g="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function Rn(v){const p=hn(v);return q(p,"internal-error"),q(typeof p.exp<"u","internal-error"),q(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,g)}getToken(p,g=!1){var E=this;return(0,u.Z)(function*(){return q(!E.accessToken||E.refreshToken,p,"user-token-expired"),g||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(p,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,g){var E=this;return(0,u.Z)(function*(){const{accessToken:A,refreshToken:N,expiresIn:H}=yield function po(v,p){return an.apply(this,arguments)}(p,g);E.updateTokensAndExpiration(A,N,Number(H))})()}updateTokensAndExpiration(p,g,E){this.refreshToken=g||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(p,g){const{refreshToken:E,accessToken:A,expirationTime:N}=g,H=new it;return E&&(q("string"==typeof E,"internal-error",{appName:p}),H.refreshToken=E),A&&(q("string"==typeof A,"internal-error",{appName:p}),H.accessToken=A),N&&(q("number"==typeof N,"internal-error",{appName:p}),H.expirationTime=N),H}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new it,this.toJSON())}_performRefresh(){return $e("not implemented")}}function Ie(v,p){q("string"==typeof v||typeof v>"u","internal-error",{appName:p})}class Je{constructor(p){var{uid:g,auth:E,stsTokenManager:A}=p,N=(0,se._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new li(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=E,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new Jn(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(p){var g=this;return(0,u.Z)(function*(){const E=yield gt(g,g.stsTokenManager.getToken(g.auth,p));return q(E,g.auth,"internal-error"),g.accessToken!==E&&(g.accessToken=E,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),E})()}getIdTokenResult(p){return function Qn(v){return ss.apply(this,arguments)}(this,p)}reload(){return function rl(v){return mn.apply(this,arguments)}(this)}_assign(p){this!==p&&(q(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(g=>Object.assign({},g)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const g=new Je(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return g.metadata._copy(this.metadata),g}_onReload(p){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,g=!1){var E=this;return(0,u.Z)(function*(){let A=!1;p.idToken&&p.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(p),A=!0),g&&(yield Or(E)),yield E.auth._persistUserIfCurrent(E),A&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var p=this;return(0,u.Z)(function*(){const g=yield p.getIdToken();return yield gt(p,function Ws(v,p){return Rr.apply(this,arguments)}(p.auth,{idToken:g})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,g){var E,A,N,H,J,xe,Ve,st;const We=null!==(E=g.displayName)&&void 0!==E?E:void 0,Bn=null!==(A=g.email)&&void 0!==A?A:void 0,Pi=null!==(N=g.phoneNumber)&&void 0!==N?N:void 0,Uu=null!==(H=g.photoURL)&&void 0!==H?H:void 0,sf=null!==(J=g.tenantId)&&void 0!==J?J:void 0,af=null!==(xe=g._redirectEventId)&&void 0!==xe?xe:void 0,qn=null!==(Ve=g.createdAt)&&void 0!==Ve?Ve:void 0,sd=null!==(st=g.lastLoginAt)&&void 0!==st?st:void 0,{uid:od,emailVerified:ad,isAnonymous:lf,providerData:ld,stsTokenManager:A_}=g;q(od&&A_,p,"internal-error");const Jv=it.fromJSON(this.name,A_);q("string"==typeof od,p,"internal-error"),Ie(We,p.name),Ie(Bn,p.name),q("boolean"==typeof ad,p,"internal-error"),q("boolean"==typeof lf,p,"internal-error"),Ie(Pi,p.name),Ie(Uu,p.name),Ie(sf,p.name),Ie(af,p.name),Ie(qn,p.name),Ie(sd,p.name);const Cg=new Je({uid:od,auth:p,email:Bn,emailVerified:ad,displayName:We,isAnonymous:lf,photoURL:Uu,phoneNumber:Pi,tenantId:sf,stsTokenManager:Jv,createdAt:qn,lastLoginAt:sd});return ld&&Array.isArray(ld)&&(Cg.providerData=ld.map(ud=>Object.assign({},ud))),af&&(Cg._redirectEventId=af),Cg}static _fromIdTokenResponse(p,g,E=!1){return(0,u.Z)(function*(){const A=new it;A.updateFromServerResponse(g);const N=new Je({uid:g.localId,auth:p,stsTokenManager:A,isAnonymous:E});return yield Or(N),N})()}}const kt=new Map;function It(v){Ge(v instanceof Function,"Expected a class definition");let p=kt.get(v);return p?(Ge(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,kt.set(v,p),p)}const Hn=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(g,E){var A=this;return(0,u.Z)(function*(){A.storage[g]=E})()}_get(g){var E=this;return(0,u.Z)(function*(){const A=E.storage[g];return void 0===A?null:A})()}_remove(g){var E=this;return(0,u.Z)(function*(){delete E.storage[g]})()}_addListener(g,E){}_removeListener(g,E){}}return v.type="NONE",v})();function j(v,p,g){return`firebase:${v}:${p}:${g}`}class B{constructor(p,g,E){this.persistence=p,this.auth=g,this.userKey=E;const{config:A,name:N}=this.auth;this.fullUserKey=j(this.userKey,A.apiKey,N),this.fullPersistenceKey=j("persistence",A.apiKey,N),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,u.Z)(function*(){const g=yield p.persistence._get(p.fullUserKey);return g?Je._fromJSON(p.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var g=this;return(0,u.Z)(function*(){if(g.persistence===p)return;const E=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=p,E?g.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,g,E="authUser"){return(0,u.Z)(function*(){if(!g.length)return new B(It(Hn),p,E);const A=(yield Promise.all(g.map(function(){var Ve=(0,u.Z)(function*(st){if(yield st._isAvailable())return st});return function(st){return Ve.apply(this,arguments)}}()))).filter(Ve=>Ve);let N=A[0]||It(Hn);const H=j(E,p.config.apiKey,p.name);let J=null;for(const Ve of g)try{const st=yield Ve._get(H);if(st){const We=Je._fromJSON(p,st);Ve!==N&&(J=We),N=Ve;break}}catch{}const xe=A.filter(Ve=>Ve._shouldAllowMigration);return N._shouldAllowMigration&&xe.length?(N=xe[0],J&&(yield N._set(H,J.toJSON())),yield Promise.all(g.map(function(){var Ve=(0,u.Z)(function*(st){if(st!==N)try{yield st._remove(H)}catch{}});return function(st){return Ve.apply(this,arguments)}}())),new B(N,p,E)):new B(N,p,E)})()}}function K(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Nt(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(ve(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(ir(p))return"Blackberry";if(Xn(p))return"Webos";if(ne(p))return"Safari";if((p.includes("chrome/")||Le(p))&&!p.includes("edge/"))return"Chrome";if(pn(p))return"Android";{const E=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function ve(v=(0,k.z$)()){return/firefox\//i.test(v)}function ne(v=(0,k.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Le(v=(0,k.z$)()){return/crios\//i.test(v)}function Nt(v=(0,k.z$)()){return/iemobile/i.test(v)}function pn(v=(0,k.z$)()){return/android/i.test(v)}function ir(v=(0,k.z$)()){return/blackberry/i.test(v)}function Xn(v=(0,k.z$)()){return/webos/i.test(v)}function gn(v=(0,k.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function iu(v=(0,k.z$)()){return gn(v)||pn(v)||Xn(v)||ir(v)||/windows phone/i.test(v)||Nt(v)}function su(v,p=[]){let g;switch(v){case"Browser":g=K((0,k.z$)());break;case"Worker":g=`${K((0,k.z$)())}-${v}`;break;default:g=v}const E=p.length?p.join(","):"FirebaseCore-web";return`${g}/JsCore/${oe.SDK_VERSION}/${E}`}function ou(){return(ou=(0,u.Z)(function*(v){return(yield Ye(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ic(v,p){return ta.apply(this,arguments)}function ta(){return(ta=(0,u.Z)(function*(v,p){return Ye(v,"GET","/v2/recaptchaConfig",bt(v,p))})).apply(this,arguments)}function bc(v){return void 0!==v&&void 0!==v.getResponse}function ln(v){return void 0!==v&&void 0!==v.enterprise}class sr{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some(g=>"EMAIL_PASSWORD_PROVIDER"===g.provider&&"OFF"!==g.enforcementState)}}function as(v){return new Promise((p,g)=>{const E=document.createElement("script");E.setAttribute("src",v),E.onload=p,E.onerror=A=>{const N=we("internal-error");N.customData=A,g(N)},E.type="text/javascript",E.charset="UTF-8",function Cr(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(E)})}function kr(v){return`__${v}${Math.floor(1e6*Math.random())}`}class sl{constructor(p){this.type="recaptcha-enterprise",this.auth=Kt(p)}verify(p="verify",g=!1){var E=this;return(0,u.Z)(function*(){function N(){return N=(0,u.Z)(function*(J){if(!g){if(null==J.tenantId&&null!=J._agentRecaptchaConfig)return J._agentRecaptchaConfig.siteKey;if(null!=J.tenantId&&void 0!==J._tenantRecaptchaConfigs[J.tenantId])return J._tenantRecaptchaConfigs[J.tenantId].siteKey}return new Promise(function(){var xe=(0,u.Z)(function*(Ve,st){Ic(J,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(We=>{if(void 0!==We.recaptchaKey){const Bn=new sr(We);return null==J.tenantId?J._agentRecaptchaConfig=Bn:J._tenantRecaptchaConfigs[J.tenantId]=Bn,Ve(Bn.siteKey)}st(new Error("recaptcha Enterprise site key undefined"))}).catch(We=>{st(We)})});return function(Ve,st){return xe.apply(this,arguments)}}())}),N.apply(this,arguments)}function H(J,xe,Ve){const st=window.grecaptcha;ln(st)?st.enterprise.ready(()=>{try{st.enterprise.execute(J,{action:p}).then(We=>{xe(We)}).catch(We=>{Ve(We)})}catch(We){Ve(We)}}):Ve(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((J,xe)=>{(function A(J){return N.apply(this,arguments)})(E.auth).then(Ve=>{if(!g&&ln(window.grecaptcha))H(Ve,J,xe);else{if(typeof window>"u")return void xe(new Error("RecaptchaVerifier is only supported in browser"));as("https://www.google.com/recaptcha/enterprise.js?render="+Ve).then(()=>{H(Ve,J,xe)}).catch(st=>{xe(st)})}}).catch(Ve=>{xe(Ve)})})})()}}function dr(v,p,g){return nt.apply(this,arguments)}function nt(){return(nt=(0,u.Z)(function*(v,p,g,E=!1){const A=new sl(v);let N;try{N=yield A.verify(g)}catch{N=yield A.verify(g,!0)}const H=Object.assign({},p);return Object.assign(H,E?{captchaResp:N}:{captchaResponse:N}),Object.assign(H,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(H,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),H})).apply(this,arguments)}class Vt{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,g){const E=N=>new Promise((H,J)=>{try{H(p(N))}catch(xe){J(xe)}});E.onAbort=g,this.queue.push(E);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(p){var g=this;return(0,u.Z)(function*(){if(g.auth.currentUser===p)return;const E=[];try{for(const A of g.queue)yield A(p),A.onAbort&&E.push(A.onAbort)}catch(A){E.reverse();for(const N of E)try{N()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:A?.message})}})()}}class Fn{constructor(p,g,E,A){this.app=p,this.heartbeatServiceProvider=g,this.appCheckServiceProvider=E,this.config=A,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ks(this),this.idTokenSubscription=new Ks(this),this.beforeStateQueue=new Vt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=me,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=A.sdkClientVersion}_initializeWithPersistence(p,g){var E=this;return g&&(this._popupRedirectResolver=It(g)),this._initializationPromise=this.queue((0,u.Z)(function*(){var A,N;if(!E._deleted&&(E.persistenceManager=yield B.create(E,p),!E._deleted)){if(null!==(A=E._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(g),E.lastNotifiedUid=(null===(N=E.currentUser)||void 0===N?void 0:N.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,u.Z)(function*(){if(p._deleted)return;const g=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||g){if(p.currentUser&&g&&p.currentUser.uid===g.uid)return p._currentUser._assign(g),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(g,!0)}})()}initializeCurrentUser(p){var g=this;return(0,u.Z)(function*(){var E;const A=yield g.assertedPersistence.getCurrentUser();let N=A,H=!1;if(p&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const J=null===(E=g.redirectUser)||void 0===E?void 0:E._redirectEventId,xe=N?._redirectEventId,Ve=yield g.tryRedirectSignIn(p);(!J||J===xe)&&Ve?.user&&(N=Ve.user,H=!0)}if(!N)return g.directlySetCurrentUser(null);if(!N._redirectEventId){if(H)try{yield g.beforeStateQueue.runMiddleware(N)}catch(J){N=A,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(J))}return N?g.reloadAndSetCurrentUserOrClear(N):g.directlySetCurrentUser(null)}return q(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===N._redirectEventId?g.directlySetCurrentUser(N):g.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(p){var g=this;return(0,u.Z)(function*(){let E=null;try{E=yield g._popupRedirectResolver._completeRedirectFn(g,p,!0)}catch{yield g._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(p){var g=this;return(0,u.Z)(function*(){try{yield Or(p)}catch(E){if("auth/network-request-failed"!==E?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function Ee(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,u.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var g=this;return(0,u.Z)(function*(){const E=p?(0,k.m9)(p):null;return E&&q(E.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(E&&E._clone(g))})()}_updateCurrentUser(p,g=!1){var E=this;return(0,u.Z)(function*(){if(!E._deleted)return p&&q(E.tenantId===p.tenantId,E,"tenant-id-mismatch"),g||(yield E.beforeStateQueue.runMiddleware(p)),E.queue((0,u.Z)(function*(){yield E.directlySetCurrentUser(p),E.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,u.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var g=this;return this.queue((0,u.Z)(function*(){yield g.assertedPersistence.setPersistence(It(p))}))}initializeRecaptchaConfig(){var p=this;return(0,u.Z)(function*(){const g=yield Ic(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),E=new sr(g);null==p.tenantId?p._agentRecaptchaConfig=E:p._tenantRecaptchaConfigs[p.tenantId]=E,E.emailPasswordEnabled&&new sl(p).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new k.LL("auth","Firebase",p())}onAuthStateChanged(p,g,E){return this.registerStateListener(this.authStateSubscription,p,g,E)}beforeAuthStateChanged(p,g){return this.beforeStateQueue.pushCallback(p,g)}onIdTokenChanged(p,g,E){return this.registerStateListener(this.idTokenSubscription,p,g,E)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,g){var E=this;return(0,u.Z)(function*(){const A=yield E.getOrInitRedirectPersistenceManager(g);return null===p?A.removeCurrentUser():A.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var g=this;return(0,u.Z)(function*(){if(!g.redirectPersistenceManager){const E=p&&It(p)||g._popupRedirectResolver;q(E,g,"argument-error"),g.redirectPersistenceManager=yield B.create(g,[It(E._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(p){var g=this;return(0,u.Z)(function*(){var E,A;return g._isInitialized&&(yield g.queue((0,u.Z)(function*(){}))),(null===(E=g._currentUser)||void 0===E?void 0:E._redirectEventId)===p?g._currentUser:(null===(A=g.redirectUser)||void 0===A?void 0:A._redirectEventId)===p?g.redirectUser:null})()}_persistUserIfCurrent(p){var g=this;return(0,u.Z)(function*(){if(p===g.currentUser)return g.queue((0,u.Z)(function*(){return g.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(g=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,g,E,A){if(this._deleted)return()=>{};const N="function"==typeof g?g:g.next.bind(g),H=this._isInitialized?Promise.resolve():this._initializationPromise;return q(H,this,"internal-error"),H.then(()=>N(this.currentUser)),"function"==typeof g?p.addObserver(g,E,A):p.addObserver(g)}directlySetCurrentUser(p){var g=this;return(0,u.Z)(function*(){g.currentUser&&g.currentUser!==p&&g._currentUser._stopProactiveRefresh(),p&&g.isProactiveRefreshEnabled&&p._startProactiveRefresh(),g.currentUser=p,p?yield g.assertedPersistence.setCurrentUser(p):yield g.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=su(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,u.Z)(function*(){var g;const E={"X-Client-Version":p.clientVersion};p.app.options.appId&&(E["X-Firebase-gmpid"]=p.app.options.appId);const A=yield null===(g=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();A&&(E["X-Firebase-Client"]=A);const N=yield p._getAppCheckToken();return N&&(E["X-Firebase-AppCheck"]=N),E})()}_getAppCheckToken(){var p=this;return(0,u.Z)(function*(){var g;const E=yield null===(g=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getToken();return E?.error&&function Be(v,...p){be.logLevel<=re.in.WARN&&be.warn(`Auth (${oe.SDK_VERSION}): ${v}`,...p)}(`Error while retrieving App Check token: ${E.error}`),E?.token})()}}function Kt(v){return(0,k.m9)(v)}class Ks{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,k.ne)(g=>this.observer=g)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ol(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function jt(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class ji{constructor(p,g){this.providerId=p,this.signInMethod=g}toJSON(){return $e("not implemented")}_getIdTokenResponse(p){return $e("not implemented")}_linkToIdToken(p,g){return $e("not implemented")}_getReauthenticationResolver(p){return $e("not implemented")}}function au(v,p){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,u.Z)(function*(v,p){return Ye(v,"POST","/v1/accounts:resetPassword",bt(v,p))})).apply(this,arguments)}function Lr(v,p){return na.apply(this,arguments)}function na(){return(na=(0,u.Z)(function*(v,p){return Ye(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Gi(){return(Gi=(0,u.Z)(function*(v,p){return Ye(v,"POST","/v1/accounts:update",bt(v,p))})).apply(this,arguments)}function ra(v,p){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,u.Z)(function*(v,p){return wn(v,"POST","/v1/accounts:signInWithPassword",bt(v,p))})).apply(this,arguments)}function yn(v,p){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,u.Z)(function*(v,p){return Ye(v,"POST","/v1/accounts:sendOobCode",bt(v,p))})).apply(this,arguments)}function lu(){return(lu=(0,u.Z)(function*(v,p){return yn(v,p)})).apply(this,arguments)}function ia(v,p){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,u.Z)(function*(v,p){return yn(v,p)})).apply(this,arguments)}function Gr(v,p){return br.apply(this,arguments)}function br(){return(br=(0,u.Z)(function*(v,p){return yn(v,p)})).apply(this,arguments)}function zr(){return(zr=(0,u.Z)(function*(v,p){return yn(v,p)})).apply(this,arguments)}function al(){return(al=(0,u.Z)(function*(v,p){return wn(v,"POST","/v1/accounts:signInWithEmailLink",bt(v,p))})).apply(this,arguments)}function ul(){return(ul=(0,u.Z)(function*(v,p){return wn(v,"POST","/v1/accounts:signInWithEmailLink",bt(v,p))})).apply(this,arguments)}class er extends ji{constructor(p,g,E,A=null){super("password",E),this._email=p,this._password=g,this._tenantId=A}static _fromEmailAndPassword(p,g){return new er(p,g,"password")}static _fromEmailAndCode(p,g,E=null){return new er(p,g,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(p){var g=this;return(0,u.Z)(function*(){var E;switch(g.signInMethod){case"password":const A={returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=p._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const N=yield dr(p,A,"signInWithPassword");return ra(p,N)}return ra(p,A).catch(function(){var N=(0,u.Z)(function*(H){if("auth/missing-recaptcha-token"===H.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const J=yield dr(p,A,"signInWithPassword");return ra(p,J)}return Promise.reject(H)});return function(H){return N.apply(this,arguments)}}());case"emailLink":return function zi(v,p){return al.apply(this,arguments)}(p,{email:g._email,oobCode:g._password});default:Ce(p,"internal-error")}})()}_linkToIdToken(p,g){var E=this;return(0,u.Z)(function*(){switch(E.signInMethod){case"password":return Lr(p,{idToken:g,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function ll(v,p){return ul.apply(this,arguments)}(p,{idToken:g,email:E._email,oobCode:E._password});default:Ce(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Is(v,p){return uu.apply(this,arguments)}function uu(){return(uu=(0,u.Z)(function*(v,p){return wn(v,"POST","/v1/accounts:signInWithIdp",bt(v,p))})).apply(this,arguments)}class ls extends ji{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const g=new ls(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(g.idToken=p.idToken),p.accessToken&&(g.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(g.nonce=p.nonce),p.pendingToken&&(g.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(g.accessToken=p.oauthToken,g.secret=p.oauthTokenSecret):Ce("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:A}=g,N=(0,se._T)(g,["providerId","signInMethod"]);if(!E||!A)return null;const H=new ls(E,A);return H.idToken=N.idToken||void 0,H.accessToken=N.accessToken||void 0,H.secret=N.secret,H.nonce=N.nonce,H.pendingToken=N.pendingToken||null,H}_getIdTokenResponse(p){return Is(p,this.buildRequest())}_linkToIdToken(p,g){const E=this.buildRequest();return E.idToken=g,Is(p,E)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,Is(p,g)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),p.postBody=(0,k.xO)(g)}return p}}function sh(){return(sh=(0,u.Z)(function*(v,p){return Ye(v,"POST","/v1/accounts:sendVerificationCode",bt(v,p))})).apply(this,arguments)}function Ac(){return(Ac=(0,u.Z)(function*(v,p){return wn(v,"POST","/v1/accounts:signInWithPhoneNumber",bt(v,p))})).apply(this,arguments)}function bs(){return(bs=(0,u.Z)(function*(v,p){const g=yield wn(v,"POST","/v1/accounts:signInWithPhoneNumber",bt(v,p));if(g.temporaryProof)throw Hr(v,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Op={USER_NOT_FOUND:"user-not-found"};function qi(){return(qi=(0,u.Z)(function*(v,p){return wn(v,"POST","/v1/accounts:signInWithPhoneNumber",bt(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),Op)})).apply(this,arguments)}class cl extends ji{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,g){return new cl({verificationId:p,verificationCode:g})}static _fromTokenResponse(p,g){return new cl({phoneNumber:p,temporaryProof:g})}_getIdTokenResponse(p){return function oh(v,p){return Ac.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,g){return function n_(v,p){return bs.apply(this,arguments)}(p,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function mo(v,p){return qi.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:g,verificationId:E,verificationCode:A}=this.params;return p&&g?{temporaryProof:p,phoneNumber:g}:{sessionInfo:E,code:A}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:g,verificationCode:E,phoneNumber:A,temporaryProof:N}=p;return E||g||A||N?new cl({verificationId:g,verificationCode:E,phoneNumber:A,temporaryProof:N}):null}}class _o{constructor(p){var g,E,A,N,H,J;const xe=(0,k.zd)((0,k.pd)(p)),Ve=null!==(g=xe.apiKey)&&void 0!==g?g:null,st=null!==(E=xe.oobCode)&&void 0!==E?E:null,We=function cu(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=xe.mode)&&void 0!==A?A:null);q(Ve&&st&&We,"argument-error"),this.apiKey=Ve,this.operation=We,this.code=st,this.continueUrl=null!==(N=xe.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(H=xe.languageCode)&&void 0!==H?H:null,this.tenantId=null!==(J=xe.tenantId)&&void 0!==J?J:null}static parseLink(p){const g=function kp(v){const p=(0,k.zd)((0,k.pd)(v)).link,g=p?(0,k.zd)((0,k.pd)(p)).deep_link_id:null,E=(0,k.zd)((0,k.pd)(v)).deep_link_id;return(E?(0,k.zd)((0,k.pd)(E)).link:null)||E||g||p||v}(p);try{return new _o(g)}catch{return null}}}let du=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(g,E){return er._fromEmailAndPassword(g,E)}static credentialWithLink(g,E){const A=_o.parseLink(E);return q(A,"argument-error"),er._fromEmailAndCode(g,A.code,A.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class yo{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class sa extends yo{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Zi extends sa{static credentialFromJSON(p){const g="string"==typeof p?JSON.parse(p):p;return q("providerId"in g&&"signInMethod"in g,"argument-error"),ls._fromParams(g)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return q(p.idToken||p.accessToken,"argument-error"),ls._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Zi.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Zi.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:g,oauthAccessToken:E,oauthTokenSecret:A,pendingToken:N,nonce:H,providerId:J}=p;if(!E&&!A&&!g&&!N||!J)return null;try{return new Zi(J)._credential({idToken:g,accessToken:E,nonce:H,pendingToken:N})}catch{return null}}}let vo=(()=>{class v extends sa{constructor(){super("facebook.com")}static credential(g){return ls._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),dl=(()=>{class v extends sa{constructor(){super("google.com"),this.addScope("profile")}static credential(g,E){return ls._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:E})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:E,oauthAccessToken:A}=g;if(!E&&!A)return null;try{return v.credential(E,A)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),hl=(()=>{class v extends sa{constructor(){super("github.com")}static credential(g){return ls._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Ts extends ji{constructor(p,g){super(p,p),this.pendingToken=g}_getIdTokenResponse(p){return Is(p,this.buildRequest())}_linkToIdToken(p,g){const E=this.buildRequest();return E.idToken=g,Is(p,E)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,Is(p,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:A,pendingToken:N}=g;return E&&A&&N&&E===A?new Ts(E,N):null}static _create(p,g){return new Ts(p,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class oa extends yo{constructor(p){q(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return oa.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return oa.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const g=Ts.fromJSON(p);return q(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:g,providerId:E}=p;if(!g||!E)return null;try{return Ts._create(E,g)}catch{return null}}}let lh=(()=>{class v extends sa{constructor(){super("twitter.com")}static credential(g,E){return ls._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:E})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:E,oauthTokenSecret:A}=g;if(!E||!A)return null;try{return v.credential(E,A)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function wo(v,p){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,u.Z)(function*(v,p){return wn(v,"POST","/v1/accounts:signUp",bt(v,p))})).apply(this,arguments)}class Ln{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,g,E,A=!1){return(0,u.Z)(function*(){const N=yield Je._fromIdTokenResponse(p,E,A),H=or(E);return new Ln({user:N,providerId:H,_tokenResponse:E,operationType:g})})()}static _forOperation(p,g,E){return(0,u.Z)(function*(){yield p._updateTokensIfNecessary(E,!0);const A=or(E);return new Ln({user:p,providerId:A,_tokenResponse:E,operationType:g})})()}}function or(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Gn(){return(Gn=(0,u.Z)(function*(v){var p;const g=Kt(v);if(yield g._initializationPromise,null!==(p=g.currentUser)&&void 0!==p&&p.isAnonymous)return new Ln({user:g.currentUser,providerId:null,operationType:"signIn"});const E=yield wo(g,{returnSecureToken:!0}),A=yield Ln._fromIdTokenResponse(g,"signIn",E,!0);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class Co extends k.ZR{constructor(p,g,E,A){var N;super(g.code,g.message),this.operationType=E,this.user=A,Object.setPrototypeOf(this,Co.prototype),this.customData={appName:p.name,tenantId:null!==(N=p.tenantId)&&void 0!==N?N:void 0,_serverResponse:g.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(p,g,E,A){return new Co(p,g,E,A)}}function Io(v,p,g,E){return("reauthenticate"===p?g._getReauthenticationResolver(v):g._getIdTokenResponse(v)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?Co._fromErrorAndOperation(v,N,p,E):N})}function hr(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function aa(){return aa=(0,u.Z)(function*(v,p){const g=(0,k.m9)(v);yield fl(!0,g,p);const{providerUserInfo:E}=yield function ws(v,p){return Es.apply(this,arguments)}(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[p]}),A=hr(E||[]);return g.providerData=g.providerData.filter(N=>A.has(N.providerId)),A.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g}),aa.apply(this,arguments)}function Ds(v,p){return fr.apply(this,arguments)}function fr(){return(fr=(0,u.Z)(function*(v,p,g=!1){const E=yield gt(v,p._linkToIdToken(v.auth,yield v.getIdToken()),g);return Ln._forOperation(v,"link",E)})).apply(this,arguments)}function fl(v,p,g){return la.apply(this,arguments)}function la(){return(la=(0,u.Z)(function*(v,p,g){yield Or(p);const A=!1===v?"provider-already-linked":"no-such-provider";q(hr(p.providerData).has(g)===v,p.auth,A)})).apply(this,arguments)}function ch(v,p){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,u.Z)(function*(v,p,g=!1){const{auth:E}=v,A="reauthenticate";try{const N=yield gt(v,Io(E,A,p,v),g);q(N.idToken,E,"internal-error");const H=hn(N.idToken);q(H,E,"internal-error");const{sub:J}=H;return q(v.uid===J,E,"user-mismatch"),Ln._forOperation(v,A,N)}catch(N){throw"auth/user-not-found"===N?.code&&Ce(E,"user-mismatch"),N}})).apply(this,arguments)}function fu(v,p){return bo.apply(this,arguments)}function bo(){return(bo=(0,u.Z)(function*(v,p,g=!1){const E="signIn",A=yield Io(v,E,p),N=yield Ln._fromIdTokenResponse(v,E,A);return g||(yield v._updateCurrentUser(N.user)),N})).apply(this,arguments)}function Rt(v,p){return ua.apply(this,arguments)}function ua(){return(ua=(0,u.Z)(function*(v,p){return fu(Kt(v),p)})).apply(this,arguments)}function Lp(v,p){return pl.apply(this,arguments)}function pl(){return(pl=(0,u.Z)(function*(v,p){const g=(0,k.m9)(v);return yield fl(!1,g,p.providerId),Ds(g,p)})).apply(this,arguments)}function dh(v,p){return gl.apply(this,arguments)}function gl(){return(gl=(0,u.Z)(function*(v,p){return ch((0,k.m9)(v),p)})).apply(this,arguments)}function xc(){return(xc=(0,u.Z)(function*(v,p){return wn(v,"POST","/v1/accounts:signInWithCustomToken",bt(v,p))})).apply(this,arguments)}function pe(){return pe=(0,u.Z)(function*(v,p){const g=Kt(v),E=yield function hh(v,p){return xc.apply(this,arguments)}(g,{token:p,returnSecureToken:!0}),A=yield Ln._fromIdTokenResponse(g,"signIn",E);return yield g._updateCurrentUser(A.user),A}),pe.apply(this,arguments)}class zt{constructor(p,g){this.factorId=p,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(p,g){return"phoneInfo"in g?Nc._fromServerResponse(p,g):"totpInfo"in g?pu._fromServerResponse(p,g):Ce(p,"internal-error")}}class Nc extends zt{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,g){return new Nc(g)}}class pu extends zt{constructor(p){super("totp",p)}static _fromServerResponse(p,g){return new pu(g)}}function zn(v,p,g){var E;q((null===(E=g.url)||void 0===E?void 0:E.length)>0,v,"invalid-continue-uri"),q(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=g.url,p.dynamicLinkDomain=g.dynamicLinkDomain,p.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(q(g.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=g.iOS.bundleId),g.android&&(q(g.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=g.android.installApp,p.androidMinimumVersionCode=g.android.minimumVersion,p.androidPackageName=g.android.packageName)}function ca(){return ca=(0,u.Z)(function*(v,p,g){var E;const A=Kt(v),N={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=A._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const H=yield dr(A,N,"getOobCode",!0);g&&zn(A,H,g),yield ia(A,H)}else g&&zn(A,N,g),yield ia(A,N).catch(function(){var H=(0,u.Z)(function*(J){if("auth/missing-recaptcha-token"!==J.code)return Promise.reject(J);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const xe=yield dr(A,N,"getOobCode",!0);g&&zn(A,xe,g),yield ia(A,xe)}});return function(J){return H.apply(this,arguments)}}())}),ca.apply(this,arguments)}function da(){return(da=(0,u.Z)(function*(v,p,g){yield au((0,k.m9)(v),{oobCode:p,newPassword:g})})).apply(this,arguments)}function gu(){return gu=(0,u.Z)(function*(v,p){yield function go(v,p){return Gi.apply(this,arguments)}((0,k.m9)(v),{oobCode:p})}),gu.apply(this,arguments)}function ph(v,p){return ha.apply(this,arguments)}function ha(){return(ha=(0,u.Z)(function*(v,p){const g=(0,k.m9)(v),E=yield au(g,{oobCode:p}),A=E.requestType;switch(q(A,g,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":q(E.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":q(E.mfaInfo,g,"internal-error");default:q(E.email,g,"internal-error")}let N=null;return E.mfaInfo&&(N=zt._fromServerResponse(Kt(g),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:N},operation:A}})).apply(this,arguments)}function qr(){return(qr=(0,u.Z)(function*(v,p){const{data:g}=yield ph((0,k.m9)(v),p);return g.email})).apply(this,arguments)}function Ss(){return Ss=(0,u.Z)(function*(v,p,g){var E;const A=Kt(v),N={returnSecureToken:!0,email:p,password:g,clientType:"CLIENT_TYPE_WEB"};let H;if(null!==(E=A._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const Ve=yield dr(A,N,"signUpPassword");H=wo(A,Ve)}else H=wo(A,N).catch(function(){var Ve=(0,u.Z)(function*(st){if("auth/missing-recaptcha-token"===st.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const We=yield dr(A,N,"signUpPassword");return wo(A,We)}return Promise.reject(st)});return function(st){return Ve.apply(this,arguments)}}());const J=yield H.catch(Ve=>Promise.reject(Ve)),xe=yield Ln._fromIdTokenResponse(A,"signIn",J);return yield A._updateCurrentUser(xe.user),xe}),Ss.apply(this,arguments)}function To(){return To=(0,u.Z)(function*(v,p,g){var E;const A=Kt(v),N={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};function H(J,xe){q(xe.handleCodeInApp,A,"argument-error"),xe&&zn(A,J,xe)}if(null!==(E=A._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const J=yield dr(A,N,"getOobCode",!0);H(J,g),yield Gr(A,J)}else H(N,g),yield Gr(A,N).catch(function(){var J=(0,u.Z)(function*(xe){if("auth/missing-recaptcha-token"!==xe.code)return Promise.reject(xe);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ve=yield dr(A,N,"getOobCode",!0);H(Ve,g),yield Gr(A,Ve)}});return function(xe){return J.apply(this,arguments)}}())}),To.apply(this,arguments)}function ml(){return(ml=(0,u.Z)(function*(v,p,g){const E=(0,k.m9)(v),A=du.credentialWithLink(p,g||St());return q(A._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Rt(E,A)})).apply(this,arguments)}function Pc(){return(Pc=(0,u.Z)(function*(v,p){return Ye(v,"POST","/v1/accounts:createAuthUri",bt(v,p))})).apply(this,arguments)}function _u(){return _u=(0,u.Z)(function*(v,p){const E={identifier:p,continueUri:et()?St():"http://localhost"},{signinMethods:A}=yield function mu(v,p){return Pc.apply(this,arguments)}((0,k.m9)(v),E);return A||[]}),_u.apply(this,arguments)}function pa(){return pa=(0,u.Z)(function*(v,p){const g=(0,k.m9)(v),A={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&zn(g.auth,A,p);const{email:N}=yield function Sc(v,p){return lu.apply(this,arguments)}(g.auth,A);N!==v.email&&(yield v.reload())}),pa.apply(this,arguments)}function mh(){return mh=(0,u.Z)(function*(v,p,g){const E=(0,k.m9)(v),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};g&&zn(E.auth,N,g);const{email:H}=yield function t_(v,p){return zr.apply(this,arguments)}(E.auth,N);H!==v.email&&(yield v.reload())}),mh.apply(this,arguments)}function _l(){return(_l=(0,u.Z)(function*(v,p){return Ye(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function _h(){return _h=(0,u.Z)(function*(v,{displayName:p,photoURL:g}){if(void 0===p&&void 0===g)return;const E=(0,k.m9)(v),N={idToken:yield E.getIdToken(),displayName:p,photoUrl:g,returnSecureToken:!0},H=yield gt(E,function r_(v,p){return _l.apply(this,arguments)}(E.auth,N));E.displayName=H.displayName||null,E.photoURL=H.photoUrl||null;const J=E.providerData.find(({providerId:xe})=>"password"===xe);J&&(J.displayName=E.displayName,J.photoURL=E.photoURL),yield E._updateTokensIfNecessary(H)}),_h.apply(this,arguments)}function Qs(v,p,g){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,u.Z)(function*(v,p,g){const{auth:E}=v,N={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(N.email=p),g&&(N.password=g);const H=yield gt(v,Lr(E,N));yield v._updateTokensIfNecessary(H,!0)})).apply(this,arguments)}class Do{constructor(p,g,E={}){this.isNewUser=p,this.providerId=g,this.profile=E}}class pr extends Do{constructor(p,g,E,A){super(p,g,E),this.username=A}}class i_ extends Do{constructor(p,g){super(p,"facebook.com",g)}}class vi extends pr{constructor(p,g){super(p,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class s_ extends Do{constructor(p,g){super(p,"google.com",g)}}class yu extends pr{constructor(p,g,E){super(p,"twitter.com",g,E)}}function Fc(v){const{user:p,_tokenResponse:g}=v;return p.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Gp(v){var p,g;if(!v)return null;const{providerId:E}=v,A=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},N=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!E&&v?.idToken){const H=null===(g=null===(p=hn(v.idToken))||void 0===p?void 0:p.firebase)||void 0===g?void 0:g.sign_in_provider;if(H)return new Do(N,"anonymous"!==H&&"custom"!==H?H:null)}if(!E)return null;switch(E){case"facebook.com":return new i_(N,A);case"github.com":return new vi(N,A);case"google.com":return new s_(N,A);case"twitter.com":return new yu(N,A,v.screenName||null);case"custom":case"anonymous":return new Do(N,null);default:return new Do(N,E,A)}}(g)}class Ao{constructor(p,g,E){this.type=p,this.credential=g,this.auth=E}static _fromIdtoken(p,g){return new Ao("enroll",p,g)}static _fromMfaPendingCredential(p){return new Ao("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var g,E;if(p?.multiFactorSession){if(null!==(g=p.multiFactorSession)&&void 0!==g&&g.pendingCredential)return Ao._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(E=p.multiFactorSession)&&void 0!==E&&E.idToken)return Ao._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Lc{constructor(p,g,E){this.session=p,this.hints=g,this.signInResolver=E}static _fromError(p,g){const E=Kt(p),A=g.customData._serverResponse,N=(A.mfaInfo||[]).map(J=>zt._fromServerResponse(E,J));q(A.mfaPendingCredential,E,"internal-error");const H=Ao._fromMfaPendingCredential(A.mfaPendingCredential);return new Lc(H,N,function(){var J=(0,u.Z)(function*(xe){const Ve=yield xe._process(E,H);delete A.mfaInfo,delete A.mfaPendingCredential;const st=Object.assign(Object.assign({},A),{idToken:Ve.idToken,refreshToken:Ve.refreshToken});switch(g.operationType){case"signIn":const We=yield Ln._fromIdTokenResponse(E,g.operationType,st);return yield E._updateCurrentUser(We.user),We;case"reauthenticate":return q(g.user,E,"internal-error"),Ln._forOperation(g.user,g.operationType,st);default:Ce(E,"internal-error")}});return function(xe){return J.apply(this,arguments)}}())}resolveSignIn(p){var g=this;return(0,u.Z)(function*(){return g.signInResolver(p)})()}}class Mo{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(E=>zt._fromServerResponse(p.auth,E)))})}static _fromUser(p){return new Mo(p)}getSession(){var p=this;return(0,u.Z)(function*(){return Ao._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,g){var E=this;return(0,u.Z)(function*(){const A=p,N=yield E.getSession(),H=yield gt(E.user,A._process(E.user.auth,N,g));return yield E.user._updateTokensIfNecessary(H),E.user.reload()})()}unenroll(p){var g=this;return(0,u.Z)(function*(){const E="string"==typeof p?p:p.uid,A=yield g.user.getIdToken();try{const N=yield gt(g.user,function Ms(v,p){return Ye(v,"POST","/v2/accounts/mfaEnrollment:withdraw",bt(v,p))}(g.user.auth,{idToken:A,mfaEnrollmentId:E}));g.enrolledFactors=g.enrolledFactors.filter(({uid:H})=>H!==E),yield g.user._updateTokensIfNecessary(N),yield g.user.reload()}catch(N){throw N}})()}}const xo=new WeakMap,Iu="__sak";class wl{constructor(p,g){this.storageRetriever=p,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Iu,"1"),this.storage.removeItem(Iu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,g){return this.storage.setItem(p,JSON.stringify(g)),Promise.resolve()}_get(p){const g=this.storage.getItem(p);return Promise.resolve(g?JSON.parse(g):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Js=(()=>{class v extends wl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,E)=>this.onStorageEvent(g,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function El(){const v=(0,k.z$)();return ne(v)||gn(v)}()&&function e_(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=iu(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const E of Object.keys(this.listeners)){const A=this.storage.getItem(E),N=this.localCache[E];A!==N&&g(E,N,A)}}onStorageEvent(g,E=!1){if(!g.key)return void this.forAllChangedKeys((J,xe,Ve)=>{this.notifyListeners(J,Ve)});const A=g.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const J=this.storage.getItem(A);if(g.newValue!==J)null!==g.newValue?this.storage.setItem(A,g.newValue):this.storage.removeItem(A);else if(this.localCache[A]===g.newValue&&!E)return}const N=()=>{const J=this.storage.getItem(A);!E&&this.localCache[A]===J||this.notifyListeners(A,J)},H=this.storage.getItem(A);!function $i(){return(0,k.w1)()&&10===document.documentMode}()||H===g.newValue||g.newValue===g.oldValue?N():setTimeout(N,10)}notifyListeners(g,E){this.localCache[g]=E;const A=this.listeners[g];if(A)for(const N of Array.from(A))N(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,E,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:E,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,E){var A=()=>super._set,N=this;return(0,u.Z)(function*(){yield A().call(N,g,E),N.localCache[g]=JSON.stringify(E)})()}_get(g){var E=()=>super._get,A=this;return(0,u.Z)(function*(){const N=yield E().call(A,g);return A.localCache[g]=JSON.stringify(N),N})()}_remove(g){var E=()=>super._remove,A=this;return(0,u.Z)(function*(){yield E().call(A,g),delete A.localCache[g]})()}}return v.type="LOCAL",v})(),Vn=(()=>{class v extends wl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,E){}_removeListener(g,E){}}return v.type="SESSION",v})();let ma=(()=>{class v{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const E=this.receivers.find(N=>N.isListeningto(g));if(E)return E;const A=new v(g);return this.receivers.push(A),A}isListeningto(g){return this.eventTarget===g}handleEvent(g){var E=this;return(0,u.Z)(function*(){const A=g,{eventId:N,eventType:H,data:J}=A.data,xe=E.handlersMap[H];if(!xe?.size)return;A.ports[0].postMessage({status:"ack",eventId:N,eventType:H});const Ve=Array.from(xe).map(function(){var We=(0,u.Z)(function*(Bn){return Bn(A.origin,J)});return function(Bn){return We.apply(this,arguments)}}()),st=yield function Uc(v){return Promise.all(v.map(function(){var p=(0,u.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(E){return{fulfilled:!1,reason:E}}});return function(g){return p.apply(this,arguments)}}()))}(Ve);A.ports[0].postMessage({status:"done",eventId:N,eventType:H,response:st})})()}_subscribe(g,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(E)}_unsubscribe(g,E){this.handlersMap[g]&&E&&this.handlersMap[g].delete(E),(!E||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Xs(v="",p=10){let g="";for(let E=0;E<p;E++)g+=Math.floor(10*Math.random());return v+g}class Il{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,g,E=50){var A=this;return(0,u.Z)(function*(){const N=typeof MessageChannel<"u"?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let H,J;return new Promise((xe,Ve)=>{const st=Xs("",20);N.port1.start();const We=setTimeout(()=>{Ve(new Error("unsupported_event"))},E);J={messageChannel:N,onMessage(Bn){const Pi=Bn;if(Pi.data.eventId===st)switch(Pi.data.status){case"ack":clearTimeout(We),H=setTimeout(()=>{Ve(new Error("timeout"))},3e3);break;case"done":clearTimeout(H),xe(Pi.data.response);break;default:clearTimeout(We),clearTimeout(H),Ve(new Error("invalid_response"))}}},A.handlers.add(J),N.port1.addEventListener("message",J.onMessage),A.target.postMessage({eventType:p,eventId:st,data:g},[N.port2])}).finally(()=>{J&&A.removeMessageHandler(J)})})()}}function Sn(){return window}function bl(){return typeof Sn().WorkerGlobalScope<"u"&&"function"==typeof Sn().importScripts}function No(){return(No=(0,u.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Th="firebaseLocalStorageDb",di=1,us="firebaseLocalStorage",Dh="fbase_key";class cs{constructor(p){this.request=p}toPromise(){return new Promise((p,g)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Tl(v,p){return v.transaction([us],p?"readwrite":"readonly").objectStore(us)}function Yi(){const v=indexedDB.open(Th,di);return new Promise((p,g)=>{v.addEventListener("error",()=>{g(v.error)}),v.addEventListener("upgradeneeded",()=>{const E=v.result;try{E.createObjectStore(us,{keyPath:Dh})}catch(A){g(A)}}),v.addEventListener("success",(0,u.Z)(function*(){const E=v.result;E.objectStoreNames.contains(us)?p(E):(E.close(),yield function Ro(){const v=indexedDB.deleteDatabase(Th);return new cs(v).toPromise()}(),p(yield Yi()))}))})}function Dl(v,p,g){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,u.Z)(function*(v,p,g){const E=Tl(v,!0).put({[Dh]:p,value:g});return new cs(E).toPromise()})).apply(this,arguments)}function Al(){return(Al=(0,u.Z)(function*(v,p){const g=Tl(v,!1).get(p),E=yield new cs(g).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Tu(v,p){const g=Tl(v,!0).delete(p);return new cs(g).toPromise()}const va=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,u.Z)(function*(){return g.db||(g.db=yield Yi()),g.db})()}_withRetries(g){var E=this;return(0,u.Z)(function*(){let A=0;for(;;)try{const N=yield E._openDb();return yield g(N)}catch(N){if(A++>3)throw N;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,u.Z)(function*(){return bl()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,u.Z)(function*(){g.receiver=ma._getInstance(function bu(){return bl()?self:null}()),g.receiver._subscribe("keyChanged",function(){var E=(0,u.Z)(function*(A,N){return{keyProcessed:(yield g._poll()).includes(N.key)}});return function(A,N){return E.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var E=(0,u.Z)(function*(A,N){return["keyChanged"]});return function(A,N){return E.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,u.Z)(function*(){var E,A;if(g.activeServiceWorker=yield function Ih(){return No.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Il(g.activeServiceWorker);const N=yield g.sender._send("ping",{},800);N&&null!==(E=N[0])&&void 0!==E&&E.fulfilled&&null!==(A=N[0])&&void 0!==A&&A.value.includes("keyChanged")&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var E=this;return(0,u.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function bh(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:g},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Yi();return yield Dl(g,Iu,"1"),yield Tu(g,Iu),!0}catch{}return!1})()}_withPendingWrite(g){var E=this;return(0,u.Z)(function*(){E.pendingWrites++;try{yield g()}finally{E.pendingWrites--}})()}_set(g,E){var A=this;return(0,u.Z)(function*(){return A._withPendingWrite((0,u.Z)(function*(){return yield A._withRetries(N=>Dl(N,g,E)),A.localCache[g]=E,A.notifyServiceWorker(g)}))})()}_get(g){var E=this;return(0,u.Z)(function*(){const A=yield E._withRetries(N=>function Zp(v,p){return Al.apply(this,arguments)}(N,g));return E.localCache[g]=A,A})()}_remove(g){var E=this;return(0,u.Z)(function*(){return E._withPendingWrite((0,u.Z)(function*(){return yield E._withRetries(A=>Tu(A,g)),delete E.localCache[g],E.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,u.Z)(function*(){const E=yield g._withRetries(H=>{const J=Tl(H,!1).getAll();return new cs(J).toPromise()});if(!E)return[];if(0!==g.pendingWrites)return[];const A=[],N=new Set;for(const{fbase_key:H,value:J}of E)N.add(H),JSON.stringify(g.localCache[H])!==JSON.stringify(J)&&(g.notifyListeners(H,J),A.push(H));for(const H of Object.keys(g.localCache))g.localCache[H]&&!N.has(H)&&(g.notifyListeners(H,null),A.push(H));return A})()}notifyListeners(g,E){this.localCache[g]=E;const A=this.listeners[g];if(A)for(const N of Array.from(A))N(E)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})(),Sh=1e12;class Yp{constructor(p){this.auth=p,this.counter=Sh,this._widgets=new Map}render(p,g){const E=this.counter;return this._widgets.set(E,new Bc(p,this.auth.name,g||{})),this.counter++,E}reset(p){var g;const E=p||Sh;null===(g=this._widgets.get(E))||void 0===g||g.delete(),this._widgets.delete(E)}getResponse(p){var g;return(null===(g=this._widgets.get(p||Sh))||void 0===g?void 0:g.getResponse())||""}execute(p){var g=this;return(0,u.Z)(function*(){var E;return null===(E=g._widgets.get(p||Sh))||void 0===E||E.execute(),""})()}}class Bc{constructor(p,g,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof p?document.getElementById(p):p;q(A,"argument-error",{appName:g}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Qp(v){const p=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<v;E++)p.push(g.charAt(Math.floor(Math.random()*g.length)));return p.join("")}(50);const{callback:p,"expired-callback":g}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Jp=kr("rcb"),zv=new Ae(3e4,6e4);class xl{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=Sn().grecaptcha)||void 0===p||!p.render)}load(p,g=""){return q(function Zv(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(g),p,"argument-error"),this.shouldResolveImmediately(g)&&bc(Sn().grecaptcha)?Promise.resolve(Sn().grecaptcha):new Promise((E,A)=>{const N=Sn().setTimeout(()=>{A(we(p,"network-request-failed"))},zv.get());Sn()[Jp]=()=>{Sn().clearTimeout(N),delete Sn()[Jp];const J=Sn().grecaptcha;if(!J||!bc(J))return void A(we(p,"internal-error"));const xe=J.render;J.render=(Ve,st)=>{const We=xe(Ve,st);return this.counter++,We},this.hostLanguage=g,E(J)},as(`https://www.google.com/recaptcha/api.js??${(0,k.xO)({onload:Jp,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(N),A(we(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var g;return!(null===(g=Sn().grecaptcha)||void 0===g||!g.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class OC{load(p){return(0,u.Z)(function*(){return new Yp(p)})()}clearedOneInstance(){}}const ar="recaptcha",Ah={theme:"light",type:"image"};class Du{constructor(p,g=Object.assign({},Ah),E){this.parameters=g,this.type=ar,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Kt(E),this.isInvisible="invisible"===this.parameters.size,q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof p?document.getElementById(p):p;q(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new OC:new xl,this.validateStartingState()}verify(){var p=this;return(0,u.Z)(function*(){p.assertNotDestroyed();const g=yield p.render(),E=p.getAssertedRecaptcha();return E.getResponse(g)||new Promise(N=>{const H=J=>{J&&(p.tokenChangeListeners.delete(H),N(J))};p.tokenChangeListeners.add(H),p.isInvisible&&E.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){q(!this.parameters.sitekey,this.auth,"argument-error"),q(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return g=>{if(this.tokenChangeListeners.forEach(E=>E(g)),"function"==typeof p)p(g);else if("string"==typeof p){const E=Sn()[p];"function"==typeof E&&E(g)}}}assertNotDestroyed(){q(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,u.Z)(function*(){if(yield p.init(),!p.widgetId){let g=p.container;if(!p.isInvisible){const E=document.createElement("div");g.appendChild(E),g=E}p.widgetId=p.getAssertedRecaptcha().render(g,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,u.Z)(function*(){q(et()&&!bl(),p.auth,"internal-error"),yield function Xp(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const g=yield function il(v){return ou.apply(this,arguments)}(p.auth);q(g,p.auth,"internal-error"),p.parameters.sitekey=g})()}getAssertedRecaptcha(){return q(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class wi{constructor(p,g){this.verificationId=p,this.onConfirmation=g}confirm(p){const g=cl._fromVerification(this.verificationId,p);return this.onConfirmation(g)}}function Nl(){return(Nl=(0,u.Z)(function*(v,p,g){const E=Kt(v),A=yield wa(E,p,(0,k.m9)(g));return new wi(A,N=>Rt(E,N))})).apply(this,arguments)}function to(){return(to=(0,u.Z)(function*(v,p,g){const E=(0,k.m9)(v);yield fl(!1,E,"phone");const A=yield wa(E.auth,p,(0,k.m9)(g));return new wi(A,N=>Lp(E,N))})).apply(this,arguments)}function Pl(){return(Pl=(0,u.Z)(function*(v,p,g){const E=(0,k.m9)(v),A=yield wa(E.auth,p,(0,k.m9)(g));return new wi(A,N=>dh(E,N))})).apply(this,arguments)}function wa(v,p,g){return xh.apply(this,arguments)}function xh(){return xh=(0,u.Z)(function*(v,p,g){var E;const A=yield g.verify();try{let N;if(q("string"==typeof A,v,"argument-error"),q(g.type===ar,v,"argument-error"),N="string"==typeof p?{phoneNumber:p}:p,"session"in N){const H=N.session;if("phoneNumber"in N)return q("enroll"===H.type,v,"internal-error"),(yield function Vc(v,p){return Ye(v,"POST","/v2/accounts/mfaEnrollment:start",bt(v,p))}(v,{idToken:H.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{q("signin"===H.type,v,"internal-error");const J=(null===(E=N.multiFactorHint)||void 0===E?void 0:E.uid)||N.multiFactorUid;return q(J,v,"missing-multi-factor-info"),(yield function Wp(v,p){return Ye(v,"POST","/v2/accounts/mfaSignIn:start",bt(v,p))}(v,{mfaPendingCredential:H.credential,mfaEnrollmentId:J,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:H}=yield function Pp(v,p){return sh.apply(this,arguments)}(v,{phoneNumber:N.phoneNumber,recaptchaToken:A});return H}}finally{g._reset()}}),xh.apply(this,arguments)}function gr(){return(gr=(0,u.Z)(function*(v,p){yield Ds((0,k.m9)(v),p)})).apply(this,arguments)}let Ji=(()=>{class v{constructor(g){this.providerId=v.PROVIDER_ID,this.auth=Kt(g)}verifyPhoneNumber(g,E){return wa(this.auth,g,(0,k.m9)(E))}static credential(g,E){return cl._fromVerification(g,E)}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:E,temporaryProof:A}=g;return E&&A?cl._fromTokenResponse(E,A):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Wr(v,p){return p?It(p):(q(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Xt extends ji{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Is(p,this._buildIdpRequest())}_linkToIdToken(p,g){return Is(p,this._buildIdpRequest(g))}_getReauthenticationResolver(p){return Is(p,this._buildIdpRequest())}_buildIdpRequest(p){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(g.idToken=p),g}}function no(v){return fu(v.auth,new Xt(v),v.bypassAuthState)}function mt(v){const{auth:p,user:g}=v;return q(g,p,"internal-error"),ch(g,new Xt(v),v.bypassAuthState)}function bn(v){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,u.Z)(function*(v){const{auth:p,user:g}=v;return q(g,p,"internal-error"),Ds(g,new Xt(v),v.bypassAuthState)})).apply(this,arguments)}class Nh{constructor(p,g,E,A,N=!1){this.auth=p,this.resolver=E,this.user=A,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var p=this;return new Promise(function(){var g=(0,u.Z)(function*(E,A){p.pendingPromise={resolve:E,reject:A};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(N){p.reject(N)}});return function(E,A){return g.apply(this,arguments)}}())}onAuthEvent(p){var g=this;return(0,u.Z)(function*(){const{urlResponse:E,sessionId:A,postBody:N,tenantId:H,error:J,type:xe}=p;if(J)return void g.reject(J);const Ve={auth:g.auth,requestUri:E,sessionId:A,tenantId:H||void 0,postBody:N||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(xe)(Ve))}catch(st){g.reject(st)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return no;case"linkViaPopup":case"linkViaRedirect":return bn;case"reauthViaPopup":case"reauthViaRedirect":return mt;default:Ce(this.auth,"internal-error")}}resolve(p){Ge(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Ge(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const xs=new Ae(2e3,1e4);function ro(){return(ro=(0,u.Z)(function*(v,p,g){const E=Kt(v);Pe(v,p,yo);const A=Wr(E,g);return new T(E,"signInViaPopup",p,A).executeNotNull()})).apply(this,arguments)}function Ns(){return(Ns=(0,u.Z)(function*(v,p,g){const E=(0,k.m9)(v);Pe(E.auth,p,yo);const A=Wr(E.auth,g);return new T(E.auth,"reauthViaPopup",p,A,E).executeNotNull()})).apply(this,arguments)}function Ea(){return(Ea=(0,u.Z)(function*(v,p,g){const E=(0,k.m9)(v);Pe(E.auth,p,yo);const A=Wr(E.auth,g);return new T(E.auth,"linkViaPopup",p,A,E).executeNotNull()})).apply(this,arguments)}let T=(()=>{class v extends Nh{constructor(g,E,A,N,H){super(g,E,N,H),this.provider=A,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var g=this;return(0,u.Z)(function*(){const E=yield g.execute();return q(E,g.auth,"internal-error"),E})()}onExecution(){var g=this;return(0,u.Z)(function*(){Ge(1===g.filter.length,"Popup operations only handle one event");const E=Xs();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],E),g.authWindow.associatedEvent=E,g.resolver._originValidation(g.auth).catch(A=>{g.reject(A)}),g.resolver._isIframeWebStorageSupported(g.auth,A=>{A||g.reject(we(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(we(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const g=()=>{var E,A;this.pollId=null!==(A=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(we(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,xs.get())};g()}}return v.currentPopupAction=null,v})();const S="pendingRedirect",x=new Map;class U extends Nh{constructor(p,g,E=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,E),this.eventId=null}execute(){var p=()=>super.execute,g=this;return(0,u.Z)(function*(){let E=x.get(g.auth._key());if(!E){try{const N=(yield function Y(v,p){return ie.apply(this,arguments)}(g.resolver,g.auth))?yield p().call(g):null;E=()=>Promise.resolve(N)}catch(A){E=()=>Promise.reject(A)}x.set(g.auth._key(),E)}return g.bypassAuthState||x.set(g.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(p){var g=()=>super.onAuthEvent,E=this;return(0,u.Z)(function*(){if("signInViaRedirect"===p.type)return g().call(E,p);if("unknown"!==p.type){if(p.eventId){const A=yield E.auth._redirectUserForId(p.eventId);if(A)return E.user=A,g().call(E,p);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function ie(){return(ie=(0,u.Z)(function*(v,p){const g=O(p),E=Ot(v);if(!(yield E._isAvailable()))return!1;const A="true"===(yield E._get(g));return yield E._remove(g),A})).apply(this,arguments)}function Me(v,p){return W.apply(this,arguments)}function W(){return(W=(0,u.Z)(function*(v,p){return Ot(v)._set(O(p),"true")})).apply(this,arguments)}function ht(v,p){x.set(v._key(),p)}function Ot(v){return It(v._redirectPersistence)}function O(v){return j(S,v.config.apiKey,v.name)}function Mi(v,p,g){return function An(v,p,g){return lt.apply(this,arguments)}(v,p,g)}function lt(){return(lt=(0,u.Z)(function*(v,p,g){const E=Kt(v);Pe(v,p,yo),yield E._initializationPromise;const A=Wr(E,g);return yield Me(A,E),A._openRedirect(E,p,"signInViaRedirect")})).apply(this,arguments)}function Ol(v,p,g){return function At(v,p,g){return lr.apply(this,arguments)}(v,p,g)}function lr(){return(lr=(0,u.Z)(function*(v,p,g){const E=(0,k.m9)(v);Pe(E.auth,p,yo),yield E.auth._initializationPromise;const A=Wr(E.auth,g);yield Me(A,E.auth);const N=yield Kr(E);return A._openRedirect(E.auth,p,"reauthViaRedirect",N)})).apply(this,arguments)}function xi(v,p,g){return function Ca(v,p,g){return Rh.apply(this,arguments)}(v,p,g)}function Rh(){return(Rh=(0,u.Z)(function*(v,p,g){const E=(0,k.m9)(v);Pe(E.auth,p,yo),yield E.auth._initializationPromise;const A=Wr(E.auth,g);yield fl(!1,E,p.providerId),yield Me(A,E.auth);const N=yield Kr(E);return A._openRedirect(E.auth,p,"linkViaRedirect",N)})).apply(this,arguments)}function Ph(){return(Ph=(0,u.Z)(function*(v,p){return yield Kt(v)._initializationPromise,eg(v,p,!1)})).apply(this,arguments)}function eg(v,p){return tg.apply(this,arguments)}function tg(){return(tg=(0,u.Z)(function*(v,p,g=!1){const E=Kt(v),A=Wr(E,p),H=yield new U(E,A,g).execute();return H&&!g&&(delete H.user._redirectEventId,yield E._persistUserIfCurrent(H.user),yield E._setRedirectUser(null,p)),H})).apply(this,arguments)}function Kr(v){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,u.Z)(function*(v){const p=Xs(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class ba{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let g=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(p,E)&&(g=!0,this.sendToConsumer(p,E),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function d_(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return c_(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=p,g=!0)),g}sendToConsumer(p,g){var E;if(p.error&&!c_(p)){const A=(null===(E=p.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";g.onError(we(this.auth,A))}else g.onAuthEvent(p)}isEventForConsumer(p,g){const E=null===g.eventId||!!p.eventId&&p.eventId===g.eventId;return g.filter.includes(p.type)&&E}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Oh(p))}saveEventToCache(p){this.cachedEventUids.add(Oh(p)),this.lastProcessedEventTime=Date.now()}}function Oh(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function c_({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===p?.code}function h_(v){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,u.Z)(function*(v,p={}){return Ye(v,"GET","/v1/projects",p)})).apply(this,arguments)}const kC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kh=/^https?/;function kl(){return(kl=(0,u.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield h_(v);for(const g of p)try{if($c(g))return}catch{}Ce(v,"unauthorized-domain")})).apply(this,arguments)}function $c(v){const p=St(),{protocol:g,hostname:E}=new URL(p);if(v.startsWith("chrome-extension://")){const H=new URL(v);return""===H.hostname&&""===E?"chrome-extension:"===g&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===g&&H.hostname===E}if(!kh.test(g))return!1;if(kC.test(v))return E===v;const A=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(E)}const Rs=new Ae(3e4,6e4);function jc(){const v=Sn().___jsl;if(v?.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let g=0;g<v.CP.length;g++)v.CP[g]=null}let Fh=null;const f_=new Ae(5e3,15e3),Lh="__/auth/iframe",Vh="emulator/auth/iframe",Wv={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},p_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Uh(v){const p=v.config;q(p.authDomain,v,"auth-domain-config-required");const g=p.emulator?Fe(p,Vh):`https://${v.config.authDomain}/${Lh}`,E={apiKey:p.apiKey,appName:v.name,v:oe.SDK_VERSION},A=p_.get(v.config.apiHost);A&&(E.eid=A);const N=v._getFrameworks();return N.length&&(E.fw=N.join(",")),`${g}?${(0,k.xO)(E).slice(1)}`}function Hc(){return Hc=(0,u.Z)(function*(v){const p=yield function Su(v){return Fh=Fh||function io(v){return new Promise((p,g)=>{var E,A,N;function H(){jc(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{jc(),g(we(v,"network-request-failed"))},timeout:Rs.get()})}if(null!==(A=null===(E=Sn().gapi)||void 0===E?void 0:E.iframes)&&void 0!==A&&A.Iframe)p(gapi.iframes.getContext());else{if(null===(N=Sn().gapi)||void 0===N||!N.load){const J=kr("iframefcb");return Sn()[J]=()=>{gapi.load?H():g(we(v,"network-request-failed"))},as(`https://apis.google.com/js/api.js?onload=${J}`).catch(xe=>g(xe))}H()}}).catch(p=>{throw Fh=null,p})}(v),Fh}(v),g=Sn().gapi;return q(g,v,"internal-error"),p.open({where:document.body,url:Uh(v),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Wv,dontclear:!0},E=>new Promise(function(){var A=(0,u.Z)(function*(N,H){yield E.restyle({setHideOnLeave:!1});const J=we(v,"network-request-failed"),xe=Sn().setTimeout(()=>{H(J)},f_.get());function Ve(){Sn().clearTimeout(xe),N(E)}E.ping(Ve).then(Ve,()=>{H(J)})});return function(N,H){return A.apply(this,arguments)}}()))}),Hc.apply(this,arguments)}const rg={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ni=500,ig=600,$h="_blank",jh="http://localhost";class Qr{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Au="__/auth/handler",Kv="emulator/auth/handler",m_=encodeURIComponent("fac");function Mu(v,p,g,E,A,N){return xu.apply(this,arguments)}function xu(){return(xu=(0,u.Z)(function*(v,p,g,E,A,N){q(v.config.authDomain,v,"auth-domain-config-required"),q(v.config.apiKey,v,"invalid-api-key");const H={apiKey:v.config.apiKey,appName:v.name,authType:g,redirectUrl:E,v:oe.SDK_VERSION,eventId:A};if(p instanceof yo){p.setDefaultLanguage(v.languageCode),H.providerId=p.providerId||"",(0,k.xb)(p.getCustomParameters())||(H.customParameters=JSON.stringify(p.getCustomParameters()));for(const[st,We]of Object.entries(N||{}))H[st]=We}if(p instanceof sa){const st=p.getScopes().filter(We=>""!==We);st.length>0&&(H.scopes=st.join(","))}v.tenantId&&(H.tid=v.tenantId);const J=H;for(const st of Object.keys(J))void 0===J[st]&&delete J[st];const xe=yield v._getAppCheckToken(),Ve=xe?`#${m_}=${encodeURIComponent(xe)}`:"";return`${function __({config:v}){return v.emulator?Fe(v,Kv):`https://${v.authDomain}/${Au}`}(v)}?${(0,k.xO)(J).slice(1)}${Ve}`})).apply(this,arguments)}const Gc="webStorageSupport",zc=class y_{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Vn,this._completeRedirectFn=eg,this._overrideRedirectResult=ht}_openPopup(p,g,E,A){var N=this;return(0,u.Z)(function*(){var H;Ge(null===(H=N.eventManagers[p._key()])||void 0===H?void 0:H.manager,"_initialize() not called before _openPopup()");const J=yield Mu(p,g,E,St(),A);return function ko(v,p,g,E=Ni,A=ig){const N=Math.max((window.screen.availHeight-A)/2,0).toString(),H=Math.max((window.screen.availWidth-E)/2,0).toString();let J="";const xe=Object.assign(Object.assign({},rg),{width:E.toString(),height:A.toString(),top:N,left:H}),Ve=(0,k.z$)().toLowerCase();g&&(J=Le(Ve)?$h:g),ve(Ve)&&(p=p||jh,xe.scrollbars="yes");const st=Object.entries(xe).reduce((Bn,[Pi,Uu])=>`${Bn}${Pi}=${Uu},`,"");if(function os(v=(0,k.z$)()){var p;return gn(v)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(Ve)&&"_self"!==J)return function g_(v,p){const g=document.createElement("a");g.href=v,g.target=p;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(E)}(p||"",J),new Qr(null);const We=window.open(p||"",J,st);q(We,v,"popup-blocked");try{We.focus()}catch{}return new Qr(We)}(p,J,Xs())})()}_openRedirect(p,g,E,A){var N=this;return(0,u.Z)(function*(){return yield N._originValidation(p),function _a(v){Sn().location.href=v}(yield Mu(p,g,E,St(),A)),new Promise(()=>{})})()}_initialize(p){const g=p._key();if(this.eventManagers[g]){const{manager:A,promise:N}=this.eventManagers[g];return A?Promise.resolve(A):(Ge(N,"If manager is not set, promise should be"),N)}const E=this.initAndGetManager(p);return this.eventManagers[g]={promise:E},E.catch(()=>{delete this.eventManagers[g]}),E}initAndGetManager(p){var g=this;return(0,u.Z)(function*(){const E=yield function Bh(v){return Hc.apply(this,arguments)}(p),A=new ba(p);return E.register("authEvent",N=>(q(N?.authEvent,p,"invalid-auth-event"),{status:A.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[p._key()]={manager:A},g.iframes[p._key()]=E,A})()}_isIframeWebStorageSupported(p,g){this.iframes[p._key()].send(Gc,{type:Gc},A=>{var N;const H=null===(N=A?.[0])||void 0===N?void 0:N[Gc];void 0!==H&&g(!!H),Ce(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const g=p._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function ng(v){return kl.apply(this,arguments)}(p)),this.originValidationPromises[g]}get _shouldInitProactively(){return iu()||ne()||gn()}};class qc{constructor(p){this.factorId=p}_process(p,g,E){switch(g.type){case"enroll":return this._finalizeEnroll(p,g.credential,E);case"signin":return this._finalizeSignIn(p,g.credential);default:return $e("unexpected MultiFactorSessionType")}}}class Fl extends qc{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Fl(p)}_finalizeEnroll(p,g,E){return function Eu(v,p){return Ye(v,"POST","/v2/accounts/mfaEnrollment:finalize",bt(v,p))}(p,{idToken:g,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,g){return function Ml(v,p){return Ye(v,"POST","/v2/accounts/mfaSignIn:finalize",bt(v,p))}(p,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let sg=(()=>{class v{constructor(){}static assertion(g){return Fl._fromCredential(g)}}return v.FACTOR_ID="phone",v})();var Zc="@firebase/auth";class Ta{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var g=this;return(0,u.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const g=this.auth.onIdTokenChanged(E=>{p(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,g),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const g=this.internalListeners.get(p);g&&(this.internalListeners.delete(p),g(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function so(){return window}(0,k.Pz)("authIdTokenMaxAge"),function v_(v){(0,oe._registerComponent)(new ge.wA("auth",(p,{options:g})=>{const E=p.getProvider("app").getImmediate(),A=p.getProvider("heartbeat"),N=p.getProvider("app-check-internal"),{apiKey:H,authDomain:J}=E.options;q(H&&!H.includes(":"),"invalid-api-key",{appName:E.name}),q(!J?.includes(":"),"argument-error",{appName:E.name});const xe={apiKey:H,authDomain:J,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:su(v)},Ve=new Fn(E,A,N,xe);return function Ir(v,p){const g=p?.persistence||[],E=(Array.isArray(g)?g:[g]).map(It);p?.errorMap&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(E,p?.popupRedirectResolver)}(Ve,g),Ve},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,g,E)=>{p.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new ge.wA("auth-internal",p=>{const g=Kt(p.getProvider("auth").getImmediate());return new Ta(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(Zc,"0.23.0",function zh(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,oe.registerVersion)(Zc,"0.23.0","esm2017")}("Browser");const lg=2e3;function Zh(){return Zh=(0,u.Z)(function*(v,p,g){var E;const{BuildInfo:A}=so();Ge(p.sessionId,"AuthEvent did not contain a session ID");const N=yield function Yh(v){return oo.apply(this,arguments)}(p.sessionId),H={};return gn()?H.ibi=A.packageName:pn()?H.apn=A.packageName:Ce(v,"operation-not-supported-in-this-environment"),A.displayName&&(H.appDisplayName=A.displayName),H.sessionId=N,Mu(v,g,p.type,void 0,null!==(E=p.eventId)&&void 0!==E?E:void 0,H)}),Zh.apply(this,arguments)}function Kh(){return(Kh=(0,u.Z)(function*(v){const{BuildInfo:p}=so(),g={};gn()?g.iosBundleId=p.packageName:pn()?g.androidPackageName=p.packageName:Ce(v,"operation-not-supported-in-this-environment"),yield h_(v,g)})).apply(this,arguments)}function Kc(){return(Kc=(0,u.Z)(function*(v,p,g){const{cordova:E}=so();let A=()=>{};try{yield new Promise((N,H)=>{let J=null;function xe(){var We;N();const Bn=null===(We=E.plugins.browsertab)||void 0===We?void 0:We.close;"function"==typeof Bn&&Bn(),"function"==typeof g?.close&&g.close()}function Ve(){J||(J=window.setTimeout(()=>{H(we(v,"redirect-cancelled-by-user"))},lg))}function st(){"visible"===document?.visibilityState&&Ve()}p.addPassiveListener(xe),document.addEventListener("resume",Ve,!1),pn()&&document.addEventListener("visibilitychange",st,!1),A=()=>{p.removePassiveListener(xe),document.removeEventListener("resume",Ve,!1),document.removeEventListener("visibilitychange",st,!1),J&&window.clearTimeout(J)}})}finally{A()}})).apply(this,arguments)}function oo(){return(oo=(0,u.Z)(function*(v){const p=function C_(v){if(Ge(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const p=new ArrayBuffer(v.length),g=new Uint8Array(p);for(let E=0;E<v.length;E++)g[E]=v.charCodeAt(E);return g}(v),g=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(g)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Yc=20;class cg extends ba{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(p)),super.onEvent(p)}initialized(){var p=this;return(0,u.Z)(function*(){yield p.initPromise})()}}function b_(v){return Da.apply(this,arguments)}function Da(){return(Da=(0,u.Z)(function*(v){const p=yield Pu()._get(Ll(v));return p&&(yield Pu()._remove(Ll(v))),p})).apply(this,arguments)}function hg(){const v=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<Yc;g++){const E=Math.floor(Math.random()*p.length);v.push(p.charAt(E))}return v.join("")}function Pu(){return It(Js)}function Ll(v){return j("authEvent",v.config.apiKey,v.name)}function ao(v){if(!v?.includes("?"))return{};const[p,...g]=v.split("?");return(0,k.zd)(g.join("?"))}const Fo=class pg{constructor(){this._redirectPersistence=Vn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=eg,this._overrideRedirectResult=ht}_initialize(p){var g=this;return(0,u.Z)(function*(){const E=p._key();let A=g.eventManagers.get(E);return A||(A=new cg(p),g.eventManagers.set(E,A),g.attachCallbackListeners(p,A)),A})()}_openPopup(p){Ce(p,"operation-not-supported-in-this-environment")}_openRedirect(p,g,E,A){var N=this;return(0,u.Z)(function*(){!function E_(v){var p,g,E,A,N,H,J,xe,Ve,st;const We=so();q("function"==typeof(null===(p=We?.universalLinks)||void 0===p?void 0:p.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),q(typeof(null===(g=We?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),q("function"==typeof(null===(N=null===(A=null===(E=We?.cordova)||void 0===E?void 0:E.plugins)||void 0===A?void 0:A.browsertab)||void 0===N?void 0:N.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q("function"==typeof(null===(xe=null===(J=null===(H=We?.cordova)||void 0===H?void 0:H.plugins)||void 0===J?void 0:J.browsertab)||void 0===xe?void 0:xe.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q("function"==typeof(null===(st=null===(Ve=We?.cordova)||void 0===Ve?void 0:Ve.InAppBrowser)||void 0===st?void 0:st.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const H=yield N._initialize(p);yield H.initialized(),H.resetRedirect(),function rt(){x.clear()}(),yield N._originValidation(p);const J=function I_(v,p,g=null){return{type:p,eventId:g,urlResponse:null,sessionId:hg(),postBody:null,tenantId:v.tenantId,error:we(v,"no-auth-event")}}(p,E,A);yield function Qc(v,p){return Pu()._set(Ll(v),p)}(p,J);const xe=yield function Yv(v,p,g){return Zh.apply(this,arguments)}(p,J,g),Ve=yield function ug(v){const{cordova:p}=so();return new Promise(g=>{p.plugins.browsertab.isAvailable(E=>{let A=null;E?p.plugins.browsertab.openUrl(v):A=p.InAppBrowser.open(v,function Qt(v=(0,k.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),g(A)})})}(xe);return function w_(v,p,g){return Kc.apply(this,arguments)}(p,H,Ve)})()}_isIframeWebStorageSupported(p,g){throw new Error("Method not implemented.")}_originValidation(p){const g=p._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Wh(v){return Kh.apply(this,arguments)}(p)),this.originValidationPromises[g]}attachCallbackListeners(p,g){const{universalLinks:E,handleOpenURL:A,BuildInfo:N}=so(),H=setTimeout((0,u.Z)(function*(){yield b_(p),g.onEvent(Vl())}),500),J=function(){var st=(0,u.Z)(function*(We){clearTimeout(H);const Bn=yield b_(p);let Pi=null;Bn&&We?.url&&(Pi=function dg(v,p){var g,E;const A=function Jh(v){const p=ao(v),g=p.link?decodeURIComponent(p.link):void 0,E=ao(g).link,A=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return ao(A).link||A||E||g||v}(p);if(A.includes("/__/auth/callback")){const N=ao(A),H=N.firebaseError?function Qh(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(N.firebaseError)):null,J=null===(E=null===(g=H?.code)||void 0===g?void 0:g.split("auth/"))||void 0===E?void 0:E[1],xe=J?we(J):null;return xe?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:xe,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:A,postBody:null}}return null}(Bn,We.url)),g.onEvent(Pi||Vl())});return function(Bn){return st.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,J);const xe=A,Ve=`${N.packageName.toLowerCase()}://`;so().handleOpenURL=function(){var st=(0,u.Z)(function*(We){if(We.toLowerCase().startsWith(Ve)&&J({url:We}),"function"==typeof xe)try{xe(We)}catch(Bn){console.error(Bn)}});return function(We){return st.apply(this,arguments)}}()}};function Vl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:we("no-auth-event")}}const T_=1e3;function Tr(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function Ul(v=(0,k.z$)()){return!("file:"!==Tr()&&"ionic:"!==Tr()&&"capacitor:"!==Tr()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function _g(){try{const v=self.localStorage,p=Xs();if(v)return v.setItem(p,"1"),v.removeItem(p),!function D_(v=(0,k.z$)()){return function ef(){return(0,k.w1)()&&11===document?.documentMode}()||function Sa(v=(0,k.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,k.hl)()}catch{return Ou()&&(0,k.hl)()}return!1}function Ou(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Xc(){return(function mg(){return"http:"===Tr()||"https:"===Tr()}()||(0,k.ru)()||Ul())&&!function Bl(){return(0,k.b$)()||(0,k.UG)()}()&&_g()&&!Ou()}function ku(){return Ul()&&typeof document<"u"}function $l(){return($l=(0,u.Z)(function*(){return!!ku()&&new Promise(v=>{const p=setTimeout(()=>{v(!1)},T_);document.addEventListener("deviceready",()=>{clearTimeout(p),v(!0)})})})).apply(this,arguments)}const pi={LOCAL:"local",NONE:"none",SESSION:"session"},Fu=q,ed="persistence";function Ps(v){return tf.apply(this,arguments)}function tf(){return(tf=(0,u.Z)(function*(v){yield v._initializationPromise;const p=vg(),g=j(ed,v.config.apiKey,v.name);p&&p.setItem(g,v._getPersistence())})).apply(this,arguments)}function vg(){var v;try{return(null===(v=function Aa(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const Qv=q;class ds{constructor(){this.browserResolver=It(zc),this.cordovaResolver=It(Fo),this.underlyingResolver=null,this._redirectPersistence=Vn,this._completeRedirectFn=eg,this._overrideRedirectResult=ht}_initialize(p){var g=this;return(0,u.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,g,E,A){var N=this;return(0,u.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(p,g,E,A)})()}_openRedirect(p,g,E,A){var N=this;return(0,u.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(p,g,E,A)})()}_isIframeWebStorageSupported(p,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,g)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return ku()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Qv(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,u.Z)(function*(){if(p.underlyingResolver)return;const g=yield function yg(){return $l.apply(this,arguments)}();p.underlyingResolver=g?p.cordovaResolver:p.browserResolver})()}}function Os(v){return v.unwrap()}function nd(v){return nf(v)}function nf(v){const{_tokenResponse:p}=v instanceof k.ZR?v.customData:v;if(!p)return null;if(!(v instanceof k.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return Ji.credentialFromResult(v);const g=p.providerId;if(!g||g===he.PASSWORD)return null;let E;switch(g){case he.GOOGLE:E=dl;break;case he.FACEBOOK:E=vo;break;case he.GITHUB:E=hl;break;case he.TWITTER:E=lh;break;default:const{oauthIdToken:A,oauthAccessToken:N,oauthTokenSecret:H,pendingToken:J,nonce:xe}=p;return N||H||A||J?J?g.startsWith("saml.")?Ts._create(g,J):ls._fromParams({providerId:g,signInMethod:g,pendingToken:J,idToken:A,accessToken:N}):new Zi(g).credential({idToken:A,accessToken:N,rawNonce:xe}):null}return v instanceof k.ZR?E.credentialFromError(v):E.credentialFromResult(v)}function Ri(v,p){return p.catch(g=>{throw g instanceof k.ZR&&function jl(v,p){var g;const E=null===(g=p.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===p?.code)p.resolver=new Eg(v,function wu(v,p){var g;const E=(0,k.m9)(v),A=p;return q(p.customData.operationType,E,"argument-error"),q(null===(g=A.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,E,"argument-error"),Lc._fromError(E,A)}(v,p));else if(E){const A=nf(p),N=p;A&&(N.credential=A,N.tenantId=E.tenantId||void 0,N.email=E.email||void 0,N.phoneNumber=E.phoneNumber||void 0)}}(v,g),g}).then(g=>{const A=g.user;return{operationType:g.operationType,credential:nd(g),additionalUserInfo:Fc(g),user:Vo.getOrCreate(A)}})}function wg(v,p){return rf.apply(this,arguments)}function rf(){return(rf=(0,u.Z)(function*(v,p){const g=yield p;return{verificationId:g.verificationId,confirm:E=>Ri(v,g.confirm(E))}})).apply(this,arguments)}class Eg{constructor(p,g){this.resolver=g,this.auth=function Lo(v){return v.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return Ri(Os(this.auth),this.resolver.resolveSignIn(p))}}class Vo{constructor(p){this._delegate=p,this.multiFactor=function vl(v){const p=(0,k.m9)(v);return xo.has(p)||xo.set(p,Mo._fromUser(p)),xo.get(p)}(p)}static getOrCreate(p){return Vo.USER_MAP.has(p)||Vo.USER_MAP.set(p,new Vo(p)),Vo.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var g=this;return(0,u.Z)(function*(){return Ri(g.auth,Lp(g._delegate,p))})()}linkWithPhoneNumber(p,g){var E=this;return(0,u.Z)(function*(){return wg(E.auth,function Rl(v,p,g){return to.apply(this,arguments)}(E._delegate,p,g))})()}linkWithPopup(p){var g=this;return(0,u.Z)(function*(){return Ri(g.auth,function vt(v,p,g){return Ea.apply(this,arguments)}(g._delegate,p,ds))})()}linkWithRedirect(p){var g=this;return(0,u.Z)(function*(){return yield Ps(Kt(g.auth)),xi(g._delegate,p,ds)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var g=this;return(0,u.Z)(function*(){return Ri(g.auth,dh(g._delegate,p))})()}reauthenticateWithPhoneNumber(p,g){return wg(this.auth,function Mh(v,p,g){return Pl.apply(this,arguments)}(this._delegate,p,g))}reauthenticateWithPopup(p){return Ri(this.auth,function Un(v,p,g){return Ns.apply(this,arguments)}(this._delegate,p,ds))}reauthenticateWithRedirect(p){var g=this;return(0,u.Z)(function*(){return yield Ps(Kt(g.auth)),Ol(g._delegate,p,ds)})()}sendEmailVerification(p){return function $p(v,p){return pa.apply(this,arguments)}(this._delegate,p)}unlink(p){var g=this;return(0,u.Z)(function*(){return yield function Mc(v,p){return aa.apply(this,arguments)}(g._delegate,p),g})()}updateEmail(p){return function kc(v,p){return Qs((0,k.m9)(v),p,null)}(this._delegate,p)}updatePassword(p){return function Zr(v,p){return Qs((0,k.m9)(v),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function Qi(v,p){return gr.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function Hp(v,p){return _h.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,g){return function jp(v,p,g){return mh.apply(this,arguments)}(this._delegate,p,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Vo.USER_MAP=new WeakMap;const ks=q;let lo=(()=>{class v{constructor(g,E){if(this.app=g,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=g.options;ks(A,"invalid-api-key",{appName:g.name}),ks(A,"invalid-api-key",{appName:g.name});const N=typeof window<"u"?ds:void 0;this._delegate=E.initialize({options:{persistence:Hl(A,g.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(Ze),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Vo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,E){!function Pn(v,p,g){const E=Kt(v);q(E._canInitEmulator,E,"emulator-config-failed"),q(/^https?:\/\//.test(p),E,"invalid-emulator-scheme");const A=!!g?.disableWarnings,N=ol(p),{host:H,port:J}=function ci(v){const p=ol(v),g=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!g)return{host:"",port:null};const E=g[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(E);if(A){const N=A[1];return{host:N,port:jt(E.substr(N.length+1))}}{const[N,H]=E.split(":");return{host:N,port:jt(H)}}}(p);E.config.emulator={url:`${N}//${H}${null===J?"":`:${J}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:H,port:J,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function Tc(){function v(){const p=document.createElement("p"),g=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,g,E)}applyActionCode(g){return function fh(v,p){return gu.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return ph(this._delegate,g)}confirmPasswordReset(g,E){return function Ki(v,p,g){return da.apply(this,arguments)}(this._delegate,g,E)}createUserWithEmailAndPassword(g,E){var A=this;return(0,u.Z)(function*(){return Ri(A._delegate,function fa(v,p,g){return Ss.apply(this,arguments)}(A._delegate,g,E))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function Oc(v,p){return _u.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Up(v,p){return"EMAIL_SIGNIN"===_o.parseLink(p)?.operation}(0,g)}getRedirectResult(){var g=this;return(0,u.Z)(function*(){ks(Xc(),g._delegate,"operation-not-supported-in-this-environment");const E=yield function u_(v,p){return Ph.apply(this,arguments)}(g._delegate,ds);return E?Ri(g._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Xh(v,p){Kt(v)._logFramework(p)}(this._delegate,g)}onAuthStateChanged(g,E,A){const{next:N,error:H,complete:J}=rd(g,E,A);return this._delegate.onAuthStateChanged(N,H,J)}onIdTokenChanged(g,E,A){const{next:N,error:H,complete:J}=rd(g,E,A);return this._delegate.onIdTokenChanged(N,H,J)}sendSignInLinkToEmail(g,E){return function gh(v,p,g){return To.apply(this,arguments)}(this._delegate,g,E)}sendPasswordResetEmail(g,E){return function Rc(v,p,g){return ca.apply(this,arguments)}(this._delegate,g,E||void 0)}setPersistence(g){var E=this;return(0,u.Z)(function*(){let A;switch(function td(v,p){Fu(Object.values(pi).includes(p),v,"invalid-persistence-type"),(0,k.b$)()?Fu(p!==pi.SESSION,v,"unsupported-persistence-type"):(0,k.UG)()?Fu(p===pi.NONE,v,"unsupported-persistence-type"):Ou()?Fu(p===pi.NONE||p===pi.LOCAL&&(0,k.hl)(),v,"unsupported-persistence-type"):Fu(p===pi.NONE||_g(),v,"unsupported-persistence-type")}(E._delegate,g),g){case pi.SESSION:A=Vn;break;case pi.LOCAL:A=(yield It(va)._isAvailable())?va:Js;break;case pi.NONE:A=Hn;break;default:return Ce("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return Ri(this._delegate,function uh(v){return Gn.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return Ri(this._delegate,Rt(this._delegate,g))}signInWithCustomToken(g){return Ri(this._delegate,function Vp(v,p){return pe.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,E){return Ri(this._delegate,function Ys(v,p,g){return Rt((0,k.m9)(v),du.credential(p,g))}(this._delegate,g,E))}signInWithEmailLink(g,E){return Ri(this._delegate,function Bp(v,p,g){return ml.apply(this,arguments)}(this._delegate,g,E))}signInWithPhoneNumber(g,E){return wg(this._delegate,function eo(v,p,g){return Nl.apply(this,arguments)}(this._delegate,g,E))}signInWithPopup(g){var E=this;return(0,u.Z)(function*(){return ks(Xc(),E._delegate,"operation-not-supported-in-this-environment"),Ri(E._delegate,function mr(v,p,g){return ro.apply(this,arguments)}(E._delegate,g,ds))})()}signInWithRedirect(g){var E=this;return(0,u.Z)(function*(){return ks(Xc(),E._delegate,"operation-not-supported-in-this-environment"),yield Ps(E._delegate),Mi(E._delegate,g,ds)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function Vr(v,p){return qr.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=pi,v})();function rd(v,p,g){let E=v;"function"!=typeof v&&({next:E,error:p,complete:g}=v);const A=E;return{next:H=>A(H&&Vo.getOrCreate(H)),error:p,complete:g}}function Hl(v,p){const g=function S_(v,p){const g=vg();if(!g)return[];const E=j(ed,v,p);switch(g.getItem(E)){case pi.NONE:return[Hn];case pi.LOCAL:return[va,Vn];case pi.SESSION:return[Vn];default:return[]}}(v,p);if(typeof self<"u"&&!g.includes(va)&&g.push(va),typeof window<"u")for(const E of[Js,Vn])g.includes(E)||g.push(E);return g.includes(Hn)||g.push(Hn),g}class hs{constructor(){this.providerId="phone",this._delegate=new Ji(Os(te.Z.auth()))}static credential(p,g){return Ji.credential(p,g)}verifyPhoneNumber(p,g){return this._delegate.verifyPhoneNumber(p,g)}unwrap(){return this._delegate}}hs.PHONE_SIGN_IN_METHOD=Ji.PHONE_SIGN_IN_METHOD,hs.PROVIDER_ID=Ji.PROVIDER_ID;const En=q;class id{constructor(p,g,E=te.Z.app()){var A;En(null===(A=E.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Du(p,g,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Vu(v){v.INTERNAL.registerComponent(new ge.wA("auth-compat",p=>{const g=p.getProvider("app-compat").getImmediate(),E=p.getProvider("auth");return new lo(g,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Q_EMAIL_SIGNIN,PASSWORD_RESET:Q_PASSWORD_RESET,RECOVER_EMAIL:Q_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Q_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Q_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Q_VERIFY_EMAIL}},EmailAuthProvider:du,FacebookAuthProvider:vo,GithubAuthProvider:hl,GoogleAuthProvider:dl,OAuthProvider:Zi,SAMLAuthProvider:oa,PhoneAuthProvider:hs,PhoneMultiFactorGenerator:sg,RecaptchaVerifier:id,TwitterAuthProvider:lh,Auth:lo,AuthCredential:ji,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.4.0")}(te.Z)},8766:(_t,Te,F)=>{F.d(Te,{Lj:()=>ke,X3:()=>Be});var u=F(5861);const te=(de,q)=>q.some($e=>de instanceof $e);let k,oe;const ge=new WeakMap,fe=new WeakMap,he=new WeakMap,G=new WeakMap,z=new WeakMap;let De={get(de,q,$e){if(de instanceof IDBTransaction){if("done"===q)return fe.get(de);if("objectStoreNames"===q)return de.objectStoreNames||he.get(de);if("store"===q)return $e.objectStoreNames[1]?void 0:$e.objectStore($e.objectStoreNames[0])}return Se(de[q])},set:(de,q,$e)=>(de[q]=$e,!0),has:(de,q)=>de instanceof IDBTransaction&&("done"===q||"store"===q)||q in de};function me(de){return"function"==typeof de?function dt(de){return de!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function re(){return oe||(oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(de)?function(...q){return de.apply(be(this),q),Se(ge.get(this))}:function(...q){return Se(de.apply(be(this),q))}:function(q,...$e){const Ge=de.call(be(this),q,...$e);return he.set(Ge,q.sort?q.sort():[q]),Se(Ge)}}(de):(de instanceof IDBTransaction&&function He(de){if(fe.has(de))return;const q=new Promise(($e,Ge)=>{const St=()=>{de.removeEventListener("complete",et),de.removeEventListener("error",ae),de.removeEventListener("abort",ae)},et=()=>{$e(),St()},ae=()=>{Ge(de.error||new DOMException("AbortError","AbortError")),St()};de.addEventListener("complete",et),de.addEventListener("error",ae),de.addEventListener("abort",ae)});fe.set(de,q)}(de),te(de,function se(){return k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(de,De):de)}function Se(de){if(de instanceof IDBRequest)return function Q(de){const q=new Promise(($e,Ge)=>{const St=()=>{de.removeEventListener("success",et),de.removeEventListener("error",ae)},et=()=>{$e(Se(de.result)),St()},ae=()=>{Ge(de.error),St()};de.addEventListener("success",et),de.addEventListener("error",ae)});return q.then($e=>{$e instanceof IDBCursor&&ge.set($e,de)}).catch(()=>{}),z.set(q,de),q}(de);if(G.has(de))return G.get(de);const q=me(de);return q!==de&&(G.set(de,q),z.set(q,de)),q}const be=de=>z.get(de);function Be(de,q,{blocked:$e,upgrade:Ge,blocking:St,terminated:et}={}){const ae=indexedDB.open(de,q),_e=Se(ae);return Ge&&ae.addEventListener("upgradeneeded",Ee=>{Ge(Se(ae.result),Ee.oldVersion,Ee.newVersion,Se(ae.transaction))}),$e&&ae.addEventListener("blocked",()=>$e()),_e.then(Ee=>{et&&Ee.addEventListener("close",()=>et()),St&&Ee.addEventListener("versionchange",()=>St())}).catch(()=>{}),_e}function ke(de,{blocked:q}={}){const $e=indexedDB.deleteDatabase(de);return q&&$e.addEventListener("blocked",()=>q()),Se($e).then(()=>{})}const Ce=["get","getKey","getAll","getAllKeys","count"],we=["put","add","delete","clear"],ze=new Map;function Pe(de,q){if(!(de instanceof IDBDatabase)||q in de||"string"!=typeof q)return;if(ze.get(q))return ze.get(q);const $e=q.replace(/FromIndex$/,""),Ge=q!==$e,St=we.includes($e);if(!($e in(Ge?IDBIndex:IDBObjectStore).prototype)||!St&&!Ce.includes($e))return;const et=function(){var ae=(0,u.Z)(function*(_e,...Ee){const Ae=this.transaction(_e,St?"readwrite":"readonly");let Fe=Ae.store;return Ge&&(Fe=Fe.index(Ee.shift())),(yield Promise.all([Fe[$e](...Ee),St&&Ae.done]))[0]});return function(Ee){return ae.apply(this,arguments)}}();return ze.set(q,et),et}!function Ze(de){De=de(De)}(de=>({...de,get:(q,$e,Ge)=>Pe(q,$e)||de.get(q,$e,Ge),has:(q,$e)=>!!Pe(q,$e)||de.has(q,$e)}))},5861:(_t,Te,F)=>{function u(k,oe,se,re,ge,fe,he){try{var G=k[fe](he),z=G.value}catch(Q){return void se(Q)}G.done?oe(z):Promise.resolve(z).then(re,ge)}function te(k){return function(){var oe=this,se=arguments;return new Promise(function(re,ge){var fe=k.apply(oe,se);function he(z){u(fe,re,ge,he,G,"next",z)}function G(z){u(fe,re,ge,he,G,"throw",z)}he(void 0)})}}F.d(Te,{Z:()=>te})}},_t=>{_t(_t.s=7607)}]);